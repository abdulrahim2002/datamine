[["Olaf Lenz", "Merge branch 'sorting'", "03/12/14, 09:16:45 AM", "Olaf Lenz", "6db780e96882aca9fa3170afd13a7965dfb61a69", ["src/java/net/sf/jabref/FileSortTab.java", "src/java/net/sf/jabref/FileTab.java", "src/java/net/sf/jabref/JabRefPreferences.java", "src/java/net/sf/jabref/PrefsDialog3.java", "src/java/net/sf/jabref/TablePrefsTab.java", "src/java/net/sf/jabref/export/FileActions.java", "src/java/net/sf/jabref/gui/ImportInspectionDialog.java", "src/java/net/sf/jabref/gui/MainTable.java"], "@@ -0,0 +1,387 @@\n+/*  Copyright (C) 2013 JabRef contributors.\n+ This program is free software; you can redistribute it and/or modify\n+ it under the terms of the GNU General Public License as published by\n+ the Free Software Foundation; either version 2 of the License, or\n+ (at your option) any later version.\n+\n+ This program is distributed in the hope that it will be useful,\n+ but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along\n+ with this program; if not, write to the Free Software Foundation, Inc.,\n+ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n+ */\n+package net.sf.jabref;\n+\n+import java.awt.*;\n+import javax.swing.*;\n+\n+import com.jgoodies.forms.builder.DefaultFormBuilder;\n+import com.jgoodies.forms.layout.FormLayout;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.ArrayList;\n+\n+/**\n+ * Preference tab for file sorting options.\n+ */\n+public class FileSortTab extends JPanel implements PrefsTab {\n+\n+    JabRefPreferences _prefs;\n+    JabRefFrame _frame;\n+    private JRadioButton saveInOriginalOrder, saveInTableOrder, saveInSpecifiedOrder;\n+    private JCheckBox savePriDesc, saveSecDesc, saveTerDesc;\n+    private JTextField savePriField, saveSecField, saveTerField;\n+    private JComboBox savePriSort, saveSecSort, saveTerSort;\n+    private JPanel saveSpecPanel;\n+\n+    private JRadioButton exportInOriginalOrder, exportInTableOrder, exportInSpecifiedOrder;\n+    private JCheckBox exportPriDesc, exportSecDesc, exportTerDesc;\n+    private JTextField exportPriField, exportSecField, exportTerField;\n+    private JComboBox exportPriSort, exportSecSort, exportTerSort;\n+    private JPanel exportSpecPanel;\n+\n+    public FileSortTab(JabRefFrame frame, JabRefPreferences prefs) {\n+        this._prefs = prefs;\n+        this._frame = frame;\n+        FormLayout layout = new FormLayout(\"4dlu, left:pref, 4dlu, fill:pref\", \"\");\n+        DefaultFormBuilder builder = new DefaultFormBuilder(layout);\n+        builder.setLeadingColumnOffset(1);\n+\n+        { // SAVE SORT ORDER\n+            // create Components\n+            saveInOriginalOrder = new JRadioButton(Globals.lang(\"Save entries in their original order\"));\n+            saveInTableOrder = new JRadioButton(Globals.lang(\"Save in current table sort order\"));\n+            saveInSpecifiedOrder = new JRadioButton(Globals.lang(\"Save entries ordered as specified\"));\n+\n+            ButtonGroup bg = new ButtonGroup();\n+            bg.add(saveInOriginalOrder);\n+            bg.add(saveInTableOrder);\n+            bg.add(saveInSpecifiedOrder);\n+\n+            ActionListener listener = new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    boolean selected = e.getSource() == saveInSpecifiedOrder;\n+                    savePriSort.setEnabled(selected);\n+                    savePriField.setEnabled(selected);\n+                    savePriDesc.setEnabled(selected);\n+                    saveSecSort.setEnabled(selected);\n+                    saveSecField.setEnabled(selected);\n+                    saveSecDesc.setEnabled(selected);\n+                    saveTerSort.setEnabled(selected);\n+                    saveTerField.setEnabled(selected);\n+                    saveTerDesc.setEnabled(selected);\n+                }\n+            };\n+            saveInOriginalOrder.addActionListener(listener);\n+            saveInTableOrder.addActionListener(listener);\n+            saveInSpecifiedOrder.addActionListener(listener);\n+\n+            ArrayList<String> v = new ArrayList<String>(Arrays.asList(BibtexFields.getAllFieldNames()));\n+            v.add(BibtexFields.KEY_FIELD);\n+            Collections.sort(v);\n+            Object[] allPlusKey = v.toArray();\n+            savePriSort = new JComboBox(allPlusKey);\n+            saveSecSort = new JComboBox(allPlusKey);\n+            saveTerSort = new JComboBox(allPlusKey);\n+\n+            savePriField = new JTextField(10);\n+            saveSecField = new JTextField(10);\n+            saveTerField = new JTextField(10);\n+\n+            savePriSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+            saveSecSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+            saveTerSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+\n+            savePriSort.addActionListener(new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    if (savePriSort.getSelectedIndex() > 0) {\n+                        savePriField.setText(savePriSort.getSelectedItem().toString());\n+                        savePriSort.setSelectedIndex(0);\n+                    }\n+                }\n+            });\n+            saveSecSort.addActionListener(new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    if (saveSecSort.getSelectedIndex() > 0) {\n+                        saveSecField.setText(saveSecSort.getSelectedItem().toString());\n+                        saveSecSort.setSelectedIndex(0);\n+                    }\n+                }\n+            });\n+            saveTerSort.addActionListener(new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    if (saveTerSort.getSelectedIndex() > 0) {\n+                        saveTerField.setText(saveTerSort.getSelectedItem().toString());\n+                        saveTerSort.setSelectedIndex(0);\n+                    }\n+                }\n+            });\n+\n+            savePriDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+            saveSecDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+            saveTerDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+\n+            // create GUI\n+            JLabel lab;\n+\n+            builder.appendSeparator(Globals.lang(\"Save sort order\"));\n+            builder.append(saveInOriginalOrder, 1);\n+            builder.nextLine();\n+            builder.append(saveInTableOrder, 1);\n+            builder.nextLine();\n+            builder.append(saveInSpecifiedOrder, 1);\n+            builder.nextLine();\n+\n+            // Create a new panel with its own FormLayout for these items:\n+            FormLayout layout2 = new FormLayout(\n+                    \"right:pref, 8dlu, fill:pref, 4dlu, fill:60dlu, 4dlu, left:pref\", \"\");\n+            DefaultFormBuilder builder2 = new DefaultFormBuilder(layout2);\n+            lab = new JLabel(Globals.lang(\"Primary sort criterion\"));\n+            builder2.append(lab);\n+            builder2.append(savePriSort);\n+            builder2.append(savePriField);\n+            builder2.append(savePriDesc);\n+            builder2.nextLine();\n+            lab = new JLabel(Globals.lang(\"Secondary sort criterion\"));\n+            builder2.append(lab);\n+            builder2.append(saveSecSort);\n+            builder2.append(saveSecField);\n+            builder2.append(saveSecDesc);\n+            builder2.nextLine();\n+            lab = new JLabel(Globals.lang(\"Tertiary sort criterion\"));\n+            builder2.append(lab);\n+            builder2.append(saveTerSort);\n+            builder2.append(saveTerField);\n+            builder2.append(saveTerDesc);\n+\n+            saveSpecPanel = builder2.getPanel();\n+            builder.append(saveSpecPanel);\n+            builder.nextLine();\n+        }\n+\n+        { // EXPORT SORT ORDER\n+            // create Components\n+            exportInOriginalOrder = new JRadioButton(Globals.lang(\"Export entries in their original order\"));\n+            exportInTableOrder = new JRadioButton(Globals.lang(\"Export in current table sort order\"));\n+            exportInSpecifiedOrder = new JRadioButton(Globals.lang(\"Export entries ordered as specified\"));\n+\n+            ButtonGroup bg = new ButtonGroup();\n+            bg.add(exportInOriginalOrder);\n+            bg.add(exportInTableOrder);\n+            bg.add(exportInSpecifiedOrder);\n+            \n+            ActionListener listener = new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    boolean selected = e.getSource() == exportInSpecifiedOrder;\n+                    exportPriSort.setEnabled(selected);\n+                    exportPriField.setEnabled(selected);\n+                    exportPriDesc.setEnabled(selected);\n+                    exportSecSort.setEnabled(selected);\n+                    exportSecField.setEnabled(selected);\n+                    exportSecDesc.setEnabled(selected);\n+                    exportTerSort.setEnabled(selected);\n+                    exportTerField.setEnabled(selected);\n+                    exportTerDesc.setEnabled(selected);\n+                }\n+            };\n+            exportInOriginalOrder.addActionListener(listener);\n+            exportInTableOrder.addActionListener(listener);\n+            exportInSpecifiedOrder.addActionListener(listener);\n+\n+            ArrayList<String> v = new ArrayList<String>(Arrays.asList(BibtexFields.getAllFieldNames()));\n+            v.add(BibtexFields.KEY_FIELD);\n+            Collections.sort(v);\n+            Object[] allPlusKey = v.toArray();\n+            exportPriSort = new JComboBox(allPlusKey);\n+            exportSecSort = new JComboBox(allPlusKey);\n+            exportTerSort = new JComboBox(allPlusKey);\n+\n+            exportPriField = new JTextField(10);\n+            exportSecField = new JTextField(10);\n+            exportTerField = new JTextField(10);\n+\n+            exportPriSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+            exportSecSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+            exportTerSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+\n+            exportPriSort.addActionListener(new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    if (exportPriSort.getSelectedIndex() > 0) {\n+                        exportPriField.setText(exportPriSort.getSelectedItem().toString());\n+                        exportPriSort.setSelectedIndex(0);\n+                    }\n+                }\n+            });\n+            exportSecSort.addActionListener(new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    if (exportSecSort.getSelectedIndex() > 0) {\n+                        exportSecField.setText(exportSecSort.getSelectedItem().toString());\n+                        exportSecSort.setSelectedIndex(0);\n+                    }\n+                }\n+            });\n+            exportTerSort.addActionListener(new ActionListener() {\n+                public void actionPerformed(ActionEvent e) {\n+                    if (exportTerSort.getSelectedIndex() > 0) {\n+                        exportTerField.setText(exportTerSort.getSelectedItem().toString());\n+                        exportTerSort.setSelectedIndex(0);\n+                    }\n+                }\n+            });\n+\n+            exportPriDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+            exportSecDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+            exportTerDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+\n+\n+            // create GUI\n+            JLabel lab;\n+\n+            builder.appendSeparator(Globals.lang(\"Export sort order\"));\n+            builder.append(exportInOriginalOrder, 1);\n+            builder.nextLine();\n+            builder.append(exportInTableOrder, 1);\n+            builder.nextLine();\n+            builder.append(exportInSpecifiedOrder, 1);\n+            builder.nextLine();\n+            \n+\n+            // Create a new panel with its own FormLayout for these items:\n+            FormLayout layout2 = new FormLayout(\n+                    \"right:pref, 8dlu, fill:pref, 4dlu, fill:60dlu, 4dlu, left:pref\", \"\");\n+            DefaultFormBuilder builder2 = new DefaultFormBuilder(layout2);\n+            lab = new JLabel(Globals.lang(\"Primary sort criterion\"));\n+            builder2.append(lab);\n+            builder2.append(exportPriSort);\n+            builder2.append(exportPriField);\n+            builder2.append(exportPriDesc);\n+            builder2.nextLine();\n+            lab = new JLabel(Globals.lang(\"Secondary sort criterion\"));\n+            builder2.append(lab);\n+            builder2.append(exportSecSort);\n+            builder2.append(exportSecField);\n+            builder2.append(exportSecDesc);\n+            builder2.nextLine();\n+            lab = new JLabel(Globals.lang(\"Tertiary sort criterion\"));\n+            builder2.append(lab);\n+            builder2.append(exportTerSort);\n+            builder2.append(exportTerField);\n+            builder2.append(exportTerDesc);\n+\n+            builder.append(builder2.getPanel());\n+            builder.nextLine();\n+        }\n+\n+        // COMBINE EVERYTHING\n+        JPanel pan = builder.getPanel();\n+        pan.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\n+        setLayout(new BorderLayout());\n+        add(pan, BorderLayout.CENTER);\n+    }\n+\n+    public void setValues() {\n+        if (_prefs.getBoolean(JabRefPreferences.SAVE_IN_ORIGINAL_ORDER)) {\n+            saveInOriginalOrder.setSelected(true);\n+        } else if (_prefs.getBoolean(JabRefPreferences.SAVE_IN_SPECIFIED_ORDER)) {\n+            saveInSpecifiedOrder.setSelected(true);\n+        } else {\n+            saveInTableOrder.setSelected(true);\n+        }\n+\n+        {\n+            boolean selected = _prefs.getBoolean(JabRefPreferences.SAVE_IN_SPECIFIED_ORDER);\n+            savePriSort.setEnabled(selected);\n+            savePriField.setEnabled(selected);\n+            savePriDesc.setEnabled(selected);\n+            saveSecSort.setEnabled(selected);\n+            saveSecField.setEnabled(selected);\n+            saveSecDesc.setEnabled(selected);\n+            saveTerSort.setEnabled(selected);\n+            saveTerField.setEnabled(selected);\n+            saveTerDesc.setEnabled(selected);\n+        }\n+\n+        savePriField.setText(_prefs.get(JabRefPreferences.SAVE_PRIMARY_SORT_FIELD));\n+        saveSecField.setText(_prefs.get(JabRefPreferences.SAVE_SECONDARY_SORT_FIELD));\n+        saveTerField.setText(_prefs.get(JabRefPreferences.SAVE_TERTIARY_SORT_FIELD));\n+\n+        savePriSort.setSelectedIndex(0);\n+        saveSecSort.setSelectedIndex(0);\n+        saveTerSort.setSelectedIndex(0);\n+\n+        savePriDesc.setSelected(_prefs.getBoolean(JabRefPreferences.SAVE_PRIMARY_SORT_DESCENDING));\n+        saveSecDesc.setSelected(_prefs.getBoolean(JabRefPreferences.SAVE_SECONDARY_SORT_DESCENDING));\n+        saveTerDesc.setSelected(_prefs.getBoolean(JabRefPreferences.SAVE_TERTIARY_SORT_DESCENDING));\n+\n+        if (_prefs.getBoolean(JabRefPreferences.EXPORT_IN_ORIGINAL_ORDER)) {\n+            exportInOriginalOrder.setSelected(true);\n+        } else if (_prefs.getBoolean(JabRefPreferences.EXPORT_IN_SPECIFIED_ORDER)) {\n+            exportInSpecifiedOrder.setSelected(true);\n+        } else {\n+            exportInTableOrder.setSelected(true);\n+        }\n+\n+        {\n+            boolean selected = _prefs.getBoolean(JabRefPreferences.EXPORT_IN_SPECIFIED_ORDER);\n+            exportPriSort.setEnabled(selected);\n+            exportPriField.setEnabled(selected);\n+            exportPriDesc.setEnabled(selected);\n+            exportSecSort.setEnabled(selected);\n+            exportSecField.setEnabled(selected);\n+            exportSecDesc.setEnabled(selected);\n+            exportTerSort.setEnabled(selected);\n+            exportTerField.setEnabled(selected);\n+            exportTerDesc.setEnabled(selected);\n+        }\n+\n+        exportPriField.setText(_prefs.get(JabRefPreferences.EXPORT_PRIMARY_SORT_FIELD));\n+        exportSecField.setText(_prefs.get(JabRefPreferences.EXPORT_SECONDARY_SORT_FIELD));\n+        exportTerField.setText(_prefs.get(JabRefPreferences.EXPORT_TERTIARY_SORT_FIELD));\n+\n+        exportPriSort.setSelectedIndex(0);\n+        exportSecSort.setSelectedIndex(0);\n+        exportTerSort.setSelectedIndex(0);\n+\n+        exportPriDesc.setSelected(_prefs.getBoolean(JabRefPreferences.EXPORT_PRIMARY_SORT_DESCENDING));\n+        exportSecDesc.setSelected(_prefs.getBoolean(JabRefPreferences.EXPORT_SECONDARY_SORT_DESCENDING));\n+        exportTerDesc.setSelected(_prefs.getBoolean(JabRefPreferences.EXPORT_TERTIARY_SORT_DESCENDING));\n+    }\n+\n+    public void storeSettings() {\n+        _prefs.putBoolean(JabRefPreferences.SAVE_IN_ORIGINAL_ORDER, saveInOriginalOrder.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.SAVE_IN_SPECIFIED_ORDER, saveInSpecifiedOrder.isSelected());\n+\n+        _prefs.putBoolean(JabRefPreferences.SAVE_PRIMARY_SORT_DESCENDING, savePriDesc.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.SAVE_SECONDARY_SORT_DESCENDING, saveSecDesc.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.SAVE_TERTIARY_SORT_DESCENDING, saveTerDesc.isSelected());\n+\n+        _prefs.put(JabRefPreferences.SAVE_PRIMARY_SORT_FIELD, savePriField.getText().toLowerCase().trim());\n+        _prefs.put(JabRefPreferences.SAVE_SECONDARY_SORT_FIELD, saveSecField.getText().toLowerCase().trim());\n+        _prefs.put(JabRefPreferences.SAVE_TERTIARY_SORT_FIELD, saveTerField.getText().toLowerCase().trim());\n+\n+        _prefs.putBoolean(JabRefPreferences.EXPORT_IN_ORIGINAL_ORDER, exportInOriginalOrder.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.EXPORT_IN_SPECIFIED_ORDER, exportInSpecifiedOrder.isSelected());\n+\n+        _prefs.putBoolean(JabRefPreferences.EXPORT_PRIMARY_SORT_DESCENDING, exportPriDesc.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.EXPORT_SECONDARY_SORT_DESCENDING, exportSecDesc.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.EXPORT_TERTIARY_SORT_DESCENDING, exportTerDesc.isSelected());\n+\n+        _prefs.put(JabRefPreferences.EXPORT_PRIMARY_SORT_FIELD, exportPriField.getText().toLowerCase().trim());\n+        _prefs.put(JabRefPreferences.EXPORT_SECONDARY_SORT_FIELD, exportSecField.getText().toLowerCase().trim());\n+        _prefs.put(JabRefPreferences.EXPORT_TERTIARY_SORT_FIELD, exportTerField.getText().toLowerCase().trim());\n+\n+    }\n+\n+    public boolean readyToClose() {\n+        return true;\n+    }\n+\n+    public String getTabName() {\n+        return Globals.lang(\"File Sorting\");\n+    }\n+}, @@ -39,8 +39,6 @@\n             promptBeforeUsingAutoSave, includeEmptyFields, camelCase, sameColumn;\n     private JComboBox valueDelimiter;\n     private JRadioButton\n-        saveOriginalOrder, saveAuthorOrder, saveTableOrder, saveTitleOrder,\n-        exportOriginalOrder, exportAuthorOrder, exportTableOrder, exportTitleOrder,\n         resolveStringsStandard, resolveStringsAll;\n     private JTextField bracesAroundCapitalsFields, nonWrappableFields,\n             doNotResolveStringsFor;\n@@ -56,14 +54,6 @@ public FileTab(JabRefFrame frame, JabRefPreferences prefs) {\n                 GUIGlobals.getIconUrl(\"helpSmall\"));\n         openLast = new JCheckBox(Globals.lang(\"Open last edited databases at startup\"));\n         backup = new JCheckBox(Globals.lang(\"Backup old file when saving\"));\n-        saveAuthorOrder = new JRadioButton(Globals.lang(\"Save ordered by author/editor/year\"));\n-        exportAuthorOrder = new JRadioButton(Globals.lang(\"Export ordered by author/editor/year\"));\n-        saveOriginalOrder = new JRadioButton(Globals.lang(\"Save entries in their original order\"));\n-        exportOriginalOrder = new JRadioButton(Globals.lang(\"Export entries in their original order\"));\n-        saveTableOrder = new JRadioButton(Globals.lang(\"Save in current table sort order\"));\n-        exportTableOrder = new JRadioButton(Globals.lang(\"Export in current table sort order\"));\n-        saveTitleOrder = new JRadioButton(Globals.lang(\"Save entries ordered by title\"));\n-        exportTitleOrder = new JRadioButton(Globals.lang(\"Export entries ordered by title\"));\n         autoSave = new JCheckBox(Globals.lang(\"Autosave\"));\n         promptBeforeUsingAutoSave = new JCheckBox(Globals.lang(\"Prompt before recovering a database from an autosave file\"));\n         autoSaveInterval = new JSpinner(new SpinnerNumberModel(1, 1, 60, 1));\n@@ -73,19 +63,9 @@ public FileTab(JabRefFrame frame, JabRefPreferences prefs) {\n         includeEmptyFields = new JCheckBox(Globals.lang(\"Include empty fields\"));\n         sameColumn = new JCheckBox(Globals.lang(\"Start field contents in same column\"));\n         camelCase = new JCheckBox(Globals.lang(\"Use camel case for field names (e.g., \\\"HowPublished\\\" instead of \\\"howpublished\\\")\"));\n-        ButtonGroup bg = new ButtonGroup();\n-        bg.add(saveAuthorOrder);\n-        bg.add(saveOriginalOrder);\n-        bg.add(saveTableOrder);\n-        bg.add(saveTitleOrder);\n-        bg = new ButtonGroup();\n-        bg.add(exportAuthorOrder);\n-        bg.add(exportOriginalOrder);\n-        bg.add(exportTableOrder);\n-        bg.add(exportTitleOrder);\n         resolveStringsAll = new JRadioButton(Globals.lang(\"Resolve strings for all fields except\")+\":\");\n         resolveStringsStandard = new JRadioButton(Globals.lang(\"Resolve strings for standard BibTeX fields only\"));\n-        bg = new ButtonGroup();\n+        ButtonGroup bg = new ButtonGroup();\n         bg.add(resolveStringsAll);\n         bg.add(resolveStringsStandard);\n \n@@ -144,19 +124,6 @@ public void stateChanged(ChangeEvent changeEvent) {\n         builder.nextLine();\n         builder.append(promptBeforeUsingAutoSave);\n         builder.nextLine();\n-        builder.appendSeparator(Globals.lang(\"Sort order\"));\n-        builder.append(saveAuthorOrder, 1);\n-        builder.append(exportAuthorOrder, 1);\n-        builder.nextLine();\n-        builder.append(saveTableOrder, 1);\n-        builder.append(exportTableOrder, 1);\n-        builder.nextLine();\n-        builder.append(saveOriginalOrder, 1);\n-        builder.append(exportOriginalOrder, 1);\n-        builder.nextLine();\n-        builder.append(saveTitleOrder, 1);\n-        builder.append(exportTitleOrder, 1);\n-        builder.nextLine();\n         builder.appendSeparator(Globals.lang(\"Field saving options\"));\n         builder.nextLine();\n         builder.append(camelCase);\n@@ -184,23 +151,7 @@ public void stateChanged(ChangeEvent changeEvent) {\n     public void setValues() {\n         openLast.setSelected(_prefs.getBoolean(\"openLastEdited\"));\n         backup.setSelected(_prefs.getBoolean(\"backup\"));\n-        if (_prefs.getBoolean(\"saveInStandardOrder\"))\n-            saveAuthorOrder.setSelected(true);\n-        else if (_prefs.getBoolean(\"saveInOriginalOrder\"))\n-            saveOriginalOrder.setSelected(true);\n-        else if (_prefs.getBoolean(\"saveInTitleOrder\"))\n-            saveTitleOrder.setSelected(true);\n-        else\n-            saveTableOrder.setSelected(true);\n-        if (_prefs.getBoolean(\"exportInStandardOrder\"))\n-            exportAuthorOrder.setSelected(true);\n-        else if (_prefs.getBoolean(\"exportInOriginalOrder\"))\n-            exportOriginalOrder.setSelected(true);\n-        else if (_prefs.getBoolean(\"exportInTitleOrder\"))\n-            exportTitleOrder.setSelected(true);\n-        else\n-            exportTableOrder.setSelected(true);\n-\n+        \n         //preserveFormatting.setSelected(_prefs.getBoolean(\"preserveFieldFormatting\"));\n         autoDoubleBraces.setSelected(_prefs.getBoolean(\"autoDoubleBraces\"));\n         resolveStringsAll.setSelected(_prefs.getBoolean(\"resolveStringsAllFields\"));\n@@ -222,12 +173,6 @@ else if (_prefs.getBoolean(\"exportInTitleOrder\"))\n     public void storeSettings() {\n         _prefs.putBoolean(\"backup\", backup.isSelected());\n         _prefs.putBoolean(\"openLastEdited\", openLast.isSelected());\n-        _prefs.putBoolean(\"saveInStandardOrder\", saveAuthorOrder.isSelected());\n-        _prefs.putBoolean(\"saveInOriginalOrder\", saveOriginalOrder.isSelected());\n-        _prefs.putBoolean(\"saveInTitleOrder\", saveTitleOrder.isSelected());\n-        _prefs.putBoolean(\"exportInStandardOrder\", exportAuthorOrder.isSelected());\n-        _prefs.putBoolean(\"exportInOriginalOrder\", exportOriginalOrder.isSelected());\n-        _prefs.putBoolean(\"exportInTitleOrder\", exportTitleOrder.isSelected());\n         _prefs.putBoolean(\"autoDoubleBraces\", autoDoubleBraces.isSelected());\n         _prefs.putBoolean(\"resolveStringsAllFields\", resolveStringsAll.isSelected());\n         _prefs.put(\"doNotResolveStringsFor\", doNotResolveStringsFor.getText().trim());, @@ -1,18 +1,18 @@\n /*  Copyright (C) 2003-2012 JabRef contributors.\n-    This program is free software; you can redistribute it and/or modify\n-    it under the terms of the GNU General Public License as published by\n-    the Free Software Foundation; either version 2 of the License, or\n-    (at your option) any later version.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU General Public License for more details.\n-\n-    You should have received a copy of the GNU General Public License along\n-    with this program; if not, write to the Free Software Foundation, Inc.,\n-    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n-*/\n+ This program is free software; you can redistribute it and/or modify\n+ it under the terms of the GNU General Public License as published by\n+ the Free Software Foundation; either version 2 of the License, or\n+ (at your option) any later version.\n+\n+ This program is distributed in the hope that it will be useful,\n+ but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along\n+ with this program; if not, write to the Free Software Foundation, Inc.,\n+ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n+ */\n package net.sf.jabref;\n \n import java.awt.Color;\n@@ -54,69 +54,84 @@\n \n public class JabRefPreferences {\n \n-    public final static String\n-        CUSTOM_TYPE_NAME = \"customTypeName_\",\n-        CUSTOM_TYPE_REQ = \"customTypeReq_\",\n-        CUSTOM_TYPE_OPT = \"customTypeOpt_\",\n-        CUSTOM_TYPE_PRIOPT = \"customTypePriOpt_\",\n-        CUSTOM_TAB_NAME = \"customTabName_\",\n-        CUSTOM_TAB_FIELDS = \"customTabFields_\",\n-        EMACS_PATH = \"emacsPath\",\n-        EMACS_ADDITIONAL_PARAMETERS = \"emacsParameters\",\n-        EMACS_23 = \"emacsUseV23InsertString\",\n-        EDIT_GROUP_MEMBERSHIP_MODE = \"groupEditGroupMembershipMode\",\n-        \n-        PDF_PREVIEW = \"pdfPreview\",\n-\n-        SHOWONELETTERHEADINGFORICONCOLUMNS = \"showOneLetterHeadingForIconColumns\",\n-\n-        EDITOR_EMACS_KEYBINDINGS = \"editorEMACSkeyBindings\",\n-        EDITOR_EMACS_KEYBINDINGS_REBIND_CA = \"editorEMACSkeyBindingsRebindCA\",\n-\n-        SHORTEST_TO_COMPLETE = \"shortestToComplete\",\n-        AUTOCOMPLETE_FIRSTNAME_MODE = \"autoCompFirstNameMode\",\n-        // here are the possible values for _MODE:\n-        AUTOCOMPLETE_FIRSTNAME_MODE_BOTH = \"both\",\n-        AUTOCOMPLETE_FIRSTNAME_MODE_ONLY_FULL = \"fullOnly\",\n-        AUTOCOMPLETE_FIRSTNAME_MODE_ONLY_ABBR = \"abbrOnly\",\n-\n-        WRITEFIELD_ADDSPACES = \"writeFieldAddSpaces\",\n-        WRITEFIELD_CAMELCASENAME = \"writeFieldCamelCase\",\n-\n-        UPDATE_TIMESTAMP = \"updateTimestamp\";\n+    public final static String CUSTOM_TYPE_NAME = \"customTypeName_\",\n+            CUSTOM_TYPE_REQ = \"customTypeReq_\",\n+            CUSTOM_TYPE_OPT = \"customTypeOpt_\",\n+            CUSTOM_TYPE_PRIOPT = \"customTypePriOpt_\",\n+            CUSTOM_TAB_NAME = \"customTabName_\",\n+            CUSTOM_TAB_FIELDS = \"customTabFields_\",\n+            EMACS_PATH = \"emacsPath\",\n+            EMACS_ADDITIONAL_PARAMETERS = \"emacsParameters\",\n+            EMACS_23 = \"emacsUseV23InsertString\",\n+            EDIT_GROUP_MEMBERSHIP_MODE = \"groupEditGroupMembershipMode\",\n+            PDF_PREVIEW = \"pdfPreview\",\n+            SHOWONELETTERHEADINGFORICONCOLUMNS = \"showOneLetterHeadingForIconColumns\",\n+            EDITOR_EMACS_KEYBINDINGS = \"editorEMACSkeyBindings\",\n+            EDITOR_EMACS_KEYBINDINGS_REBIND_CA = \"editorEMACSkeyBindingsRebindCA\",\n+            SHORTEST_TO_COMPLETE = \"shortestToComplete\",\n+            AUTOCOMPLETE_FIRSTNAME_MODE = \"autoCompFirstNameMode\",\n+            // here are the possible values for _MODE:\n+            AUTOCOMPLETE_FIRSTNAME_MODE_BOTH = \"both\",\n+            AUTOCOMPLETE_FIRSTNAME_MODE_ONLY_FULL = \"fullOnly\",\n+            AUTOCOMPLETE_FIRSTNAME_MODE_ONLY_ABBR = \"abbrOnly\",\n+            WRITEFIELD_ADDSPACES = \"writeFieldAddSpaces\",\n+            WRITEFIELD_CAMELCASENAME = \"writeFieldCamelCase\",\n+            UPDATE_TIMESTAMP = \"updateTimestamp\",\n+            PRIMARY_SORT_FIELD = \"priSort\",\n+            PRIMARY_SORT_DESCENDING = \"priDescending\",\n+            SECONDARY_SORT_FIELD = \"secSort\",\n+            SECONDARY_SORT_DESCENDING = \"secDescending\",\n+            TERTIARY_SORT_FIELD = \"terSort\",\n+            TERTIARY_SORT_DESCENDING = \"terDescending\",\n+            SAVE_IN_ORIGINAL_ORDER = \"saveInOriginalOrder\",\n+            SAVE_IN_SPECIFIED_ORDER = \"saveInSpecifiedOrder\",\n+            SAVE_PRIMARY_SORT_FIELD = \"savePriSort\",\n+            SAVE_PRIMARY_SORT_DESCENDING = \"savePriDescending\",\n+            SAVE_SECONDARY_SORT_FIELD = \"saveSecSort\",\n+            SAVE_SECONDARY_SORT_DESCENDING = \"saveSecDescending\",\n+            SAVE_TERTIARY_SORT_FIELD = \"saveTerSort\",\n+            SAVE_TERTIARY_SORT_DESCENDING = \"saveTerDescending\",\n+            EXPORT_IN_ORIGINAL_ORDER = \"exportInOriginalOrder\",\n+            EXPORT_IN_SPECIFIED_ORDER = \"exportInSpecifiedOrder\",\n+            EXPORT_PRIMARY_SORT_FIELD = \"exportPriSort\",\n+            EXPORT_PRIMARY_SORT_DESCENDING = \"exportPriDescending\",\n+            EXPORT_SECONDARY_SORT_FIELD = \"exportSecSort\",\n+            EXPORT_SECONDARY_SORT_DESCENDING = \"exportSecDescending\",\n+            EXPORT_TERTIARY_SORT_FIELD = \"exportTerSort\",\n+            EXPORT_TERTIARY_SORT_DESCENDING = \"exportTerDescending\";\n \n     // This String is used in the encoded list in prefs of external file type\n     // modifications, in order to indicate a removed default file type:\n     public static final String FILE_TYPE_REMOVED_FLAG = \"REMOVED\";\n \n-    private static final char[][] VALUE_DELIMITERS =\n-            new char[][]{ {'\"', '\"'}, {'{', '}'} };\n+    private static final char[][] VALUE_DELIMITERS\n+            = new char[][]{{'\"', '\"'}, {'{', '}'}};\n \n     public String WRAPPED_USERNAME, MARKING_WITH_NUMBER_PATTERN;\n \n     Preferences prefs;\n     public HashMap<String, Object> defaults = new HashMap<String, Object>();\n-    public HashMap<String, String>\n-        keyBinds = new HashMap<String, String>(),\n-        defKeyBinds = new HashMap<String, String>();\n+    public HashMap<String, String> keyBinds = new HashMap<String, String>(),\n+            defKeyBinds = new HashMap<String, String>();\n     private HashSet<String> putBracesAroundCapitalsFields = new HashSet<String>(4);\n     private HashSet<String> nonWrappableFields = new HashSet<String>(5);\n     private static LabelPattern keyPattern;\n \n     // Object containing custom export formats:\n     public CustomExportList customExports;\n \n-    /** Set with all custom {@link net.sf.jabref.imports.ImportFormat}s */\n+    /**\n+     * Set with all custom {@link net.sf.jabref.imports.ImportFormat}s\n+     */\n     public CustomImportList customImports;\n \n     // Object containing info about customized entry editor tabs.\n     private EntryEditorTabList tabList = null;\n-\n     // Map containing all registered external file types:\n     private TreeSet<ExternalFileType> externalFileTypes = new TreeSet<ExternalFileType>();\n \n-    public final ExternalFileType HTML_FALLBACK_TYPE =\n-            new ExternalFileType(\"URL\", \"html\", \"text/html\", \"\", \"www\");\n+    public final ExternalFileType HTML_FALLBACK_TYPE\n+            = new ExternalFileType(\"URL\", \"html\", \"text/html\", \"\", \"www\");\n \n     // The following field is used as a global variable during the export of a database.\n     // By setting this field to the path of the database's default file directory, formatters\n@@ -133,69 +148,120 @@\n     // The following field is used as a global variable during the export of a database.\n     // It is used to hold custom name formatters defined by a custom export filter.\n     // It is set before the export starts:\n-    public HashMap<String,String> customExportNameFormatters = null;\n+    public HashMap<String, String> customExportNameFormatters = null;\n \n     // The only instance of this class:\n     private static JabRefPreferences singleton = null;\n \n     public static JabRefPreferences getInstance() {\n-\t\tif (singleton == null)\n-\t\t\tsingleton = new JabRefPreferences();\n-\t\treturn singleton;\n-\t}\n+        if (singleton == null) {\n+            singleton = new JabRefPreferences();\n+        }\n+        return singleton;\n+    }\n+\n+    // Upgrade the preferences for the current version\n+    // The old preference is kept in case an old version of JabRef is used with \n+    // these preferences, but it is only used when the new preference does not \n+    // exist\n+    private void upgradeOldPreferences() {\n+        if (prefs.get(SAVE_IN_SPECIFIED_ORDER, null) == null) {\n+            if (prefs.getBoolean(\"saveInStandardOrder\", false)) {\n+                putBoolean(SAVE_IN_SPECIFIED_ORDER, true);\n+                put(SAVE_PRIMARY_SORT_FIELD, \"author\");\n+                put(SAVE_SECONDARY_SORT_FIELD, \"editor\");\n+                put(SAVE_TERTIARY_SORT_FIELD, \"year\");\n+                putBoolean(SAVE_PRIMARY_SORT_DESCENDING, false);\n+                putBoolean(SAVE_SECONDARY_SORT_DESCENDING, false);\n+                putBoolean(SAVE_TERTIARY_SORT_DESCENDING, false);\n+            } else if (prefs.getBoolean(\"saveInTitleOrder\", false)) {\n+                // saveInTitleOrder => title, author, editor\n+                putBoolean(SAVE_IN_SPECIFIED_ORDER, true);\n+                put(SAVE_PRIMARY_SORT_FIELD, \"title\");\n+                put(SAVE_SECONDARY_SORT_FIELD, \"author\");\n+                put(SAVE_TERTIARY_SORT_FIELD, \"editor\");\n+                putBoolean(SAVE_PRIMARY_SORT_DESCENDING, false);\n+                putBoolean(SAVE_SECONDARY_SORT_DESCENDING, false);\n+                putBoolean(SAVE_TERTIARY_SORT_DESCENDING, false);\n+            }\n+        }\n+        \n+        if (prefs.get(EXPORT_IN_SPECIFIED_ORDER, null) == null) {\n+            if (prefs.getBoolean(\"exportInStandardOrder\", false)) {\n+                putBoolean(EXPORT_IN_SPECIFIED_ORDER, true);\n+                put(EXPORT_PRIMARY_SORT_FIELD, \"author\");\n+                put(EXPORT_SECONDARY_SORT_FIELD, \"editor\");\n+                put(EXPORT_TERTIARY_SORT_FIELD, \"year\");\n+                putBoolean(EXPORT_PRIMARY_SORT_DESCENDING, false);\n+                putBoolean(EXPORT_SECONDARY_SORT_DESCENDING, false);\n+                putBoolean(EXPORT_TERTIARY_SORT_DESCENDING, false);\n+            } else if (prefs.getBoolean(\"exportInTitleOrder\", false)) {\n+                // exportInTitleOrder => title, author, editor\n+                putBoolean(EXPORT_IN_SPECIFIED_ORDER, true);\n+                put(EXPORT_PRIMARY_SORT_FIELD, \"title\");\n+                put(EXPORT_SECONDARY_SORT_FIELD, \"author\");\n+                put(EXPORT_TERTIARY_SORT_FIELD, \"editor\");\n+                putBoolean(EXPORT_PRIMARY_SORT_DESCENDING, false);\n+                putBoolean(EXPORT_SECONDARY_SORT_DESCENDING, false);\n+                putBoolean(EXPORT_TERTIARY_SORT_DESCENDING, false);\n+            }\n+        }\n+    }\n \n     // The constructor is made private to enforce this as a singleton class:\n     private JabRefPreferences() {\n \n         try {\n-            if (new File(\"jabref.xml\").exists()){\n+            if (new File(\"jabref.xml\").exists()) {\n                 importPreferences(\"jabref.xml\");\n             }\n         } catch (IOException e) {\n             Globals.logger(\"Could not import preferences from jabref.xml:\" + e.getLocalizedMessage());\n         }\n-        \n+\n+        // load user preferences \n         prefs = Preferences.userNodeForPackage(JabRef.class);\n-        \n+        upgradeOldPreferences();\n+\n         if (Globals.osName.equals(Globals.MAC)) {\n-\t\t\t//defaults.put(\"pdfviewer\", \"/Applications/Preview.app\");\n-\t\t\t//defaults.put(\"psviewer\", \"/Applications/Preview.app\");\n-\t\t\t//defaults.put(\"htmlviewer\", \"/Applications/Safari.app\");\n-        \tdefaults.put(EMACS_PATH, \"emacsclient\");\n-        \tdefaults.put(EMACS_23, true);\n-        \tdefaults.put(EMACS_ADDITIONAL_PARAMETERS, \"-n -e\");\n+            //defaults.put(\"pdfviewer\", \"/Applications/Preview.app\");\n+            //defaults.put(\"psviewer\", \"/Applications/Preview.app\");\n+            //defaults.put(\"htmlviewer\", \"/Applications/Safari.app\");\n+            defaults.put(EMACS_PATH, \"emacsclient\");\n+            defaults.put(EMACS_23, true);\n+            defaults.put(EMACS_ADDITIONAL_PARAMETERS, \"-n -e\");\n             defaults.put(\"fontFamily\", \"SansSerif\");\n \n-\t\t} else if (Globals.osName.toLowerCase().startsWith(\"windows\")) {\n-\t\t\t//defaults.put(\"pdfviewer\", \"cmd.exe /c start /b\");\n-\t\t\t//defaults.put(\"psviewer\", \"cmd.exe /c start /b\");\n-\t\t\t//defaults.put(\"htmlviewer\", \"cmd.exe /c start /b\");\n-\t\t\tdefaults.put(\"lookAndFeel\", \"com.jgoodies.looks.windows.WindowsLookAndFeel\");\n+        } else if (Globals.osName.toLowerCase().startsWith(\"windows\")) {\n+            //defaults.put(\"pdfviewer\", \"cmd.exe /c start /b\");\n+            //defaults.put(\"psviewer\", \"cmd.exe /c start /b\");\n+            //defaults.put(\"htmlviewer\", \"cmd.exe /c start /b\");\n+            defaults.put(\"lookAndFeel\", \"com.jgoodies.looks.windows.WindowsLookAndFeel\");\n             defaults.put(\"winEdtPath\", \"C:\\\\Program Files\\\\WinEdt Team\\\\WinEdt\\\\WinEdt.exe\");\n             defaults.put(\"latexEditorPath\", \"C:\\\\Program Files\\\\LEd\\\\LEd.exe\");\n-        \tdefaults.put(EMACS_PATH, \"emacsclient.exe\");\n-        \tdefaults.put(EMACS_23, true);\n-        \tdefaults.put(EMACS_ADDITIONAL_PARAMETERS, \"-n -e\");\n+            defaults.put(EMACS_PATH, \"emacsclient.exe\");\n+            defaults.put(EMACS_23, true);\n+            defaults.put(EMACS_ADDITIONAL_PARAMETERS, \"-n -e\");\n             defaults.put(\"fontFamily\", \"Arial\");\n \n         } else {\n-\t\t\t//defaults.put(\"pdfviewer\", \"evince\");\n-\t\t\t//defaults.put(\"psviewer\", \"gv\");\n-\t\t\t//defaults.put(\"htmlviewer\", \"firefox\");\n-\t\t\tdefaults.put(\"lookAndFeel\", \"com.jgoodies.plaf.plastic.Plastic3DLookAndFeel\");\n+            //defaults.put(\"pdfviewer\", \"evince\");\n+            //defaults.put(\"psviewer\", \"gv\");\n+            //defaults.put(\"htmlviewer\", \"firefox\");\n+            defaults.put(\"lookAndFeel\", \"com.jgoodies.plaf.plastic.Plastic3DLookAndFeel\");\n             defaults.put(\"fontFamily\", \"SansSerif\");\n-            \n-        \t// linux\n-        \tdefaults.put(EMACS_PATH, \"gnuclient\");\n-        \tdefaults.put(EMACS_23, false);\n-        \tdefaults.put(EMACS_ADDITIONAL_PARAMETERS, \"-batch -eval\");\n-\t\t}\n-\t\tdefaults.put(\"useProxy\", Boolean.FALSE);\n+\n+            // linux\n+            defaults.put(EMACS_PATH, \"gnuclient\");\n+            defaults.put(EMACS_23, false);\n+            defaults.put(EMACS_ADDITIONAL_PARAMETERS, \"-batch -eval\");\n+        }\n+        defaults.put(\"useProxy\", Boolean.FALSE);\n         defaults.put(\"proxyHostname\", \"my proxy host\");\n         defaults.put(\"proxyPort\", \"my proxy port\");\n         defaults.put(PDF_PREVIEW, Boolean.FALSE);\n         defaults.put(\"useDefaultLookAndFeel\", Boolean.TRUE);\n-        defaults.put(\"lyxpipe\", System.getProperty(\"user.home\")+File.separator+\".lyx/lyxpipe\");\n+        defaults.put(\"lyxpipe\", System.getProperty(\"user.home\") + File.separator + \".lyx/lyxpipe\");\n         defaults.put(\"vim\", \"vim\");\n         defaults.put(\"vimServer\", \"vim\");\n         defaults.put(\"posX\", new Integer(0));\n@@ -215,20 +281,38 @@ private JabRefPreferences() {\n         defaults.put(\"namesLastOnly\", Boolean.TRUE); // \"Show last names only\"\n         defaults.put(\"language\", \"en\");\n         defaults.put(\"showShort\", Boolean.TRUE);\n-        defaults.put(\"priSort\", \"author\");\n-        defaults.put(\"priDescending\", Boolean.FALSE);\n-        defaults.put(\"priBinary\", Boolean.FALSE);\n-        defaults.put(\"secSort\", \"year\");\n-        defaults.put(\"secDescending\", Boolean.TRUE);\n-        defaults.put(\"terSort\", \"author\");\n-        defaults.put(\"terDescending\", Boolean.FALSE);\n+\n+        // Sorting preferences\n+        defaults.put(PRIMARY_SORT_FIELD, \"author\");\n+        defaults.put(PRIMARY_SORT_DESCENDING, Boolean.FALSE);\n+        defaults.put(SECONDARY_SORT_FIELD, \"year\");\n+        defaults.put(SECONDARY_SORT_DESCENDING, Boolean.TRUE);\n+        defaults.put(TERTIARY_SORT_FIELD, \"author\");\n+        defaults.put(TERTIARY_SORT_DESCENDING, Boolean.FALSE);\n+        defaults.put(SAVE_IN_ORIGINAL_ORDER, Boolean.FALSE);\n+        defaults.put(SAVE_IN_SPECIFIED_ORDER, Boolean.FALSE);\n+        defaults.put(SAVE_PRIMARY_SORT_FIELD, \"bibtexkey\");\n+        defaults.put(SAVE_PRIMARY_SORT_DESCENDING, Boolean.FALSE);\n+        defaults.put(SAVE_SECONDARY_SORT_FIELD, \"author\");\n+        defaults.put(SAVE_SECONDARY_SORT_DESCENDING, Boolean.TRUE);\n+        defaults.put(SAVE_TERTIARY_SORT_FIELD, \"\");\n+        defaults.put(SAVE_TERTIARY_SORT_DESCENDING, Boolean.TRUE);\n+        defaults.put(EXPORT_IN_ORIGINAL_ORDER, Boolean.FALSE);\n+        defaults.put(EXPORT_IN_SPECIFIED_ORDER, Boolean.FALSE);\n+        defaults.put(EXPORT_PRIMARY_SORT_FIELD, \"bibtexkey\");\n+        defaults.put(EXPORT_PRIMARY_SORT_DESCENDING, Boolean.FALSE);\n+        defaults.put(EXPORT_SECONDARY_SORT_FIELD, \"author\");\n+        defaults.put(EXPORT_SECONDARY_SORT_DESCENDING, Boolean.TRUE);\n+        defaults.put(EXPORT_TERTIARY_SORT_FIELD, \"\");\n+        defaults.put(EXPORT_TERTIARY_SORT_DESCENDING, Boolean.TRUE);\n+\n         defaults.put(\"columnNames\", \"entrytype;author;title;year;journal;owner;timestamp;bibtexkey\");\n-        defaults.put(\"columnWidths\",\"75;280;400;60;100;100;100;100\");\n-        defaults.put(PersistenceTableColumnListener.ACTIVATE_PREF_KEY, \n-        \t\tnew Boolean(PersistenceTableColumnListener.DEFAULT_ENABLED));\n+        defaults.put(\"columnWidths\", \"75;280;400;60;100;100;100;100\");\n+        defaults.put(PersistenceTableColumnListener.ACTIVATE_PREF_KEY,\n+                new Boolean(PersistenceTableColumnListener.DEFAULT_ENABLED));\n         defaults.put(\"xmpPrivacyFilters\", \"pdf;timestamp;keywords;owner;note;review\");\n         defaults.put(\"useXmpPrivacyFilter\", Boolean.FALSE);\n-        defaults.put(\"numberColWidth\",new Integer(GUIGlobals.NUMBER_COL_LENGTH));\n+        defaults.put(\"numberColWidth\", new Integer(GUIGlobals.NUMBER_COL_LENGTH));\n         defaults.put(\"workingDirectory\", System.getProperty(\"user.home\"));\n         defaults.put(\"exportWorkingDirectory\", System.getProperty(\"user.home\"));\n         defaults.put(\"importWorkingDirectory\", System.getProperty(\"user.home\"));\n@@ -253,12 +337,7 @@ private JabRefPreferences() {\n         defaults.put(\"searchAll\", Boolean.FALSE);\n         defaults.put(\"incrementS\", Boolean.FALSE);\n         defaults.put(\"searchAutoComplete\", Boolean.TRUE);\n-        defaults.put(\"saveInStandardOrder\", Boolean.TRUE);\n-        defaults.put(\"saveInOriginalOrder\", Boolean.FALSE);\n-        defaults.put(\"saveInTitleOrder\", Boolean.FALSE);\n-        defaults.put(\"exportInStandardOrder\", Boolean.TRUE);\n-        defaults.put(\"exportInOriginalOrder\", Boolean.FALSE);\n-        defaults.put(\"exportInTitleOrder\", Boolean.FALSE);\n+\n         defaults.put(\"selectS\", Boolean.FALSE);\n         defaults.put(\"regExpSearch\", Boolean.TRUE);\n         defaults.put(\"highLightWords\", Boolean.TRUE);\n@@ -284,7 +363,7 @@ private JabRefPreferences() {\n         defaults.put(\"groupExpandTree\", Boolean.TRUE);\n         defaults.put(\"groupAutoShow\", Boolean.TRUE);\n         defaults.put(\"groupAutoHide\", Boolean.TRUE);\n-        defaults.put(JabRefPreferences.GROUP_SHOW_NUMBER_OF_ELEMENTS, Boolean.FALSE);\n+        defaults.put(GROUP_SHOW_NUMBER_OF_ELEMENTS, Boolean.FALSE);\n         defaults.put(\"autoAssignGroup\", Boolean.TRUE);\n         defaults.put(\"groupKeywordSeparator\", \", \");\n         defaults.put(EDIT_GROUP_MEMBERSHIP_MODE, Boolean.FALSE);\n@@ -298,9 +377,9 @@ private JabRefPreferences() {\n         defaults.put(\"memoryStickMode\", Boolean.FALSE);\n         defaults.put(\"renameOnMoveFileToFileDir\", Boolean.TRUE);\n \n-    // The general fields stuff is made obsolete by the CUSTOM_TAB_... entries.\n-        defaults.put(\"generalFields\", \"crossref;keywords;file;doi;url;urldate;\"+\n-                     \"pdf;comment;owner\");\n+        // The general fields stuff is made obsolete by the CUSTOM_TAB_... entries.\n+        defaults.put(\"generalFields\", \"crossref;keywords;file;doi;url;urldate;\"\n+                + \"pdf;comment;owner\");\n \n         defaults.put(\"useCustomIconTheme\", Boolean.FALSE);\n         defaults.put(\"customIconThemeFile\", \"/home/alver/div/crystaltheme_16/Icons.properties\");\n@@ -344,18 +423,18 @@ private JabRefPreferences() {\n         defaults.put(\"preferUrlDoi\", Boolean.FALSE);\n         defaults.put(\"fileColumn\", Boolean.TRUE);\n         defaults.put(\"arxivColumn\", Boolean.FALSE);\n-        \n+\n         defaults.put(SpecialFieldsUtils.PREF_SPECIALFIELDSENABLED, SpecialFieldsUtils.PREF_SPECIALFIELDSENABLED_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY, SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_QUALITY, SpecialFieldsUtils.PREF_SHOWCOLUMN_QUALITY_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_RANKING, SpecialFieldsUtils.PREF_SHOWCOLUMN_RANKING_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_RANKING_COMPACT, SpecialFieldsUtils.PREF_RANKING_COMPACT_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_RELEVANCE, SpecialFieldsUtils.PREF_SHOWCOLUMN_RELEVANCE_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_AUTOSYNCSPECIALFIELDSTOKEYWORDS, SpecialFieldsUtils.PREF_AUTOSYNCSPECIALFIELDSTOKEYWORDS_DEFAULT);\n-    \tdefaults.put(SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS, SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS_DEFAULT);\n-    \t\n-    \tdefaults.put(SHOWONELETTERHEADINGFORICONCOLUMNS, Boolean.FALSE);\n-        \n+        defaults.put(SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS, SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS_DEFAULT);\n+\n+        defaults.put(SHOWONELETTERHEADINGFORICONCOLUMNS, Boolean.FALSE);\n+\n         defaults.put(\"useOwner\", Boolean.TRUE);\n         defaults.put(\"overwriteOwner\", Boolean.FALSE);\n         defaults.put(\"allowTableEditing\", Boolean.FALSE);\n@@ -373,49 +452,48 @@ private JabRefPreferences() {\n         defaults.put(\"previewEnabled\", Boolean.TRUE);\n         defaults.put(\"activePreview\", 0);\n         defaults.put(\"preview0\", \"<font face=\\\"arial\\\">\"\n-                     +\"<b><i>\\\\bibtextype</i><a name=\\\"\\\\bibtexkey\\\">\\\\begin{bibtexkey} (\\\\bibtexkey)</a>\"\n-                     +\"\\\\end{bibtexkey}</b><br>__NEWLINE__\"\n-                     +\"\\\\begin{author} \\\\format[Authors(LastFirst,Initials,Semicolon,Amp),HTMLChars]{\\\\author}<BR>\\\\end{author}__NEWLINE__\"\n-                     +\"\\\\begin{editor} \\\\format[Authors(LastFirst,Initials,Semicolon,Amp),HTMLChars]{\\\\editor} \"\n-                     +\"<i>(\\\\format[IfPlural(Eds.,Ed.)]{\\\\editor})</i><BR>\\\\end{editor}__NEWLINE__\"\n-                     +\"\\\\begin{title} \\\\format[HTMLChars]{\\\\title} \\\\end{title}<BR>__NEWLINE__\"\n-                     +\"\\\\begin{chapter} \\\\format[HTMLChars]{\\\\chapter}<BR>\\\\end{chapter}__NEWLINE__\"\n-                     +\"\\\\begin{journal} <em>\\\\format[HTMLChars]{\\\\journal}, </em>\\\\end{journal}__NEWLINE__\"\n-                     // Include the booktitle field for @inproceedings, @proceedings, etc.\n-                     +\"\\\\begin{booktitle} <em>\\\\format[HTMLChars]{\\\\booktitle}, </em>\\\\end{booktitle}__NEWLINE__\"\n-                     +\"\\\\begin{school} <em>\\\\format[HTMLChars]{\\\\school}, </em>\\\\end{school}__NEWLINE__\"\n-                     +\"\\\\begin{institution} <em>\\\\format[HTMLChars]{\\\\institution}, </em>\\\\end{institution}__NEWLINE__\"\n-                     +\"\\\\begin{publisher} <em>\\\\format[HTMLChars]{\\\\publisher}, </em>\\\\end{publisher}__NEWLINE__\"\n-                     +\"\\\\begin{year}<b>\\\\year</b>\\\\end{year}\\\\begin{volume}<i>, \\\\volume</i>\\\\end{volume}\"\n-                     +\"\\\\begin{pages}, \\\\format[FormatPagesForHTML]{\\\\pages} \\\\end{pages}__NEWLINE__\"\n-                     +\"\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLChars]{\\\\abstract} \\\\end{abstract}__NEWLINE__\"\n-                     +\"\\\\begin{review}<BR><BR><b>Review: </b> \\\\format[HTMLChars]{\\\\review} \\\\end{review}\"\n-                     +\"</dd>__NEWLINE__<p></p></font>\");\n+                + \"<b><i>\\\\bibtextype</i><a name=\\\"\\\\bibtexkey\\\">\\\\begin{bibtexkey} (\\\\bibtexkey)</a>\"\n+                + \"\\\\end{bibtexkey}</b><br>__NEWLINE__\"\n+                + \"\\\\begin{author} \\\\format[Authors(LastFirst,Initials,Semicolon,Amp),HTMLChars]{\\\\author}<BR>\\\\end{author}__NEWLINE__\"\n+                + \"\\\\begin{editor} \\\\format[Authors(LastFirst,Initials,Semicolon,Amp),HTMLChars]{\\\\editor} \"\n+                + \"<i>(\\\\format[IfPlural(Eds.,Ed.)]{\\\\editor})</i><BR>\\\\end{editor}__NEWLINE__\"\n+                + \"\\\\begin{title} \\\\format[HTMLChars]{\\\\title} \\\\end{title}<BR>__NEWLINE__\"\n+                + \"\\\\begin{chapter} \\\\format[HTMLChars]{\\\\chapter}<BR>\\\\end{chapter}__NEWLINE__\"\n+                + \"\\\\begin{journal} <em>\\\\format[HTMLChars]{\\\\journal}, </em>\\\\end{journal}__NEWLINE__\"\n+                // Include the booktitle field for @inproceedings, @proceedings, etc.\n+                + \"\\\\begin{booktitle} <em>\\\\format[HTMLChars]{\\\\booktitle}, </em>\\\\end{booktitle}__NEWLINE__\"\n+                + \"\\\\begin{school} <em>\\\\format[HTMLChars]{\\\\school}, </em>\\\\end{school}__NEWLINE__\"\n+                + \"\\\\begin{institution} <em>\\\\format[HTMLChars]{\\\\institution}, </em>\\\\end{institution}__NEWLINE__\"\n+                + \"\\\\begin{publisher} <em>\\\\format[HTMLChars]{\\\\publisher}, </em>\\\\end{publisher}__NEWLINE__\"\n+                + \"\\\\begin{year}<b>\\\\year</b>\\\\end{year}\\\\begin{volume}<i>, \\\\volume</i>\\\\end{volume}\"\n+                + \"\\\\begin{pages}, \\\\format[FormatPagesForHTML]{\\\\pages} \\\\end{pages}__NEWLINE__\"\n+                + \"\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLChars]{\\\\abstract} \\\\end{abstract}__NEWLINE__\"\n+                + \"\\\\begin{review}<BR><BR><b>Review: </b> \\\\format[HTMLChars]{\\\\review} \\\\end{review}\"\n+                + \"</dd>__NEWLINE__<p></p></font>\");\n         defaults.put(\"preview1\", \"<font face=\\\"arial\\\">\"\n-                     +\"<b><i>\\\\bibtextype</i><a name=\\\"\\\\bibtexkey\\\">\\\\begin{bibtexkey} (\\\\bibtexkey)</a>\"\n-                     +\"\\\\end{bibtexkey}</b><br>__NEWLINE__\"\n-                     +\"\\\\begin{author} \\\\format[Authors(LastFirst,Initials,Semicolon,Amp),HTMLChars]{\\\\author}<BR>\\\\end{author}__NEWLINE__\"\n-                     +\"\\\\begin{editor} \\\\format[Authors(LastFirst,Initials,Semicolon,Amp),HTMLChars]{\\\\editor} \"\n-                     +\"<i>(\\\\format[IfPlural(Eds.,Ed.)]{\\\\editor})</i><BR>\\\\end{editor}__NEWLINE__\"\n-                     +\"\\\\begin{title} \\\\format[HTMLChars]{\\\\title} \\\\end{title}<BR>__NEWLINE__\"\n-                     +\"\\\\begin{chapter} \\\\format[HTMLChars]{\\\\chapter}<BR>\\\\end{chapter}__NEWLINE__\"\n-                     +\"\\\\begin{journal} <em>\\\\format[HTMLChars]{\\\\journal}, </em>\\\\end{journal}__NEWLINE__\"\n-                     // Include the booktitle field for @inproceedings, @proceedings, etc.\n-                     +\"\\\\begin{booktitle} <em>\\\\format[HTMLChars]{\\\\booktitle}, </em>\\\\end{booktitle}__NEWLINE__\"\n-                     +\"\\\\begin{school} <em>\\\\format[HTMLChars]{\\\\school}, </em>\\\\end{school}__NEWLINE__\"\n-                     +\"\\\\begin{institution} <em>\\\\format[HTMLChars]{\\\\institution}, </em>\\\\end{institution}__NEWLINE__\"\n-                     +\"\\\\begin{publisher} <em>\\\\format[HTMLChars]{\\\\publisher}, </em>\\\\end{publisher}__NEWLINE__\"\n-                     +\"\\\\begin{year}<b>\\\\year</b>\\\\end{year}\\\\begin{volume}<i>, \\\\volume</i>\\\\end{volume}\"\n-                     +\"\\\\begin{pages}, \\\\format[FormatPagesForHTML]{\\\\pages} \\\\end{pages}\"\n-                     +\"</dd>__NEWLINE__<p></p></font>\");\n-\n+                + \"<b><i>\\\\bibtextype</i><a name=\\\"\\\\bibtexkey\\\">\\\\begin{bibtexkey} (\\\\bibtexkey)</a>\"\n+                + \"\\\\end{bibtexkey}</b><br>__NEWLINE__\"\n+                + \"\\\\begin{author} \\\\format[Authors(LastFirst,Initials,Semicolon,Amp),HTMLChars]{\\\\author}<BR>\\\\end{author}__NEWLINE__\"\n+                + \"\\\\begin{editor} \\\\format[Authors(LastFirst,Initials,Semicolon,Amp),HTMLChars]{\\\\editor} \"\n+                + \"<i>(\\\\format[IfPlural(Eds.,Ed.)]{\\\\editor})</i><BR>\\\\end{editor}__NEWLINE__\"\n+                + \"\\\\begin{title} \\\\format[HTMLChars]{\\\\title} \\\\end{title}<BR>__NEWLINE__\"\n+                + \"\\\\begin{chapter} \\\\format[HTMLChars]{\\\\chapter}<BR>\\\\end{chapter}__NEWLINE__\"\n+                + \"\\\\begin{journal} <em>\\\\format[HTMLChars]{\\\\journal}, </em>\\\\end{journal}__NEWLINE__\"\n+                // Include the booktitle field for @inproceedings, @proceedings, etc.\n+                + \"\\\\begin{booktitle} <em>\\\\format[HTMLChars]{\\\\booktitle}, </em>\\\\end{booktitle}__NEWLINE__\"\n+                + \"\\\\begin{school} <em>\\\\format[HTMLChars]{\\\\school}, </em>\\\\end{school}__NEWLINE__\"\n+                + \"\\\\begin{institution} <em>\\\\format[HTMLChars]{\\\\institution}, </em>\\\\end{institution}__NEWLINE__\"\n+                + \"\\\\begin{publisher} <em>\\\\format[HTMLChars]{\\\\publisher}, </em>\\\\end{publisher}__NEWLINE__\"\n+                + \"\\\\begin{year}<b>\\\\year</b>\\\\end{year}\\\\begin{volume}<i>, \\\\volume</i>\\\\end{volume}\"\n+                + \"\\\\begin{pages}, \\\\format[FormatPagesForHTML]{\\\\pages} \\\\end{pages}\"\n+                + \"</dd>__NEWLINE__<p></p></font>\");\n \n         // TODO: Currently not possible to edit this setting:\n         defaults.put(\"previewPrintButton\", Boolean.FALSE);\n         defaults.put(\"autoDoubleBraces\", Boolean.FALSE);\n         defaults.put(\"doNotResolveStringsFor\", \"url\");\n         defaults.put(\"resolveStringsAllFields\", Boolean.FALSE);\n-        defaults.put(\"putBracesAroundCapitals\",\"\");//\"title;journal;booktitle;review;abstract\");\n+        defaults.put(\"putBracesAroundCapitals\", \"\");//\"title;journal;booktitle;review;abstract\");\n         defaults.put(\"nonWrappableFields\", \"pdf;ps;url;doi;file\");\n         defaults.put(\"useImportInspectionDialog\", Boolean.TRUE);\n         defaults.put(\"useImportInspectionDialogForSingle\", Boolean.TRUE);\n@@ -486,36 +564,32 @@ private JabRefPreferences() {\n         defaults.put(\"dbConnectDatabase\", \"jabref\");\n         defaults.put(\"dbConnectUsername\", \"root\");\n         CleanUpAction.putDefaults(defaults);\n-        \n+\n         // defaults for DroppedFileHandler UI\n-    \tdefaults.put(DroppedFileHandler.DFH_LEAVE, Boolean.FALSE);\n-    \tdefaults.put(DroppedFileHandler.DFH_COPY, Boolean.TRUE);\n-    \tdefaults.put(DroppedFileHandler.DFH_MOVE, Boolean.FALSE);\n-    \tdefaults.put(DroppedFileHandler.DFH_RENAME, Boolean.FALSE);\n-        \n+        defaults.put(DroppedFileHandler.DFH_LEAVE, Boolean.FALSE);\n+        defaults.put(DroppedFileHandler.DFH_COPY, Boolean.TRUE);\n+        defaults.put(DroppedFileHandler.DFH_MOVE, Boolean.FALSE);\n+        defaults.put(DroppedFileHandler.DFH_RENAME, Boolean.FALSE);\n+\n         //defaults.put(\"lastAutodetectedImport\", \"\");\n-        \n         //defaults.put(\"autoRemoveExactDuplicates\", Boolean.FALSE);\n         //defaults.put(\"confirmAutoRemoveExactDuplicates\", Boolean.TRUE);\n-        \n         //defaults.put(\"tempDir\", System.getProperty(\"java.io.tmpdir\"));\n         //Util.pr(System.getProperty(\"java.io.tempdir\"));\n-\n         //defaults.put(\"keyPattern\", new LabelPattern(KEY_PATTERN));\n-        \n         defaults.put(ImportSettingsTab.PREF_IMPORT_ALWAYSUSE, Boolean.FALSE);\n         defaults.put(ImportSettingsTab.PREF_IMPORT_DEFAULT_PDF_IMPORT_STYLE, ImportSettingsTab.DEFAULT_STYLE);\n         defaults.put(ImportSettingsTab.PREF_IMPORT_FILENAMEPATTERN, ImportSettingsTab.DEFAULT_FILENAMEPATTERNS[0]);\n-        \n+\n         restoreKeyBindings();\n \n         customExports = new CustomExportList(new ExportComparator());\n         customImports = new CustomImportList(this);\n \n         //defaults.put(\"oooWarning\", Boolean.TRUE);\n         updateSpecialFieldHandling();\n-        WRAPPED_USERNAME = \"[\"+get(\"defaultOwner\")+\"]\";\n-        MARKING_WITH_NUMBER_PATTERN = \"\\\\[\"+get(\"defaultOwner\").replaceAll(\"\\\\\\\\\",\"\\\\\\\\\\\\\\\\\")+\":(\\\\d+)\\\\]\";\n+        WRAPPED_USERNAME = \"[\" + get(\"defaultOwner\") + \"]\";\n+        MARKING_WITH_NUMBER_PATTERN = \"\\\\[\" + get(\"defaultOwner\").replaceAll(\"\\\\\\\\\", \"\\\\\\\\\\\\\\\\\") + \":(\\\\d+)\\\\]\";\n \n         String defaultExpression = \"**/.*[bibtexkey].*\\\\\\\\.[extension]\";\n         defaults.put(DEFAULT_REG_EXP_SEARCH_EXPRESSION_KEY, defaultExpression);\n@@ -526,47 +600,45 @@ private JabRefPreferences() {\n         defaults.put(\"useCaseKeeperOnSearch\", Boolean.TRUE);\n         defaults.put(\"useUnitFormatterOnSearch\", Boolean.TRUE);\n \n-\tdefaults.put(\"userFileDir\", GUIGlobals.FILE_FIELD + \"Directory\");\n-\ttry {\n-\t    defaults.put(\"userFileDirInd_Legacy\", GUIGlobals.FILE_FIELD + \"Directory\" + \"-\" + get(\"defaultOwner\") + \"@\" + InetAddress.getLocalHost().getHostName()); // Legacy setting name - was a bug: @ not allowed inside BibTeX comment text. Retained for backward comp.\n-\t    defaults.put(\"userFileDirIndividual\", GUIGlobals.FILE_FIELD + \"Directory\" + \"-\" + get(\"defaultOwner\") + \"-\" + InetAddress.getLocalHost().getHostName()); // Valid setting name\n-\t}\n-\tcatch(UnknownHostException ex) {\n-\t    Globals.logger(\"Hostname not found.\");\n-\t    defaults.put(\"userFileDirInd_Legacy\", GUIGlobals.FILE_FIELD + \"Directory\" + \"-\" + get(\"defaultOwner\"));\n-\t    defaults.put(\"userFileDirIndividual\", GUIGlobals.FILE_FIELD + \"Directory\" + \"-\" + get(\"defaultOwner\"));\n-\t}\n+        defaults.put(\"userFileDir\", GUIGlobals.FILE_FIELD + \"Directory\");\n+        try {\n+            defaults.put(\"userFileDirInd_Legacy\", GUIGlobals.FILE_FIELD + \"Directory\" + \"-\" + get(\"defaultOwner\") + \"@\" + InetAddress.getLocalHost().getHostName()); // Legacy setting name - was a bug: @ not allowed inside BibTeX comment text. Retained for backward comp.\n+            defaults.put(\"userFileDirIndividual\", GUIGlobals.FILE_FIELD + \"Directory\" + \"-\" + get(\"defaultOwner\") + \"-\" + InetAddress.getLocalHost().getHostName()); // Valid setting name\n+        } catch (UnknownHostException ex) {\n+            Globals.logger(\"Hostname not found.\");\n+            defaults.put(\"userFileDirInd_Legacy\", GUIGlobals.FILE_FIELD + \"Directory\" + \"-\" + get(\"defaultOwner\"));\n+            defaults.put(\"userFileDirIndividual\", GUIGlobals.FILE_FIELD + \"Directory\" + \"-\" + get(\"defaultOwner\"));\n+        }\n     }\n \n     public void setLanguageDependentDefaultValues() {\n \n         // Entry editor tab 0:\n-        defaults.put(CUSTOM_TAB_NAME+\"_def0\", Globals.lang(\"General\"));\n-            defaults.put(CUSTOM_TAB_FIELDS+\"_def0\", \"crossref;keywords;file;doi;url;\"+\n-                         \"comment;owner;timestamp\");\n+        defaults.put(CUSTOM_TAB_NAME + \"_def0\", Globals.lang(\"General\"));\n+        defaults.put(CUSTOM_TAB_FIELDS + \"_def0\", \"crossref;keywords;file;doi;url;\"\n+                + \"comment;owner;timestamp\");\n \n         // Entry editor tab 1:\n-            defaults.put(CUSTOM_TAB_FIELDS+\"_def1\", \"abstract\");\n-        defaults.put(CUSTOM_TAB_NAME+\"_def1\", Globals.lang(\"Abstract\"));\n+        defaults.put(CUSTOM_TAB_FIELDS + \"_def1\", \"abstract\");\n+        defaults.put(CUSTOM_TAB_NAME + \"_def1\", Globals.lang(\"Abstract\"));\n \n-      // Entry editor tab 2: Review Field - used for research comments, etc.\n-            defaults.put(CUSTOM_TAB_FIELDS+\"_def2\", \"review\");\n-        defaults.put(CUSTOM_TAB_NAME+\"_def2\", Globals.lang(\"Review\"));\n+        // Entry editor tab 2: Review Field - used for research comments, etc.\n+        defaults.put(CUSTOM_TAB_FIELDS + \"_def2\", \"review\");\n+        defaults.put(CUSTOM_TAB_NAME + \"_def2\", Globals.lang(\"Review\"));\n \n     }\n-    \n+\n     public static final String DEFAULT_REG_EXP_SEARCH_EXPRESSION_KEY = \"defaultRegExpSearchExpression\";\n     public static final String REG_EXP_SEARCH_EXPRESSION_KEY = \"regExpSearchExpression\";\n     public static final String USE_REG_EXP_SEARCH_KEY = \"useRegExpSearch\";\n     public static final String AUTOLINK_EXACT_KEY_ONLY = \"autolinkExactKeyOnly\";\n \n-\tpublic static final String EMAIL_SUBJECT = \"emailSubject\";\n-\tpublic static final String OPEN_FOLDERS_OF_ATTACHED_FILES = \"openFoldersOfAttachedFiles\";\n+    public static final String EMAIL_SUBJECT = \"emailSubject\";\n+    public static final String OPEN_FOLDERS_OF_ATTACHED_FILES = \"openFoldersOfAttachedFiles\";\n \n     public static final String GROUP_SHOW_NUMBER_OF_ELEMENTS = \"groupShowNumberOfElements\";\n \n-\n-\tpublic boolean putBracesAroundCapitals(String fieldName) {\n+    public boolean putBracesAroundCapitals(String fieldName) {\n         return putBracesAroundCapitalsFields.contains(fieldName);\n     }\n \n@@ -575,15 +647,17 @@ public void updateSpecialFieldHandling() {\n         String fieldString = get(\"putBracesAroundCapitals\");\n         if (fieldString.length() > 0) {\n             String[] fields = fieldString.split(\";\");\n-            for (int i=0; i<fields.length; i++)\n+            for (int i = 0; i < fields.length; i++) {\n                 putBracesAroundCapitalsFields.add(fields[i].trim());\n+            }\n         }\n         nonWrappableFields.clear();\n         fieldString = get(\"nonWrappableFields\");\n         if (fieldString.length() > 0) {\n             String[] fields = fieldString.split(\";\");\n-            for (int i=0; i<fields.length; i++)\n+            for (int i = 0; i < fields.length; i++) {\n                 nonWrappableFields.add(fields[i].trim());\n+            }\n         }\n \n     }\n@@ -599,6 +673,7 @@ public char getValueDelimiters(int index) {\n \n     /**\n      * Check whether a key is set (differently from null).\n+     *\n      * @param key The key to check.\n      * @return true if the key is set, false otherwise.\n      */\n@@ -607,7 +682,7 @@ public boolean hasKey(String key) {\n     }\n \n     public String get(String key) {\n-        return prefs.get(key, (String)defaults.get(key));\n+        return prefs.get(key, (String) defaults.get(key));\n     }\n \n     public String get(String key, String def) {\n@@ -617,35 +692,35 @@ public String get(String key, String def) {\n     public boolean getBoolean(String key) {\n         return prefs.getBoolean(key, getBooleanDefault(key));\n     }\n-    \n-    public boolean getBooleanDefault(String key){\n-        return ((Boolean)defaults.get(key)).booleanValue();\n+\n+    public boolean getBooleanDefault(String key) {\n+        return ((Boolean) defaults.get(key)).booleanValue();\n     }\n \n     public double getDouble(String key) {\n         return prefs.getDouble(key, getDoubleDefault(key));\n     }\n-    \n-    public double getDoubleDefault(String key){\n-        return ((Double)defaults.get(key)).doubleValue();\n+\n+    public double getDoubleDefault(String key) {\n+        return ((Double) defaults.get(key)).doubleValue();\n     }\n \n     public int getInt(String key) {\n         return prefs.getInt(key, getIntDefault(key));\n     }\n \n     public int getIntDefault(String key) {\n-        return ((Integer)defaults.get(key)).intValue();\n+        return ((Integer) defaults.get(key)).intValue();\n     }\n-    \n+\n     public byte[] getByteArray(String key) {\n         return prefs.getByteArray(key, getByteArrayDefault(key));\n     }\n \n-    public byte[] getByteArrayDefault(String key){\n-        return (byte[])defaults.get(key);   \n+    public byte[] getByteArrayDefault(String key) {\n+        return (byte[]) defaults.get(key);\n     }\n-    \n+\n     public void put(String key, String value) {\n         prefs.put(key, value);\n     }\n@@ -671,9 +746,9 @@ public void remove(String key) {\n     }\n \n     /**\n-     * Puts a string array into the Preferences, by linking its elements\n-     * with ';' into a single string. Escape characters make the process\n-     * transparent even if strings contain ';'.\n+     * Puts a string array into the Preferences, by linking its elements with\n+     * ';' into a single string. Escape characters make the process transparent\n+     * even if strings contain ';'.\n      */\n     public void putStringArray(String key, String[] value) {\n         if (value == null) {\n@@ -683,11 +758,11 @@ public void putStringArray(String key, String[] value) {\n \n         if (value.length > 0) {\n             StringBuffer linked = new StringBuffer();\n-            for (int i=0; i<value.length-1; i++) {\n+            for (int i = 0; i < value.length - 1; i++) {\n                 linked.append(makeEscape(value[i]));\n                 linked.append(\";\");\n             }\n-            linked.append(makeEscape(value[value.length-1]));\n+            linked.append(makeEscape(value[value.length - 1]));\n             put(key, linked.toString());\n         } else {\n             put(key, \"\");\n@@ -699,8 +774,9 @@ public void putStringArray(String key, String[] value) {\n      */\n     public String[] getStringArray(String key) {\n         String names = get(key);\n-        if (names == null)\n+        if (names == null) {\n             return null;\n+        }\n \n         StringReader rd = new StringReader(names);\n         Vector<String> arr = new Vector<String>();\n@@ -709,16 +785,19 @@ public void putStringArray(String key, String[] value) {\n             while ((rs = getNextUnit(rd)) != null) {\n                 arr.add(rs);\n             }\n-        } catch (IOException ex) {}\n+        } catch (IOException ex) {\n+        }\n         String[] res = new String[arr.size()];\n-        for (int i=0; i<res.length; i++)\n+        for (int i = 0; i < res.length; i++) {\n             res[i] = arr.elementAt(i);\n+        }\n \n         return res;\n     }\n \n     /**\n      * Looks up a color definition in preferences, and returns the Color object.\n+     *\n      * @param key The key for this setting.\n      * @return The color corresponding to the setting.\n      */\n@@ -729,14 +808,15 @@ public Color getColor(String key) {\n     }\n \n     public Color getDefaultColor(String key) {\n-        String value = (String)defaults.get(key);\n+        String value = (String) defaults.get(key);\n         int[] rgb = getRgb(value);\n         return new Color(rgb[0], rgb[1], rgb[2]);\n     }\n \n     /**\n      * Set the default value for a key. This is useful for plugins that need to\n      * add default values for the prefs keys they use.\n+     *\n      * @param key The preferences key.\n      * @param value The default value.\n      */\n@@ -746,6 +826,7 @@ public void putDefaultValue(String key, Object value) {\n \n     /**\n      * Stores a color in preferences.\n+     *\n      * @param key The key for this setting.\n      * @param color The Color to store.\n      */\n@@ -760,7 +841,9 @@ public void putColor(String key, Color color) {\n     }\n \n     /**\n-     * Looks up a color definition in preferences, and returns an array containing the RGB values.\n+     * Looks up a color definition in preferences, and returns an array\n+     * containing the RGB values.\n+     *\n      * @param value The key for this setting.\n      * @return The RGB values corresponding to this color setting.\n      */\n@@ -774,8 +857,8 @@ public void putColor(String key, Color color) {\n     }\n \n     /**\n-     * Returns the KeyStroke for this binding, as defined by the\n-     * defaults, or in the Preferences.\n+     * Returns the KeyStroke for this binding, as defined by the defaults, or in\n+     * the Preferences.\n      */\n     public KeyStroke getKey(String bindName) {\n \n@@ -792,37 +875,39 @@ public KeyStroke getKey(String bindName) {\n             keyBinds.put(bindName, s);\n         }\n         if (s == null) {\n-          Globals.logger(\"Could not get key binding for \\\"\" + bindName + \"\\\"\");\n+            Globals.logger(\"Could not get key binding for \\\"\" + bindName + \"\\\"\");\n         }\n \n-        if (Globals.ON_MAC)\n-          return getKeyForMac(KeyStroke.getKeyStroke(s));\n-        else\n-          return KeyStroke.getKeyStroke(s);\n+        if (Globals.ON_MAC) {\n+            return getKeyForMac(KeyStroke.getKeyStroke(s));\n+        } else {\n+            return KeyStroke.getKeyStroke(s);\n+        }\n     }\n \n     /**\n-     * Returns the KeyStroke for this binding, as defined by the\n-     * defaults, or in the Preferences, but adapted for Mac users,\n-     * with the Command key preferred instead of Control.\n+     * Returns the KeyStroke for this binding, as defined by the defaults, or in\n+     * the Preferences, but adapted for Mac users, with the Command key\n+     * preferred instead of Control.\n      */\n     private KeyStroke getKeyForMac(KeyStroke ks) {\n-      if (ks == null) return null;\n-      int keyCode = ks.getKeyCode();\n-      if ((ks.getModifiers() & KeyEvent.CTRL_MASK) == 0) {\n-        return ks;\n-      }\n-      else {\n-    \tint modifiers = 0;\n-        if ((ks.getModifiers() & KeyEvent.SHIFT_MASK) != 0) {\n-          modifiers = modifiers | KeyEvent.SHIFT_MASK;\n+        if (ks == null) {\n+            return null;\n         }\n-        if ((ks.getModifiers() & KeyEvent.ALT_MASK) != 0) {\n-            modifiers = modifiers | KeyEvent.ALT_MASK;\n+        int keyCode = ks.getKeyCode();\n+        if ((ks.getModifiers() & KeyEvent.CTRL_MASK) == 0) {\n+            return ks;\n+        } else {\n+            int modifiers = 0;\n+            if ((ks.getModifiers() & KeyEvent.SHIFT_MASK) != 0) {\n+                modifiers = modifiers | KeyEvent.SHIFT_MASK;\n+            }\n+            if ((ks.getModifiers() & KeyEvent.ALT_MASK) != 0) {\n+                modifiers = modifiers | KeyEvent.ALT_MASK;\n+            }\n+\n+            return KeyStroke.getKeyStroke(keyCode, Globals.getShortcutMask() + modifiers);\n         }\n-        \n-        return KeyStroke.getKeyStroke(keyCode, Globals.getShortcutMask()+modifiers);\n-      }\n     }\n \n     /**\n@@ -839,9 +924,9 @@ private KeyStroke getKeyForMac(KeyStroke ks) {\n         return defKeyBinds;\n     }\n \n-\n     /**\n      * Clear all preferences.\n+     *\n      * @throws BackingStoreException\n      */\n     public void clear() throws BackingStoreException {\n@@ -851,11 +936,12 @@ public void clear() throws BackingStoreException {\n     public void clear(String key) throws BackingStoreException {\n         prefs.remove(key);\n     }\n+\n     /**\n      * Calling this method will write all preferences into the preference store.\n      */\n     public void flush() {\n-        if (getBoolean(\"memoryStickMode\")){\n+        if (getBoolean(\"memoryStickMode\")) {\n             try {\n                 exportPreferences(\"jabref.xml\");\n             } catch (IOException e) {\n@@ -870,17 +956,17 @@ public void flush() {\n     }\n \n     /**\n-     * Stores new key bindings into Preferences, provided they\n-     * actually differ from the old ones.\n+     * Stores new key bindings into Preferences, provided they actually differ\n+     * from the old ones.\n      */\n     public void setNewKeyBindings(HashMap<String, String> newBindings) {\n         if (!newBindings.equals(keyBinds)) {\n             // This confirms that the bindings have actually changed.\n             String[] bindNames = new String[newBindings.size()],\n-                bindings = new String[newBindings.size()];\n+                    bindings = new String[newBindings.size()];\n             int index = 0;\n-            for (Iterator<String> i=newBindings.keySet().iterator();\n-                 i.hasNext();) {\n+            for (Iterator<String> i = newBindings.keySet().iterator();\n+                    i.hasNext();) {\n                 String nm = i.next();\n                 String bnd = newBindings.get(nm);\n                 bindNames[index] = nm;\n@@ -893,84 +979,85 @@ public void setNewKeyBindings(HashMap<String, String> newBindings) {\n         }\n     }\n \n-\n-        /**\n-         * Fetches key patterns from preferences\n-         * Not cached\n-         * \n-         * @return LabelPattern containing all keys. Returned LabelPattern has no parent\n-         */\n-        public LabelPattern getKeyPattern(){\n-            keyPattern = new LabelPattern();\n-            Preferences pre = Preferences.userNodeForPackage\n-                (net.sf.jabref.labelPattern.LabelPattern.class);\n-            try {\n-                String[] keys = pre.keys();\n-            if (keys.length > 0) for (int i=0; i<keys.length; i++)\n-                keyPattern.addLabelPattern(keys[i], pre.get(keys[i], null));\n-            } catch (BackingStoreException ex) {\n-                Globals.logger(\"BackingStoreException in JabRefPreferences.getKeyPattern\");\n+    /**\n+     * Fetches key patterns from preferences Not cached\n+     *\n+     * @return LabelPattern containing all keys. Returned LabelPattern has no\n+     * parent\n+     */\n+    public LabelPattern getKeyPattern() {\n+        keyPattern = new LabelPattern();\n+        Preferences pre = Preferences.userNodeForPackage(net.sf.jabref.labelPattern.LabelPattern.class);\n+        try {\n+            String[] keys = pre.keys();\n+            if (keys.length > 0) {\n+                for (int i = 0; i < keys.length; i++) {\n+                    keyPattern.addLabelPattern(keys[i], pre.get(keys[i], null));\n+                }\n             }\n-            return keyPattern;\n+        } catch (BackingStoreException ex) {\n+            Globals.logger(\"BackingStoreException in JabRefPreferences.getKeyPattern\");\n         }\n+        return keyPattern;\n+    }\n \n-        /**\n-         * Adds the given key pattern to the preferences\n-         * \n-         * @param pattern the pattern to store\n-         */\n-        public void putKeyPattern(LabelPattern pattern){\n-            keyPattern = pattern;\n-            LabelPattern parent = pattern.getParent();\n-\n-            // Store overridden definitions to Preferences.\n-            Preferences pre = Preferences.userNodeForPackage\n-                (net.sf.jabref.labelPattern.LabelPattern.class);\n-            try {\n-                pre.clear(); // We remove all old entries.\n-            } catch (BackingStoreException ex) {\n-                Globals.logger(\"BackingStoreException in JabRefPreferences.putKeyPattern\");\n-            }\n+    /**\n+     * Adds the given key pattern to the preferences\n+     *\n+     * @param pattern the pattern to store\n+     */\n+    public void putKeyPattern(LabelPattern pattern) {\n+        keyPattern = pattern;\n+        LabelPattern parent = pattern.getParent();\n \n-            for (String s: pattern.keySet()) {\n-                ArrayList<String> value = pattern.get(s);\n-                if (value != null) {\n-                    // no default value\n-                    // the first entry in the array is the full pattern\n-                    // see net.sf.jabref.labelPattern.LabelPatternUtil.split(String)\n-                    pre.put(s, value.get(0));\n-                }\n+        // Store overridden definitions to Preferences.\n+        Preferences pre = Preferences.userNodeForPackage(net.sf.jabref.labelPattern.LabelPattern.class);\n+        try {\n+            pre.clear(); // We remove all old entries.\n+        } catch (BackingStoreException ex) {\n+            Globals.logger(\"BackingStoreException in JabRefPreferences.putKeyPattern\");\n+        }\n+\n+        for (String s : pattern.keySet()) {\n+            ArrayList<String> value = pattern.get(s);\n+            if (value != null) {\n+                // no default value\n+                // the first entry in the array is the full pattern\n+                // see net.sf.jabref.labelPattern.LabelPatternUtil.split(String)\n+                pre.put(s, value.get(0));\n             }\n         }\n+    }\n \n     private void restoreKeyBindings() {\n         // Define default keybindings.\n         defineDefaultKeyBindings();\n \n         // First read the bindings, and their names.\n         String[] bindNames = getStringArray(\"bindNames\"),\n-                 bindings  = getStringArray(\"bindings\");\n+                bindings = getStringArray(\"bindings\");\n \n         // Then set up the key bindings HashMap.\n         if ((bindNames == null) || (bindings == null)\n-            || (bindNames.length != bindings.length)) {\n+                || (bindNames.length != bindings.length)) {\n             // Nothing defined in Preferences, or something is wrong.\n             setDefaultKeyBindings();\n             return;\n         }\n \n-        for (int i=0; i<bindNames.length; i++)\n+        for (int i = 0; i < bindNames.length; i++) {\n             keyBinds.put(bindNames[i], bindings[i]);\n+        }\n     }\n \n     private void setDefaultKeyBindings() {\n         keyBinds = defKeyBinds;\n     }\n- \n+\n     private void defineDefaultKeyBindings() {\n-        defKeyBinds.put(\"Push to application\",\"ctrl L\");\n-      defKeyBinds.put(\"Push to LyX\",\"ctrl L\");\n-      defKeyBinds.put(\"Push to WinEdt\",\"ctrl shift W\");\n+        defKeyBinds.put(\"Push to application\", \"ctrl L\");\n+        defKeyBinds.put(\"Push to LyX\", \"ctrl L\");\n+        defKeyBinds.put(\"Push to WinEdt\", \"ctrl shift W\");\n         defKeyBinds.put(\"Quit JabRef\", \"ctrl Q\");\n         defKeyBinds.put(\"Open database\", \"ctrl O\");\n         defKeyBinds.put(\"Save database\", \"ctrl S\");\n@@ -1084,27 +1171,28 @@ private String getNextUnit(Reader data) throws IOException {\n         StringBuffer res = new StringBuffer();\n         while (!done && ((c = data.read()) != -1)) {\n             if (c == '\\\\') {\n-                if (!escape)\n+                if (!escape) {\n                     escape = true;\n-                else {\n+                } else {\n                     escape = false;\n                     res.append('\\\\');\n                 }\n             } else {\n                 if (c == ';') {\n-                    if (!escape)\n+                    if (!escape) {\n                         done = true;\n-                    else\n+                    } else {\n                         res.append(';');\n+                    }\n                 } else {\n-                    res.append((char)c);\n+                    res.append((char) c);\n                 }\n                 escape = false;\n             }\n         }\n         if (res.length() > 0) {\n             return res.toString();\n-        } else if (c ==-1) {\n+        } else if (c == -1) {\n             // end of stream\n             return null;\n         } else {\n@@ -1115,42 +1203,42 @@ private String getNextUnit(Reader data) throws IOException {\n     private String makeEscape(String s) {\n         StringBuffer sb = new StringBuffer();\n         int c;\n-        for (int i=0; i<s.length(); i++) {\n+        for (int i = 0; i < s.length(); i++) {\n             c = s.charAt(i);\n-            if ((c == '\\\\') || (c == ';'))\n+            if ((c == '\\\\') || (c == ';')) {\n                 sb.append('\\\\');\n-            sb.append((char)c);\n+            }\n+            sb.append((char) c);\n         }\n         return sb.toString();\n     }\n \n     /**\n-     * Stores all information about the entry type in preferences, with\n-     * the tag given by number.\n+     * Stores all information about the entry type in preferences, with the tag\n+     * given by number.\n      */\n     public void storeCustomEntryType(CustomEntryType tp, int number) {\n-        String nr = \"\"+number;\n-        put(CUSTOM_TYPE_NAME+nr, tp.getName());\n-        put(CUSTOM_TYPE_REQ+nr, tp.getRequiredFieldsString());//tp.getRequiredFields());\n-        putStringArray(CUSTOM_TYPE_OPT+nr, tp.getOptionalFields());\n-        putStringArray(CUSTOM_TYPE_PRIOPT+nr, tp.getPrimaryOptionalFields());\n+        String nr = \"\" + number;\n+        put(CUSTOM_TYPE_NAME + nr, tp.getName());\n+        put(CUSTOM_TYPE_REQ + nr, tp.getRequiredFieldsString());//tp.getRequiredFields());\n+        putStringArray(CUSTOM_TYPE_OPT + nr, tp.getOptionalFields());\n+        putStringArray(CUSTOM_TYPE_PRIOPT + nr, tp.getPrimaryOptionalFields());\n \n     }\n \n     /**\n-     * Retrieves all information about the entry type in preferences,\n-     * with the tag given by number.\n+     * Retrieves all information about the entry type in preferences, with the\n+     * tag given by number.\n      */\n     public CustomEntryType getCustomEntryType(int number) {\n-        String nr = \"\"+number;\n-        String\n-            name = get(CUSTOM_TYPE_NAME+nr);\n-        String[]\n-            req = getStringArray(CUSTOM_TYPE_REQ+nr),\n-            opt = getStringArray(CUSTOM_TYPE_OPT+nr),\n-            priOpt = getStringArray(CUSTOM_TYPE_PRIOPT+nr);\n-        if (name == null)\n+        String nr = \"\" + number;\n+        String name = get(CUSTOM_TYPE_NAME + nr);\n+        String[] req = getStringArray(CUSTOM_TYPE_REQ + nr),\n+                opt = getStringArray(CUSTOM_TYPE_OPT + nr),\n+                priOpt = getStringArray(CUSTOM_TYPE_PRIOPT + nr);\n+        if (name == null) {\n             return null;\n+        }\n         if (priOpt == null) {\n             return new CustomEntryType(Util.nCase(name), req, opt);\n         }\n@@ -1164,11 +1252,8 @@ public CustomEntryType getCustomEntryType(int number) {\n         return new CustomEntryType(Util.nCase(name), req, priOpt,\n                 secOpt.toArray(new String[secOpt.size()]));\n \n-\n     }\n \n-\n-\n     public List<ExternalFileType> getDefaultExternalFileTypes() {\n         List<ExternalFileType> list = new ArrayList<ExternalFileType>();\n         list.add(new ExternalFileType(\"PDF\", \"pdf\", \"application/pdf\", \"evince\", \"pdfSmall\"));\n@@ -1201,47 +1286,50 @@ public CustomEntryType getCustomEntryType(int number) {\n             ExternalFileType type = iterator.next();\n             type.setOpenWith(\"\");\n         }\n-        \n \n         return list;\n     }\n \n     public ExternalFileType[] getExternalFileTypeSelection() {\n-        return externalFileTypes.toArray\n-                (new ExternalFileType[externalFileTypes.size()]);\n+        return externalFileTypes.toArray(new ExternalFileType[externalFileTypes.size()]);\n     }\n \n     /**\n      * Look up the external file type registered with this name, if any.\n+     *\n      * @param name The file type name.\n      * @return The ExternalFileType registered, or null if none.\n      */\n     public ExternalFileType getExternalFileTypeByName(String name) {\n         for (Iterator<ExternalFileType> iterator = externalFileTypes.iterator(); iterator.hasNext();) {\n             ExternalFileType type = iterator.next();\n-            if (type.getName().equals(name))\n+            if (type.getName().equals(name)) {\n                 return type;\n+            }\n         }\n         // Return an instance that signifies an unknown file type:\n         return new UnknownExternalFileType(name);\n     }\n \n     /**\n      * Look up the external file type registered for this extension, if any.\n+     *\n      * @param extension The file extension.\n      * @return The ExternalFileType registered, or null if none.\n      */\n     public ExternalFileType getExternalFileTypeByExt(String extension) {\n         for (Iterator<ExternalFileType> iterator = externalFileTypes.iterator(); iterator.hasNext();) {\n             ExternalFileType type = iterator.next();\n-            if ((type.getExtension() != null) && type.getExtension().equalsIgnoreCase(extension))\n+            if ((type.getExtension() != null) && type.getExtension().equalsIgnoreCase(extension)) {\n                 return type;\n+            }\n         }\n         return null;\n     }\n \n     /**\n      * Look up the external file type registered for this filename, if any.\n+     *\n      * @param filename The name of the file whose type to look up.\n      * @return The ExternalFileType registered, or null if none.\n      */\n@@ -1263,26 +1351,30 @@ public ExternalFileType getExternalFileTypeForName(String filename) {\n \n     /**\n      * Look up the external file type registered for this MIME type, if any.\n+     *\n      * @param mimeType The MIME type.\n-     * @return The ExternalFileType registered, or null if none. For the mime type \"text/html\",\n-     *   a valid file type is guaranteed to be returned.\n+     * @return The ExternalFileType registered, or null if none. For the mime\n+     * type \"text/html\", a valid file type is guaranteed to be returned.\n      */\n     public ExternalFileType getExternalFileTypeByMimeType(String mimeType) {\n         for (Iterator<ExternalFileType> iterator = externalFileTypes.iterator(); iterator.hasNext();) {\n             ExternalFileType type = iterator.next();\n-            if ((type.getMimeType() != null) && type.getMimeType().equals(mimeType))\n+            if ((type.getMimeType() != null) && type.getMimeType().equals(mimeType)) {\n                 return type;\n+            }\n         }\n-        if (mimeType.equals(\"text/html\"))\n+        if (mimeType.equals(\"text/html\")) {\n             return HTML_FALLBACK_TYPE;\n-        else\n+        } else {\n             return null;\n+        }\n     }\n \n     /**\n      * Reset the List of external file types after user customization.\n-     * @param types The new List of external file types. This is the complete list, not\n-     *  just new entries.\n+     *\n+     * @param types The new List of external file types. This is the complete\n+     * list, not just new entries.\n      */\n     public void setExternalFileTypes(List<ExternalFileType> types) {\n \n@@ -1306,9 +1398,9 @@ public void setExternalFileTypes(List<ExternalFileType> types) {\n             }\n             if (found != null) {\n                 // Found it! Check if it is an exact match, or if it has been customized:\n-                if (found.equals(type))\n+                if (found.equals(type)) {\n                     unchanged.add(type);\n-                else {\n+                } else {\n                     // It was modified. Remove its entry from the defaults list, since\n                     // the type hasn't been removed:\n                     defTypes.remove(found);\n@@ -1325,24 +1417,23 @@ public void setExternalFileTypes(List<ExternalFileType> types) {\n \n         // Now set up the array to write to prefs, containing all new types, all modified\n         // types, and a flag denoting each default type that has been removed:\n-        String[][] array = new String[types.size()+defTypes.size()][];\n-        int i=0;\n+        String[][] array = new String[types.size() + defTypes.size()][];\n+        int i = 0;\n         for (ExternalFileType type : types) {\n             array[i] = type.getStringArrayRepresentation();\n             i++;\n         }\n         for (ExternalFileType type : defTypes) {\n-            array[i] = new String[] {type.getName(), FILE_TYPE_REMOVED_FLAG};\n+            array[i] = new String[]{type.getName(), FILE_TYPE_REMOVED_FLAG};\n             i++;\n         }\n         //System.out.println(\"Encoded: '\"+Util.encodeStringArray(array)+\"'\");\n         put(\"externalFileTypes\", Util.encodeStringArray(array));\n     }\n \n-    \n     /**\n-     * Set up the list of external file types, either from default values, or from values\n-     * recorded in Preferences.\n+     * Set up the list of external file types, either from default values, or\n+     * from values recorded in Preferences.\n      */\n     public void updateExternalFileTypes() {\n         // First get a list of the default file types as a starting point:\n@@ -1366,10 +1457,10 @@ public void updateExternalFileTypes() {\n                     }\n                 }\n                 // If we found it, remove it from the type list:\n-                if (toRemove != null)\n+                if (toRemove != null) {\n                     types.remove(toRemove);\n-            }\n-            else {\n+                }\n+            } else {\n                 // A new or modified entry type. Construct it from the string array:\n                 ExternalFileType type = new ExternalFileType(vals[i]);\n                 // Check if there is a default type with the same name. If so, this is a\n@@ -1385,7 +1476,7 @@ public void updateExternalFileTypes() {\n                 if (toRemove != null) {\n                     types.remove(toRemove);\n                 }\n-                \n+\n                 // Then add the new one:\n                 types.add(type);\n             }\n@@ -1397,9 +1488,9 @@ public void updateExternalFileTypes() {\n         }\n     }\n \n-\n     /**\n      * Removes all information about custom entry types with tags of\n+     *\n      * @param number or higher.\n      */\n     public void purgeCustomEntryTypes(int number) {\n@@ -1410,25 +1501,27 @@ public void purgeCustomEntryTypes(int number) {\n     }\n \n     /**\n-     * Removes all entries keyed by prefix+number, where number\n-     * is equal to or higher than the given number.\n+     * Removes all entries keyed by prefix+number, where number is equal to or\n+     * higher than the given number.\n+     *\n      * @param number or higher.\n      */\n     public void purgeSeries(String prefix, int number) {\n-        while (get(prefix+number) != null) {\n-            remove(prefix+number);\n+        while (get(prefix + number) != null) {\n+            remove(prefix + number);\n             number++;\n         }\n     }\n \n     public EntryEditorTabList getEntryEditorTabList() {\n-    if (tabList == null)\n-        updateEntryEditorTabList();\n-    return tabList;\n+        if (tabList == null) {\n+            updateEntryEditorTabList();\n+        }\n+        return tabList;\n     }\n \n     public void updateEntryEditorTabList() {\n-    tabList = new EntryEditorTabList();\n+        tabList = new EntryEditorTabList();\n     }\n \n     /**\n@@ -1437,32 +1530,34 @@ public void updateEntryEditorTabList() {\n      * @param filename String File to export to\n      */\n     public void exportPreferences(String filename) throws IOException {\n-      File f = new File(filename);\n-      OutputStream os = new FileOutputStream(f);\n-      try {\n-        prefs.exportSubtree(os);\n-      } catch (BackingStoreException ex) {\n-        throw new IOException(ex.getMessage());\n-      }\n-    }\n-\n-      /**\n-       * Imports Preferences from an XML file.\n-       *\n-       * @param filename String File to import from\n-       */\n-      public void importPreferences(String filename) throws IOException {\n+        File f = new File(filename);\n+        OutputStream os = new FileOutputStream(f);\n+        try {\n+            prefs.exportSubtree(os);\n+        } catch (BackingStoreException ex) {\n+            throw new IOException(ex.getMessage());\n+        }\n+    }\n+\n+    /**\n+     * Imports Preferences from an XML file.\n+     *\n+     * @param filename String File to import from\n+     */\n+    public void importPreferences(String filename) throws IOException {\n         File f = new File(filename);\n         InputStream is = new FileInputStream(f);\n         try {\n-          Preferences.importPreferences(is);\n+            Preferences.importPreferences(is);\n         } catch (InvalidPreferencesFormatException ex) {\n-          throw new IOException(ex.getMessage());\n+            throw new IOException(ex.getMessage());\n         }\n-      }\n+    }\n \n     /**\n-     * Determines whether the given field should be written without any sort of wrapping.\n+     * Determines whether the given field should be written without any sort of\n+     * wrapping.\n+     *\n      * @param fieldName The field name.\n      * @return true if the field should not be wrapped.\n      */, @@ -79,6 +79,7 @@ public PrefsDialog3(JabRefFrame parent) {\n \t\ttabs.add(new GeneralTab(frame, prefs));\n \t\ttabs.add(new NetworkTab(frame, prefs));\n         tabs.add(new FileTab(frame, prefs));\n+        tabs.add(new FileSortTab(frame, prefs));\n         tabs.add(new EntryEditorPrefsTab(frame, prefs));\n         tabs.add(new GroupsPrefsTab(prefs));\n \t\ttabs.add(new AppearancePrefsTab(prefs));, @@ -214,9 +214,9 @@ public void setValues() {\n \t\tautoResizeMode\n \t\t\t.setSelected((_prefs.getInt(\"autoResizeMode\") == JTable.AUTO_RESIZE_ALL_COLUMNS));\n \n-\t\tpriField.setText(_prefs.get(\"priSort\"));\n-\t\tsecField.setText(_prefs.get(\"secSort\"));\n-\t\tterField.setText(_prefs.get(\"terSort\"));\n+\t\tpriField.setText(_prefs.get(JabRefPreferences.PRIMARY_SORT_FIELD));\n+\t\tsecField.setText(_prefs.get(JabRefPreferences.SECONDARY_SORT_FIELD));\n+\t\tterField.setText(_prefs.get(JabRefPreferences.TERTIARY_SORT_FIELD));\n \t\tpriSort.setSelectedIndex(0);\n \t\tsecSort.setSelectedIndex(0);\n \t\tterSort.setSelectedIndex(0);\n@@ -235,9 +235,9 @@ else if (_prefs.getBoolean(\"namesLastOnly\"))\n \t\t\tlastNamesOnly.setSelected(true);\n \t\telse\n \t\t\tnoAbbrNames.setSelected(true);\n-\t\tpriDesc.setSelected(_prefs.getBoolean(\"priDescending\"));\n-\t\tsecDesc.setSelected(_prefs.getBoolean(\"secDescending\"));\n-\t\tterDesc.setSelected(_prefs.getBoolean(\"terDescending\"));\n+\t\tpriDesc.setSelected(_prefs.getBoolean(JabRefPreferences.PRIMARY_SORT_DESCENDING));\n+\t\tsecDesc.setSelected(_prefs.getBoolean(JabRefPreferences.SECONDARY_SORT_DESCENDING));\n+\t\tterDesc.setSelected(_prefs.getBoolean(JabRefPreferences.TERTIARY_SORT_DESCENDING));\n \n \t\tfloatMarked.setSelected(_prefs.getBoolean(\"floatMarkedEntries\"));\n \n@@ -268,16 +268,16 @@ public void storeSettings() {\n \n \t\t_prefs.putInt(\"autoResizeMode\",\n \t\t\tautoResizeMode.isSelected() ? JTable.AUTO_RESIZE_ALL_COLUMNS : JTable.AUTO_RESIZE_OFF);\n-\t\t_prefs.putBoolean(\"priDescending\", priDesc.isSelected());\n-\t\t_prefs.putBoolean(\"secDescending\", secDesc.isSelected());\n-\t\t_prefs.putBoolean(\"terDescending\", terDesc.isSelected());\n-\t\t// _prefs.put(\"secSort\",\n+\t\t_prefs.putBoolean(JabRefPreferences.PRIMARY_SORT_DESCENDING, priDesc.isSelected());\n+\t\t_prefs.putBoolean(JabRefPreferences.SECONDARY_SORT_DESCENDING, secDesc.isSelected());\n+\t\t_prefs.putBoolean(JabRefPreferences.TERTIARY_SORT_DESCENDING, terDesc.isSelected());\n+\t\t// _prefs.put(JabRefPreferences.SECONDARY_SORT_FIELD,\n \t\t// GUIGlobals.ALL_FIELDS[secSort.getSelectedIndex()]);\n-\t\t// _prefs.put(\"terSort\",\n+\t\t// _prefs.put(JabRefPreferences.TERTIARY_SORT_FIELD,\n \t\t// GUIGlobals.ALL_FIELDS[terSort.getSelectedIndex()]);\n-\t\t_prefs.put(\"priSort\", priField.getText().toLowerCase().trim());\n-\t\t_prefs.put(\"secSort\", secField.getText().toLowerCase().trim());\n-\t\t_prefs.put(\"terSort\", terField.getText().toLowerCase().trim());\n+\t\t_prefs.put(JabRefPreferences.PRIMARY_SORT_FIELD, priField.getText().toLowerCase().trim());\n+\t\t_prefs.put(JabRefPreferences.SECONDARY_SORT_FIELD, secField.getText().toLowerCase().trim());\n+\t\t_prefs.put(JabRefPreferences.TERTIARY_SORT_FIELD, terField.getText().toLowerCase().trim());\n \n \t\t_prefs.putBoolean(\"floatMarkedEntries\", floatMarked.isSelected());\n \t\t// updatefont, @@ -1,18 +1,18 @@\n /*  Copyright (C) 2003-2011 JabRef contributors.\n-    This program is free software; you can redistribute it and/or modify\n-    it under the terms of the GNU General Public License as published by\n-    the Free Software Foundation; either version 2 of the License, or\n-    (at your option) any later version.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU General Public License for more details.\n-\n-    You should have received a copy of the GNU General Public License along\n-    with this program; if not, write to the Free Software Foundation, Inc.,\n-    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n-*/\n+ This program is free software; you can redistribute it and/or modify\n+ it under the terms of the GNU General Public License as published by\n+ the Free Software Foundation; either version 2 of the License, or\n+ (at your option) any later version.\n+\n+ This program is distributed in the hope that it will be useful,\n+ but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along\n+ with this program; if not, write to the Free Software Foundation, Inc.,\n+ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n+ */\n package net.sf.jabref.export;\n \n import java.io.File;\n@@ -52,23 +52,23 @@\n import ca.odell.glazedlists.BasicEventList;\n import ca.odell.glazedlists.SortedList;\n \n-public class FileActions\n-{\n+public class FileActions {\n \n     private static Pattern refPat = Pattern.compile(\"(#[A-Za-z]+#)\"); // Used to detect string references in strings\n     private static BibtexString.Type previousStringType;\n \n     private static void writePreamble(Writer fw, String preamble) throws IOException {\n-    if (preamble != null) {\n-        fw.write(\"@PREAMBLE{\");\n-        fw.write(preamble);\n-        fw.write(\"}\"+Globals.NEWLINE +Globals.NEWLINE);\n-    }\n+        if (preamble != null) {\n+            fw.write(\"@PREAMBLE{\");\n+            fw.write(preamble);\n+            fw.write(\"}\" + Globals.NEWLINE + Globals.NEWLINE);\n+        }\n     }\n \n     /**\n-     * Write all strings in alphabetical order, modified to produce a safe (for BibTeX) order of the strings\n-     * if they reference each other.\n+     * Write all strings in alphabetical order, modified to produce a safe (for\n+     * BibTeX) order of the strings if they reference each other.\n+     *\n      * @param fw The Writer to send the output to.\n      * @param database The database whose strings we should write.\n      * @throws IOException If anthing goes wrong in writing.\n@@ -83,17 +83,18 @@ private static void writeStrings(Writer fw, BibtexDatabase database) throws IOEx\n         // First, make a Map of all entries:\n         HashMap<String, BibtexString> remaining = new HashMap<String, BibtexString>();\n         int maxKeyLength = 0;\n-        for (Iterator<BibtexString> i=strings.iterator(); i.hasNext();) {\n+        for (Iterator<BibtexString> i = strings.iterator(); i.hasNext();) {\n             BibtexString string = i.next();\n             remaining.put(string.getName(), string);\n             maxKeyLength = Math.max(maxKeyLength, string.getName().length());\n         }\n \n-        for(BibtexString.Type t : BibtexString.Type.values()) {\n+        for (BibtexString.Type t : BibtexString.Type.values()) {\n             for (Iterator<BibtexString> i = strings.iterator(); i.hasNext();) {\n                 BibtexString bs = i.next();\n-                if (remaining.containsKey(bs.getName()) && bs.getType() == t)\n+                if (remaining.containsKey(bs.getName()) && bs.getType() == t) {\n                     writeString(fw, bs, remaining, maxKeyLength);\n+                }\n             }\n         }\n         fw.write(Globals.NEWLINE);\n@@ -110,12 +111,13 @@ private static void writeString(Writer fw, BibtexString bs, HashMap<String, Bibt\n         Matcher m;\n         while ((m = refPat.matcher(content)).find()) {\n             String foundLabel = m.group(1);\n-            int restIndex = content.indexOf(foundLabel)+foundLabel.length();\n+            int restIndex = content.indexOf(foundLabel) + foundLabel.length();\n             content = content.substring(restIndex);\n-            Object referred = remaining.get(foundLabel.substring(1, foundLabel.length()-1));\n+            Object referred = remaining.get(foundLabel.substring(1, foundLabel.length() - 1));\n             // If the label we found exists as a key in the \"remaining\" Map, we go on and write it now:\n-            if (referred != null)\n-                writeString(fw, (BibtexString)referred, remaining, maxKeyLength);\n+            if (referred != null) {\n+                writeString(fw, (BibtexString) referred, remaining, maxKeyLength);\n+            }\n         }\n \n         if (previousStringType != bs.getType()) {\n@@ -124,8 +126,9 @@ private static void writeString(Writer fw, BibtexString bs, HashMap<String, Bibt\n         }\n \n         String suffix = \"\";\n-        for(int i = maxKeyLength - bs.getName().length(); i > 0; i--) \n+        for (int i = maxKeyLength - bs.getName().length(); i > 0; i--) {\n             suffix += \" \";\n+        }\n \n         fw.write(\"@String { \" + bs.getName() + suffix + \" = \");\n         if (!bs.getContent().equals(\"\")) {\n@@ -134,249 +137,229 @@ private static void writeString(Writer fw, BibtexString bs, HashMap<String, Bibt\n                 fw.write(formatted);\n             } catch (IllegalArgumentException ex) {\n                 throw new IllegalArgumentException(\n-                        Globals.lang(\"The # character is not allowed in BibTeX strings unless escaped as in '\\\\#'.\") + \"\\n\" +\n-                        Globals.lang(\"Before saving, please edit any strings containing the # character.\"));\n+                        Globals.lang(\"The # character is not allowed in BibTeX strings unless escaped as in '\\\\#'.\") + \"\\n\"\n+                        + Globals.lang(\"Before saving, please edit any strings containing the # character.\"));\n             }\n \n-        }\n-        else\n+        } else {\n             fw.write(\"{}\");\n+        }\n \n         fw.write(\" }\" + Globals.NEWLINE);// + Globals.NEWLINE);\n     }\n \n     /**\n      * Writes the JabRef signature and the encoding.\n      *\n-     * @param encoding String the name of the encoding, which is part of the header.\n+     * @param encoding String the name of the encoding, which is part of the\n+     * header.\n      */\n     private static void writeBibFileHeader(Writer out, String encoding) throws IOException {\n         out.write(\"% \");\n-      out.write(GUIGlobals.SIGNATURE);\n-      out.write(\" \"+GUIGlobals.version+\".\"+Globals.NEWLINE + \"% \" + \n-              GUIGlobals.encPrefix+encoding+Globals.NEWLINE +Globals.NEWLINE);\n+        out.write(GUIGlobals.SIGNATURE);\n+        out.write(\" \" + GUIGlobals.version + \".\" + Globals.NEWLINE + \"% \"\n+                + GUIGlobals.encPrefix + encoding + Globals.NEWLINE + Globals.NEWLINE);\n     }\n \n     /**\n-     * Saves the database to file. Two boolean values indicate whether\n-     * only entries with a nonzero Globals.SEARCH value and only\n-     * entries with a nonzero Globals.GROUPSEARCH value should be\n-     * saved. This can be used to let the user save only the results of\n-     * a search. False and false means all entries are saved.\n+     * Saves the database to file. Two boolean values indicate whether only\n+     * entries with a nonzero Globals.SEARCH value and only entries with a\n+     * nonzero Globals.GROUPSEARCH value should be saved. This can be used to\n+     * let the user save only the results of a search. False and false means all\n+     * entries are saved.\n      */\n     public static SaveSession saveDatabase(BibtexDatabase database,\n-\t\tMetaData metaData, File file, JabRefPreferences prefs,\n-\t\tboolean checkSearch, boolean checkGroup, String encoding, boolean suppressBackup)\n-\t\tthrows SaveException {\n-    \t\n-\t\tTreeMap<String, BibtexEntryType> types = new TreeMap<String, BibtexEntryType>();\n-\t\t\n-\t\tboolean backup = prefs.getBoolean(\"backup\");\n-        if (suppressBackup)\n+            MetaData metaData, File file, JabRefPreferences prefs,\n+            boolean checkSearch, boolean checkGroup, String encoding, boolean suppressBackup)\n+            throws SaveException {\n+\n+        TreeMap<String, BibtexEntryType> types = new TreeMap<String, BibtexEntryType>();\n+\n+        boolean backup = prefs.getBoolean(\"backup\");\n+        if (suppressBackup) {\n             backup = false;\n+        }\n \n-\t\tSaveSession session;\n-\t\tBibtexEntry exceptionCause = null;\n-\t\ttry {\n-\t\t\tsession = new SaveSession(file, encoding, backup);\n-\t\t} catch (Throwable e) {\n-\t\t\tif (encoding != null) {\n-\t\t\t\tSystem.err.println(\"Error from encoding: '\" + encoding + \"' Len: \" + encoding.length());\n-\t\t\t}\n+        SaveSession session;\n+        BibtexEntry exceptionCause = null;\n+        try {\n+            session = new SaveSession(file, encoding, backup);\n+        } catch (Throwable e) {\n+            if (encoding != null) {\n+                System.err.println(\"Error from encoding: '\" + encoding + \"' Len: \" + encoding.length());\n+            }\n \t\t\t// we must catch all exceptions to be able notify users that\n-\t\t\t// saving failed, no matter what the reason was\n-\t\t\t// (and they won't just quit JabRef thinking\n-\t\t\t// everyting worked and loosing data)\n-\t\t\te.printStackTrace();\n-\t\t\tthrow new SaveException(e.getMessage());\n-\t\t}\n+            // saving failed, no matter what the reason was\n+            // (and they won't just quit JabRef thinking\n+            // everyting worked and loosing data)\n+            e.printStackTrace();\n+            throw new SaveException(e.getMessage());\n+        }\n \n-\t\ttry {\n+        try {\n \n \t\t\t// Get our data stream. This stream writes only to a temporary file,\n-\t\t\t// until committed.\n-\t\t\tVerifyingWriter fw = session.getWriter();\n+            // until committed.\n+            VerifyingWriter fw = session.getWriter();\n \n-\t\t\t// Write signature.\n-\t\t\twriteBibFileHeader(fw, encoding);\n+            // Write signature.\n+            writeBibFileHeader(fw, encoding);\n \n-\t\t\t// Write preamble if there is one.\n-\t\t\twritePreamble(fw, database.getPreamble());\n+            // Write preamble if there is one.\n+            writePreamble(fw, database.getPreamble());\n \n-\t\t\t// Write strings if there are any.\n-\t\t\twriteStrings(fw, database);\n+            // Write strings if there are any.\n+            writeStrings(fw, database);\n \n \t\t\t// Write database entries. Take care, using CrossRefEntry-\n-\t\t\t// Comparator, that referred entries occur after referring\n-\t\t\t// ones. Apart from crossref requirements, entries will be\n-\t\t\t// sorted as they appear on the screen.\n-\t\t\tList<BibtexEntry> sorter = getSortedEntries(database, null, true);\n+            // Comparator, that referred entries occur after referring\n+            // ones. Apart from crossref requirements, entries will be\n+            // sorted as they appear on the screen.\n+            List<BibtexEntry> sorter = getSortedEntries(database, null, true);\n \n-\t\t\tFieldFormatter ff = new LatexFieldFormatter();\n+            FieldFormatter ff = new LatexFieldFormatter();\n \n-\t\t\tfor (BibtexEntry be : sorter) {\n-\t\t\t\texceptionCause = be;\n+            for (BibtexEntry be : sorter) {\n+                exceptionCause = be;\n \n \t\t\t\t// Check if we must write the type definition for this\n-\t\t\t\t// entry, as well. Our criterion is that all non-standard\n-\t\t\t\t// types (*not* customized standard types) must be written.\n-\t\t\t\tBibtexEntryType tp = be.getType();\n-\n-\t\t\t\tif (BibtexEntryType.getStandardType(tp.getName()) == null) {\n-\t\t\t\t\ttypes.put(tp.getName(), tp);\n-\t\t\t\t}\n-\n-\t\t\t\t// Check if the entry should be written.\n-\t\t\t\tboolean write = true;\n-\n-\t\t\t\tif (checkSearch && !nonZeroField(be, BibtexFields.SEARCH)) {\n-\t\t\t\t\twrite = false;\n-\t\t\t\t}\n-\n-\t\t\t\tif (checkGroup && !nonZeroField(be, BibtexFields.GROUPSEARCH)) {\n-\t\t\t\t\twrite = false;\n-\t\t\t\t}\n-\n-\t\t\t\tif (write) {\n-\t\t\t\t\tbe.write(fw, ff, true);\n-\t\t\t\t\tfw.write(Globals.NEWLINE);\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\t// Write meta data.\n-\t\t\tif (metaData != null) {\n-\t\t\t\tmetaData.writeMetaData(fw);\n-\t\t\t}\n-\n-\t\t\t// Write type definitions, if any:\n-\t\t\tif (types.size() > 0) {\n-\t\t\t\tfor (Iterator<String> i = types.keySet().iterator(); i\n-\t\t\t\t\t.hasNext();) {\n+                // entry, as well. Our criterion is that all non-standard\n+                // types (*not* customized standard types) must be written.\n+                BibtexEntryType tp = be.getType();\n+\n+                if (BibtexEntryType.getStandardType(tp.getName()) == null) {\n+                    types.put(tp.getName(), tp);\n+                }\n+\n+                // Check if the entry should be written.\n+                boolean write = true;\n+\n+                if (checkSearch && !nonZeroField(be, BibtexFields.SEARCH)) {\n+                    write = false;\n+                }\n+\n+                if (checkGroup && !nonZeroField(be, BibtexFields.GROUPSEARCH)) {\n+                    write = false;\n+                }\n+\n+                if (write) {\n+                    be.write(fw, ff, true);\n+                    fw.write(Globals.NEWLINE);\n+                }\n+            }\n+\n+            // Write meta data.\n+            if (metaData != null) {\n+                metaData.writeMetaData(fw);\n+            }\n+\n+            // Write type definitions, if any:\n+            if (types.size() > 0) {\n+                for (Iterator<String> i = types.keySet().iterator(); i\n+                        .hasNext();) {\n                     BibtexEntryType type = types.get(i.next());\n                     if (type instanceof CustomEntryType) {\n-                        CustomEntryType tp = (CustomEntryType)type;\n+                        CustomEntryType tp = (CustomEntryType) type;\n                         tp.save(fw);\n                         fw.write(Globals.NEWLINE);\n                     }\n-\t\t\t\t}\n-\n-\t\t\t}\n-\n-\t\t\tfw.close();\n-\t\t} catch (Throwable ex) {\n-\t\t\tex.printStackTrace();\n-\t\t\ttry {\n-\t\t\t\tsession.cancel();\n-\t\t\t\t// repairAfterError(file, backup, INIT_OK);\n-\t\t\t} catch (IOException e) {\n-\t\t\t\t// Argh, another error? Can we do anything?\n-\t\t\t\te.printStackTrace();\n-                throw new SaveException(ex.getMessage()+\"\\n\"+\n-                        Globals.lang(\"Warning: could not complete file repair; your file may \"\n-                        +\"have been corrupted. Error message\")+\": \"+e.getMessage());\n+                }\n \n-\t\t\t}\n-\t\t\tthrow new SaveException(ex.getMessage(), exceptionCause);\n-\t\t}\n+            }\n \n-\t\treturn session;\n+            fw.close();\n+        } catch (Throwable ex) {\n+            ex.printStackTrace();\n+            try {\n+                session.cancel();\n+                // repairAfterError(file, backup, INIT_OK);\n+            } catch (IOException e) {\n+                // Argh, another error? Can we do anything?\n+                e.printStackTrace();\n+                throw new SaveException(ex.getMessage() + \"\\n\"\n+                        + Globals.lang(\"Warning: could not complete file repair; your file may \"\n+                                + \"have been corrupted. Error message\") + \": \" + e.getMessage());\n \n+            }\n+            throw new SaveException(ex.getMessage(), exceptionCause);\n+        }\n \n-\t}\n+        return session;\n \n-    private enum SaveOrder {\n-    \tStandard, Original, Title, TableSort\n     }\n-    \n+\n     private static class SaveSettings {\n         public final String pri, sec, ter;\n         public final boolean priD, secD, terD;\n-        \n+\n         public SaveSettings(boolean isSaveOperation) {\n-        \t/* four options:\n-        \t * 1. ordered by author/editor/year (saveInStandardOrder)\n-        \t * 2. original order (saveInOriginalOrder) -- not hit here as SaveSettings is not called in that case\n-        \t * 3. current table sort order (*everything else*)\n-        \t * 4. ordered by title (saveInTitleOrder)\n-        \t */\n-        \tSaveOrder saveOrder;\n-        \tString prefix = isSaveOperation ? \"save\" :  \"export\";\n-        \tif (Globals.prefs.getBoolean(prefix + \"InStandardOrder\")) {\n-        \t\tsaveOrder = SaveOrder.Standard;\n-        \t} else if (Globals.prefs.getBoolean(prefix + \"InTitleOrder\")) {\n-        \t\tsaveOrder = SaveOrder.Title;\n-//        \t} else if (Globals.prefs.getBoolean(prefix + \"InOriginalOrder\")) {\n-        \t\t// this case is never hit as SaveSettings() is never called if InOriginalOrder is true\n-//        \t\tsaveOrder = SaveOrder.Original;\n-        \t} else {\n-        \t\tsaveOrder = SaveOrder.TableSort;\n-        \t}\n-\n-        \tswitch (saveOrder) {\n-        \tcase TableSort:\n+            /* three options:\n+             * 1. original order (saveInOriginalOrder) -- not hit here as SaveSettings is not called in that case\n+             * 2. current table sort order\n+             * 3. ordered by specified order\n+             */\n+            // This case should never behit as SaveSettings() is never called if InOriginalOrder is true\n+            assert isSaveOperation && !Globals.prefs.getBoolean(JabRefPreferences.SAVE_IN_ORIGINAL_ORDER);\n+            assert !isSaveOperation && !Globals.prefs.getBoolean(JabRefPreferences.EXPORT_IN_ORIGINAL_ORDER);\n+\n+            if (isSaveOperation && Globals.prefs.getBoolean(JabRefPreferences.SAVE_IN_SPECIFIED_ORDER)) {\n+                pri = Globals.prefs.get(JabRefPreferences.SAVE_PRIMARY_SORT_FIELD);\n+                sec = Globals.prefs.get(JabRefPreferences.SAVE_SECONDARY_SORT_FIELD);\n+                ter = Globals.prefs.get(JabRefPreferences.SAVE_TERTIARY_SORT_FIELD);\n+                priD = Globals.prefs.getBoolean(JabRefPreferences.SAVE_PRIMARY_SORT_DESCENDING);\n+                secD = Globals.prefs.getBoolean(JabRefPreferences.SAVE_SECONDARY_SORT_DESCENDING);\n+                terD = Globals.prefs.getBoolean(JabRefPreferences.SAVE_TERTIARY_SORT_DESCENDING);\n+            } else if (!isSaveOperation && Globals.prefs.getBoolean(JabRefPreferences.EXPORT_IN_SPECIFIED_ORDER)) {\n+                pri = Globals.prefs.get(JabRefPreferences.EXPORT_PRIMARY_SORT_FIELD);\n+                sec = Globals.prefs.get(JabRefPreferences.EXPORT_SECONDARY_SORT_FIELD);\n+                ter = Globals.prefs.get(JabRefPreferences.EXPORT_TERTIARY_SORT_FIELD);\n+                priD = Globals.prefs.getBoolean(JabRefPreferences.EXPORT_PRIMARY_SORT_DESCENDING);\n+                secD = Globals.prefs.getBoolean(JabRefPreferences.EXPORT_SECONDARY_SORT_DESCENDING);\n+                terD = Globals.prefs.getBoolean(JabRefPreferences.EXPORT_TERTIARY_SORT_DESCENDING);\n+            } else {\n                 // The setting is to save according to the current table order.\n-                pri = Globals.prefs.get(\"priSort\");\n-                sec = Globals.prefs.get(\"secSort\");\n-                // sorted as they appear on the screen.\n-                ter = Globals.prefs.get(\"terSort\");\n-                priD = Globals.prefs.getBoolean(\"priDescending\");\n-                secD = Globals.prefs.getBoolean(\"secDescending\");\n-                terD = Globals.prefs.getBoolean(\"terDescending\");\n-                break;\n-        \tcase Title:\n-        \t\t// The setting is to not save in standard order, but in title order: title, author, editor\n-        \t\tpri = \"title\";\n-                sec = \"author\";\n-                ter = \"editor\";\n-                priD = false;\n-                secD = false;\n-                terD = false;\n-                break;\n-        \tcase Standard:\n-        \tdefault: // required to get rid of Java compile errors\n-                pri = \"author\";\n-                sec = \"editor\";\n-                ter = \"year\";\n-                priD = false;\n-                secD = false;\n-                terD = true;\n-        \t\tbreak;\n-        \t}\n+                pri = Globals.prefs.get(JabRefPreferences.PRIMARY_SORT_FIELD);\n+                sec = Globals.prefs.get(JabRefPreferences.SECONDARY_SORT_FIELD);\n+                ter = Globals.prefs.get(JabRefPreferences.TERTIARY_SORT_FIELD);\n+                priD = Globals.prefs.getBoolean(JabRefPreferences.PRIMARY_SORT_DESCENDING);\n+                secD = Globals.prefs.getBoolean(JabRefPreferences.SECONDARY_SORT_DESCENDING);\n+                terD = Globals.prefs.getBoolean(JabRefPreferences.TERTIARY_SORT_DESCENDING);\n+            }\n         }\n     }\n-    \n+\n     private static List<Comparator<BibtexEntry>> getSaveComparators(boolean isSaveOperation) {\n         SaveSettings saveSettings = new SaveSettings(isSaveOperation);\n \n         List<Comparator<BibtexEntry>> comparators = new ArrayList<Comparator<BibtexEntry>>();\n-        if (isSaveOperation)\n+        if (isSaveOperation) {\n             comparators.add(new CrossRefEntryComparator());\n+        }\n         comparators.add(new FieldComparator(saveSettings.pri, saveSettings.priD));\n         comparators.add(new FieldComparator(saveSettings.sec, saveSettings.secD));\n         comparators.add(new FieldComparator(saveSettings.ter, saveSettings.terD));\n         comparators.add(new FieldComparator(BibtexFields.KEY_FIELD));\n-        \n+\n         return comparators;\n     }\n-    \n+\n     /**\n-\t * Saves the database to file, including only the entries included in the\n-\t * supplied input array bes.\n-\t * \n-\t * @return A List containing warnings, if any.\n-\t */\n+     * Saves the database to file, including only the entries included in the\n+     * supplied input array bes.\n+     *\n+     * @return A List containing warnings, if any.\n+     */\n     @SuppressWarnings(\"unchecked\")\n-\tpublic static SaveSession savePartOfDatabase(BibtexDatabase database, MetaData metaData,\n-                                                 File file, JabRefPreferences prefs, BibtexEntry[] bes, String encoding) throws SaveException\n-    {\n-\n-    TreeMap<String, BibtexEntryType> types = new TreeMap<String, BibtexEntryType>(); // Map\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// to\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// collect\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// entry\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// type\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// definitions\n-    // that we must save along with entries using them.\n+    public static SaveSession savePartOfDatabase(BibtexDatabase database, MetaData metaData,\n+            File file, JabRefPreferences prefs, BibtexEntry[] bes, String encoding) throws SaveException {\n+\n+        TreeMap<String, BibtexEntryType> types = new TreeMap<String, BibtexEntryType>(); // Map\n+        // to\n+        // collect\n+        // entry\n+        // type\n+        // definitions\n+        // that we must save along with entries using them.\n \n         BibtexEntry be = null;\n         boolean backup = prefs.getBoolean(\"backup\");\n@@ -388,8 +371,7 @@ public static SaveSession savePartOfDatabase(BibtexDatabase database, MetaData m\n             throw new SaveException(e.getMessage());\n         }\n \n-        try\n-        {\n+        try {\n \n             // Define our data stream.\n             VerifyingWriter fw = session.getWriter();\n@@ -401,119 +383,114 @@ public static SaveSession savePartOfDatabase(BibtexDatabase database, MetaData m\n             writePreamble(fw, database.getPreamble());\n \n             // Write strings if there are any.\n-        writeStrings(fw, database);\n+            writeStrings(fw, database);\n \n             // Write database entries. Take care, using CrossRefEntry-\n             // Comparator, that referred entries occur after referring\n             // ones. Apart from crossref requirements, entries will be\n             // sorted as they appear on the screen.\n+            List<Comparator<BibtexEntry>> comparators = getSaveComparators(true);\n \n-        List<Comparator<BibtexEntry>> comparators = getSaveComparators(true);\n-\n-        // Use glazed lists to get a sorted view of the entries:\n-        BasicEventList entryList = new BasicEventList();\n-        SortedList sorter = new SortedList(entryList, new FieldComparatorStack<BibtexEntry>(comparators));\n+            // Use glazed lists to get a sorted view of the entries:\n+            BasicEventList entryList = new BasicEventList();\n+            SortedList sorter = new SortedList(entryList, new FieldComparatorStack<BibtexEntry>(comparators));\n \n-        if ((bes != null) && (bes.length > 0))\n-        for (int i=0; i<bes.length; i++) {\n-            sorter.add(bes[i]);\n-        }\n+            if ((bes != null) && (bes.length > 0)) {\n+                for (int i = 0; i < bes.length; i++) {\n+                    sorter.add(bes[i]);\n+                }\n+            }\n \n             FieldFormatter ff = new LatexFieldFormatter();\n \n-            for (Iterator<BibtexEntry> i = sorter.iterator(); i.hasNext();)\n-            {\n+            for (Iterator<BibtexEntry> i = sorter.iterator(); i.hasNext();) {\n                 be = (i.next());\n \n         // Check if we must write the type definition for this\n-        // entry, as well. Our criterion is that all non-standard\n-        // types (*not* customized standard types) must be written.\n-        BibtexEntryType tp = be.getType();\n-        if (BibtexEntryType.getStandardType(tp.getName()) == null) {\n-            types.put(tp.getName(), tp);\n-        }\n-\n-        be.write(fw, ff, true);\n-        fw.write(Globals.NEWLINE);\n-        }\n+                // entry, as well. Our criterion is that all non-standard\n+                // types (*not* customized standard types) must be written.\n+                BibtexEntryType tp = be.getType();\n+                if (BibtexEntryType.getStandardType(tp.getName()) == null) {\n+                    types.put(tp.getName(), tp);\n+                }\n+\n+                be.write(fw, ff, true);\n+                fw.write(Globals.NEWLINE);\n+            }\n \n             // Write meta data.\n-            if (metaData != null)\n-            {\n+            if (metaData != null) {\n                 metaData.writeMetaData(fw);\n             }\n \n-        // Write type definitions, if any:\n-        if (types.size() > 0) {\n-        for (Iterator<String> i=types.keySet().iterator(); i.hasNext();) {\n-            CustomEntryType tp = (CustomEntryType)types.get(i.next());\n-            tp.save(fw);\n-            fw.write(Globals.NEWLINE);\n-        }\n+            // Write type definitions, if any:\n+            if (types.size() > 0) {\n+                for (Iterator<String> i = types.keySet().iterator(); i.hasNext();) {\n+                    CustomEntryType tp = (CustomEntryType) types.get(i.next());\n+                    tp.save(fw);\n+                    fw.write(Globals.NEWLINE);\n+                }\n \n-        }\n+            }\n \n             fw.close();\n-        }\n-         catch (Throwable ex)\n-        {\n+        } catch (Throwable ex) {\n             try {\n                 session.cancel();\n                 //repairAfterError(file, backup, status);\n             } catch (IOException e) {\n                 // Argh, another error? Can we do anything?\n                 e.printStackTrace();\n-                throw new SaveException(ex.getMessage()+\"\\n\"+\n-                        Globals.lang(\"Warning: could not complete file repair; your file may \"\n-                        +\"have been corrupted. Error message\")+\": \"+e.getMessage());\n+                throw new SaveException(ex.getMessage() + \"\\n\"\n+                        + Globals.lang(\"Warning: could not complete file repair; your file may \"\n+                                + \"have been corrupted. Error message\") + \": \" + e.getMessage());\n             }\n             throw new SaveException(ex.getMessage(), be);\n-    }\n+        }\n \n         return session;\n \n     }\n \n-\n     /**\n      * This method attempts to get a Reader for the file path given, either by\n-     * loading it as a resource (from within jar), or as a normal file.\n-     * If unsuccessful (e.g. file not found), an IOException is thrown.\n+     * loading it as a resource (from within jar), or as a normal file. If\n+     * unsuccessful (e.g. file not found), an IOException is thrown.\n      */\n     public static Reader getReader(String name) throws IOException {\n-      Reader reader = null;\n-      // Try loading as a resource first. This works for files inside the jar:\n-      URL reso = Globals.class.getResource(name);\n+        Reader reader = null;\n+        // Try loading as a resource first. This works for files inside the jar:\n+        URL reso = Globals.class.getResource(name);\n \n-      // If that didn't work, try loading as a normal file URL:\n-      if (reso != null) {\n-        try {\n-          reader = new InputStreamReader(reso.openStream());\n-        } catch (FileNotFoundException ex) {\n-          throw new IOException(Globals.lang(\"Could not find layout file\")+\": '\"+name+\"'.\");\n-        }\n-      } else {\n-        File f = new File(name);\n-        try {\n-          reader = new FileReader(f);\n-        } catch (FileNotFoundException ex) {\n-          throw new IOException(Globals.lang(\"Could not find layout file\")+\": '\"+name+\"'.\");\n+        // If that didn't work, try loading as a normal file URL:\n+        if (reso != null) {\n+            try {\n+                reader = new InputStreamReader(reso.openStream());\n+            } catch (FileNotFoundException ex) {\n+                throw new IOException(Globals.lang(\"Could not find layout file\") + \": '\" + name + \"'.\");\n+            }\n+        } else {\n+            File f = new File(name);\n+            try {\n+                reader = new FileReader(f);\n+            } catch (FileNotFoundException ex) {\n+                throw new IOException(Globals.lang(\"Could not find layout file\") + \": '\" + name + \"'.\");\n+            }\n         }\n-      }\n \n-      return reader;\n+        return reader;\n     }\n \n     /*\n-    * We have begun to use getSortedEntries() for both database save operations\n-    * and non-database save operations.  In a non-database save operation\n-    * (such as the exportDatabase call), we do not wish to use the\n-    * global preference of saving in standard order.\n-    */\n+     * We have begun to use getSortedEntries() for both database save operations\n+     * and non-database save operations.  In a non-database save operation\n+     * (such as the exportDatabase call), we do not wish to use the\n+     * global preference of saving in standard order.\n+     */\n     @SuppressWarnings(\"unchecked\")\n-\tpublic static List<BibtexEntry> getSortedEntries(BibtexDatabase database, Set<String> keySet, boolean isSaveOperation) {\n-        boolean inOriginalOrder = isSaveOperation ? Globals.prefs.getBoolean(\"saveInOriginalOrder\") :\n-            Globals.prefs.getBoolean(\"exportInOriginalOrder\");\n+    public static List<BibtexEntry> getSortedEntries(BibtexDatabase database, Set<String> keySet, boolean isSaveOperation) {\n+        boolean inOriginalOrder = isSaveOperation ? Globals.prefs.getBoolean(\"saveInOriginalOrder\")\n+                : Globals.prefs.getBoolean(\"exportInOriginalOrder\");\n         List<Comparator<BibtexEntry>> comparators;\n         if (inOriginalOrder) {\n             // Sort entries based on their creation order, utilizing the fact\n@@ -524,14 +501,15 @@ public static Reader getReader(String name) throws IOException {\n         } else {\n             comparators = getSaveComparators(isSaveOperation);\n         }\n-        \n+\n         // Use glazed lists to get a sorted view of the entries:\n         FieldComparatorStack<BibtexEntry> comparatorStack = new FieldComparatorStack<BibtexEntry>(comparators);\n         BasicEventList entryList = new BasicEventList();\n         SortedList sorter = new SortedList(entryList, comparatorStack);\n \n-        if (keySet == null)\n+        if (keySet == null) {\n             keySet = database.getKeySet();\n+        }\n \n         if (keySet != null) {\n             Iterator<String> i = keySet.iterator();\n@@ -543,19 +521,16 @@ public static Reader getReader(String name) throws IOException {\n         return sorter;\n     }\n \n-    /** \n+    /**\n      * @return true iff the entry has a nonzero value in its field.\n      */\n-    private static boolean nonZeroField(BibtexEntry be, String field)\n-    {\n+    private static boolean nonZeroField(BibtexEntry be, String field) {\n         String o = (be.getField(field));\n \n         return ((o != null) && !o.equals(\"0\"));\n     }\n }\n \n-\n-\n ///////////////////////////////////////////////////////////////////////////////\n //  END OF FILE.\n ///////////////////////////////////////////////////////////////////////////////, @@ -1352,11 +1352,11 @@ else if (i == URL_COL)\n \n         /*\n          * // Default sort order: String[] sortFields = new String[]\n-         * {Globals.prefs.get(\"priSort\"), Globals.prefs.get(\"secSort\"),\n-         * Globals.prefs.get(\"terSort\")}; boolean[] sortDirections = new\n-         * boolean[] {Globals.prefs.getBoolean(\"priDescending\"),\n-         * Globals.prefs.getBoolean(\"secDescending\"),\n-         * Globals.prefs.getBoolean(\"terDescending\")}; // descending\n+         * {Globals.prefs.get(JabRefPreferences.PRIMARY_SORT_FIELD), Globals.prefs.get(JabRefPreferences.SECONDARY_SORT_FIELD),\n+         * Globals.prefs.get(JabRefPreferences.TERTIARY_SORT_FIELD)}; boolean[] sortDirections = new\n+         * boolean[] {Globals.prefs.getBoolean(JabRefPreferences.PRIMARY_SORT_DESCENDING),\n+         * Globals.prefs.getBoolean(JabRefPreferences.SECONDARY_SORT_DESCENDING),\n+         * Globals.prefs.getBoolean(JabRefPreferences.TERTIARY_SORT_DESCENDING)}; // descending\n          */\n         sortedList.getReadWriteLock().writeLock().lock();\n         comparatorChooser.appendComparator(PAD, 0, false);, @@ -377,14 +377,19 @@ private void setupComparatorChooser() {\n             comparators.add(new FieldComparator(tableFormat.getColumnName(i).toLowerCase()));\n         }\n \n-\n         // Set initial sort columns:\n \n         // Default sort order:\n-        String[] sortFields = new String[] {Globals.prefs.get(\"priSort\"), Globals.prefs.get(\"secSort\"),\n-            Globals.prefs.get(\"terSort\")};\n-        boolean[] sortDirections = new boolean[] {Globals.prefs.getBoolean(\"priDescending\"),\n-            Globals.prefs.getBoolean(\"secDescending\"), Globals.prefs.getBoolean(\"terDescending\")}; // descending\n+        String[] sortFields = new String[] {\n+            Globals.prefs.get(JabRefPreferences.PRIMARY_SORT_FIELD), \n+            Globals.prefs.get(JabRefPreferences.SECONDARY_SORT_FIELD),\n+            Globals.prefs.get(JabRefPreferences.TERTIARY_SORT_FIELD)\n+        };\n+        boolean[] sortDirections = new boolean[]{\n+            Globals.prefs.getBoolean(JabRefPreferences.PRIMARY_SORT_DESCENDING),\n+            Globals.prefs.getBoolean(JabRefPreferences.SECONDARY_SORT_DESCENDING),\n+            Globals.prefs.getBoolean(JabRefPreferences.TERTIARY_SORT_DESCENDING)\n+        }; // descending\n \n         sortedForTable.getReadWriteLock().writeLock().lock();\n         for (int i=0; i<sortFields.length; i++) {\n@@ -414,24 +419,24 @@ public void actionPerformed(ActionEvent actionEvent) {\n                 // Update preferences:\n                 int count = Math.min(fields.size(), order.size());\n                 if (count >= 1) {\n-                    Globals.prefs.put(\"priSort\", fields.get(0));\n-                    Globals.prefs.putBoolean(\"priDescending\", order.get(0));\n+                    Globals.prefs.put(JabRefPreferences.PRIMARY_SORT_FIELD, fields.get(0));\n+                    Globals.prefs.putBoolean(JabRefPreferences.PRIMARY_SORT_DESCENDING, order.get(0));\n                 }\n                 if (count >= 2) {\n-                    Globals.prefs.put(\"secSort\", fields.get(1));\n-                    Globals.prefs.putBoolean(\"secDescending\", order.get(1));\n+                    Globals.prefs.put(JabRefPreferences.SECONDARY_SORT_FIELD, fields.get(1));\n+                    Globals.prefs.putBoolean(JabRefPreferences.SECONDARY_SORT_DESCENDING, order.get(1));\n                 }\n                 else {\n-                    Globals.prefs.put(\"secSort\", \"\");\n-                    Globals.prefs.putBoolean(\"secDescending\", false);\n+                    Globals.prefs.put(JabRefPreferences.SECONDARY_SORT_FIELD, \"\");\n+                    Globals.prefs.putBoolean(JabRefPreferences.SECONDARY_SORT_DESCENDING, false);\n                 }\n                 if (count >= 3) {\n-                    Globals.prefs.put(\"terSort\", fields.get(2));\n-                    Globals.prefs.putBoolean(\"terDescending\", order.get(2));\n+                    Globals.prefs.put(JabRefPreferences.TERTIARY_SORT_FIELD, fields.get(2));\n+                    Globals.prefs.putBoolean(JabRefPreferences.TERTIARY_SORT_DESCENDING, order.get(2));\n                 }\n                 else {\n-                    Globals.prefs.put(\"terSort\", \"\");\n-                    Globals.prefs.putBoolean(\"terDescending\", false);\n+                    Globals.prefs.put(JabRefPreferences.TERTIARY_SORT_FIELD, \"\");\n+                    Globals.prefs.putBoolean(JabRefPreferences.TERTIARY_SORT_DESCENDING, false);\n                 }\n             }\n , ", 1157, 749, "\"added, modified, modified, modified, modified, modified, modified, modified, \"", 1906], ["Simon Harrer", "Gradle build works basically. Reuses existing folder structure.", "03/12/14, 05:20:08 PM", "Simon Harrer", "a66468793a5dcba41f0f9307f8d762baecc7f331", ["build-wrapper.xml", "build.gradle", "src/extensions/SimpleCsvImporter.java"], "@@ -0,0 +1,3 @@\n+<project default=\"test\">\n+    <include file=\"build.xml\" as=\"antTargets\"/>\n+</project>\n\\ No newline at end of file, @@ -0,0 +1,61 @@\n+apply plugin: \"java\"\n+apply plugin: \"eclipse\"\n+apply plugin: \"idea\"\n+apply plugin: \"application\"\n+\n+repositories {\n+    mavenCentral()\n+}\n+\n+sourceSets {\n+    main {\n+        java {\n+            srcDir \"src/java\"\n+        }\n+        resources {\n+            srcDirs = [\"src\"]\n+        }\n+    }\n+}\n+\n+dependencies {\n+\n+    // jgoodies\n+    compile 'com.jgoodies:jgoodies-common:1.4.0'\n+    compile 'com.jgoodies:jgoodies-forms:1.6.0'\n+    compile 'com.jgoodies:jgoodies-looks:2.5.2'\n+\n+    compile 'org.apache.pdfbox:pdfbox:1.7.1'\n+    compile 'org.apache.pdfbox:fontbox:1.7.1'\n+    compile 'org.apache.pdfbox:jempbox:1.7.1'\n+\n+\n+    compile 'org.openoffice:juh:3.2.1'\n+    compile 'org.openoffice:jurt:3.2.1'\n+    compile 'org.openoffice:ridl:3.2.1'\n+    compile 'org.openoffice:unoil:3.2.1'\n+\n+    compile 'org.antlr:antlr:3.4'\n+\n+    compile 'mysql:mysql-connector-java:5.0.7'\n+    compile 'org.postgresql:postgresql:9.2-1002-jdbc4'\n+\n+    compile fileTree(dir: 'lib', includes: ['glazedlists-1.8.0_java15.jar', 'jayatana-1.2.4.jar', 'microba.jar', 'spin.jar'])\n+\n+    // not available in maven repository\n+    compile fileTree(dir: 'lib/plugin', includes: ['jpf.jar', 'jpf-boot.jar', 'commons-logging.jar', 'JPFCodeGenerator-rt.jar'])\n+\n+    compile fileTree(dir: 'lib/spl/jersey', includes: ['*.jar'])\n+    compile fileTree(dir: 'lib/spl/sciplore', includes: ['*.jar'])\n+\n+    compile 'junit:junit:3.8.2'\n+}\n+\n+// use ant targets with prefix antTargets.XXXXX\n+ant.importBuild \"build-wrapper.xml\"\n+\n+compileJava.dependsOn \"antTargets.generate\"\n+\n+task wrapper(type: Wrapper) {\n+    gradleVersion = '1.11'\n+}\n\\ No newline at end of file, @@ -13,8 +13,14 @@ public String getFormatName() {\n   public boolean isRecognizedFormat(InputStream stream) throws IOException {\n     return true; // this is discouraged except for demonstration purposes\n   }\n-  \n-  public List importEntries(InputStream stream) throws IOException {    \n+\n+    @Override\n+    public List<BibtexEntry> importEntries(InputStream in, OutputPrinter status) throws IOException {\n+        // MUST BE IMPLEMENTED\n+        return null;\n+    }\n+\n+    public List importEntries(InputStream stream) throws IOException {\n     ArrayList bibitems = new ArrayList();\n     BufferedReader in = new BufferedReader(ImportFormatReader.getReaderDefaultEncoding(stream));\n       , ", 72, 2, "\"added, added, modified, \"", 74], ["Egon Willighagen", "Some example new Dutch translations via the GitHub web page.", "03/15/14, 09:33:10 AM", "Egon Willighagen", "0783fd8ea77776e69372e60bde2df3d31abf852e", ["src/resource/JabRef_nl.properties"], "@@ -34,7 +34,7 @@ Abbreviate_journal_names_of_the_selected_entries_(ISO_abbreviation)=Kort_tijdsch\n Abbreviate_journal_names_of_the_selected_entries_(MEDLINE_abbreviation)=Kort_tijdschriftennamen_met_de_geselecteerde_entries_af_(MEDLINE_afkorting)\n \n Abbreviate_names=Namen_afkorten\n-Abbreviated_%0_journal_names.=\n+Abbreviated_%0_journal_names.=Afgekorte_tijdschrift_namen\n \n Abbreviation=Afkorting\n \n@@ -112,7 +112,7 @@ Append_contents_from_a_BibTeX_database_into_the_currently_viewed_database=Voeg_d\n Append_database=Database_invoegen\n \n append_the_selected_text_to_bibtex_key=voeg_de_geselecteerde_tekst_toe_aan_BibTeX-sleutel\n-Application=\n+Application=Programma\n \n Apply=Toepassen\n \n@@ -159,7 +159,7 @@ Automatically_created_groups=Automatisch_aangemaakte_groepen\n \n Automatically_hide_groups_interface_when_switching_to_a_database_that_contains_no_groups=Verberg_automatisch_het_groepenvenster_bij_overgang_naar_een_database_die_geen_groepen_bevat\n \n-Automatically_remove_exact_duplicates=\n+Automatically_remove_exact_duplicates=Automatisch_exacte_kopie\\u00ebn_verwijderen\n \n Automatically_show_groups_interface_when_switching_to_a_database_that_contains_groups=Toon_automatisch_het_groepenvenster_bij_overgang_naar_een_database_die_groepen_bevat\n \n@@ -186,7 +186,7 @@ Background_color_for_optional_fields=Achtergrondkleur_voor_optionele_velden\n Background_color_for_required_fields=Achtergrondkleur_voor_vereiste_velden\n \n Backup_old_file_when_saving=Maak_reservekopie_van_oud_bestand_bij_het_opslaan\n-Beta_version=\n+Beta_version=Beta_versie\n \n BibTeX_key=BibTeX-sleutel\n \n@@ -233,7 +233,7 @@ Change_case=Verander_geval\n \n Change_entry_type=Wijzig_entry_type\n \n-Change_file_type=\n+Change_file_type=Wijzig_bestandstype\n \n change_key=wijzig_sleutel\n \n@@ -305,8 +305,8 @@ Command_line_id=Commandoregel_id\n \n Complete_record=Vervolledig_record\n \n-Connect=\n-Connect_to_SQL_database=\n+Connect=Verbinden\n+Connect_to_SQL_database=Verbind_met_een_SQL_database\n Connection_to_IEEEXplore_failed=\n \n Contained_in=bevat_in\n@@ -2320,7 +2320,7 @@ Run_HTML_converter_on_title=\n Searching...=\n You_have_selected_more_than_%0_entries_for_download._Some_web_sites_might_block_you_if_you_make_too_many_rapid_downloads._Do_you_want_to_continue?=\n Confirm_selection=\n-Unknown_DOI\\:_'%0'.=\n+Unknown_DOI\\:_'%0'.=Unbekende_DOI\\:_'%0'.\n Get_BibTeX_entry_from_DOI=\n Prefer_converting_subscripts_and_superscripts_to_equations_rather_than_text=\n Add_{}_to_specified_title_words_on_search_to_keep_the_correct_case=\n@@ -2337,7 +2337,7 @@ Unknown_DiVA_entry\\:_'%0'.=\n Get_BibTeX_entry_from_DiVA=\n Log=\n \n-ISO_690=\n+ISO_690=ISO_690\n \n Add_brackets_and_replace_separators_with_their_non-breaking_version_for_units=\n Add_new_entry_and_keep_both_old_entries=\n@@ -2381,9 +2381,9 @@ Run_Unicode_converter_on_title,_author(s),_and_abstract=\n Database_has_changed._Do_you_want_to_save_before_closing?=\n Host=\n Invalid_setting=\n-Network=\n+Network=Netwerk\n Please_specify_both_hostname_and_port=\n-Port=\n+Port=Poort\n Start_field_contents_in_same_column=\n Use_camel_case_for_field_names_(e.g.,_\"HowPublished\"_instead_of_\"howpublished\")=\n Use_custom_proxy_configuration=\n@@ -2393,7 +2393,7 @@ Rebind_C-a,_too=\n \n Show_number_of_elements_contained_in_each_group=\n \n-Open_folder=\n-Opened_%0_folder(s).=\n+Open_folder=Open_map\n+Opened_%0_folder(s).=%0_map(pen)_geopend.\n \n Searches_for_unlinked_PDF_files_on_the_file_system=, ", 13, 13, "\"modified, \"", 26], ["jtornero", "Spanish translation update", "03/17/14, 09:28:26 PM", "jtornero", "71357a4f5234b5eed78eb6eba9d50a0563398cb4", ["src/resource/JabRef_da.properties", "src/resource/JabRef_de.properties", "src/resource/JabRef_en.properties", "src/resource/JabRef_es.properties", "src/resource/JabRef_fr.properties", "src/resource/JabRef_in.properties", "src/resource/JabRef_it.properties", "src/resource/JabRef_nl.properties", "src/resource/JabRef_no.properties", "src/resource/JabRef_pt_BR.properties", "src/resource/JabRef_ru.properties", "src/resource/JabRef_vi.properties", "src/resource/JabRef_zh.properties"], "@@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.54 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n %0_contains_the_Regular_Expression_<b>%1</b>=%0_indeholder_regul\\u00e6rudtrykket_<b>%1</b>\n %0_contains_the_term_<b>%1</b>=%0_indeholder_udtrykket_<b>%1</b>, @@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.55 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n \n %0_contains_the_Regular_Expression_<b>%1</b>=%0_den_regul\\u00e4ren_Ausdruck_<b>%1</b>_enth\\u00e4lt, @@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.54 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n \n %0_contains_the_Regular_Expression_<b>%1</b>=%0%0&nbsp;contains_the_Regular_Expression_<b>%1</b>\n@@ -1097,8 +1097,6 @@ Open_database=Open_database\n \n Open_editor_when_a_new_entry_is_created=Open_editor_when_a_new_entry_is_created\n \n-Open_folder=Open_folder\n-\n Open_file=Open_file\n \n Open_last_edited_databases_at_startup=Open_last_edited_databases_at_startup\n@@ -1957,9 +1955,9 @@ Move_file_to_file_directory.=Move_file_to_file_directory.\n Rename_file_to=Rename_file_to\n <b>All_Entries</b>_(this_group_cannot_be_edited_or_removed)=<b>All_Entries</b>_(this_group_cannot_be_edited_or_removed)\n static_group=static_group\n-includes_subgroups=includes_subgroups\n-refines_supergroup=refines_supergroup\n dynamic_group=dynamic_group\n+refines_supergroup=refines_supergroup\n+includes_subgroups=includes_subgroups\n contains=contains\n search_expression=search_expression\n \n@@ -2184,16 +2182,16 @@ No_entry_needed_a_clean_up=No_entry_needed_a_clean_up\n One_entry_needed_a_clean_up=One_entry_needed_a_clean_up\n %0_entries_needed_a_clean_up=%0_entries_needed_a_clean_up\n Error_importing_from_database=Error_importing_from_database\n-%0_databases_will_be_imported=%0_databases_will_be_imported\n-Imported_%0_databases_successfully=Imported_%0_databases_successfully\n Minimize_to_system_tray=Minimize_to_system_tray\n \n Error_downloading_file_'%0'=Error_downloading_file_'%0'\n Download_failed=Download_failed\n+%0_databases_will_be_imported=%0_databases_will_be_imported\n \n Importing_cancelled=Importing_cancelled\n There_are_no_available_databases_to_be_imported=There_are_no_available_databases_to_be_imported\n Import_from_SQL_database=Import_from_SQL_database\n+Imported_%0_databases_successfully=Imported_%0_databases_successfully\n <_CREATE_NEW_DATABASE_>=<_CREATE_NEW_DATABASE_>\n Remove_Selected=Remove_Selected\n SQL_Database_Exporter=SQL_Database_Exporter\n@@ -2245,80 +2243,80 @@ The_current_BibTeX_key_will_be_overwritten._Continue?=The_current_BibTeX_key_wil\n Overwrite_key=Overwrite_key\n Not_overwriting_existing_key._To_change_this_setting,_open_Options_->_Prefererences_->_BibTeX_key_generator=Not_overwriting_existing_key._To_change_this_setting,_open_Options_->_Prefererences_->_BibTeX_key_generator\n How_would_you_like_to_link_to_'%0'?=How_would_you_like_to_link_to_'%0'?\n-Marked_entries_as_relevant=Marked_entries_as_relevant\n-Marked_entries'_quality_as_good=Marked_entries'_quality_as_good\n-no_preview_available=no_preview_available\n-Enable_PDF_preview=Enable_PDF_preview\n-Show_one_letter_heading_for_icon_columns=Show_one_letter_heading_for_icon_columns\n-Help_on_special_fields=Help_on_special_fields\n-Enable_special_fields=Enable_special_fields\n-Show_rank=Show_rank\n-Compact_rank=Compact_rank\n-Show_quality=Show_quality\n-Show_priority=Show_priority\n-Show_relevance=Show_relevance\n-Synchronize_with_keywords=Synchronize_with_keywords\n-Write_values_of_special_fields_as_separate_fields_to_BibTeX=Write_values_of_special_fields_as_separate_fields_to_BibTeX\n-You_have_changed_settings_for_special_fields.=You_have_changed_settings_for_special_fields.\n-Changed_special_field_settings=Changed_special_field_settings\n Bibtex_key_patterns=Bibtex_key_patterns\n+Changed_special_field_settings=Changed_special_field_settings\n+Clear_priority=Clear_priority\n+Clear_rank=Clear_rank\n+Compact_rank=Compact_rank\n Convert_1st,_2nd,_..._to_real_superscripts=Convert_1st,_2nd,_..._to_real_superscripts\n-Manage_content_selectors=Manage_content_selectors\n Dropped_comment_from_database=Dropped_comment_from_database\n-Synchronized_special_fields_based_on_keywords=Synchronized_special_fields_based_on_keywords\n-Clear_priority=Clear_priority\n+Enable_PDF_preview=Enable_PDF_preview\n+Enable_special_fields=Enable_special_fields\n+Five_stars=Five_stars\n+Four_stars=Four_stars\n+Help_on_special_fields=Help_on_special_fields\n+Keywords_of_selected_entries=Keywords_of_selected_entries\n+Manage_content_selectors=Manage_content_selectors\n+Manage_keywords=Manage_keywords\n+Marked_entries'_quality_as_good=Marked_entries'_quality_as_good\n+Marked_entries_as_relevant=Marked_entries_as_relevant\n No_priority_information=No_priority_information\n-Set_priority_to_high=Set_priority_to_high\n+No_rank_information=No_rank_information\n+One_star=One_star\n+Priority=Priority\n Priority_high=Priority_high\n-Set_priority_to_medium=Set_priority_to_medium\n-Priority_medium=Priority_medium\n-Set_priority_to_low=Set_priority_to_low\n Priority_low=Priority_low\n-Priority=Priority\n-Toogle_quality_assured=Toogle_quality_assured\n+Priority_medium=Priority_medium\n Quality=Quality\n Rank=Rank\n-Clear_rank=Clear_rank\n-No_rank_information=No_rank_information\n+Relevance=Relevance\n+Set_priority_to_high=Set_priority_to_high\n+Set_priority_to_low=Set_priority_to_low\n+Set_priority_to_medium=Set_priority_to_medium\n+Set_rank_to_five_stars=Set_rank_to_five_stars\n+Set_rank_to_four_stars=Set_rank_to_four_stars\n Set_rank_to_one_star=Set_rank_to_one_star\n-One_star=One_star\n-Set_rank_to_two_stars=Set_rank_to_two_stars\n-Two_stars=Two_stars\n Set_rank_to_three_stars=Set_rank_to_three_stars\n+Set_rank_to_two_stars=Set_rank_to_two_stars\n+Show_one_letter_heading_for_icon_columns=Show_one_letter_heading_for_icon_columns\n+Show_priority=Show_priority\n+Show_quality=Show_quality\n+Show_rank=Show_rank\n+Show_relevance=Show_relevance\n+Synchronize_with_keywords=Synchronize_with_keywords\n+Synchronized_special_fields_based_on_keywords=Synchronized_special_fields_based_on_keywords\n Three_stars=Three_stars\n-Set_rank_to_four_stars=Set_rank_to_four_stars\n-Four_stars=Four_stars\n-Set_rank_to_five_stars=Set_rank_to_five_stars\n-Five_stars=Five_stars\n Toggle_relevance=Toggle_relevance\n-Relevance=Relevance\n-Manage_keywords=Manage_keywords\n-Keywords_of_selected_entries=Keywords_of_selected_entries\n+Toogle_quality_assured=Toogle_quality_assured\n+Two_stars=Two_stars\n Update_keywords=Update_keywords\n+Write_values_of_special_fields_as_separate_fields_to_BibTeX=Write_values_of_special_fields_as_separate_fields_to_BibTeX\n+You_have_changed_settings_for_special_fields.=You_have_changed_settings_for_special_fields.\n+no_preview_available=no_preview_available\n+%0_entries_found._To_reduce_server_load,_only_%1_will_be_downloaded.=%0_entries_found._To_reduce_server_load,_only_%1_will_be_downloaded.\n+A_string_with_that_label_already_exists=A_string_with_that_label_already_exists\n+Connection_to_OpenOffice_has_been_lost._Please_make_sure_OpenOffice_is_running,_and_try_to_reconnect.=Connection_to_OpenOffice_has_been_lost._Please_make_sure_OpenOffice_is_running,_and_try_to_reconnect.\n \n Correct_the_entry,_and_reopen_editor_to_display/edit_source.=Correct_the_entry,_and_reopen_editor_to_display/edit_source.\n-When_downloading_files,_or_moving_linked_files_to_the_file_directory,_prefer_the_bib_file_location_rather_than_the_file_directory_set_above=When_downloading_files,_or_moving_linked_files_to_the_file_directory,_prefer_the_bib_file_location_rather_than_the_file_directory_set_above\n-If_a_pasted_or_imported_entry_already_has_the_field_set,_overwrite.=If_a_pasted_or_imported_entry_already_has_the_field_set,_overwrite.\n-To_disable_the_memory_stick_mode_rename_or_remove_the_jabref.xml_file_in_the_same_folder_as_JabRef.=To_disable_the_memory_stick_mode_rename_or_remove_the_jabref.xml_file_in_the_same_folder_as_JabRef.\n-Please_note_that_this_is_an_early_beta_version._Do_not_use_it_without_backing_up_your_files!=Please_note_that_this_is_an_early_beta_version._Do_not_use_it_without_backing_up_your_files!\n-A_string_with_that_label_already_exists=A_string_with_that_label_already_exists\n Could_not_connect_to_a_running_gnuserv_process._Make_sure_that_Emacs_or_XEmacs_is_running,<BR>and_that_the_server_has_been_started_(by_running_the_command_'server-start'/'gnuserv-start').=Could_not_connect_to_a_running_gnuserv_process._Make_sure_that_Emacs_or_XEmacs_is_running,<BR>and_that_the_server_has_been_started_(by_running_the_command_'server-start'/'gnuserv-start').\n-Use_the_following_delimiter_character(s)\\:=Use_the_following_delimiter_character(s):\n+Could_not_connect_to_running_OpenOffice.\\nMake_sure_you_have_installed_OpenOffice_with_Java_support.\\nIf_connecting_manually,_please_verify_program_and_library_paths.\\n\\nError_message\\:_=Could_not_connect_to_running_OpenOffice.\\nMake_sure_you_have_installed_OpenOffice_with_Java_support.\\nIf_connecting_manually,_please_verify_program_and_library_paths.\\n\\nError_message:_\n Created_group_\"%0\".=Created_group_\"%0\".\n+If_a_pasted_or_imported_entry_already_has_the_field_set,_overwrite.=If_a_pasted_or_imported_entry_already_has_the_field_set,_overwrite.\n+Import_Metadata_From_PDF=Import_Metadata_From_PDF\n+Not_connected_to_any_Writer_document._Please_make_sure_a_document_is_open,_and_use_the_'Select_Writer_document'_button_to_connect_to_it.=Not_connected_to_any_Writer_document._Please_make_sure_a_document_is_open,_and_use_the_'Select_Writer_document'_button_to_connect_to_it.\n+Please_note_that_this_is_an_early_beta_version._Do_not_use_it_without_backing_up_your_files!=Please_note_that_this_is_an_early_beta_version._Do_not_use_it_without_backing_up_your_files!\n Removed_all_subgroups_of_group_\"%0\".=Removed_all_subgroups_of_group_\"%0\".\n-%0_entries_found._To_reduce_server_load,_only_%1_will_be_downloaded.=%0_entries_found._To_reduce_server_load,_only_%1_will_be_downloaded.\n+To_disable_the_memory_stick_mode_rename_or_remove_the_jabref.xml_file_in_the_same_folder_as_JabRef.=To_disable_the_memory_stick_mode_rename_or_remove_the_jabref.xml_file_in_the_same_folder_as_JabRef.\n Unable_to_connect._One_possible_reason_is_that_JabRef_and_OpenOffice/LibreOffice_are_not_both_running_in_either_32_bit_mode_or_64_bit_mode.=Unable_to_connect._One_possible_reason_is_that_JabRef_and_OpenOffice/LibreOffice_are_not_both_running_in_either_32_bit_mode_or_64_bit_mode.\n-Could_not_connect_to_running_OpenOffice.\\nMake_sure_you_have_installed_OpenOffice_with_Java_support.\\nIf_connecting_manually,_please_verify_program_and_library_paths.\\n\\nError_message\\:_=Could_not_connect_to_running_OpenOffice.\\nMake_sure_you_have_installed_OpenOffice_with_Java_support.\\nIf_connecting_manually,_please_verify_program_and_library_paths.\\n\\nError_message:_\n-Not_connected_to_any_Writer_document._Please_make_sure_a_document_is_open,_and_use_the_'Select_Writer_document'_button_to_connect_to_it.=Not_connected_to_any_Writer_document._Please_make_sure_a_document_is_open,_and_use_the_'Select_Writer_document'_button_to_connect_to_it.\n-Connection_to_OpenOffice_has_been_lost._Please_make_sure_OpenOffice_is_running,_and_try_to_reconnect.=Connection_to_OpenOffice_has_been_lost._Please_make_sure_OpenOffice_is_running,_and_try_to_reconnect.\n-Your_style_file_specifies_the_paragraph_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.=Your_style_file_specifies_the_paragraph_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.\n-Your_style_file_specifies_the_character_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.=Your_style_file_specifies_the_character_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.\n Unable_to_determine_plugin_name_and_version._This_may_not_be_a_valid_JabRef_plugin.=Unable_to_determine_plugin_name_and_version._This_may_not_be_a_valid_JabRef_plugin.\n-Import_Metadata_From_PDF=Import_Metadata_From_PDF\n+Use_the_following_delimiter_character(s)\\:=Use_the_following_delimiter_character(s):\n+When_downloading_files,_or_moving_linked_files_to_the_file_directory,_prefer_the_bib_file_location_rather_than_the_file_directory_set_above=When_downloading_files,_or_moving_linked_files_to_the_file_directory,_prefer_the_bib_file_location_rather_than_the_file_directory_set_above\n+Your_style_file_specifies_the_character_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.=Your_style_file_specifies_the_character_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.\n+Your_style_file_specifies_the_paragraph_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.=Your_style_file_specifies_the_paragraph_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.\n+Error_fetching_from_Google_Scholar=Error_fetching_from_Google_Scholar\n \n Run_HTML_converter_on_title=Run_HTML_converter_on_title\n Searching...=Searching...\n-Error_fetching_from_Google_Scholar=Error_fetching_from_Google_Scholar\n You_have_selected_more_than_%0_entries_for_download._Some_web_sites_might_block_you_if_you_make_too_many_rapid_downloads._Do_you_want_to_continue?=You_have_selected_more_than_%0_entries_for_download._Some_web_sites_might_block_you_if_you_make_too_many_rapid_downloads._Do_you_want_to_continue?\n Confirm_selection=Confirm_selection\n Unknown_DOI\\:_'%0'.=Unknown_DOI:_'%0'.\n@@ -2339,35 +2337,35 @@ Get_BibTeX_entry_from_DiVA=Get_BibTeX_entry_from_DiVA\n Log=Log\n \n ISO_690=ISO_690\n-\n-Format_units_by_adding_non-breaking_separators_and_keeping_the_correct_case_on_search=Format_units_by_adding_non-breaking_separators_and_keeping_the_correct_case_on_search\n-Use_Emacs_key_bindings=Use_Emacs_key_bindings\n-Merge_entries=Merge_entries\n-Show_URL_first=Show_URL_first\n-Show_DOI_first=Show_DOI_first\n-Remove_unneccessary_$,_{,_and_}_and_move_adjacent_numbers_into_equations=Remove_unneccessary_$,_{,_and_}_and_move_adjacent_numbers_into_equations\n Add_brackets_and_replace_separators_with_their_non-breaking_version_for_units=Add_brackets_and_replace_separators_with_their_non-breaking_version_for_units\n-First_entry=First_entry\n-Use_1st=Use_1st\n-None=None\n-Use_2nd=Use_2nd\n-Second_entry=Second_entry\n-You_have_to_choose_exactly_two_entries_to_merge.=You_have_to_choose_exactly_two_entries_to_merge.\n-Merged_entry=Merged_entry\n-Error_in_entry=Error_in_entry\n Add_new_entry_and_keep_both_old_entries=Add_new_entry_and_keep_both_old_entries\n-Replace_old_entries_with_new_entry=Replace_old_entries_with_new_entry\n Cancelled_merging_entries=Cancelled_merging_entries\n+Error_in_entry=Error_in_entry\n+First_entry=First_entry\n+\n+Format_units_by_adding_non-breaking_separators_and_keeping_the_correct_case_on_search=Format_units_by_adding_non-breaking_separators_and_keeping_the_correct_case_on_search\n+Merge_entries=Merge_entries\n Merged_entries_into_a_new_and_kept_the_old=Merged_entries_into_a_new_and_kept_the_old\n Merged_entries_into_a_new_and_removed_the_old=Merged_entries_into_a_new_and_removed_the_old\n+Merged_entry=Merged_entry\n+None=None\n Parse=Parse\n+Remove_unneccessary_$,_{,_and_}_and_move_adjacent_numbers_into_equations=Remove_unneccessary_$,_{,_and_}_and_move_adjacent_numbers_into_equations\n+Replace_old_entries_with_new_entry=Replace_old_entries_with_new_entry\n Result=Result\n+Second_entry=Second_entry\n+Show_DOI_first=Show_DOI_first\n+Show_URL_first=Show_URL_first\n+Use_1st=Use_1st\n+Use_2nd=Use_2nd\n+Use_Emacs_key_bindings=Use_Emacs_key_bindings\n+You_have_to_choose_exactly_two_entries_to_merge.=You_have_to_choose_exactly_two_entries_to_merge.\n \n Update_timestamp_on_modification=Update_timestamp_on_modification\n change_field=change_field\n+All_key_bindings_will_be_reset_to_their_defaults.=All_key_bindings_will_be_reset_to_their_defaults.\n \n Automatically_set_file_links=Automatically_set_file_links\n-All_key_bindings_will_be_reset_to_their_defaults.=All_key_bindings_will_be_reset_to_their_defaults.\n Continue?=Continue?\n Resetting_all_key_bindings=Resetting_all_key_bindings\n Save_entries_ordered_by_title=Save_entries_ordered_by_title\n@@ -2378,23 +2376,25 @@ Include_empty_fields=Include_empty_fields\n Field_saving_options=Field_saving_options\n Field_value_delimiter._E.g.,_\"author\\={x}\"_or_\"author\\='x'\"=Field_value_delimiter._E.g.,_\"author={x}\"_or_\"author='x'\"\n Run_Unicode_converter_on_title,_author(s),_and_abstract=Run_Unicode_converter_on_title,_author(s),_and_abstract\n+Database_has_changed._Do_you_want_to_save_before_closing?=Database_has_changed._Do_you_want_to_save_before_closing?\n+Host=Host\n+Invalid_setting=Invalid_setting\n+Network=Network\n+Please_specify_both_hostname_and_port=Please_specify_both_hostname_and_port\n+Port=Port\n \n Start_field_contents_in_same_column=Start_field_contents_in_same_column\n Use_camel_case_for_field_names_(e.g.,_\"HowPublished\"_instead_of_\"howpublished\")=Use_camel_case_for_field_names_(e.g.,_\"HowPublished\"_instead_of_\"howpublished\")\n-Database_has_changed._Do_you_want_to_save_before_closing?=Database_has_changed._Do_you_want_to_save_before_closing?\n Use_custom_proxy_configuration=Use_custom_proxy_configuration\n-Network=Network\n-Host=Host\n-Port=Port\n-Please_specify_both_hostname_and_port=Please_specify_both_hostname_and_port\n-Invalid_setting=Invalid_setting\n Clear_connection_settings=Clear_connection_settings\n Cleared_connection_settings.=Cleared_connection_settings.\n \n Rebind_C-a,_too=Rebind_C-a,_too\n \n Show_number_of_elements_contained_in_each_group=Show_number_of_elements_contained_in_each_group\n \n+Open_folder=Open_folder\n+Opened_%0_folder(s).=Opened_%0_folder(s).\n+\n \n Searches_for_unlinked_PDF_files_on_the_file_system=Searches_for_unlinked_PDF_files_on_the_file_system\n-Opened_%0_folder(s).=Opened_%0_folder(s)., @@ -1,6 +1,6 @@\n #!\n-#!_created/edited_by_Popeye_version_0.55_(https://github.com/koppor/popeye)\n-#!_encoding:ISO-8859-1\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n+#! encoding:ISO-8859-1\n %0_contains_the_Regular_Expression_<b>%1</b>=%0%0&nbsp;contiene_la_expresi\\u00f3n_regular_<b>%1</b>\n %0_contains_the_term_<b>%1</b>=%0%nbsp;contiene_el_t\\u00e9rmino_<b>%1</b>\n %0_doesn't_contain_the_Regular_Expression_<b>%1</b>=%0_no_contiene_la_Expresi\\u00f3n_Regular_<b>&1</b>\n@@ -307,6 +307,7 @@ Entry_type_names_are_not_allowed_to_contain_white_space_or_the_following_charact\n Entry_types=Tipos_de_entrada\n Error=Error\n Error\\:_=Error:\n+Error_converting_BibTeX_to_XMP\\:_%0=Error convirtiendo BibTeX a XMP:_%0\n Error_converting_XMP_to_'%0'...=Error_convirtiendo_XMP_a_'%0'...\n Error_exporting_to_clipboard=Error_exportando_al_portapapeles\n Error_in_field=Error_en_campo\n@@ -370,6 +371,7 @@ Finished_autosetting_external_links.=Se_ha_finalizado_la_configuraci\\u00f3n_auto\n Finished_synchronizing_%0_links._Entries_changed%c_%1.=Se_ha_finalizado_la_sincronizaci\\u00f3n_de_%0_enlaces._Se_cambiaron_%c_%1_entradas.\n Finished_writing_XMP-metadata._Wrote_to_%0_file(s).=Se_ha_finalizado_la_escritura_de_los_metadtos_XMP._Se_escribi\\u00f3_en_%0_archivo(s).\n Finished_writing_XMP_for_%0_file_(%1_skipped,_%2_errors).=Se_finaliz\\u00f3_la_escritura_XMP_en_archivo_%0_(%1_evitados,_%2_errores).\n+First_select_the_entries_you_want_keys_to_be_generated_for.=En primer lugar, seleccione las entradas para las que desea generar claves\n Fit_table_horizontally_on_screen=Ajustar_la_tabla_al_ancho_de_pantalla\n Float=Flotar\n Float_marked_entries=Flotar_entradas_marcadas\n@@ -758,6 +760,7 @@ Search_general_fields=Buscar_en_campos_generales\n Search_IEEEXplore=Buscar_en_IEEEXplore\n Search_optional_fields=Buscar_en_campos_opcionales\n Search_required_fields=Buscar_en_requeridos\n+Search_specified_field(s)=Buscar en campo(s) especificado(s)\n Searched_database._Global_number_of_hits=Se_ha_buscado_en_la_base_de_datos._N\\u00famero_global_de_coincidencias\n Searched_database._Number_of_hits=Se_ha_buscado_en_la_base_de_datos._N\\u00famero_de_aciertos\n Searching_for_%0_file=Buscando_el_archivo_%0\n@@ -1107,6 +1110,7 @@ Old_plugin_versions_will_be_deleted_next_time_JabRef_starts_up.=Las_versiones_an\n Formatter_not_found\\:_%0=Formateador_no_encontrado\\:_%0\n The_following_formatters_could_not_be_found=Los_siguientes_formateadores_no_se_pueden_encontrar\n Clear_inputarea=Limpiar_\\u00e1rea_de_entrada\n+Automatically_set_file_links_for_this_entry=Ajustar enlaces de archivo autom\\u00c3\\u00a1ticamente para esta entrada\n Could_not_save,_file_locked_by_another_JabRef_instance.=No_se_puede_guardar._Fichero_bloqueado_por_otra_instancia_JabRef.\n File_is_locked_by_another_JabRef_instance.=El_archivo_est\\u00e1_bloqueado_por_otra_instancia_de_JabRef.\n Do_you_want_to_override_the_file_lock?=\\u00bfQuiere_saltarse_el_bloqueo_de_archivo?\n@@ -1126,9 +1130,9 @@ Move_file_to_file_directory.=Mover_archivo_al_directorio_de_archivos.\n Rename_file_to=Renombrar_archivo_a\n <b>All_Entries</b>_(this_group_cannot_be_edited_or_removed)=<b>Todas_las_entradas</b>_(este_grupo_no_puede_ser_editado_o_eliminado)\n static_group=grupo_est\\u00e1tico\n-includes_subgroups=incluye_subgrupos\n-refines_supergroup=afina_supergrupo\n dynamic_group=grupo_din\\u00e1mico\n+refines_supergroup=afina_supergrupo\n+includes_subgroups=incluye_subgrupos\n contains=contiene\n search_expression=expresi\\u00f3n_de_b\\u00fasqueda\n Disable_file_renaming_in_non-native_file_dialog=Deshabilitar_renombrado_de_archivo_en_di\\u00e1logo_de_archivo_no_nativo.\n@@ -1139,6 +1143,7 @@ Error_while_fetching_from_ScienceDirect=Error_al_recuperar_desde_ScienceDirect\n Error_initializing_custom_export_format_from_string_'%0'=Error_inicializando_formato_de_exportaci\\u00f3n_personalizado_a_partir_de_la_cadena_'%0'\n BibLaTeX_mode=Modo_BibLaTex\n Optional_fields_2=Campos_opcionales_2\n+Waiting_for_save_operation_to_finish=Esperando a que acabe la operaci\\u00f3n de guardado\n Resolving_duplicate_BibTeX_keys...=Resolviendo_claves_BibTeX_duplicadas...\n Finished_resolving_duplicate_BibTeX_keys._%0_entries_modified.=Resoluci\\u00f3n_de_claves_BibTeX_duplicadas_finalizada._%0_entradas_modificadas.\n This_database_contains_one_or_more_duplicated_BibTeX_keys.=Esta_base_de_datos_contiene_una_o_m\\u00e1s_claves_BibTeX_duplicadas.\n@@ -1339,14 +1344,14 @@ No_entry_needed_a_clean_up=Ninguna_entrada_necesit\\u00f3_de_limpieza\n One_entry_needed_a_clean_up=S\\u00f3lo_una_entrada_necesit\\u00f3_limpieza\n %0_entries_needed_a_clean_up=%0_entradas_necesitarion_limpieza\n Error_importing_from_database=Error_al_importar_desde_base_de_datos\n-%0_databases_will_be_imported=%0_bases_de_datos_ser\\u00e1n_importadas\n-Imported_%0_databases_successfully=%0_bases_de_datos_importadas_con_\\u00e9xito\n Minimize_to_system_tray=Minimizar_a_la_bandeja_del_sistema\n Error_downloading_file_'%0'=Error_descargando_el_archivo_'%0'\n Download_failed=Fall\\u00f3_la_descarga\n+%0_databases_will_be_imported=%0_bases_de_datos_ser\\u00e1n_importadas\n Importing_cancelled=Importaci\\u00f3n_cancelada\n There_are_no_available_databases_to_be_imported=No_hay_bases_de_datos_disaponibles_para_importar\n Import_from_SQL_database=Importar_desde_base_de_datos_SQL\n+Imported_%0_databases_successfully=%0_bases_de_datos_importadas_con_\\u00e9xito\n <_CREATE_NEW_DATABASE_>=<_CREAR_NUEVA_BASE_DE_DATOS_>\n Remove_Selected=Eliminar_seleccionados\n SQL_Database_Exporter=Exportador_a_base_de_datos_SQL\n@@ -1361,6 +1366,9 @@ Unknown_preference_key_'%0'=Clave_de_preferencia_desconocida_'%0'\n Unable_to_clear_preferences.=No_es_posible_limpiar_preferencias.\n Reset_preferences_(key1,key2,..._or_'all')=Restablecer_preferencias_(key1,key2,..._or_'todas')\n Find_unlinked_files=Buscar_archivos_desenlazados\n+Unselect_all=Deseleccionar todo\n+Expand_all=Expandir todo\n+Collapse_all=Colapsar todo\n Select_Directory=Seleccionar_directorio\n Choose_Directory=Escoger_directorio\n Use_the_selected_directory_to_start_with_the_search.=Usar_la_carpeta_seleccionada_para_comenzar_la_b\\u00fasqueda.\n@@ -1393,78 +1401,78 @@ The_current_BibTeX_key_will_be_overwritten._Continue?=La_clave_BibTeX_actual_va_\n Overwrite_key=Sobreescribir_clave\n Not_overwriting_existing_key._To_change_this_setting,_open_Options_->_Prefererences_->_BibTeX_key_generator=No_se_sobreescribir\\u00e1_clave_existente._Para_cambiar_este_ajuste,_seleccione_Opciones->Preferencias->Generador_de_claves_BiBTeX\n How_would_you_like_to_link_to_'%0'?=\\u00bfC\\u00f3mo_desea_enlazar_'%0'?\n-Marked_entries_as_relevant=Entradas_marcadas_como_relevantes\n-Marked_entries'_quality_as_good=Calidad_de_las_entradas_marcadas_como_buenas\n-no_preview_available=sin_vista_previa\n-Enable_PDF_preview=Habilitar_vista_previa_de_PDF\n-Show_one_letter_heading_for_icon_columns=Mostrar_encabezamiento_de_una_letra_para_columnas_de_icono\n-Help_on_special_fields=Ayuda_sobre_campos_especiales\n-Enable_special_fields=Habilitar_campos_especiales\n-Show_rank=Mostrar_rango\n-Compact_rank=Compactar_rango\n-Show_quality=Mostrar_cualidad\n-Show_priority=Mostrar_prioridad\n-Show_relevance=Mostrar_relevancia\n-Synchronize_with_keywords=Sincronizar_con_palabras_clave\n-Write_values_of_special_fields_as_separate_fields_to_BibTeX=Escribir_valores_de_campos_especiales_como_campos_separados_en_BibTeX\n-You_have_changed_settings_for_special_fields.=Ha_cambiado_los_ajustes_para_campos_especiales.\n-Changed_special_field_settings=Ajustes_de_campos_especiales_cambiados\n Bibtex_key_patterns=Patrones_de_clave_BibTeX\n+Changed_special_field_settings=Ajustes_de_campos_especiales_cambiados\n+Clear_priority=Limpiar_prioridad\n+Clear_rank=Limpiar_rango\n+Compact_rank=Compactar_rango\n Convert_1st,_2nd,_..._to_real_superscripts=Convertir_1st,_2nd,_..._a_super\\u00edndices\n-Manage_content_selectors=Getionar_selectores_de_contenido\n Dropped_comment_from_database=Eliminado_comentario_de_la_base_de_datos\n-Synchronized_special_fields_based_on_keywords=Sincronizar_campos_especiales_basados_en_palabras_clave\n-Clear_priority=Limpiar_prioridad\n+Enable_PDF_preview=Habilitar_vista_previa_de_PDF\n+Enable_special_fields=Habilitar_campos_especiales\n+Five_stars=Cinco_estrellas\n+Four_stars=Cuatro_estrellas\n+Help_on_special_fields=Ayuda_sobre_campos_especiales\n+Keywords_of_selected_entries=Palabras_clave_de_las_entradas_seleccionadas\n+Manage_content_selectors=Getionar_selectores_de_contenido\n+Manage_keywords=Administrar_palabras_clave\n+Marked_entries'_quality_as_good=Calidad_de_las_entradas_marcadas_como_buenas\n+Marked_entries_as_relevant=Entradas_marcadas_como_relevantes\n No_priority_information=Sin_informaci\\u00f3n_de_prioridad\n-Set_priority_to_high=Establecer_prioridad_alta\n+No_rank_information=Sin_informaci\\u00f3n_de_rango\n+One_star=Una_estrella\n+Priority=Prioridad\n Priority_high=Prioridad_alta\n-Set_priority_to_medium=Establecer_prioridad_media\n-Priority_medium=Prioridad_media\n-Set_priority_to_low=Establecer_prioridad_baja\n Priority_low=Prioridad_baja\n-Priority=Prioridad\n-Toogle_quality_assured=Conmutar_calidad_asegurada\n+Priority_medium=Prioridad_media\n Quality=Calidad\n Rank=Rango\n-Clear_rank=Limpiar_rango\n-No_rank_information=Sin_informaci\\u00f3n_de_rango\n+Relevance=Relevancia\n+Set_priority_to_high=Establecer_prioridad_alta\n+Set_priority_to_low=Establecer_prioridad_baja\n+Set_priority_to_medium=Establecer_prioridad_media\n+Set_rank_to_five_stars=Establecer_rango_en_cinco_estrellas\n+Set_rank_to_four_stars=Establecer_rango_en_cuatro_estrellas\n Set_rank_to_one_star=Establecer_rango_en_una_estrella\n-One_star=Una_estrella\n-Set_rank_to_two_stars=Establecer_rango_en_dos_estrellas\n-Two_stars=Dos_estrellas\n Set_rank_to_three_stars=Establecer_rango_en_tres_estrellas\n+Set_rank_to_two_stars=Establecer_rango_en_dos_estrellas\n+Show_one_letter_heading_for_icon_columns=Mostrar_encabezamiento_de_una_letra_para_columnas_de_icono\n+Show_priority=Mostrar_prioridad\n+Show_quality=Mostrar_cualidad\n+Show_rank=Mostrar_rango\n+Show_relevance=Mostrar_relevancia\n+Synchronize_with_keywords=Sincronizar_con_palabras_clave\n+Synchronized_special_fields_based_on_keywords=Sincronizar_campos_especiales_basados_en_palabras_clave\n Three_stars=Tres_estrellas\n-Set_rank_to_four_stars=Establecer_rango_en_cuatro_estrellas\n-Four_stars=Cuatro_estrellas\n-Set_rank_to_five_stars=Establecer_rango_en_cinco_estrellas\n-Five_stars=Cinco_estrellas\n Toggle_relevance=Conmutar_relevancia\n-Relevance=Relevancia\n-Manage_keywords=Administrar_palabras_clave\n-Keywords_of_selected_entries=Palabras_clave_de_las_entradas_seleccionadas\n+Toogle_quality_assured=Conmutar_calidad_asegurada\n+Two_stars=Dos_estrellas\n Update_keywords=Actualizar_palabras_clave\n-Correct_the_entry,_and_reopen_editor_to_display/edit_source.=Corregir_la_entrada_y_reabrir_el_editor_para_mostrar/editar_fuente.\n-When_downloading_files,_or_moving_linked_files_to_the_file_directory,_prefer_the_bib_file_location_rather_than_the_file_directory_set_above=Al_descargar_archivos_o_mover_archivos_enlazados_a_la_carpeta_de_archivos,_preferir_la_ubicaci\\u00f3n_del_archivo_bib_antes_que_el_directorio_de_archivos_establecido_arriba.\n-If_a_pasted_or_imported_entry_already_has_the_field_set,_overwrite.=Si_una_entrada_importada_o_pegada_ya_tiene_el_campo_establecido,_sobreescribir.\n-To_disable_the_memory_stick_mode_rename_or_remove_the_jabref.xml_file_in_the_same_folder_as_JabRef.=Para_deshabilitar_el_modo_l\\u00e1piz_de_memoria,_renombre_o_elimine_el_archivo_jabrf.xml_en_la_misma_carpeta_que_JabRef.\n-Please_note_that_this_is_an_early_beta_version._Do_not_use_it_without_backing_up_your_files!=Tenga_en_cuanta_que_es_una_versi\\u00f3n_beta_temprana._\\u00a1No_la_use_sin_hacer_una_copia_de_seguridad_de_sus_archivos!\n+Write_values_of_special_fields_as_separate_fields_to_BibTeX=Escribir_valores_de_campos_especiales_como_campos_separados_en_BibTeX\n+You_have_changed_settings_for_special_fields.=Ha_cambiado_los_ajustes_para_campos_especiales.\n+no_preview_available=sin_vista_previa\n+%0_entries_found._To_reduce_server_load,_only_%1_will_be_downloaded.=%0_entradas_encontradas._Para_reducir_la_carga_del_servidor,_s\\u00f3lo_%1_ser\\u00e1(n)_descargada(s).\n A_string_with_that_label_already_exists=Una_cadena_con_esa_etiqueta_ya_existe\n+Connection_to_OpenOffice_has_been_lost._Please_make_sure_OpenOffice_is_running,_and_try_to_reconnect.=La_conexi\\u00f3n_con_OpenOffice/LibreOffice_se_ha_perdido._Aseg\\u00farese_de_que_OpenOffice/LibreOffice_est\\u00e1_ejecut\\u00e1ndose_e_intente_reconectar.\n+Correct_the_entry,_and_reopen_editor_to_display/edit_source.=Corregir_la_entrada_y_reabrir_el_editor_para_mostrar/editar_fuente.\n Could_not_connect_to_a_running_gnuserv_process._Make_sure_that_Emacs_or_XEmacs_is_running,<BR>and_that_the_server_has_been_started_(by_running_the_command_'server-start'/'gnuserv-start').=No_se_puede_conectar_con_un_proceso_gnuserv_ejecut\\u00e1ndose._Aseg\\u00farese_de_que_Emacs_o_XEmacs_est\\u00e1_ejecut\\u00e1ndose,<BR>y_que_el_servidor_se_ha_arrancado_(ejecutando_el_comando_'server-start'/'gnuserv-start').\n-Use_the_following_delimiter_character(s)\\:=Usar_como_caracter(es)_delimitador(es):\n+Could_not_connect_to_running_OpenOffice.\\nMake_sure_you_have_installed_OpenOffice_with_Java_support.\\nIf_connecting_manually,_please_verify_program_and_library_paths.\\n\\nError_message\\:_=No_se_puede_conectar_a_un_OpenOffice/LibreOffice_en_ejecuci\\u00f3n.\\nAseg\\u00farese_de_que_tiene_OpenOffice/LibreOffice_instalado_con_soporte_para_Java.\\nlf__connecting_manually,_por_favor_verifique_las_ruta_de_programa_y_librer\\u00edas.\\n\\nMensaje_de_error:_\n Created_group_\"%0\".=Creado_grupo_\"%0\".\n+If_a_pasted_or_imported_entry_already_has_the_field_set,_overwrite.=Si_una_entrada_importada_o_pegada_ya_tiene_el_campo_establecido,_sobreescribir.\n+Import_Metadata_From_PDF=Importar_metadatos_desde_PDF\n+Not_connected_to_any_Writer_document._Please_make_sure_a_document_is_open,_and_use_the_'Select_Writer_document'_button_to_connect_to_it.=No_conectado_a_ning\\u00fan_documento_Writer._Aseg\\u00farese_de_que_un_documento_est\\u00e1_abierto_y_use_el_bot\\u00f3n_\"Seleccionar_documento_Writer'_para_conectar_con_\\u00e9l.\n+Please_note_that_this_is_an_early_beta_version._Do_not_use_it_without_backing_up_your_files!=Tenga_en_cuanta_que_es_una_versi\\u00f3n_beta_temprana._\\u00a1No_la_use_sin_hacer_una_copia_de_seguridad_de_sus_archivos!\n Removed_all_subgroups_of_group_\"%0\".=Eliminados_todos_los_subgrupos_del_grupo_\"%0\".\n-%0_entries_found._To_reduce_server_load,_only_%1_will_be_downloaded.=%0_entradas_encontradas._Para_reducir_la_carga_del_servidor,_s\\u00f3lo_%1_ser\\u00e1(n)_descargada(s).\n+To_disable_the_memory_stick_mode_rename_or_remove_the_jabref.xml_file_in_the_same_folder_as_JabRef.=Para_deshabilitar_el_modo_l\\u00e1piz_de_memoria,_renombre_o_elimine_el_archivo_jabrf.xml_en_la_misma_carpeta_que_JabRef.\n Unable_to_connect._One_possible_reason_is_that_JabRef_and_OpenOffice/LibreOffice_are_not_both_running_in_either_32_bit_mode_or_64_bit_mode.=No_es_posible_conectar._Una_posible_raz\\u00f3n_es_que_JabRef_y_OpenOffice/LibreOffice_no_est\\u00e1n_funcionado_en_modo_32_bit_o_64_bit.\n-Could_not_connect_to_running_OpenOffice.\\nMake_sure_you_have_installed_OpenOffice_with_Java_support.\\nIf_connecting_manually,_please_verify_program_and_library_paths.\\n\\nError_message\\:_=No_se_puede_conectar_a_un_OpenOffice/LibreOffice_en_ejecuci\\u00f3n.\\nAseg\\u00farese_de_que_tiene_OpenOffice/LibreOffice_instalado_con_soporte_para_Java.\\nlf__connecting_manually,_por_favor_verifique_las_ruta_de_programa_y_librer\\u00edas.\\n\\nMensaje_de_error:_\n-Not_connected_to_any_Writer_document._Please_make_sure_a_document_is_open,_and_use_the_'Select_Writer_document'_button_to_connect_to_it.=No_conectado_a_ning\\u00fan_documento_Writer._Aseg\\u00farese_de_que_un_documento_est\\u00e1_abierto_y_use_el_bot\\u00f3n_\"Seleccionar_documento_Writer'_para_conectar_con_\\u00e9l.\n-Connection_to_OpenOffice_has_been_lost._Please_make_sure_OpenOffice_is_running,_and_try_to_reconnect.=La_conexi\\u00f3n_con_OpenOffice/LibreOffice_se_ha_perdido._Aseg\\u00farese_de_que_OpenOffice/LibreOffice_est\\u00e1_ejecut\\u00e1ndose_e_intente_reconectar.\n-Your_style_file_specifies_the_paragraph_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.=Su_archivo_de_estilo_especifica_el_formato_de_p\\u00e1rrafo_'%0',_que_no_est\\u00e1_definido_en_su_documento_OpenOffice/LibreOffice.\n-Your_style_file_specifies_the_character_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.=Su_archivo_de_estilo_especifica_el_formato_de_car\\u00e1cter_'%0',_que_no_est\\u00e1_definido_en_su_documento_OpenOffice_actual.\n Unable_to_determine_plugin_name_and_version._This_may_not_be_a_valid_JabRef_plugin.=No_es_posible_determinar_el_nombre_y_versi\\u00f3n_del_plugin._Puede_que_no_sea_un_plugin_JabRef_v\\u00e1lido.\n-Import_Metadata_From_PDF=Importar_metadatos_desde_PDF\n+Use_the_following_delimiter_character(s)\\:=Usar_como_caracter(es)_delimitador(es):\n+When_downloading_files,_or_moving_linked_files_to_the_file_directory,_prefer_the_bib_file_location_rather_than_the_file_directory_set_above=Al_descargar_archivos_o_mover_archivos_enlazados_a_la_carpeta_de_archivos,_preferir_la_ubicaci\\u00f3n_del_archivo_bib_antes_que_el_directorio_de_archivos_establecido_arriba.\n+Your_style_file_specifies_the_character_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.=Su_archivo_de_estilo_especifica_el_formato_de_car\\u00e1cter_'%0',_que_no_est\\u00e1_definido_en_su_documento_OpenOffice_actual.\n+Your_style_file_specifies_the_paragraph_format_'%0',_which_is_undefined_in_your_current_OpenOffice_document.=Su_archivo_de_estilo_especifica_el_formato_de_p\\u00e1rrafo_'%0',_que_no_est\\u00e1_definido_en_su_documento_OpenOffice/LibreOffice.\n+Error_fetching_from_Google_Scholar=Error_recuperando_desde_Google_Scholar\n Run_HTML_converter_on_title=Ejecutar_conversor_HTML_en_t\\u00edtulo\n Searching...=Buscando...\n-Error_fetching_from_Google_Scholar=Error_recuperando_desde_Google_Scholar\n You_have_selected_more_than_%0_entries_for_download._Some_web_sites_might_block_you_if_you_make_too_many_rapid_downloads._Do_you_want_to_continue?=Ha_seleccionado_m\\u00e1s_de_%0_entradas_para_descargar._Algunos_sitios_web_podr\\u00edan_bloquearle_si_hace_demasiadas_descargas._\\u00bfDesea_continuar?\n Confirm_selection=Confirmar_selecci\\u00f3n\n Unknown_DOI\\:_'%0'.=DOI_desconocido:_'%0'.\n@@ -1484,32 +1492,32 @@ Unknown_DiVA_entry\\:_'%0'.=Entrada_DiVA_desconocida:_'%0'.\n Get_BibTeX_entry_from_DiVA=Obtener_entrada_BibTeX_desde_DiVA\n Log=Registro\n ISO_690=ISO_690\n-Format_units_by_adding_non-breaking_separators_and_keeping_the_correct_case_on_search=Formatear_unidades_a\\u00f1adiendo_separadores_no_divisores_y_manteniendo_may\\u00fasculas/min\\u00fasculas_correctamente_en_la_b\\u00fasqueda\n-Use_Emacs_key_bindings=Usar_combinaciones_de_teclas_de_Emacs\n-Merge_entries=Fusionar_entradas\n-Show_URL_first=Mostrar_URL_en_primer_lugar\n-Show_DOI_first=Mostrar_DOI_en_primer_lugar\n-Remove_unneccessary_$,_{,_and_}_and_move_adjacent_numbers_into_equations=Eliminar_$,_{_y_}_innecesarios_y_mover_n\\u00fameros_adyacentes_a_ecuaciones\n Add_brackets_and_replace_separators_with_their_non-breaking_version_for_units=A\\u00f1adir_par\\u00e9ntesis_y_reemplazar_separadores_con_sus_versiones_no_divisoras_para_unidades.\n-First_entry=Primera_entrada\n-Use_1st=Usar_primero\n-None=Ning\\u00fan\n-Use_2nd=Usar_segundo\n-Second_entry=Segunda_entrada\n-You_have_to_choose_exactly_two_entries_to_merge.=Tiene_que_escoger_exactamente_dos_entradas_para_fusionar.\n-Merged_entry=Entrada_fusionada\n-Error_in_entry=Error_en_la_entrada\n Add_new_entry_and_keep_both_old_entries=A\\u00f1adir_nueva_entrada_y_mantener_las_dos_entradas_antiguas\n-Replace_old_entries_with_new_entry=Reemplazar_viejas_entradas_con_la_nueva\n Cancelled_merging_entries=Cancelar_fusionado_de_entradas\n+Error_in_entry=Error_en_la_entrada\n+First_entry=Primera_entrada\n+Format_units_by_adding_non-breaking_separators_and_keeping_the_correct_case_on_search=Formatear_unidades_a\\u00f1adiendo_separadores_no_divisores_y_manteniendo_may\\u00fasculas/min\\u00fasculas_correctamente_en_la_b\\u00fasqueda\n+Merge_entries=Fusionar_entradas\n Merged_entries_into_a_new_and_kept_the_old=Fusionar_entradas_en_una_nueva_y_mantener_la_antigua\n Merged_entries_into_a_new_and_removed_the_old=Entradas_fusionadas_en_una_nueva_y_eliminada_la_antigua\n+Merged_entry=Entrada_fusionada\n+None=Ning\\u00fan\n Parse=Analizar\n+Remove_unneccessary_$,_{,_and_}_and_move_adjacent_numbers_into_equations=Eliminar_$,_{_y_}_innecesarios_y_mover_n\\u00fameros_adyacentes_a_ecuaciones\n+Replace_old_entries_with_new_entry=Reemplazar_viejas_entradas_con_la_nueva\n Result=Resultado\n+Second_entry=Segunda_entrada\n+Show_DOI_first=Mostrar_DOI_en_primer_lugar\n+Show_URL_first=Mostrar_URL_en_primer_lugar\n+Use_1st=Usar_primero\n+Use_2nd=Usar_segundo\n+Use_Emacs_key_bindings=Usar_combinaciones_de_teclas_de_Emacs\n+You_have_to_choose_exactly_two_entries_to_merge.=Tiene_que_escoger_exactamente_dos_entradas_para_fusionar.\n Update_timestamp_on_modification=Actualizar_marca_de_tiempo_al_modificar\n change_field=cambiar_campo\n-Automatically_set_file_links=Establecer_enlaces_de_archivo_autom\\u00e1ticamente\n All_key_bindings_will_be_reset_to_their_defaults.=Todas_las_combinaciones_de_teclas_ser\\u00e1n_restablecidas_a_su_configuraci\\u00f3n_por_defecto\n+Automatically_set_file_links=Establecer_enlaces_de_archivo_autom\\u00e1ticamente\n Continue?=\\u00bfContinuar?\n Resetting_all_key_bindings=Reestableciendo_todas_las_combinaciones_de_teclas\n Save_entries_ordered_by_title=Guardar_entradas_ordenadas_por_t\\u00edtulo\n@@ -1520,29 +1528,21 @@ Include_empty_fields=Incluir_campos_vac\\u00edos\n Field_saving_options=Opciones_de_guardado_de_campo\n Field_value_delimiter._E.g.,_\"author\\={x}\"_or_\"author\\='x'\"=Delimitador_de_valor_de_campo._Ej._\"author={x}\"_o_\"author='x'\"\n Run_Unicode_converter_on_title,_author(s),_and_abstract=Ejecutar_conversor_Unicode_en_t\\u00edtulo,_autor(es)_y_resumen\n-Start_field_contents_in_same_column=Comenzar_los_contenidos_del_campo_en_la_misma_columna\n-Use_camel_case_for_field_names_(e.g.,_\"HowPublished\"_instead_of_\"howpublished\")=Usar_camel_case_para_nombres_de_campo_UEj._\"VistaHermosa\"_en_lugar_de_\"vistahermosa\")\n Database_has_changed._Do_you_want_to_save_before_closing?=La_base_de_datos_ha_cambiado._\\u00bfDesea_guardar_antes_de_cerra?\n-Use_custom_proxy_configuration=Usar_configuraci\\u00f3n_de_proxy_personalizada\n-Network=Red\n Host=Host\n-Port=Puerto\n-Please_specify_both_hostname_and_port=Especifique_tanto_nombre_de_host_como_puerto\n Invalid_setting=Ajuste_inv\\u00e1lido\n-Automatically_set_file_links_for_this_entry=Ajustar enlaces de archivo autom\\u00c3\\u00a1ticamente para esta entrada\n+Network=Red\n+Please_specify_both_hostname_and_port=Especifique_tanto_nombre_de_host_como_puerto\n+Port=Puerto\n+Start_field_contents_in_same_column=Comenzar_los_contenidos_del_campo_en_la_misma_columna\n+Use_camel_case_for_field_names_(e.g.,_\"HowPublished\"_instead_of_\"howpublished\")=Usar_camel_case_para_nombres_de_campo_UEj._\"VistaHermosa\"_en_lugar_de_\"vistahermosa\")\n+Use_custom_proxy_configuration=Usar_configuraci\\u00f3n_de_proxy_personalizada\n Clear_connection_settings=Limpiar ajustes de conexi\\u00c3\\u00b3n\n Cleared_connection_settings.=Ajustes de conexi\\u00f3n limpiados\n-Collapse_all=Colapsar todo\n-Error_converting_BibTeX_to_XMP\\:_%0=Error convirtiendo BibTeX a XMP:_%0\n-Expand_all=Expandir todo\n-First_select_the_entries_you_want_keys_to_be_generated_for.=En primer lugar, seleccione las entradas para las que desea generar claves\n Rebind_C-a,_too=Volver a combinar C-a tambi\\u00c3\\u00a9n\n-Search_specified_field(s)=Buscar en campo(s) especificado(s)\n-Unselect_all=Deseleccionar todo\n-Waiting_for_save_operation_to_finish=Esperando a que acabe la operaci\\u00f3n de guardado\n Show_number_of_elements_contained_in_each_group=Mostrar n\\u00famero de elementos contenidos en cada grupo\n \n-Open_folder=\n-Opened_%0_folder(s).=\n+Open_folder=Abrir_carpeta\n+Opened_%0_folder(s).=Se_abrieron_%0_carpeta(s).\n \n-Searches_for_unlinked_PDF_files_on_the_file_system=\n+Searches_for_unlinked_PDF_files_on_the_file_system=Busca_archivos_PDF_sin_enlazar_en_el_sistema_de_archivos, @@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.54 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n %0_contains_the_Regular_Expression_<b>%1</b>=%0&nbsp;contient_l'expression_r\\u00e9guli\\u00e8re_<b>%1</b>\n %0_contains_the_term_<b>%1</b>=%0&nbsp;contient_le_terme_<b>%1</b>\n@@ -1516,8 +1516,8 @@ Run_HTML_converter_on_title=Lancer_le_convertisseur_HTML_sur_le_titre\n Searching...=Recherche...\n You_have_selected_more_than_%0_entries_for_download._Some_web_sites_might_block_you_if_you_make_too_many_rapid_downloads._Do_you_want_to_continue?=Vous_avez_s\\u00e9lectionn\\u00e9_plus_de_%0_entr\\u00e9es_\\u00e0_t\\u00e9l\\u00e9charger._Certains_sites_web_pourraient_vous_bloquer_si_vous_effectuez_de_trop_nombreux_et_rapides_t\\u00e9l\\u00e9chargements._Voulez-vous_continuer?\n Confirm_selection=Confirmez_la_s\\u00e9lection\n-Get_BibTeX_entry_from_DOI=Obtenir_l'entr\\u00e9e_BibTeX_\\u00e0_partir_du_DOI\n Unknown_DOI\\:_'%0'.=DOI_inconnu_:_'%0'.\n+Get_BibTeX_entry_from_DOI=Obtenir_l'entr\\u00e9e_BibTeX_\\u00e0_partir_du_DOI\n Prefer_converting_subscripts_and_superscripts_to_equations_rather_than_text=Conversion_des_indices_et_exposants_en_\\u00e9quations_plut\\u00f4t_qu'en_texte\n Add_{}_to_specified_title_words_on_search_to_keep_the_correct_case=Ajouter_{}_aux_mots_du_titre_sp\\u00e9cifi\\u00e9s_lors_d'une_recherche_pour_pr\\u00e9server_la_casse_correcte\n Import_conversions=Importer_les_conversions, @@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.54 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n %0_contains_the_Regular_Expression_<b>%1</b>=%0_mengandung_Ekspresi_Reguler_<b>%1</b>\n %0_contains_the_term_<b>%1</b>=%_mengandung_istilah_<b>%1</b>, @@ -1,5 +1,5 @@\n #!\n-#! edited by Eclipse PropertiesEditor\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n %0_contains_the_Regular_Expression_<b>%1</b>=%0_contiene_l'Espressione_Regolare_<b>%1</b>\n %0_contains_the_term_<b>%1</b>=%0_contiene_il_termine_<b>%1</b>\n@@ -1429,6 +1429,9 @@ Show=Mostra\n This_is_a_simple_copy_and_paste_dialog._First_load_or_paste_some_text_into_the_text_input_area.<br>After_that,_you_can_mark_text_and_assign_it_to_a_BibTeX_field.=Questo_\\u00e8_un_semplice_dialogo_di_copia_e_incolla._Prima_carica_o_incolla_il_testo_nell'area_di_inserimento_di_testo.<BR>Quindi_\\u00e8_possibile_selezionare_parti_del_testo_e_assegnarle_ai_campi_BibTeX.\n Java_Bouncy_Castle_library_not_found._Please_download_and_install_it._For_more_information_see_http\\://www.bouncycastle.org/.=La_libreria_Java_Bouncy_Castle_non_\\u00e8_stata_trovata._\\u00c8_necessario_scaricarla_ed_installarla._Per_ulteriori_informazioni_vedi_http://www.bouncycastle.org/.\n \n+This_feature_generates_a_new_database_based_on_which_entries_are_needed_in_an_existing_LaTeX_document.=Questa_funzione_genera_un_nuovo_database_basato_sulle_voci_necessarie_in_un_documento_LaTeX_esistente.\n+You_need_to_select_one_of_your_open_databases_from_which_to_choose_entries,_as_well_as_the_AUX_file_produced_by_LaTeX_when_compiling_your_document.=\\u00c8_necessario_selezionare_uno_dei_database_aperti_da_cui_scegliere_le_voci,_cos\\u00ec_come_il_file_AUX_prodotto_da_LaTeX_nel_compilare_il_documento.\n+\n First_select_entries_to_clean_up.=Selezionare_le_voci_da_ripulire.\n Cleanup_entry=Ripulisci_voce\n Autogenerate_PDF_Names=Genera_automaticamente_i_nomi_dei_file_PDF\n@@ -1443,6 +1446,7 @@ Autocomplete_after_following_number_of_characters=Attiva_autocompletamento_dopo_\n Name_format_used_for_autocompletion=Formato_dei_nomi_usato_per_l'autocompletamento\n Treatment_of_first_names=Gestione_dei_nomi\n Cleanup_entries=Ripulisci_voci\n+Automatically_assign_new_entry_to_selected_groups=Assegna_automaticamente_la_nuova_voce_ai_gruppi_selezionati\n Move_DOIs_from_note_and_URL_field_to_DOI_field_and_remove_http_prefix=Sposta_i_DOI_dai_campi_note_e_URL_al_campo_DOI_e_rimuovi_il_prefisso_'http'\n Format_content_of_month_field_to_#mon#=Formatta_il_contenuto_del_campo_'month'_nella_forma_'#mon#'\n Ensure_that_page_ranges_are_of_the_form_num1--num2=Assicura_che_gli_intervalli_di_pagine_siano_nella_forma_'num1--num2'\n@@ -1454,12 +1458,8 @@ Doing_a_cleanup_for_%0_entries...=Ripulitura_per_%0_voci...\n No_entry_needed_a_clean_up=Nessuna_voce_necessita_ripulitura\n One_entry_needed_a_clean_up=Una_voce_necessita_ripulitura\n %0_entries_needed_a_clean_up=%0_voci_necessitano_ripulitura\n-Minimize_to_system_tray=Minimizza_nell'area_di_notifica\n-\n-This_feature_generates_a_new_database_based_on_which_entries_are_needed_in_an_existing_LaTeX_document.=Questa_funzione_genera_un_nuovo_database_basato_sulle_voci_necessarie_in_un_documento_LaTeX_esistente.\n-You_need_to_select_one_of_your_open_databases_from_which_to_choose_entries,_as_well_as_the_AUX_file_produced_by_LaTeX_when_compiling_your_document.=\\u00c8_necessario_selezionare_uno_dei_database_aperti_da_cui_scegliere_le_voci,_cos\\u00ec_come_il_file_AUX_prodotto_da_LaTeX_nel_compilare_il_documento.\n-Automatically_assign_new_entry_to_selected_groups=Assegna_automaticamente_la_nuova_voce_ai_gruppi_selezionati\n Error_importing_from_database=Errore_di_importazione_dal_database\n+Minimize_to_system_tray=Minimizza_nell'area_di_notifica\n \n Error_downloading_file_'%0'=Errore_nel_corso_del_download_del_file_'%0'\n Download_failed=Download_fallito, @@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.54 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n \n %0_contains_the_Regular_Expression_<b>%1</b>=%0_bevat_de_regular_expression_<b>%1</b>\n@@ -1842,6 +1842,7 @@ This_feature_lets_new_files_be_opened_or_imported_into_an_already_running_instan\n Note_that_these_settings_are_used_for_the_legacy_<b>pdf</b>_and_<b>ps</b>_fields_only.<br>For_most_users,_setting_the_<b>Main_file_directory</b>_above_should_be_sufficient.=\n Legacy_file_fields=\n This_makes_JabRef_look_up_each_%0_extension_and_check_if_the_file_exists._If_not,_you_will_be_given_options<BR>to_resolve_the_problem.=\n+Run_Fetcher,_e.g._\"--fetch\\=Medline\\:cancer\"=\n The_ACM_Digital_Library=\n Reset=\n Use_IEEE_LaTeX_abbreviations=\n@@ -2306,7 +2307,6 @@ Import_Metadata_From_PDF=\n Not_connected_to_any_Writer_document._Please_make_sure_a_document_is_open,_and_use_the_'Select_Writer_document'_button_to_connect_to_it.=\n Please_note_that_this_is_an_early_beta_version._Do_not_use_it_without_backing_up_your_files!=\n Removed_all_subgroups_of_group_\"%0\".=\n-Run_Fetcher,_e.g._\"--fetch\\=Medline\\:cancer\"=\n To_disable_the_memory_stick_mode_rename_or_remove_the_jabref.xml_file_in_the_same_folder_as_JabRef.=\n Unable_to_connect._One_possible_reason_is_that_JabRef_and_OpenOffice/LibreOffice_are_not_both_running_in_either_32_bit_mode_or_64_bit_mode.=\n Unable_to_determine_plugin_name_and_version._This_may_not_be_a_valid_JabRef_plugin.=, @@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.54 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n \n %0_contains_the_Regular_Expression_<b>%1</b>=%0_inneholder_regul\\u00e6ruttrykket_<b>%1</b>\n@@ -100,6 +100,7 @@ All_fields=Alle_felter\n All_subgroups_(recursively)=Alle_undergrupper_(rekursivt)\n \n Allow_editing_in_table_cells=Tillat_redigering_av_celler_i_tabellen\n+An_Error_occurred_while_fetching_from_OAI2_source_(%0)\\:=En_feil_oppsto_under_nedlasting_fra_OIA2_source_(%0):\n \n An_Exception_ocurred_while_accessing_'%0'=En_feil_oppsto_ved_lesing_av_'%0'\n \n@@ -2610,6 +2611,13 @@ You_must_select_either_a_valid_style_file,_or_use_a_default_style.=Du_m\\u00e5_en\n \n Show=Vis\n \n+This_is_a_simple_copy_and_paste_dialog._First_load_or_paste_some_text_into_the_text_input_area.<br>After_that,_you_can_mark_text_and_assign_it_to_a_BibTeX_field.=Dette_er_et_enkelt_klipp-og-lim-vindu._F\\u00f8rst_last_inn_eller_lim_inn_tekst_i_tekstfeltet.<br>Deretter_kan_du_merke_tekst_og_tilordne_den_til_BibTeX-felter.\n+Java_Bouncy_Castle_library_not_found._Please_download_and_install_it._For_more_information_see_http\\://www.bouncycastle.org/.=Java_Bouncy_Castle-bibliotek_ikke_tilgjengelig._For_\\u00e5_f\\u00e5_tilgang_til_dette_kan_du_installere_det._For_mer_informasjon,_se_http://www.bouncycastle.org/.\n+\n+This_feature_generates_a_new_database_based_on_which_entries_are_needed_in_an_existing_LaTeX_document.=Denne_funksjonen_genererer_en_ny_database_basert_p\\u00e5_hvilke_enheter_som_trengs_i_et_eksisterende_LaTeX-dokument.\n+\n+You_need_to_select_one_of_your_open_databases_from_which_to_choose_entries,_as_well_as_the_AUX_file_produced_by_LaTeX_when_compiling_your_document.=Du_m\\u00e5_velge_en_av_de_\\u00e5pne_databasene_hvor_enheter_skal_hentes_fra,_i_tillegg_til_AUX-filen_generert_av_LaTeX_n\\u00e5r_dokumentet_kompileres.\n+\n First_select_entries_to_clean_up.=\n Cleanup_entry=\n Autogenerate_PDF_Names=\n@@ -2625,6 +2633,8 @@ Name_format_used_for_autocompletion=\n Treatment_of_first_names=\n Cleanup_entries=\n \n+Automatically_assign_new_entry_to_selected_groups=Tilordne_automatisk_nye_enheter_til_valgte_grupper\n+\n Move_DOIs_from_note_and_URL_field_to_DOI_field_and_remove_http_prefix=\n Format_content_of_month_field_to_#mon#=\n Ensure_that_page_ranges_are_of_the_form_num1--num2=\n@@ -2637,16 +2647,8 @@ No_entry_needed_a_clean_up=\n One_entry_needed_a_clean_up=\n %0_entries_needed_a_clean_up=\n \n-This_is_a_simple_copy_and_paste_dialog._First_load_or_paste_some_text_into_the_text_input_area.<br>After_that,_you_can_mark_text_and_assign_it_to_a_BibTeX_field.=Dette_er_et_enkelt_klipp-og-lim-vindu._F\\u00f8rst_last_inn_eller_lim_inn_tekst_i_tekstfeltet.<br>Deretter_kan_du_merke_tekst_og_tilordne_den_til_BibTeX-felter.\n-Java_Bouncy_Castle_library_not_found._Please_download_and_install_it._For_more_information_see_http\\://www.bouncycastle.org/.=Java_Bouncy_Castle-bibliotek_ikke_tilgjengelig._For_\\u00e5_f\\u00e5_tilgang_til_dette_kan_du_installere_det._For_mer_informasjon,_se_http://www.bouncycastle.org/.\n-\n-This_feature_generates_a_new_database_based_on_which_entries_are_needed_in_an_existing_LaTeX_document.=Denne_funksjonen_genererer_en_ny_database_basert_p\\u00e5_hvilke_enheter_som_trengs_i_et_eksisterende_LaTeX-dokument.\n-\n-You_need_to_select_one_of_your_open_databases_from_which_to_choose_entries,_as_well_as_the_AUX_file_produced_by_LaTeX_when_compiling_your_document.=Du_m\\u00e5_velge_en_av_de_\\u00e5pne_databasene_hvor_enheter_skal_hentes_fra,_i_tillegg_til_AUX-filen_generert_av_LaTeX_n\\u00e5r_dokumentet_kompileres.\n-\n-Automatically_assign_new_entry_to_selected_groups=Tilordne_automatisk_nye_enheter_til_valgte_grupper\n-\n Error_importing_from_database=Feil_ved_import_fra_database\n+Minimize_to_system_tray=\n \n Error_downloading_file_'%0'=Feil_ved_nedlasting_av_filen_'%0'\n Download_failed=Nedlasting_mislyktes\n@@ -2665,8 +2667,6 @@ Please_select_which_JabRef_databases_do_you_want_to_import\\:=Vennligst_velg_hvil\n \n Group_tree_could_not_be_parsed._If_you_save_the_BibTeX_database,_all_groups_will_be_lost.=\n Attach_file=\n-Minimize_to_system_tray=\n-An_Error_occurred_while_fetching_from_OAI2_source_(%0)\\:=En_feil_oppsto_under_nedlasting_fra_OIA2_source_(%0):\n \n Setting_all_preferences_to_default_values.=\n Resetting_preference_key_'%0'=, None, None, @@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.54 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n \n %0_contains_the_Regular_Expression_<b>%1</b>=%0%0&nbsp;ch\\u1ee9a_bi\\u1ec3u_th\\u1ee9c_ch\\u00ednh_t\\u1eafc_<b>%1</b>, @@ -1,5 +1,5 @@\n #!\n-#! created/edited by Popeye version 0.54 (popeye.sourceforge.net)\n+#! created/edited by Popeye version 0.55 (https://github.com/koppor/popeye)\n #! encoding:ISO-8859-1\n \n %0_contains_the_Regular_Expression_<b>%1</b>=%0_\\u5305\\u542b\\u6b63\\u5219\\u8868\\u8fbe\\u5f0f_<b>%1</b>, ", 3335, 3335, "\"modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, \"", 6670], ["was123", "Update JabRef_in.properties\n\nIndonesian translation added", "03/18/14, 12:01:58 AM", "was123", "5eb77ba20c79e6e53e0ab04c2da502288928a87a", ["src/resource/JabRef_in.properties"], "@@ -1304,10 +1304,10 @@ Style_selection=Pilihan_gaya\n The_panel_below_shows_the_definition_of_the_default_style.=Panel_dibawah_menampilkan_definisi_dari_gaya_bawaan\n If_you_want_to_use_it_as_a_template_for_a_new_style,_you_can_copy_the_contents_into_a_new_.jstyle_file=Jika_anda_menginginkan_sebagai_templet_untuk_gaya_baru,_anda_bisa_menyalin_isi_ke_berkas_baru_.jstyle\n \n-Default_style_(author-year_citations)=\n-Default_style_(numerical_citations)=\n-No_valid_style_file_defined=\n-Choose_pattern=\n+Default_style_(author-year_citations)=Gaya_bawaan_(acuan_penulis_tahun)\n+Default_style_(numerical_citations)=Gaya_bawaan_(acuan_numerik)\n+No_valid_style_file_defined=(gaya_yang_sah_tidak_ditemukan)\n+Choose_pattern=Pilih_pola\n Use_the_bib_file_location_as_primary_file_directory=\n Could_not_run_the_gnuclient/emacsclient_program._Make_sure_you_have_the_emacsclient/gnuclient_program_installed_and_available_in_the_PATH.=\n Built-in_journal_list=, ", 4, 4, "\"modified, \"", 8], ["Olaf Lenz", "Fixed splash-dev.svg", "03/19/14, 07:41:29 PM", "Olaf Lenz", "57427502055b834b2cbad35f3514ec8003c5ac7a", ["src/images/splash-dev.svg"], "@@ -79,18 +79,18 @@\n        width=\"572.00000\"\n        patternUnits=\"userSpaceOnUse\">\n       <image\n-         sodipodi:absref=\"/auto.anoa/home/olenz/projects/software/jabref/src/src/images/behandlet.png\"\n+         sodipodi:absref=\"/home/olenz/projects/software/jabref/src/src/images/behandlet.png\"\n          xlink:href=\"behandlet.png\"\n-         transform=\"translate(-231.0000,-284.3622)\"\n-         style=\"opacity:1.0000000;stroke:#000000;stroke-width:5.0000000;stroke-miterlimit:4.0000000;stroke-dasharray:none;stroke-opacity:1.0000000\"\n-         inkscape:export-ydpi=\"90.000000\"\n-         inkscape:export-xdpi=\"90.000000\"\n-         inkscape:export-filename=\"/home/alver/Desktop/bilder/jabref/splash4.png\"\n-         y=\"284.36218\"\n-         x=\"231.00000\"\n-         width=\"572.00000\"\n+         id=\"image9050\"\n          height=\"428.00000\"\n-         id=\"image9050\" />\n+         width=\"572.00000\"\n+         x=\"231.00000\"\n+         y=\"284.36218\"\n+         inkscape:export-filename=\"/home/alver/Desktop/bilder/jabref/splash4.png\"\n+         inkscape:export-xdpi=\"90.000000\"\n+         inkscape:export-ydpi=\"90.000000\"\n+         style=\"opacity:1.0000000;stroke:#000000;stroke-width:5.0000000;stroke-miterlimit:4.0000000;stroke-dasharray:none;stroke-opacity:1.0000000\"\n+         transform=\"translate(-231.0000,-284.3622)\" />\n     </pattern>\n     <radialGradient\n        inkscape:collect=\"always\"\n@@ -136,14 +136,14 @@\n        r=\"135.88548\" />\n   </defs>\n   <sodipodi:namedview\n-     inkscape:window-y=\"-3\"\n-     inkscape:window-x=\"46\"\n-     inkscape:window-height=\"1180\"\n-     inkscape:window-width=\"1872\"\n-     inkscape:current-layer=\"svg2138\"\n+     inkscape:window-y=\"0\"\n+     inkscape:window-x=\"35\"\n+     inkscape:window-height=\"873\"\n+     inkscape:window-width=\"752\"\n+     inkscape:current-layer=\"layer1\"\n      inkscape:document-units=\"px\"\n-     inkscape:cy=\"225.8697\"\n-     inkscape:cx=\"22.10531\"\n+     inkscape:cy=\"305.8697\"\n+     inkscape:cx=\"342.10531\"\n      inkscape:zoom=\"1\"\n      inkscape:pageshadow=\"2\"\n      inkscape:pageopacity=\"0.0\"\n@@ -152,7 +152,7 @@\n      pagecolor=\"#ffffff\"\n      id=\"base\"\n      showgrid=\"false\"\n-     inkscape:window-maximized=\"1\"\n+     inkscape:window-maximized=\"0\"\n      fit-margin-top=\"0\"\n      fit-margin-left=\"0\"\n      fit-margin-right=\"0\"\n@@ -174,12 +174,13 @@\n      id=\"layer2\"\n      inkscape:label=\"Release splash\">\n     <image\n-       y=\"0\"\n-       x=\"1\"\n-       id=\"image3381\"\n-       xlink:href=\"file:///auto.anoa/home/olenz/projects/software/jabref/src/src/images/splash.png\"\n+       sodipodi:absref=\"/home/olenz/projects/software/jabref/src/src/images/splash-release.svg\"\n+       xlink:href=\"splash-release.svg\"\n+       width=\"576\"\n        height=\"432\"\n-       width=\"576\" />\n+       id=\"image3381\"\n+       x=\"1\"\n+       y=\"0\" />\n   </g>\n   <g\n      id=\"layer1\"\n@@ -204,7 +205,7 @@\n          style=\"font-size:85.91455841px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;text-align:start;line-height:100%;writing-mode:lr-tb;text-anchor:start;fill:#ff0000;fill-opacity:1;stroke:#ff6600;stroke-width:2.8878212;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;font-family:Bitstream Vera Sans\">dev</tspan></text>\n     <text\n        xml:space=\"preserve\"\n-       style=\"font-size:29.93491554px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans\"\n+       style=\"font-size:20.00000002px;font-style:normal;font-weight:bold;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans Bold;font-stretch:normal;font-variant:normal\"\n        x=\"510.92224\"\n        y=\"226.16539\"\n        id=\"text3244\"\n@@ -214,23 +215,23 @@\n          x=\"510.92224\"\n          y=\"226.16539\"\n          id=\"tspan3252\"\n-         style=\"font-size:23.9479332px;text-align:center;text-anchor:middle;fill:#ff0000\">This is a</tspan><tspan\n+         style=\"font-size:20.00000002px;text-align:center;text-anchor:middle;fill:#ff0000;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-weight:bold;font-style:normal;font-stretch:normal;font-variant:normal\">This is a</tspan><tspan\n          sodipodi:role=\"line\"\n          x=\"510.92224\"\n          y=\"256.10031\"\n          id=\"tspan3256\"\n-         style=\"font-size:23.9479332px;text-align:center;text-anchor:middle;fill:#ff0000\"><tspan\n-   style=\"font-weight:bold;-inkscape-font-specification:Sans Bold\"\n+         style=\"font-size:20.00000002px;text-align:center;text-anchor:middle;fill:#ff0000;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-weight:bold;font-style:normal;font-stretch:normal;font-variant:normal\"><tspan\n+   style=\"font-weight:bold;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-style:normal;font-stretch:normal;font-variant:normal;font-size:20.00000002px\"\n    id=\"tspan3266\">development version</tspan>.</tspan><tspan\n          sodipodi:role=\"line\"\n          x=\"510.92224\"\n          y=\"286.03522\"\n          id=\"tspan3258\"\n-         style=\"font-size:23.9479332px;text-align:center;text-anchor:middle;fill:#ff0000\">Features may</tspan><tspan\n+         style=\"font-size:20.00000002px;text-align:center;text-anchor:middle;fill:#ff0000;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-weight:bold;font-style:normal;font-stretch:normal;font-variant:normal\">Features may</tspan><tspan\n          sodipodi:role=\"line\"\n          x=\"510.92224\"\n          y=\"315.97015\"\n          id=\"tspan3260\"\n-         style=\"font-size:23.9479332px;text-align:center;text-anchor:middle;fill:#ff0000\">not work as expected.</tspan></text>\n+         style=\"font-size:20.00000002px;text-align:center;text-anchor:middle;fill:#ff0000;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-weight:bold;font-style:normal;font-stretch:normal;font-variant:normal\">not work as expected.</tspan></text>\n   </g>\n </svg>, ", 30, 29, "\"modified, \"", 59], ["noravanq", " I have implemented 2 features requested in Ticket #841.\n\n    The user can now specify an arbitrary number of file-link columns in te \"Entry table columns\" preferences tab, to be added to the main table. The user can any file types specified in the list of External File Types. The extra columns work exactly like the original file-link column.\n\n    For each file-link column whenever there are multiple files, the letter \"m\" is displayed at the bottom right corner of the icon.\n\n Committer: noravanq\n\n On branch master\n Changes to be committed:\n   (use \"git reset HEAD <file>...\" to unstage)\n\n\tmodified:   src/main/java/net/sf/jabref/GUIGlobals.java\n\tmodified:   src/main/java/net/sf/jabref/JabRefPreferences.java\n\tmodified:   src/main/java/net/sf/jabref/TableColumnsTab.java\n\tmodified:   src/main/java/net/sf/jabref/gui/MainTableFormat.java\n\tmodified:   src/main/java/net/sf/jabref/gui/MainTableSelectionListener.java\n\tmodified:   src/main/java/net/sf/jabref/gui/PreventDraggingJTableHeader.java", "03/23/14, 04:48:49 AM", "noravanq", "233203728c3168172527970b53b311be27f75474", ["src/main/java/net/sf/jabref/GUIGlobals.java", "src/main/java/net/sf/jabref/JabRefPreferences.java", "src/main/java/net/sf/jabref/TableColumnsTab.java", "src/main/java/net/sf/jabref/gui/MainTableFormat.java", "src/main/java/net/sf/jabref/gui/MainTableSelectionListener.java", "src/main/java/net/sf/jabref/gui/PreventDraggingJTableHeader.java"], "@@ -28,6 +28,8 @@\n import javax.swing.ImageIcon;\n import javax.swing.JLabel;\n \n+import javax.swing.SwingConstants;\n+import net.sf.jabref.external.ExternalFileType;\n import org.xnap.commons.gui.shortcut.EmacsKeyBindings;\n \n import net.sf.jabref.specialfields.Priority;\n@@ -411,6 +413,12 @@ public static void init() {\n         lab = new JLabel(getImage(\"psSmall\"));\n         lab.setToolTipText(Globals.lang(\"Open file\"));\n         tableIcons.put(GUIGlobals.FILE_FIELD, lab);\n+\n+        for(ExternalFileType fileType : Globals.prefs.getExternalFileTypeSelection()) {\n+            lab = new JLabel(fileType.getIcon());\n+            lab.setToolTipText(Globals.lang(\"Open \"+fileType.getName()+\" file\"));\n+            tableIcons.put(fileType.getName(), lab);\n+        }\n         \n         lab = new JLabel(Relevance.getInstance().getRepresentingIcon());\n         lab.setToolTipText(Relevance.getInstance().getToolTip());, @@ -424,6 +424,9 @@ private JabRefPreferences() {\n         defaults.put(\"fileColumn\", Boolean.TRUE);\n         defaults.put(\"arxivColumn\", Boolean.FALSE);\n \n+        defaults.put(\"extraFileColumns\", Boolean.FALSE);\n+        defaults.put(\"listOfFileColumns\",\"\");\n+\n         defaults.put(SpecialFieldsUtils.PREF_SPECIALFIELDSENABLED, SpecialFieldsUtils.PREF_SPECIALFIELDSENABLED_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY, SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_QUALITY, SpecialFieldsUtils.PREF_SHOWCOLUMN_QUALITY_DEFAULT);, @@ -33,6 +33,7 @@\n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.CellConstraints;\n import com.jgoodies.forms.layout.FormLayout;\n+import net.sf.jabref.external.ExternalFileType;\n \n class TableColumnsTab extends JPanel implements PrefsTab {\n \n@@ -44,6 +45,10 @@\n     private JabRefFrame frame;\n \n     private JCheckBox pdfColumn, urlColumn, fileColumn, arxivColumn;\n+\n+    private JCheckBox extraFileColumns;\n+    private JList listOfFileColumns;\n+\n     private JRadioButton preferUrl, preferDoi;\n \n     private JCheckBox showOneLetterHeadingForIconColumns;\n@@ -199,6 +204,22 @@ public void stateChanged(ChangeEvent arg0) {\n \t\t});\n \t\tarxivColumn = new JCheckBox(Globals.lang(\"Show ArXiv column\"));\n \n+\t\textraFileColumns = new JCheckBox(Globals.lang(\"Show Extra columns\"));\n+                extraFileColumns.addChangeListener(new ChangeListener() {\n+                        @Override\n+                        public void stateChanged(ChangeEvent arg0) {\n+                                listOfFileColumns.setEnabled(extraFileColumns.isSelected());\n+                        }\n+                });\n+                ExternalFileType[] fileTypes = Globals.prefs.getExternalFileTypeSelection();\n+                String[] fileTypeNames = new String[fileTypes.length];\n+                for(int i=0;i<fileTypes.length;i++) {\n+                    fileTypeNames[i]=fileTypes[i].getName();\n+                }\n+                listOfFileColumns = new JList(fileTypeNames);\n+                JScrollPane listOfFileColumnsScrollPane = new JScrollPane(listOfFileColumns);\n+                listOfFileColumns.setVisibleRowCount(3);\n+\n \t\t/*** begin: special table columns and special fields ***/\n \n \t\tHelpAction help = new HelpAction(frame.helpDiag, GUIGlobals.specialFieldsHelp);\n@@ -266,6 +287,9 @@ public void stateChanged(ChangeEvent event) {\n \t\tspecialTableColumnsBuilder.add(preferDoi, cc.xy(6, 5));\t\n \t\tspecialTableColumnsBuilder.add(arxivColumn, cc.xyw(5, 6, 2));\t\n \n+\t\tspecialTableColumnsBuilder.add(extraFileColumns, cc.xyw(5, 7, 2));\t\n+\t\tspecialTableColumnsBuilder.add(listOfFileColumnsScrollPane, cc.xywh(5, 8, 2, 3));\t\n+\n \t\tbuilder.append(specialTableColumnsBuilder.getPanel());\n \t\tbuilder.nextLine();\n \n@@ -300,6 +324,26 @@ public void setValues() {\n         fileColumn.setSelected(_prefs.getBoolean(\"fileColumn\"));\n         arxivColumn.setSelected(_prefs.getBoolean(\"arxivColumn\"));\n \n+        extraFileColumns.setSelected(_prefs.getBoolean(\"extraFileColumns\"));\n+        if(extraFileColumns.isSelected()) {\n+            String[] desiredColumns = _prefs.getStringArray(\"listOfFileColumns\");\n+            int listSize = listOfFileColumns.getModel().getSize();\n+            int[] indicesToSelect = new int[listSize];\n+            for(int i=0;i<listSize;i++) {\n+                indicesToSelect[i]=listSize+1;\n+                for(int j=0;j<desiredColumns.length;j++) {\n+                    if(listOfFileColumns.getModel().getElementAt(i).equals(desiredColumns[j])) {\n+                        indicesToSelect[i]=i;\n+                        break;\n+                    }\n+                }\n+            }\n+            listOfFileColumns.setSelectedIndices(indicesToSelect);\n+        }\n+        else {\n+            listOfFileColumns.setSelectedIndices(new int[] {});\n+        }\n+\n         /*** begin: special fields ***/\n \n         oldRankingColumn = _prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_RANKING);\n@@ -562,6 +606,19 @@ public void storeSettings() {\n \t\t_prefs.putBoolean(\"urlColumn\", urlColumn.isSelected());\n \t\t_prefs.putBoolean(\"preferUrlDoi\", preferDoi.isSelected());\n \t\t_prefs.putBoolean(\"arxivColumn\", arxivColumn.isSelected());\n+\n+\t\t_prefs.putBoolean(\"extraFileColumns\", extraFileColumns.isSelected());\n+                if(extraFileColumns.isSelected()&&!listOfFileColumns.isSelectionEmpty()) {\n+                    String[] selections = new String[listOfFileColumns.getSelectedIndices().length];\n+                    for(int i=0;i<selections.length;i++) {\n+                        selections[i]=listOfFileColumns.getModel().getElementAt(\n+                                listOfFileColumns.getSelectedIndices()[i]).toString();\n+                    }\n+                    _prefs.putStringArray(\"listOfFileColumns\", selections);\n+                }\n+                else {\n+                    _prefs.putStringArray(\"listOfFileColumns\", new String[] {});\n+                }\n \t\t\n \t\t_prefs.putBoolean(JabRefPreferences.SHOWONELETTERHEADINGFORICONCOLUMNS, showOneLetterHeadingForIconColumns.isSelected());\n , @@ -35,6 +35,12 @@\n import net.sf.jabref.specialfields.SpecialFieldsUtils;\n import ca.odell.glazedlists.gui.TableFormat;\n import ca.odell.glazedlists.matchers.Matcher;\n+import java.awt.Color;\n+import java.awt.Graphics;\n+import java.awt.image.BufferedImage;\n+import javax.swing.Icon;\n+import javax.swing.ImageIcon;\n+import javax.swing.JLabel;\n \n /**\n  * Class defining the contents and column headers of the main table.\n@@ -173,6 +179,23 @@ public boolean isRankingColumn(int col) {\n         return false;\n     }\n \n+    private Object modifyIconForMultipleLinks(JLabel label) {\n+        Icon icon = label.getIcon();\n+        BufferedImage bufImg = new BufferedImage(\n+            icon.getIconWidth(),\n+            icon.getIconHeight(),\n+            BufferedImage.TYPE_INT_ARGB);\n+        Graphics g = bufImg.createGraphics();\n+        // paint the Icon to the BufferedImage.\n+        icon.paintIcon(null, g, 0,0);\n+        // add the letter \"m\" in the bottom right corner\n+        g.setColor(Color.BLACK);\n+        g.setFont(new java.awt.Font(\"Serif\", java.awt.Font.PLAIN, 12));\n+        g.drawString(\"m\",bufImg.getWidth() - g.getFontMetrics().stringWidth(\"m\"),bufImg.getHeight());\n+        g.dispose();\n+        return new JLabel(new ImageIcon(bufImg));\n+    }\n+    \n     public Object getColumnValue(BibtexEntry be, int col) {\n         Object o = null;\n         String[] iconType = getIconTypeForColumn(col); // If non-null, indicates an icon column's type.\n@@ -183,16 +206,21 @@ public Object getColumnValue(BibtexEntry be, int col) {\n \n         else if (iconType != null) {\n             int hasField = -1;\n-            for (int i = iconType.length - 1; i >= 0; i--)\n-                if (hasField(be, iconType[i]))\n-                    hasField = i;\n+\n+            int[] fieldCount = hasField(be,iconType);\n+            hasField=fieldCount[0];\n+\n             if (hasField < 0)\n                 return null;\n \n             // Ok, so we are going to display an icon. Find out which one, and return it:\n             if (iconType[hasField].equals(GUIGlobals.FILE_FIELD)) {\n                 o = FileListTableModel.getFirstLabel(be.getField(GUIGlobals.FILE_FIELD));\n \n+            if(fieldCount[1]>1) {\n+                o = modifyIconForMultipleLinks((JLabel)o);\n+            }\n+\n             // Handle priority column special\n             // Extra handling because the icon depends on a FieldValue\n             } else if (iconType[hasField].equals(PRIORITY[0])) {\n@@ -210,6 +238,10 @@ else if (iconType != null) {\n                 }\n             } else {\n                 o = GUIGlobals.getTableIcon(iconType[hasField]);\n+\n+                if(fieldCount[1]>1) {\n+                    o = modifyIconForMultipleLinks((JLabel)o);\n+                }\n             }\n         } else {\n             String[] fld = columns[col - padleft];\n@@ -265,6 +297,51 @@ public boolean hasField(BibtexEntry be, String field) {\n         return ((be != null) && (be.getField(field) != null));\n     }\n \n+    public int[] hasField(BibtexEntry be, String[] field) {\n+        // If the entry has a nonzero value in any of the\n+        // 'search' fields, returns the smallest index for which it does. \n+        // Otherwise returns -1. When field indicates one or more file types,\n+        // returns the index of the first present file type.\n+        if(be==null||field==null||field.length<1) {\n+            return new int[] {-1,-1};\n+        }\n+        int hasField=-1;\n+        if(!field[0].equals(GUIGlobals.FILE_FIELD)) {\n+            for (int i = field.length - 1; i >= 0; i--) {\n+                if (hasField(be, field[i])) {\n+                    hasField = i;\n+                }\n+            }\n+            return new int[] {hasField,-1};\n+        }\n+        else {\n+            // We use a FileListTableModel to parse the field content:\n+            Object o = be.getField(GUIGlobals.FILE_FIELD);\n+            FileListTableModel fileList = new FileListTableModel();\n+            fileList.setContent((String)o);\n+            if(field.length==1) {\n+                if(fileList.getRowCount()==0) {\n+                    return new int[] {-1,-1};\n+                }\n+                else {\n+                    return new int[] {0,fileList.getRowCount()};\n+                }\n+            }\n+            int lastLinkPosition=-1, countLinks = 0;\n+            for (int i = 1; i < field.length; i++) {\n+                // Count the number of links of correct type.\n+                for (int j=0; j<fileList.getRowCount(); j++) {\n+                    FileListEntry flEntry = fileList.getEntry(j);\n+                    if(flEntry.getType().toString().equals(field[i])) {\n+                        lastLinkPosition=i;\n+                        countLinks++;\n+                    }\n+                }\n+            }\n+            return new int[] {lastLinkPosition,countLinks};\n+        }\n+    }\n+\n     public void updateTableFormat() {\n \n         // Read table columns from prefs:\n@@ -318,6 +395,13 @@ public void updateTableFormat() {\n         if (Globals.prefs.getBoolean(\"arxivColumn\"))\n             iconCols.put(coln++, ARXIV);\n \n+        if (Globals.prefs.getBoolean(\"extraFileColumns\")) {\n+            String[] desiredColumns = Globals.prefs.getStringArray(\"listOfFileColumns\");\n+            for(int i=0;i<desiredColumns.length;i++) {\n+                iconCols.put(coln++, new String[] {GUIGlobals.FILE_FIELD,desiredColumns[i]});\n+            }\n+        }\n+\n         // Add 1 to the number of icon columns to get padleft.\n         padleft = 1 + iconCols.size();\n , @@ -35,13 +35,17 @@\n import net.sf.jabref.FocusRequester;\n import net.sf.jabref.GUIGlobals;\n import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.PreviewPanel;\n import net.sf.jabref.RightClickMenu;\n import net.sf.jabref.Util;\n import net.sf.jabref.external.ExternalFileMenuItem;\n import ca.odell.glazedlists.EventList;\n import ca.odell.glazedlists.event.ListEvent;\n import ca.odell.glazedlists.event.ListEventListener;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.List;\n import net.sf.jabref.specialfields.SpecialField;\n import net.sf.jabref.specialfields.SpecialFieldValue;\n import net.sf.jabref.specialfields.SpecialFieldsUtils;\n@@ -301,6 +305,14 @@ public void mouseClicked(MouseEvent e) {\n                 return;\n             final String fieldName = iconType[hasField];\n \n+            //If this is a file link field with specified file types,\n+            //we should also pass the types.\n+            String[] fileTypes={};\n+            if(hasField==0&&iconType[hasField].equals(GUIGlobals.FILE_FIELD)&&iconType.length>1) {\n+                fileTypes=iconType;\n+            }\n+            final List<String> listOfFileTypes = Collections.unmodifiableList(Arrays.asList(fileTypes));\n+\n             // Open it now. We do this in a thread, so the program won't freeze during the wait.\n             (new Thread() {\n                 public void run() {\n@@ -320,9 +332,33 @@ public void run() {\n                             // We use a FileListTableModel to parse the field content:\n                             FileListTableModel fileList = new FileListTableModel();\n                             fileList.setContent((String)link);\n-                            // If there are one or more links, open the first one:\n-                            if (fileList.getRowCount() > 0) {\n-                                FileListEntry flEntry = fileList.getEntry(0);\n+\n+                            FileListEntry flEntry=null;\n+                            // If there are one or more links of the correct type,\n+                            // open the first one:\n+                            if(listOfFileTypes.size()>0) {\n+                                for(int i=0;i<fileList.getRowCount();i++) {\n+                                    flEntry = fileList.getEntry(i);\n+                                    boolean correctType=false;\n+                                    for(int j=0;j<listOfFileTypes.size();j++) {\n+                                        if(flEntry.getType().toString().equals(listOfFileTypes.get(j))) {\n+                                            correctType=true;\n+                                        }\n+                                    }\n+                                    if(correctType) {\n+                                        break;\n+                                    }\n+                                    flEntry=null;\n+                                }\n+                            }\n+                            //If there are no file types specified, consider all files.\n+                            else if(fileList.getRowCount()>0) {\n+                                flEntry=fileList.getEntry(0);\n+                            }\n+                            if(flEntry!=null) {\n+//                            if (fileList.getRowCount() > 0) {\n+//                                FileListEntry flEntry = fileList.getEntry(0);\n+\n                                 ExternalFileMenuItem item = new ExternalFileMenuItem\n                                         (panel.frame(), entry, \"\",\n                                         flEntry.getLink(), flEntry.getType().getIcon(),\n@@ -403,6 +439,20 @@ private void showIconRightClickMenu(MouseEvent e, int row, String[] iconType) {\n             // If there are one or more links, open the first one:\n             for (int i=0; i<fileList.getRowCount(); i++) {\n                 FileListEntry flEntry = fileList.getEntry(i);\n+\n+                //If file types are specified, ignore files of other types.\n+                if(iconType.length>1) {\n+                    boolean correctType=false;\n+                    for(int j=1;j<iconType.length;j++) {\n+                        if(flEntry.getType().toString().equals(iconType[j])) {\n+                            correctType=true;\n+                        }\n+                    }\n+                    if(!correctType) {\n+                        continue;\n+                    }\n+                }\n+\n                 String description = flEntry.getDescription();\n                 if ((description == null) || (description.trim().length() == 0))\n                     description = flEntry.getLink();, @@ -21,6 +21,7 @@\n import javax.swing.table.TableColumnModel;\n \n import net.sf.jabref.Globals;\n+import net.sf.jabref.Util;\n import net.sf.jabref.specialfields.SpecialFieldsUtils;\n \n /**\n@@ -119,6 +120,10 @@ private int getSpecialColumnsCount() {\n         if (Globals.prefs.getBoolean(\"arxivColumn\")) {\n             count++;\n         }\n+\n+        if (Globals.prefs.getBoolean(\"extraFileColumns\")) {\n+            count+=Globals.prefs.getStringArray(\"listOfFileColumns\").length;\n+        }\n         \n         // special field columns may also not be dragged\n         if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SPECIALFIELDSENABLED)) {, ", 213, 6, "\"modified, modified, modified, modified, modified, modified, \"", 219], ["Adrian Daerr", "Erase fields listed in XMP Privacy Settings from PDF DocumentInformation when XMP-tagging", "04/22/14, 06:19:15 PM", "Adrian Daerr", "2360cb74d2e8d88e1bc705db36e885e44607642f", ["src/main/java/net/sf/jabref/util/XMPUtil.java"], "@@ -996,7 +996,20 @@ public static void writeDocumentInformation(PDDocument document,\n \t\tfor (String field : fields){\n \n \t\t\tif (useXmpPrivacyFilter && filters.contains(field)) {\n-\t\t\t\tcontinue;\n+                            // erase field instead of adding it\n+                            if (field.equals(\"author\")) {\n+\t\t\t\tdi.setAuthor(null);\n+                            } else if (field.equals(\"title\")) {\n+\t\t\t\tdi.setTitle(null);\n+                            } else if (field.equals(\"keywords\")) {\n+\t\t\t\tdi.setKeywords(null);\n+                            } else if (field.equals(\"abstract\")) {\n+\t\t\t\tdi.setSubject(null);\n+                            } else {\n+\t\t\t\tdi.setCustomMetadataValue(\"bibtex/\" + field,\n+                                                          null);\n+                            }\n+                            continue;\n \t\t\t}\n \n \t\t\tif (field.equals(\"author\")) {, ", 14, 1, "\"modified, \"", 15], ["Peter Ansell", "add CSIRO copyright 2014", "05/07/14, 01:02:09 AM", "Peter Ansell", "57cbe70e1be14f7b8f8754e05f6b722ed72ce887", ["src/main/java/net/sf/jabref/external/ACSPdfDownload.java"], "@@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2014 Commonwealth Scientific and Industrial Research Organisation\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or, ", 1, 1, "\"modified, \"", 2], ["Ling Wang", "fix bug causing double entries.", "05/20/14, 02:56:41 AM", "Ling Wang", "b6a89a81a983332d35420534a766d8dfabb6b81e", ["src/main/java/net/sf/jabref/BibtexEntry.java", "src/main/java/net/sf/jabref/BibtexEntryType.java", "testbib/testjabref.bib", "testbib/testjabref_210as292.bib", "testbib/testjabref_292.bib"], "@@ -421,8 +421,10 @@ public void write(Writer out, FieldFormatter ff, boolean write) throws IOExcepti\n             break;\n         case 1:\n             writeUnsorted(out, ff, write);\n+            break;\n         case 2:\n             writeUserOrder(out,ff,write);\n+            break;\n         }\n         \n         , @@ -84,7 +84,7 @@ public String getName()\n             {\n                 return new String[]\n                 {\n-                    \"volume\", \"number\", \"pages\", \"month\", \"note\", //- \"volume\", \"pages\", \"part\", \"eid\"\n+                    \"volume\", \"pages\", \"number\", \"month\", \"note\", //- \"volume\", \"pages\", \"part\", \"eid\"\n                 };\n             }\n , @@ -0,0 +1,313 @@\n+% This file was created with JabRef devel - 1st edition family.\n+% Encoding: UTF8\n+\n+\n+@Article{Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS,\n+  Title                    = {256-Channel Neural Recording and Delta Compression Microsystem With\n+ 3D Electrodes},\n+  Author                   = {Aziz, Joseph N. Y. and Abdelhalim, Karim and Shulyzki, Ruslana and\n+ Genov, Roman and Bardakjian, Berj L. and Derchansky, Miron and Serletis,\n+ Demitre and Carlen, Peter L.},\n+  Journal                  = {IEEE JOURNAL OF SOLID-STATE CIRCUITS},\n+  Year                     = {2009},\n+\n+  Month                    = {MAR},\n+  Number                   = {3},\n+  Pages                    = {995-1005},\n+  Volume                   = {44},\n+\n+  Abstract                 = {A 3D microsystem for multi-site penetrating extracellular neural recording\n+ from the brain is presented. A 16 x 16-channel neural recording interface\n+ integrated prototype fabricated in 0.35 mu m CMOS occupies 3.5 mm\n+ x 4.5 mm area. Each recording channel dissipates 15 mu W of power\n+ with input-referred noise of 7 mu V-rms over 5 kHz bandwidth. A switched-capacitor\n+ delta read-out data compression circuit trades recording accuracy\n+ for the output data rate. An array of 1.5 mm platinum-coated microelectrodes\n+ is bonded directly onto the die. Results of in vitro experimental\n+ recordings from intact mouse hippocampus validate the circuit design\n+ and the on-chip electrode bonding technology.},\n+  Address                  = {445 HOES LANE, PISCATAWAY, NJ 08855 USA},\n+  Affiliation              = {Aziz, JNY (Reprint Author), Broadcom, Irvine, CA 92617 USA. {[}Aziz,\n+ Joseph N. Y.; Abdelhalim, Karim; Shulyzki, Ruslana; Genov, Roman]\n+ Univ Toronto, Dept Elect \\& Comp Engn, Toronto, ON M5S 3G4, Canada.\n+ {[}Bardakjian, Berj L.] Univ Toronto, Inst Biomat \\& Biomed Engn,\n+ Edward S Rogers Sr Dept Elect \\& Comp Engn, Toronto, ON M5S 1A4,\n+ Canada. {[}Derchansky, Miron; Serletis, Demitre; Carlen, Peter L.]\n+ Univ Toronto, Toronto Western Res Inst, Toronto, ON M5S 1A4, Canada.\n+ {[}Derchansky, Miron; Serletis, Demitre; Carlen, Peter L.] Univ Toronto,\n+ Dept Physiol, Toronto, ON M5S 1A4, Canada.},\n+  Author-email             = {roman@eecg.utoronto.ca},\n+  Cited-references         = {ATLURI S, 2006, P IEEE INT S CIRC SY, P1131. AZIZ J, 2006, P IEEE\n+ INT S CIRC SY. AZIZ J, 2007, IEEE INT SOL STAT CI, P160. AZIZ JNY,\n+ 2006, P IEEE INT S CIRC SY, P5075. AZIZ JNY, 2007, IEEE T BIOMED\n+ CIRCUI, V1. AZIZ JNY, 2007, P IEEE INT S CIRC SY. CHAIMANONART N,\n+ 2005, P ANN INT IEEE EMBS, P5194. DELBRUCK T, 1994, P IEEE INT S\n+ CIRC SY, V4, P339. ENZ CC, 1996, P IEEE, V84, P1584. EVERSMANN B,\n+ 2003, IEEE J SOLID-ST CIRC, V38, P2306, DOI 10.1109/JSSC.2003.819174.\n+ HARRISON R, 2006, IEEE INT SOL STAT C, P2258. HARRISON RR, 2003,\n+ IEEE J SOLID-ST CIRC, V38, P958, DOI 10.1009/JSSC.2003.811979. HARRISON\n+ RR, 2007, IEEE CUST INTEGR CIR, P115. HEER F, 2006, IEEE J SOLID-ST\n+ CIRC, V41, P1620, DOI 10.1109/JSSC.2006.873677. KIM S, 2006, P 2006\n+ INT C IEEE EN, P2986. MALLIK U, 2005, IEEE ISSCC, P362. MOHSENI P,\n+ 2004, IEEE T BIO-MED ENG, V51, P832, DOI 10.1109/TBME.2004.824126.\n+ MOTCHENBACHER CD, 1993, LOW NOISE ELECT SYST. OLSSON RH, 2005, IEEE\n+ J SOLID-ST CIRC, V40, P2796. PATTERSON WR, 2004, IEEE T BIO-MED ENG,\n+ V51, P1845, DOI 10.1109/TBME.2004.831521. RILEY G, 1987, SURFACE\n+ MOUNT INT, P535. STEYAERT MSJ, 1987, IEEE J SOLID-ST CIRC, V22, P1163.\n+ TSIVIDIS Y, 2003, OPERATION MODELING M. WATTANAPANITCH W, 2007, IEEE\n+ T BIOMED CIRC S, V1, P136, DOI 10.1109/TBCAS.2007.907868. WISE KD,\n+ 2005, IEEE ENG MED BIOL, V24, P22.},\n+  Doc-delivery-number      = {415FE},\n+  Doi                      = {10.1109/JSSC.2008.2010997},\n+  File                     = {Draft:JabRef\\\\Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS_draft.pdf:PDF;Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS.pdf:JabRef\\\\Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS.pdf:PDF},\n+  ISSN                     = {0018-9200},\n+  Journal-iso              = {IEEE J. Solid-State Circuit},\n+  Keywords                 = {Multi-channel recording; microelectrodes; extracellular recording;\n+ electrode array; implantable; brain; hippocampus; delta compression;\n+ neural amplifier},\n+  Keywords-plus            = {AMPLIFIER; STABILIZATION; CIRCUIT; ARRAY},\n+  Language                 = {English},\n+  Number-of-cited-references = {25},\n+  Publisher                = {IEEE-INST ELECTRICAL ELECTRONICS ENGINEERS INC},\n+  Subject-category         = {Engineering, Electrical \\& Electronic},\n+  Times-cited              = {2},\n+  Timestamp                = {10.04.15.11.41},\n+  Type                     = {Article},\n+  Unique-id                = {ISI:000263918900029}\n+}\n+\n+@Article{BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering,\n+  Title                    = {Patterning PDMS using a combination of wet and dry etching},\n+  Author                   = {B Balakrisnan , S Patil and E Smela},\n+  Journal                  = {Journal of Micromechanics and Microengineering},\n+  Year                     = {2009},\n+  Number                   = {4},\n+  Pages                    = {047002},\n+  Volume                   = {19},\n+\n+  Abstract                 = {PDMS films of 10 \ufffdm thickness can be patterned within 30 min by combining\n+ dry etching to achieve substantially vertical sidewalls with wet\n+ etching to achieve high etch rates and to protect the underlying\n+ substrate from attack. Dry etching alone would have taken 5 h, and\n+ wet etching alone would produce severe undercutting. In addition,\n+ using either technique alone produces undesirable surface morphologies.\n+ The mask used during etching is critical to a successful patterning\n+ outcome. E-beam evaporated Al was found to work well, adhering strongly\n+ to oxygen-plasma-treated PDMS and holding up well during both dry\n+ and wet etching. To prevent wrinkling of the PDMS, a fast deposition\n+ rate should be used.},\n+  File                     = {BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering.pdf:JabRef\\\\BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering.pdf:PDF},\n+  Timestamp                = {09.06.17.13.03},\n+  Url                      = {http://stacks.iop.org/0960-1317/19/i=4/a=047002}\n+}\n+\n+@Article{Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA,\n+  Title                    = {Synaptic facilitation by reflected action potentials: enhancement\n+ of transmission when nerve impulses reverse direction at axon branch\n+ points.},\n+  Author                   = {S. A. Baccus},\n+  Journal                  = {Proc Natl Acad Sci U S A},\n+  Year                     = {1998},\n+\n+  Month                    = {Jul},\n+  Number                   = {14},\n+  Pages                    = {8345--8350},\n+  Volume                   = {95},\n+\n+  Abstract                 = {A rapid, reversible enhancement of synaptic transmission from a sensory\n+ neuron is reported and explained by impulses that reverse direction,\n+ or reflect, at axon branch points. In leech mechanosensory neurons,\n+ where one can detect reflection because it is possible simultaneously\n+ to study electrical activity in separate branches, action potentials\n+ reflected from branch points within the central nervous system under\n+ physiological conditions. Synapses adjacent to these branch points\n+ were activated twice in rapid succession, first by an impulse arriving\n+ from the periphery and then by its reflection. This fast double-firing\n+ facilitated synaptic transmission, increasing it to more than twice\n+ its normal level. Reflection occurred within a range of resting membrane\n+ potentials, and electrical activity produced by mechanical stimulation\n+ changed membrane potential so as to produce and cease reflection.\n+ A compartmental model was used to investigate how branch-point morphology\n+ and electrical activity contribute to produce reflection. The model\n+ shows that mechanisms that hyperpolarize the membrane so as to impair\n+ action potential propagation can increase the range of structures\n+ that can produce reflection. This suggests that reflection is more\n+ likely to occur in other structures where impulses fail, such as\n+ in axons and dendrites in the mammalian brain. In leech sensory neurons,\n+ reflection increased transmission from central synapses only in those\n+ axon branches that innervate the edges of the receptive field in\n+ the skin, thereby sharpening spatial contrast. Reflection thus allows\n+ a neuron to amplify synaptic transmission from a selected group of\n+ its branches in a way that can be regulated by electrical activity.},\n+  File                     = {Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA.pdf:JabRef\\\\Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA.pdf:PDF},\n+  Institution              = {Neuroscience Program, University of Miami, Miami, FL 33136, USA.\n+ sbaccus@mednet.med.miami.edu},\n+  Keywords                 = {Action Potentials, physiology; Animals; Axons, physiology; Electrophysiology;\n+ Ganglia, Invertebrate, physiology; Ganglia, Sensory, physiology;\n+ Leeches; Neurons, physiology; Synapses, physiology; Synaptic Transmission,\n+ physiology},\n+  Language                 = {eng},\n+  Medline-pst              = {ppublish},\n+  Pmid                     = {9653189},\n+  Timestamp                = {11.05.01.13.02}\n+}\n+\n+@Article{Brewer1995Serum-freeB27/neurobasalmediumsupportsdifferentiatedgrowthofneuronsfromthestriatumsubstantianigraseptumcerebralcortexcerebellumanddentategyrus.JNeurosciRes,\n+  Title                    = {Serum-free B27/neurobasal medium supports differentiated growth of\n+ neurons from the striatum, substantia nigra, septum, cerebral cortex,\n+ cerebellum, and dentate gyrus.},\n+  Author                   = {G. J. Brewer},\n+  Journal                  = {J Neurosci Res},\n+  Year                     = {1995},\n+\n+  Month                    = {Dec},\n+  Number                   = {5},\n+  Pages                    = {674--683},\n+  Volume                   = {42},\n+\n+  Abstract                 = {Two fundamental questions about neuron cell culture were addressed.\n+ Can one serum-free medium that was developed for optimum growth of\n+ hippocampal neurons support the growth of neurons from other regions\n+ of the brain? Is the region specific state of differentiation maintained\n+ in culture? To answer these questions, we isolated neurons from six\n+ other rat brain regions, placed them in culture in B27/Neurobasal\n+ defined medium, and analyzed their morphology and growth dependence\n+ on cell density after 4 days in culture. Neuronal identity was confirmed\n+ by immunostaining with antibodies to neurofilament 200. Neurons from\n+ each brain region maintained distinctive morphologies in culture\n+ in the virtual absence of glia. Cells isolated from embryonic day\n+ 18 cerebral cortex by digestion with papain showed the same high\n+ survival as hippocampal neurons, e.g., 70\\% survival for cells plated\n+ at 160/mm2. At this age and density, neurons from the septum showed\n+ slightly lower survival, 45\\%. Survival of dentate granule neurons\n+ from postnatal day four brains was 30-40\\%, significantly lower,\n+ and relatively independent of plating density. This suggests an absence\n+ of dependence on trophic factors or contact for dentate granule neurons.\n+ Growth of cerebellar granule neurons isolated from postnatal day\n+ 7, 8, or 9 brains in B27/Neurobasal was compared to growth in BME/10\\%\n+ serum. Viability in serum-free medium at 4 days was much better than\n+ that in serum, did not require KCl elevated to 25 mM, and occurred\n+ without substantial growth of glia. Cerebellar granule neurons plated\n+ at 1,280 cells/mm2 were maintained in culture for three weeks with\n+ 17\\% of the original cell density surviving. Survival of cells isolated\n+ from embryonic day 18 substantia nigra was 50\\% at 160 cells/mm2\n+ after 4 days, similar to that of striatum, but slightly less than\n+ hippocampal neuron survival. The dopaminergic phenotype of the substantia\n+ nigral neurons was maintained over 2 weeks in culture as judged by\n+ immunoreactivity with antibodies to tyrosine hydroxylase. During\n+ this time, immunoreactivity was found in the processes as they grew\n+ out from the soma. Together, these studies suggest that B27/Neurobasal\n+ will be a useful medium for maintaining the differentiated growth\n+ of neurons from many brain regions. Potential applications of a common\n+ growth medium for different neurons are discussed.},\n+  Doi                      = {10.1002/jnr.490420510},\n+  Institution              = {Southern Illinois University School of Medicine, Springfield 62794-1220,\n+ USA.},\n+  Keywords                 = {Animals; Brain, anatomy /&/ histology/cytology/enzymology; Cell Culture\n+ Techniques; Cell Survival; Cells, Cultured; Cerebellum, cytology/embryology;\n+ Cerebral Cortex, cytology/embryology; Corpus Striatum, cytology/embryology;\n+ Culture Media, Serum-Free; Dentate Gyrus, cytology/embryology; Electrophysiology;\n+ Hippocampus, cytology/embryology; Neurofilament Proteins, metabolism;\n+ Neurons, cytology/enzymology; Rats; Rats, Sprague-Dawley; Septum\n+ Pellucidum, embryology; Substantia Nigra, cytology/embryology; Tyrosine\n+ 3-Monooxygenase, metabolism},\n+  Pmid                     = {8600300},\n+  Timestamp                = {2008.12.12},\n+  Url                      = {http://dx.doi.org/10.1002/jnr.490420510}\n+}\n+\n+@Article{Brewer1997Isolationandcultureofadultrathippocampalneurons.JNeurosciMethods,\n+  Title                    = {Isolation and culture of adult rat hippocampal neurons.},\n+  Author                   = {G. J. Brewer},\n+  Journal                  = {J Neurosci Methods},\n+  Year                     = {1997},\n+\n+  Month                    = {Feb},\n+  Number                   = {2},\n+  Pages                    = {143--155},\n+  Volume                   = {71},\n+\n+  Abstract                 = {Inability to culture adult central neurons and the failure of injured\n+ neurons to regenerate in the brain could be due to genetic controls\n+ or environmental inhibitors. We tested the environmental inhibitor\n+ hypothesis by attempting to regenerate adult rat neurons in B27/Neurobasal\n+ culture medium, a medium optimized for survival of embryonic neurons.\n+ To isolate neurons from their numerous connections, papain was the\n+ best of six different proteases screened on slices of hippocampus\n+ for survival of isolated cells after 4 days of culture. Use of a\n+ density gradient enabled separation of oligodendroglia and some enrichment\n+ of neurons and microglia from considerable debris which was inhibitory\n+ to sprouting and viability. With these techniques, about 900000 viable\n+ neurons were isolated from each hippocampus of any age rat from birth\n+ to 24-36 months, near the median mortality. FGF2 was found to enhance\n+ viability at least 3-fold to 40-80\\%, independent of age, without\n+ affecting the length of the processes. Neurons were cultured for\n+ more than 3 weeks. These methods demonstrate that hippocampal neurons\n+ can regenerate axons and dendrites if provided with adequate nutrition\n+ and if inhibitors are removed. They also will enable aging studies.\n+ Therefore, the concept of environmental growth restriction may be\n+ more appropriate for neurons in the brain than the concept of a genetic\n+ block that precludes regeneration of processes.},\n+  Institution              = {Department of Medical Microbiology and Immunology, Southern Illinois\n+ University School of Medicine, Springfield 62794-1220, USA. gbrewer@siumed.edu},\n+  Keywords                 = {Age Factors; Animals; Cell Adhesion, physiology; Cell Culture Techniques,\n+ methods; Cell Separation, methods; Cell Survival, physiology; Cells,\n+ Cultured; Cerebral Cortex, cytology; Dose-Response Relationship,\n+ Drug; Fibroblast Growth Factor 2, physiology; Glutamic Acid, pharmacology;\n+ Hippocampus, cytology; Male; Neurons, cytology/drug effects; Osmolar\n+ Concentration; Oxygen, pharmacology; Papain; Rats; Rats, Inbred F344;\n+ Rats, Sprague-Dawley},\n+  Pii                      = {S0165-0270(96)00136-7},\n+  Pmid                     = {9128149},\n+  Timestamp                = {09.02.26.19.31}\n+}\n+\n+@Article{Brewer2008NbActiv4mediumimprovementtoNeurobasal/B27increasesneuronsynapsedensitiesandnetworkspikeratesonmultielectrodearrays.JNeurosciMethods,\n+  Title                    = {NbActiv4 medium improvement to Neurobasal/B27 increases neuron synapse\n+ densities and network spike rates on multielectrode arrays.},\n+  Author                   = {Gregory J Brewer and Michael D Boehler and Torrie T Jones and Bruce\n+ C Wheeler},\n+  Journal                  = {J Neurosci Methods},\n+  Year                     = {2008},\n+\n+  Month                    = {May},\n+  Number                   = {2},\n+  Pages                    = {181--187},\n+  Volume                   = {170},\n+\n+  Abstract                 = {The most interesting property of neurons is their long-distance propagation\n+ of signals as spiking action potentials. Since 1993, Neurobasal/B27\n+ has been used as a serum-free medium optimized for hippocampal neuron\n+ survival. Neurons on microelectrode arrays (MEA) were used as an\n+ assay system to increase spontaneous spike rates in media of different\n+ compositions. We find spike rates of 0.5 s(-1) (Hz) for rat embryonic\n+ hippocampal neurons cultured in Neurobasal/B27, lower than cultures\n+ in serum-based media and offering an opportunity for improvement.\n+ NbActiv4 was formulated by addition of creatine, cholesterol and\n+ estrogen to Neurobasal/B27 that synergistically produced an eightfold\n+ increase in spontaneous spike activity. The increased activity with\n+ NbActiv4 correlated with a twofold increase in immunoreactive synaptophysin\n+ bright puncta and GluR1 total puncta. Characteristic of synaptic\n+ scaling, immunoreactive GABAAbeta puncta also increased 1.5-fold\n+ and NMDA-R1 puncta increased 1.8-fold. Neuron survival in NbActiv4\n+ equaled that in Neurobasal/B27, but with slightly higher astroglia.\n+ Resting respiratory demand was decreased and demand capacity was\n+ increased in NbActiv4, indicating less stress and higher efficiency.\n+ These results show that NbActiv4 is an improvement to Neurobasal/B27\n+ for cultured networks with an increased density of synapses and transmitter\n+ receptors which produces higher spontaneous spike rates in neuron\n+ networks.},\n+  Doi                      = {10.1016/j.jneumeth.2008.01.009},\n+  Institution              = {Southern Illinois University School of Medicine, Springfield, IL\n+ 62794-9626, USA. gbrewer@siumed.edu},\n+  Keywords                 = {Cell Survival; Cells, Cultured; Culture Media; Electrophysiology;\n+ Hippocampus, cytology; Humans; Image Processing, Computer-Assisted;\n+ Immunohistochemistry; Kinetics; Microelectrodes; Nerve Net, physiology;\n+ Neurons, physiology; Oxygen Consumption, physiology; Oxygen, analysis;\n+ Synapses, physiology},\n+  Pii                      = {S0165-0270(08)00039-3},\n+  Pmid                     = {18308400},\n+  Timestamp                = {09.02.26.19.31},\n+  Url                      = {http://dx.doi.org/10.1016/j.jneumeth.2008.01.009}\n+}\n+, @@ -0,0 +1,482 @@\n+% This file was created with JabRef devel - 1st edition family.\n+% Encoding: UTF8\n+\n+\n+@ARTICLE{Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS,\n+  author = {Aziz, Joseph N. Y. and Abdelhalim, Karim and Shulyzki, Ruslana and\n+\t\n+\t Genov, Roman and Bardakjian, Berj L. and Derchansky, Miron and Serletis,\n+\t\n+\t Demitre and Carlen, Peter L.},\n+  title = {256-Channel Neural Recording and Delta Compression Microsystem With\n+\t\n+\t 3D Electrodes},\n+  journal = {IEEE JOURNAL OF SOLID-STATE CIRCUITS},\n+  year = {2009},\n+  volume = {44},\n+  pages = {995-1005},\n+  number = {3},\n+  month = {MAR},\n+  abstract = {A 3D microsystem for multi-site penetrating extracellular neural recording\n+\t\n+\t from the brain is presented. A 16 x 16-channel neural recording interface\n+\t\n+\t integrated prototype fabricated in 0.35 mu m CMOS occupies 3.5 mm\n+\t\n+\t x 4.5 mm area. Each recording channel dissipates 15 mu W of power\n+\t\n+\t with input-referred noise of 7 mu V-rms over 5 kHz bandwidth. A switched-capacitor\n+\t\n+\t delta read-out data compression circuit trades recording accuracy\n+\t\n+\t for the output data rate. An array of 1.5 mm platinum-coated microelectrodes\n+\t\n+\t is bonded directly onto the die. Results of in vitro experimental\n+\t\n+\t recordings from intact mouse hippocampus validate the circuit design\n+\t\n+\t and the on-chip electrode bonding technology.},\n+  address = {445 HOES LANE, PISCATAWAY, NJ 08855 USA},\n+  affiliation = {Aziz, JNY (Reprint Author), Broadcom, Irvine, CA 92617 USA. {[}Aziz,\n+\t\n+\t Joseph N. Y.; Abdelhalim, Karim; Shulyzki, Ruslana; Genov, Roman]\n+\t\n+\t Univ Toronto, Dept Elect \\& Comp Engn, Toronto, ON M5S 3G4, Canada.\n+\t\n+\t {[}Bardakjian, Berj L.] Univ Toronto, Inst Biomat \\& Biomed Engn,\n+\t\n+\t Edward S Rogers Sr Dept Elect \\& Comp Engn, Toronto, ON M5S 1A4,\n+\t\n+\t Canada. {[}Derchansky, Miron; Serletis, Demitre; Carlen, Peter L.]\n+\t\n+\t Univ Toronto, Toronto Western Res Inst, Toronto, ON M5S 1A4, Canada.\n+\t\n+\t {[}Derchansky, Miron; Serletis, Demitre; Carlen, Peter L.] Univ Toronto,\n+\t\n+\t Dept Physiol, Toronto, ON M5S 1A4, Canada.},\n+  author-email = {roman@eecg.utoronto.ca},\n+  cited-references = {ATLURI S, 2006, P IEEE INT S CIRC SY, P1131. AZIZ J, 2006, P IEEE\n+\t\n+\t INT S CIRC SY. AZIZ J, 2007, IEEE INT SOL STAT CI, P160. AZIZ JNY,\n+\t\n+\t 2006, P IEEE INT S CIRC SY, P5075. AZIZ JNY, 2007, IEEE T BIOMED\n+\t\n+\t CIRCUI, V1. AZIZ JNY, 2007, P IEEE INT S CIRC SY. CHAIMANONART N,\n+\t\n+\t 2005, P ANN INT IEEE EMBS, P5194. DELBRUCK T, 1994, P IEEE INT S\n+\t\n+\t CIRC SY, V4, P339. ENZ CC, 1996, P IEEE, V84, P1584. EVERSMANN B,\n+\t\n+\t 2003, IEEE J SOLID-ST CIRC, V38, P2306, DOI 10.1109/JSSC.2003.819174.\n+\t\n+\t HARRISON R, 2006, IEEE INT SOL STAT C, P2258. HARRISON RR, 2003,\n+\t\n+\t IEEE J SOLID-ST CIRC, V38, P958, DOI 10.1009/JSSC.2003.811979. HARRISON\n+\t\n+\t RR, 2007, IEEE CUST INTEGR CIR, P115. HEER F, 2006, IEEE J SOLID-ST\n+\t\n+\t CIRC, V41, P1620, DOI 10.1109/JSSC.2006.873677. KIM S, 2006, P 2006\n+\t\n+\t INT C IEEE EN, P2986. MALLIK U, 2005, IEEE ISSCC, P362. MOHSENI P,\n+\t\n+\t 2004, IEEE T BIO-MED ENG, V51, P832, DOI 10.1109/TBME.2004.824126.\n+\t\n+\t MOTCHENBACHER CD, 1993, LOW NOISE ELECT SYST. OLSSON RH, 2005, IEEE\n+\t\n+\t J SOLID-ST CIRC, V40, P2796. PATTERSON WR, 2004, IEEE T BIO-MED ENG,\n+\t\n+\t V51, P1845, DOI 10.1109/TBME.2004.831521. RILEY G, 1987, SURFACE\n+\t\n+\t MOUNT INT, P535. STEYAERT MSJ, 1987, IEEE J SOLID-ST CIRC, V22, P1163.\n+\t\n+\t TSIVIDIS Y, 2003, OPERATION MODELING M. WATTANAPANITCH W, 2007, IEEE\n+\t\n+\t T BIOMED CIRC S, V1, P136, DOI 10.1109/TBCAS.2007.907868. WISE KD,\n+\t\n+\t 2005, IEEE ENG MED BIOL, V24, P22.},\n+  doc-delivery-number = {415FE},\n+  doi = {10.1109/JSSC.2008.2010997},\n+  file = {Draft:JabRef\\\\Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS_draft.pdf:PDF;Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS.pdf:JabRef\\\\Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS.pdf:PDF},\n+  issn = {0018-9200},\n+  journal-iso = {IEEE J. Solid-State Circuit},\n+  keywords = {Multi-channel recording; microelectrodes; extracellular recording;\n+\t\n+\t electrode array; implantable; brain; hippocampus; delta compression;\n+\t\n+\t neural amplifier},\n+  keywords-plus = {AMPLIFIER; STABILIZATION; CIRCUIT; ARRAY},\n+  language = {English},\n+  number-of-cited-references = {25},\n+  publisher = {IEEE-INST ELECTRICAL ELECTRONICS ENGINEERS INC},\n+  subject-category = {Engineering, Electrical \\& Electronic},\n+  times-cited = {2},\n+  timestamp = {10.04.15.11.41},\n+  type = {Article},\n+  unique-id = {ISI:000263918900029}\n+}\n+\n+@ARTICLE{BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering,\n+  author = {B Balakrisnan , S Patil and E Smela},\n+  title = {Patterning PDMS using a combination of wet and dry etching},\n+  journal = {Journal of Micromechanics and Microengineering},\n+  year = {2009},\n+  volume = {19},\n+  pages = {047002},\n+  number = {4},\n+  abstract = {PDMS films of 10 \ufffdm thickness can be patterned within 30 min by combining\n+\t\n+\t dry etching to achieve substantially vertical sidewalls with wet\n+\t\n+\t etching to achieve high etch rates and to protect the underlying\n+\t\n+\t substrate from attack. Dry etching alone would have taken 5 h, and\n+\t\n+\t wet etching alone would produce severe undercutting. In addition,\n+\t\n+\t using either technique alone produces undesirable surface morphologies.\n+\t\n+\t The mask used during etching is critical to a successful patterning\n+\t\n+\t outcome. E-beam evaporated Al was found to work well, adhering strongly\n+\t\n+\t to oxygen-plasma-treated PDMS and holding up well during both dry\n+\t\n+\t and wet etching. To prevent wrinkling of the PDMS, a fast deposition\n+\t\n+\t rate should be used.},\n+  file = {BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering.pdf:JabRef\\\\BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering.pdf:PDF},\n+  timestamp = {09.06.17.13.03},\n+  url = {http://stacks.iop.org/0960-1317/19/i=4/a=047002}\n+}\n+\n+@ARTICLE{Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA,\n+  author = {S. A. Baccus},\n+  title = {Synaptic facilitation by reflected action potentials: enhancement\n+\t\n+\t of transmission when nerve impulses reverse direction at axon branch\n+\t\n+\t points.},\n+  journal = {Proc Natl Acad Sci U S A},\n+  year = {1998},\n+  volume = {95},\n+  pages = {8345--8350},\n+  number = {14},\n+  month = {Jul},\n+  abstract = {A rapid, reversible enhancement of synaptic transmission from a sensory\n+\t\n+\t neuron is reported and explained by impulses that reverse direction,\n+\t\n+\t or reflect, at axon branch points. In leech mechanosensory neurons,\n+\t\n+\t where one can detect reflection because it is possible simultaneously\n+\t\n+\t to study electrical activity in separate branches, action potentials\n+\t\n+\t reflected from branch points within the central nervous system under\n+\t\n+\t physiological conditions. Synapses adjacent to these branch points\n+\t\n+\t were activated twice in rapid succession, first by an impulse arriving\n+\t\n+\t from the periphery and then by its reflection. This fast double-firing\n+\t\n+\t facilitated synaptic transmission, increasing it to more than twice\n+\t\n+\t its normal level. Reflection occurred within a range of resting membrane\n+\t\n+\t potentials, and electrical activity produced by mechanical stimulation\n+\t\n+\t changed membrane potential so as to produce and cease reflection.\n+\t\n+\t A compartmental model was used to investigate how branch-point morphology\n+\t\n+\t and electrical activity contribute to produce reflection. The model\n+\t\n+\t shows that mechanisms that hyperpolarize the membrane so as to impair\n+\t\n+\t action potential propagation can increase the range of structures\n+\t\n+\t that can produce reflection. This suggests that reflection is more\n+\t\n+\t likely to occur in other structures where impulses fail, such as\n+\t\n+\t in axons and dendrites in the mammalian brain. In leech sensory neurons,\n+\t\n+\t reflection increased transmission from central synapses only in those\n+\t\n+\t axon branches that innervate the edges of the receptive field in\n+\t\n+\t the skin, thereby sharpening spatial contrast. Reflection thus allows\n+\t\n+\t a neuron to amplify synaptic transmission from a selected group of\n+\t\n+\t its branches in a way that can be regulated by electrical activity.},\n+  file = {Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA.pdf:JabRef\\\\Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA.pdf:PDF},\n+  institution = {Neuroscience Program, University of Miami, Miami, FL 33136, USA.\n+\t\n+\t sbaccus@mednet.med.miami.edu},\n+  keywords = {Action Potentials, physiology; Animals; Axons, physiology; Electrophysiology;\n+\t\n+\t Ganglia, Invertebrate, physiology; Ganglia, Sensory, physiology;\n+\t\n+\t Leeches; Neurons, physiology; Synapses, physiology; Synaptic Transmission,\n+\t\n+\t physiology},\n+  language = {eng},\n+  medline-pst = {ppublish},\n+  pmid = {9653189},\n+  timestamp = {11.05.01.13.02}\n+}\n+\n+@ARTICLE{Brewer1995Serum-freeB27/neurobasalmediumsupportsdifferentiatedgrowthofneuronsfromthestriatumsubstantianigraseptumcerebralcortexcerebellumanddentategyrus.JNeurosciRes,\n+  author = {G. J. Brewer},\n+  title = {Serum-free B27/neurobasal medium supports differentiated growth of\n+\t\n+\t neurons from the striatum, substantia nigra, septum, cerebral cortex,\n+\t\n+\t cerebellum, and dentate gyrus.},\n+  journal = {J Neurosci Res},\n+  year = {1995},\n+  volume = {42},\n+  pages = {674--683},\n+  number = {5},\n+  month = {Dec},\n+  abstract = {Two fundamental questions about neuron cell culture were addressed.\n+\t\n+\t Can one serum-free medium that was developed for optimum growth of\n+\t\n+\t hippocampal neurons support the growth of neurons from other regions\n+\t\n+\t of the brain? Is the region specific state of differentiation maintained\n+\t\n+\t in culture? To answer these questions, we isolated neurons from six\n+\t\n+\t other rat brain regions, placed them in culture in B27/Neurobasal\n+\t\n+\t defined medium, and analyzed their morphology and growth dependence\n+\t\n+\t on cell density after 4 days in culture. Neuronal identity was confirmed\n+\t\n+\t by immunostaining with antibodies to neurofilament 200. Neurons from\n+\t\n+\t each brain region maintained distinctive morphologies in culture\n+\t\n+\t in the virtual absence of glia. Cells isolated from embryonic day\n+\t\n+\t 18 cerebral cortex by digestion with papain showed the same high\n+\t\n+\t survival as hippocampal neurons, e.g., 70\\% survival for cells plated\n+\t\n+\t at 160/mm2. At this age and density, neurons from the septum showed\n+\t\n+\t slightly lower survival, 45\\%. Survival of dentate granule neurons\n+\t\n+\t from postnatal day four brains was 30-40\\%, significantly lower,\n+\t\n+\t and relatively independent of plating density. This suggests an absence\n+\t\n+\t of dependence on trophic factors or contact for dentate granule neurons.\n+\t\n+\t Growth of cerebellar granule neurons isolated from postnatal day\n+\t\n+\t 7, 8, or 9 brains in B27/Neurobasal was compared to growth in BME/10\\%\n+\t\n+\t serum. Viability in serum-free medium at 4 days was much better than\n+\t\n+\t that in serum, did not require KCl elevated to 25 mM, and occurred\n+\t\n+\t without substantial growth of glia. Cerebellar granule neurons plated\n+\t\n+\t at 1,280 cells/mm2 were maintained in culture for three weeks with\n+\t\n+\t 17\\% of the original cell density surviving. Survival of cells isolated\n+\t\n+\t from embryonic day 18 substantia nigra was 50\\% at 160 cells/mm2\n+\t\n+\t after 4 days, similar to that of striatum, but slightly less than\n+\t\n+\t hippocampal neuron survival. The dopaminergic phenotype of the substantia\n+\t\n+\t nigral neurons was maintained over 2 weeks in culture as judged by\n+\t\n+\t immunoreactivity with antibodies to tyrosine hydroxylase. During\n+\t\n+\t this time, immunoreactivity was found in the processes as they grew\n+\t\n+\t out from the soma. Together, these studies suggest that B27/Neurobasal\n+\t\n+\t will be a useful medium for maintaining the differentiated growth\n+\t\n+\t of neurons from many brain regions. Potential applications of a common\n+\t\n+\t growth medium for different neurons are discussed.},\n+  doi = {10.1002/jnr.490420510},\n+  institution = {Southern Illinois University School of Medicine, Springfield 62794-1220,\n+\t\n+\t USA.},\n+  keywords = {Animals; Brain, anatomy /&/ histology/cytology/enzymology; Cell Culture\n+\t\n+\t Techniques; Cell Survival; Cells, Cultured; Cerebellum, cytology/embryology;\n+\t\n+\t Cerebral Cortex, cytology/embryology; Corpus Striatum, cytology/embryology;\n+\t\n+\t Culture Media, Serum-Free; Dentate Gyrus, cytology/embryology; Electrophysiology;\n+\t\n+\t Hippocampus, cytology/embryology; Neurofilament Proteins, metabolism;\n+\t\n+\t Neurons, cytology/enzymology; Rats; Rats, Sprague-Dawley; Septum\n+\t\n+\t Pellucidum, embryology; Substantia Nigra, cytology/embryology; Tyrosine\n+\t\n+\t 3-Monooxygenase, metabolism},\n+  pmid = {8600300},\n+  timestamp = {2008.12.12},\n+  url = {http://dx.doi.org/10.1002/jnr.490420510}\n+}\n+\n+@ARTICLE{Brewer1997Isolationandcultureofadultrathippocampalneurons.JNeurosciMethods,\n+  author = {G. J. Brewer},\n+  title = {Isolation and culture of adult rat hippocampal neurons.},\n+  journal = {J Neurosci Methods},\n+  year = {1997},\n+  volume = {71},\n+  pages = {143--155},\n+  number = {2},\n+  month = {Feb},\n+  abstract = {Inability to culture adult central neurons and the failure of injured\n+\t\n+\t neurons to regenerate in the brain could be due to genetic controls\n+\t\n+\t or environmental inhibitors. We tested the environmental inhibitor\n+\t\n+\t hypothesis by attempting to regenerate adult rat neurons in B27/Neurobasal\n+\t\n+\t culture medium, a medium optimized for survival of embryonic neurons.\n+\t\n+\t To isolate neurons from their numerous connections, papain was the\n+\t\n+\t best of six different proteases screened on slices of hippocampus\n+\t\n+\t for survival of isolated cells after 4 days of culture. Use of a\n+\t\n+\t density gradient enabled separation of oligodendroglia and some enrichment\n+\t\n+\t of neurons and microglia from considerable debris which was inhibitory\n+\t\n+\t to sprouting and viability. With these techniques, about 900000 viable\n+\t\n+\t neurons were isolated from each hippocampus of any age rat from birth\n+\t\n+\t to 24-36 months, near the median mortality. FGF2 was found to enhance\n+\t\n+\t viability at least 3-fold to 40-80\\%, independent of age, without\n+\t\n+\t affecting the length of the processes. Neurons were cultured for\n+\t\n+\t more than 3 weeks. These methods demonstrate that hippocampal neurons\n+\t\n+\t can regenerate axons and dendrites if provided with adequate nutrition\n+\t\n+\t and if inhibitors are removed. They also will enable aging studies.\n+\t\n+\t Therefore, the concept of environmental growth restriction may be\n+\t\n+\t more appropriate for neurons in the brain than the concept of a genetic\n+\t\n+\t block that precludes regeneration of processes.},\n+  institution = {Department of Medical Microbiology and Immunology, Southern Illinois\n+\t\n+\t University School of Medicine, Springfield 62794-1220, USA. gbrewer@siumed.edu},\n+  keywords = {Age Factors; Animals; Cell Adhesion, physiology; Cell Culture Techniques,\n+\t\n+\t methods; Cell Separation, methods; Cell Survival, physiology; Cells,\n+\t\n+\t Cultured; Cerebral Cortex, cytology; Dose-Response Relationship,\n+\t\n+\t Drug; Fibroblast Growth Factor 2, physiology; Glutamic Acid, pharmacology;\n+\t\n+\t Hippocampus, cytology; Male; Neurons, cytology/drug effects; Osmolar\n+\t\n+\t Concentration; Oxygen, pharmacology; Papain; Rats; Rats, Inbred F344;\n+\t\n+\t Rats, Sprague-Dawley},\n+  pii = {S0165-0270(96)00136-7},\n+  pmid = {9128149},\n+  timestamp = {09.02.26.19.31}\n+}\n+\n+@ARTICLE{Brewer2008NbActiv4mediumimprovementtoNeurobasal/B27increasesneuronsynapsedensitiesandnetworkspikeratesonmultielectrodearrays.JNeurosciMethods,\n+  author = {Gregory J Brewer and Michael D Boehler and Torrie T Jones and Bruce\n+\t\n+\t C Wheeler},\n+  title = {NbActiv4 medium improvement to Neurobasal/B27 increases neuron synapse\n+\t\n+\t densities and network spike rates on multielectrode arrays.},\n+  journal = {J Neurosci Methods},\n+  year = {2008},\n+  volume = {170},\n+  pages = {181--187},\n+  number = {2},\n+  month = {May},\n+  abstract = {The most interesting property of neurons is their long-distance propagation\n+\t\n+\t of signals as spiking action potentials. Since 1993, Neurobasal/B27\n+\t\n+\t has been used as a serum-free medium optimized for hippocampal neuron\n+\t\n+\t survival. Neurons on microelectrode arrays (MEA) were used as an\n+\t\n+\t assay system to increase spontaneous spike rates in media of different\n+\t\n+\t compositions. We find spike rates of 0.5 s(-1) (Hz) for rat embryonic\n+\t\n+\t hippocampal neurons cultured in Neurobasal/B27, lower than cultures\n+\t\n+\t in serum-based media and offering an opportunity for improvement.\n+\t\n+\t NbActiv4 was formulated by addition of creatine, cholesterol and\n+\t\n+\t estrogen to Neurobasal/B27 that synergistically produced an eightfold\n+\t\n+\t increase in spontaneous spike activity. The increased activity with\n+\t\n+\t NbActiv4 correlated with a twofold increase in immunoreactive synaptophysin\n+\t\n+\t bright puncta and GluR1 total puncta. Characteristic of synaptic\n+\t\n+\t scaling, immunoreactive GABAAbeta puncta also increased 1.5-fold\n+\t\n+\t and NMDA-R1 puncta increased 1.8-fold. Neuron survival in NbActiv4\n+\t\n+\t equaled that in Neurobasal/B27, but with slightly higher astroglia.\n+\t\n+\t Resting respiratory demand was decreased and demand capacity was\n+\t\n+\t increased in NbActiv4, indicating less stress and higher efficiency.\n+\t\n+\t These results show that NbActiv4 is an improvement to Neurobasal/B27\n+\t\n+\t for cultured networks with an increased density of synapses and transmitter\n+\t\n+\t receptors which produces higher spontaneous spike rates in neuron\n+\t\n+\t networks.},\n+  doi = {10.1016/j.jneumeth.2008.01.009},\n+  institution = {Southern Illinois University School of Medicine, Springfield, IL\n+\t\n+\t 62794-9626, USA. gbrewer@siumed.edu},\n+  keywords = {Cell Survival; Cells, Cultured; Culture Media; Electrophysiology;\n+\t\n+\t Hippocampus, cytology; Humans; Image Processing, Computer-Assisted;\n+\t\n+\t Immunohistochemistry; Kinetics; Microelectrodes; Nerve Net, physiology;\n+\t\n+\t Neurons, physiology; Oxygen Consumption, physiology; Oxygen, analysis;\n+\t\n+\t Synapses, physiology},\n+  pii = {S0165-0270(08)00039-3},\n+  pmid = {18308400},\n+  timestamp = {09.02.26.19.31},\n+  url = {http://dx.doi.org/10.1016/j.jneumeth.2008.01.009}\n+}\n+, @@ -0,0 +1,301 @@\n+% This file was created with JabRef 2.9.2.\n+% Encoding: UTF8\n+\n+@ARTICLE{Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS,\n+  author = {Aziz, Joseph N. Y. and Abdelhalim, Karim and Shulyzki, Ruslana and\n+\tGenov, Roman and Bardakjian, Berj L. and Derchansky, Miron and Serletis,\n+\tDemitre and Carlen, Peter L.},\n+  title = {256-Channel Neural Recording and Delta Compression Microsystem With\n+\t3D Electrodes},\n+  journal = {IEEE JOURNAL OF SOLID-STATE CIRCUITS},\n+  year = {2009},\n+  volume = {44},\n+  pages = {995-1005},\n+  number = {3},\n+  month = {MAR},\n+  abstract = {A 3D microsystem for multi-site penetrating extracellular neural recording\n+\tfrom the brain is presented. A 16 x 16-channel neural recording interface\n+\tintegrated prototype fabricated in 0.35 mu m CMOS occupies 3.5 mm\n+\tx 4.5 mm area. Each recording channel dissipates 15 mu W of power\n+\twith input-referred noise of 7 mu V-rms over 5 kHz bandwidth. A switched-capacitor\n+\tdelta read-out data compression circuit trades recording accuracy\n+\tfor the output data rate. An array of 1.5 mm platinum-coated microelectrodes\n+\tis bonded directly onto the die. Results of in vitro experimental\n+\trecordings from intact mouse hippocampus validate the circuit design\n+\tand the on-chip electrode bonding technology.},\n+  address = {445 HOES LANE, PISCATAWAY, NJ 08855 USA},\n+  affiliation = {Aziz, JNY (Reprint Author), Broadcom, Irvine, CA 92617 USA. {[}Aziz,\n+\tJoseph N. Y.; Abdelhalim, Karim; Shulyzki, Ruslana; Genov, Roman]\n+\tUniv Toronto, Dept Elect \\& Comp Engn, Toronto, ON M5S 3G4, Canada.\n+\t{[}Bardakjian, Berj L.] Univ Toronto, Inst Biomat \\& Biomed Engn,\n+\tEdward S Rogers Sr Dept Elect \\& Comp Engn, Toronto, ON M5S 1A4,\n+\tCanada. {[}Derchansky, Miron; Serletis, Demitre; Carlen, Peter L.]\n+\tUniv Toronto, Toronto Western Res Inst, Toronto, ON M5S 1A4, Canada.\n+\t{[}Derchansky, Miron; Serletis, Demitre; Carlen, Peter L.] Univ Toronto,\n+\tDept Physiol, Toronto, ON M5S 1A4, Canada.},\n+  author-email = {roman@eecg.utoronto.ca},\n+  cited-references = {ATLURI S, 2006, P IEEE INT S CIRC SY, P1131. AZIZ J, 2006, P IEEE\n+\tINT S CIRC SY. AZIZ J, 2007, IEEE INT SOL STAT CI, P160. AZIZ JNY,\n+\t2006, P IEEE INT S CIRC SY, P5075. AZIZ JNY, 2007, IEEE T BIOMED\n+\tCIRCUI, V1. AZIZ JNY, 2007, P IEEE INT S CIRC SY. CHAIMANONART N,\n+\t2005, P ANN INT IEEE EMBS, P5194. DELBRUCK T, 1994, P IEEE INT S\n+\tCIRC SY, V4, P339. ENZ CC, 1996, P IEEE, V84, P1584. EVERSMANN B,\n+\t2003, IEEE J SOLID-ST CIRC, V38, P2306, DOI 10.1109/JSSC.2003.819174.\n+\tHARRISON R, 2006, IEEE INT SOL STAT C, P2258. HARRISON RR, 2003,\n+\tIEEE J SOLID-ST CIRC, V38, P958, DOI 10.1009/JSSC.2003.811979. HARRISON\n+\tRR, 2007, IEEE CUST INTEGR CIR, P115. HEER F, 2006, IEEE J SOLID-ST\n+\tCIRC, V41, P1620, DOI 10.1109/JSSC.2006.873677. KIM S, 2006, P 2006\n+\tINT C IEEE EN, P2986. MALLIK U, 2005, IEEE ISSCC, P362. MOHSENI P,\n+\t2004, IEEE T BIO-MED ENG, V51, P832, DOI 10.1109/TBME.2004.824126.\n+\tMOTCHENBACHER CD, 1993, LOW NOISE ELECT SYST. OLSSON RH, 2005, IEEE\n+\tJ SOLID-ST CIRC, V40, P2796. PATTERSON WR, 2004, IEEE T BIO-MED ENG,\n+\tV51, P1845, DOI 10.1109/TBME.2004.831521. RILEY G, 1987, SURFACE\n+\tMOUNT INT, P535. STEYAERT MSJ, 1987, IEEE J SOLID-ST CIRC, V22, P1163.\n+\tTSIVIDIS Y, 2003, OPERATION MODELING M. WATTANAPANITCH W, 2007, IEEE\n+\tT BIOMED CIRC S, V1, P136, DOI 10.1109/TBCAS.2007.907868. WISE KD,\n+\t2005, IEEE ENG MED BIOL, V24, P22.},\n+  doc-delivery-number = {415FE},\n+  doi = {10.1109/JSSC.2008.2010997},\n+  file = {Draft:JabRef\\\\Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS_draft.pdf:PDF;Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS.pdf:JabRef\\\\Aziz2009256-ChannelNeuralRecordingandDeltaCompressionMicrosystemWith3DElectrodesIEEEJOURNALOFSOLID-STATECIRCUITS.pdf:PDF},\n+  issn = {0018-9200},\n+  journal-iso = {IEEE J. Solid-State Circuit},\n+  keywords = {Multi-channel recording; microelectrodes; extracellular recording;\n+\telectrode array; implantable; brain; hippocampus; delta compression;\n+\tneural amplifier},\n+  keywords-plus = {AMPLIFIER; STABILIZATION; CIRCUIT; ARRAY},\n+  language = {English},\n+  number-of-cited-references = {25},\n+  publisher = {IEEE-INST ELECTRICAL ELECTRONICS ENGINEERS INC},\n+  subject-category = {Engineering, Electrical \\& Electronic},\n+  times-cited = {2},\n+  timestamp = {10.04.15.11.41},\n+  type = {Article},\n+  unique-id = {ISI:000263918900029}\n+}\n+\n+@ARTICLE{Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA,\n+  author = {S. A. Baccus},\n+  title = {Synaptic facilitation by reflected action potentials: enhancement\n+\tof transmission when nerve impulses reverse direction at axon branch\n+\tpoints.},\n+  journal = {Proc Natl Acad Sci U S A},\n+  year = {1998},\n+  volume = {95},\n+  pages = {8345--8350},\n+  number = {14},\n+  month = {Jul},\n+  abstract = {A rapid, reversible enhancement of synaptic transmission from a sensory\n+\tneuron is reported and explained by impulses that reverse direction,\n+\tor reflect, at axon branch points. In leech mechanosensory neurons,\n+\twhere one can detect reflection because it is possible simultaneously\n+\tto study electrical activity in separate branches, action potentials\n+\treflected from branch points within the central nervous system under\n+\tphysiological conditions. Synapses adjacent to these branch points\n+\twere activated twice in rapid succession, first by an impulse arriving\n+\tfrom the periphery and then by its reflection. This fast double-firing\n+\tfacilitated synaptic transmission, increasing it to more than twice\n+\tits normal level. Reflection occurred within a range of resting membrane\n+\tpotentials, and electrical activity produced by mechanical stimulation\n+\tchanged membrane potential so as to produce and cease reflection.\n+\tA compartmental model was used to investigate how branch-point morphology\n+\tand electrical activity contribute to produce reflection. The model\n+\tshows that mechanisms that hyperpolarize the membrane so as to impair\n+\taction potential propagation can increase the range of structures\n+\tthat can produce reflection. This suggests that reflection is more\n+\tlikely to occur in other structures where impulses fail, such as\n+\tin axons and dendrites in the mammalian brain. In leech sensory neurons,\n+\treflection increased transmission from central synapses only in those\n+\taxon branches that innervate the edges of the receptive field in\n+\tthe skin, thereby sharpening spatial contrast. Reflection thus allows\n+\ta neuron to amplify synaptic transmission from a selected group of\n+\tits branches in a way that can be regulated by electrical activity.},\n+  file = {Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA.pdf:JabRef\\\\Baccus1998Synapticfacilitationbyreflectedactionpotentials--enhancementoftransmissionwhennerveimpulsesreversedirectionataxonbranchpoints.ProcNatlAcadSciUSA.pdf:PDF},\n+  institution = {Neuroscience Program, University of Miami, Miami, FL 33136, USA.\n+\tsbaccus@mednet.med.miami.edu},\n+  keywords = {Action Potentials, physiology; Animals; Axons, physiology; Electrophysiology;\n+\tGanglia, Invertebrate, physiology; Ganglia, Sensory, physiology;\n+\tLeeches; Neurons, physiology; Synapses, physiology; Synaptic Transmission,\n+\tphysiology},\n+  language = {eng},\n+  medline-pst = {ppublish},\n+  pmid = {9653189},\n+  timestamp = {11.05.01.13.02}\n+}\n+\n+@ARTICLE{BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering,\n+  author = {B Balakrisnan , S Patil and E Smela},\n+  title = {Patterning PDMS using a combination of wet and dry etching},\n+  journal = {Journal of Micromechanics and Microengineering},\n+  year = {2009},\n+  volume = {19},\n+  pages = {047002},\n+  number = {4},\n+  abstract = {PDMS films of 10 \ufffdm thickness can be patterned within 30 min by combining\n+\tdry etching to achieve substantially vertical sidewalls with wet\n+\tetching to achieve high etch rates and to protect the underlying\n+\tsubstrate from attack. Dry etching alone would have taken 5 h, and\n+\twet etching alone would produce severe undercutting. In addition,\n+\tusing either technique alone produces undesirable surface morphologies.\n+\tThe mask used during etching is critical to a successful patterning\n+\toutcome. E-beam evaporated Al was found to work well, adhering strongly\n+\tto oxygen-plasma-treated PDMS and holding up well during both dry\n+\tand wet etching. To prevent wrinkling of the PDMS, a fast deposition\n+\trate should be used.},\n+  file = {BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering.pdf:JabRef\\\\BBalakrisnan2009PatterningPDMSusingacombinationofwetanddryetchingJournalofMicromechanicsandMicroengineering.pdf:PDF},\n+  timestamp = {09.06.17.13.03},\n+  url = {http://stacks.iop.org/0960-1317/19/i=4/a=047002}\n+}\n+\n+@ARTICLE{Brewer1997Isolationandcultureofadultrathippocampalneurons.JNeurosciMethods,\n+  author = {G. J. Brewer},\n+  title = {Isolation and culture of adult rat hippocampal neurons.},\n+  journal = {J Neurosci Methods},\n+  year = {1997},\n+  volume = {71},\n+  pages = {143--155},\n+  number = {2},\n+  month = {Feb},\n+  abstract = {Inability to culture adult central neurons and the failure of injured\n+\tneurons to regenerate in the brain could be due to genetic controls\n+\tor environmental inhibitors. We tested the environmental inhibitor\n+\thypothesis by attempting to regenerate adult rat neurons in B27/Neurobasal\n+\tculture medium, a medium optimized for survival of embryonic neurons.\n+\tTo isolate neurons from their numerous connections, papain was the\n+\tbest of six different proteases screened on slices of hippocampus\n+\tfor survival of isolated cells after 4 days of culture. Use of a\n+\tdensity gradient enabled separation of oligodendroglia and some enrichment\n+\tof neurons and microglia from considerable debris which was inhibitory\n+\tto sprouting and viability. With these techniques, about 900000 viable\n+\tneurons were isolated from each hippocampus of any age rat from birth\n+\tto 24-36 months, near the median mortality. FGF2 was found to enhance\n+\tviability at least 3-fold to 40-80\\%, independent of age, without\n+\taffecting the length of the processes. Neurons were cultured for\n+\tmore than 3 weeks. These methods demonstrate that hippocampal neurons\n+\tcan regenerate axons and dendrites if provided with adequate nutrition\n+\tand if inhibitors are removed. They also will enable aging studies.\n+\tTherefore, the concept of environmental growth restriction may be\n+\tmore appropriate for neurons in the brain than the concept of a genetic\n+\tblock that precludes regeneration of processes.},\n+  institution = {Department of Medical Microbiology and Immunology, Southern Illinois\n+\tUniversity School of Medicine, Springfield 62794-1220, USA. gbrewer@siumed.edu},\n+  keywords = {Age Factors; Animals; Cell Adhesion, physiology; Cell Culture Techniques,\n+\tmethods; Cell Separation, methods; Cell Survival, physiology; Cells,\n+\tCultured; Cerebral Cortex, cytology; Dose-Response Relationship,\n+\tDrug; Fibroblast Growth Factor 2, physiology; Glutamic Acid, pharmacology;\n+\tHippocampus, cytology; Male; Neurons, cytology/drug effects; Osmolar\n+\tConcentration; Oxygen, pharmacology; Papain; Rats; Rats, Inbred F344;\n+\tRats, Sprague-Dawley},\n+  pii = {S0165-0270(96)00136-7},\n+  pmid = {9128149},\n+  timestamp = {09.02.26.19.31}\n+}\n+\n+@ARTICLE{Brewer1995Serum-freeB27/neurobasalmediumsupportsdifferentiatedgrowthofneuronsfromthestriatumsubstantianigraseptumcerebralcortexcerebellumanddentategyrus.JNeurosciRes,\n+  author = {G. J. Brewer},\n+  title = {Serum-free B27/neurobasal medium supports differentiated growth of\n+\tneurons from the striatum, substantia nigra, septum, cerebral cortex,\n+\tcerebellum, and dentate gyrus.},\n+  journal = {J Neurosci Res},\n+  year = {1995},\n+  volume = {42},\n+  pages = {674--683},\n+  number = {5},\n+  month = {Dec},\n+  abstract = {Two fundamental questions about neuron cell culture were addressed.\n+\tCan one serum-free medium that was developed for optimum growth of\n+\thippocampal neurons support the growth of neurons from other regions\n+\tof the brain? Is the region specific state of differentiation maintained\n+\tin culture? To answer these questions, we isolated neurons from six\n+\tother rat brain regions, placed them in culture in B27/Neurobasal\n+\tdefined medium, and analyzed their morphology and growth dependence\n+\ton cell density after 4 days in culture. Neuronal identity was confirmed\n+\tby immunostaining with antibodies to neurofilament 200. Neurons from\n+\teach brain region maintained distinctive morphologies in culture\n+\tin the virtual absence of glia. Cells isolated from embryonic day\n+\t18 cerebral cortex by digestion with papain showed the same high\n+\tsurvival as hippocampal neurons, e.g., 70\\% survival for cells plated\n+\tat 160/mm2. At this age and density, neurons from the septum showed\n+\tslightly lower survival, 45\\%. Survival of dentate granule neurons\n+\tfrom postnatal day four brains was 30-40\\%, significantly lower,\n+\tand relatively independent of plating density. This suggests an absence\n+\tof dependence on trophic factors or contact for dentate granule neurons.\n+\tGrowth of cerebellar granule neurons isolated from postnatal day\n+\t7, 8, or 9 brains in B27/Neurobasal was compared to growth in BME/10\\%\n+\tserum. Viability in serum-free medium at 4 days was much better than\n+\tthat in serum, did not require KCl elevated to 25 mM, and occurred\n+\twithout substantial growth of glia. Cerebellar granule neurons plated\n+\tat 1,280 cells/mm2 were maintained in culture for three weeks with\n+\t17\\% of the original cell density surviving. Survival of cells isolated\n+\tfrom embryonic day 18 substantia nigra was 50\\% at 160 cells/mm2\n+\tafter 4 days, similar to that of striatum, but slightly less than\n+\thippocampal neuron survival. The dopaminergic phenotype of the substantia\n+\tnigral neurons was maintained over 2 weeks in culture as judged by\n+\timmunoreactivity with antibodies to tyrosine hydroxylase. During\n+\tthis time, immunoreactivity was found in the processes as they grew\n+\tout from the soma. Together, these studies suggest that B27/Neurobasal\n+\twill be a useful medium for maintaining the differentiated growth\n+\tof neurons from many brain regions. Potential applications of a common\n+\tgrowth medium for different neurons are discussed.},\n+  doi = {10.1002/jnr.490420510},\n+  institution = {Southern Illinois University School of Medicine, Springfield 62794-1220,\n+\tUSA.},\n+  keywords = {Animals; Brain, anatomy /&/ histology/cytology/enzymology; Cell Culture\n+\tTechniques; Cell Survival; Cells, Cultured; Cerebellum, cytology/embryology;\n+\tCerebral Cortex, cytology/embryology; Corpus Striatum, cytology/embryology;\n+\tCulture Media, Serum-Free; Dentate Gyrus, cytology/embryology; Electrophysiology;\n+\tHippocampus, cytology/embryology; Neurofilament Proteins, metabolism;\n+\tNeurons, cytology/enzymology; Rats; Rats, Sprague-Dawley; Septum\n+\tPellucidum, embryology; Substantia Nigra, cytology/embryology; Tyrosine\n+\t3-Monooxygenase, metabolism},\n+  pmid = {8600300},\n+  timestamp = {2008.12.12},\n+  url = {http://dx.doi.org/10.1002/jnr.490420510}\n+}\n+\n+@ARTICLE{Brewer2008NbActiv4mediumimprovementtoNeurobasal/B27increasesneuronsynapsedensitiesandnetworkspikeratesonmultielectrodearrays.JNeurosciMethods,\n+  author = {Gregory J Brewer and Michael D Boehler and Torrie T Jones and Bruce\n+\tC Wheeler},\n+  title = {NbActiv4 medium improvement to Neurobasal/B27 increases neuron synapse\n+\tdensities and network spike rates on multielectrode arrays.},\n+  journal = {J Neurosci Methods},\n+  year = {2008},\n+  volume = {170},\n+  pages = {181--187},\n+  number = {2},\n+  month = {May},\n+  abstract = {The most interesting property of neurons is their long-distance propagation\n+\tof signals as spiking action potentials. Since 1993, Neurobasal/B27\n+\thas been used as a serum-free medium optimized for hippocampal neuron\n+\tsurvival. Neurons on microelectrode arrays (MEA) were used as an\n+\tassay system to increase spontaneous spike rates in media of different\n+\tcompositions. We find spike rates of 0.5 s(-1) (Hz) for rat embryonic\n+\thippocampal neurons cultured in Neurobasal/B27, lower than cultures\n+\tin serum-based media and offering an opportunity for improvement.\n+\tNbActiv4 was formulated by addition of creatine, cholesterol and\n+\testrogen to Neurobasal/B27 that synergistically produced an eightfold\n+\tincrease in spontaneous spike activity. The increased activity with\n+\tNbActiv4 correlated with a twofold increase in immunoreactive synaptophysin\n+\tbright puncta and GluR1 total puncta. Characteristic of synaptic\n+\tscaling, immunoreactive GABAAbeta puncta also increased 1.5-fold\n+\tand NMDA-R1 puncta increased 1.8-fold. Neuron survival in NbActiv4\n+\tequaled that in Neurobasal/B27, but with slightly higher astroglia.\n+\tResting respiratory demand was decreased and demand capacity was\n+\tincreased in NbActiv4, indicating less stress and higher efficiency.\n+\tThese results show that NbActiv4 is an improvement to Neurobasal/B27\n+\tfor cultured networks with an increased density of synapses and transmitter\n+\treceptors which produces higher spontaneous spike rates in neuron\n+\tnetworks.},\n+  doi = {10.1016/j.jneumeth.2008.01.009},\n+  institution = {Southern Illinois University School of Medicine, Springfield, IL\n+\t62794-9626, USA. gbrewer@siumed.edu},\n+  keywords = {Cell Survival; Cells, Cultured; Culture Media; Electrophysiology;\n+\tHippocampus, cytology; Humans; Image Processing, Computer-Assisted;\n+\tImmunohistochemistry; Kinetics; Microelectrodes; Nerve Net, physiology;\n+\tNeurons, physiology; Oxygen Consumption, physiology; Oxygen, analysis;\n+\tSynapses, physiology},\n+  pii = {S0165-0270(08)00039-3},\n+  pmid = {18308400},\n+  timestamp = {09.02.26.19.31},\n+  url = {http://dx.doi.org/10.1016/j.jneumeth.2008.01.009}\n+}\n+, ", 1099, 1, "\"modified, modified, added, added, added, \"", 1100], ["vegeziel", "BugFix for \"#880 PubMed Import broken\"\n\nFound bug: PubMed/Medline PLAIN format recognized as RIS format.\nProvided solution:\n\t- Modified RIS ImportFilter. Now RIS format is identified by looking for the \"TY\" tag (it is a mandatory tag in RIS format and it is not conflictual with other filters)\n\t- Added new ImportFilter \"MedlinePlain\". This import filter parses Medline files in plain format (not XML). The import filter has been produced referring to the official Medline documentation (http://www.nlm.nih.gov/bsd/mms/medlineelements.html)\n\t- Updated the net.sf.jabref.core plugin.xml file in order to include the newly added MedlinePlain import filter", "06/27/14, 06:53:49 PM", "vegeziel", "224b486bf0493ab115c2859218a2b52fc524451d", ["src/main/java/net/sf/jabref/imports/MedlinePlainImporter.java", "src/main/java/net/sf/jabref/imports/RisImporter.java", "src/main/resources/plugins/net.sf.jabref.core/plugin.xml"], "@@ -0,0 +1,279 @@\n+/*  Copyright (C) 2003-2011 JabRef contributors.\r\n+    This program is free software; you can redistribute it and/or modify\r\n+    it under the terms of the GNU General Public License as published by\r\n+    the Free Software Foundation; either version 2 of the License, or\r\n+    (at your option) any later version.\r\n+\r\n+    This program is distributed in the hope that it will be useful,\r\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n+    GNU General Public License for more details.\r\n+\r\n+    You should have received a copy of the GNU General Public License along\r\n+    with this program; if not, write to the Free Software Foundation, Inc.,\r\n+    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\r\n+    \r\n+*/\r\n+\r\n+package net.sf.jabref.imports;\r\n+\r\n+import java.util.regex.Pattern;\r\n+import java.io.InputStream;\r\n+import java.io.BufferedReader;\r\n+import java.io.IOException;\r\n+import java.util.List;\r\n+import java.util.ArrayList;\r\n+import java.util.HashMap;\r\n+import java.util.Iterator;\r\n+\r\n+import net.sf.jabref.BibtexEntry;\r\n+import net.sf.jabref.Globals;\r\n+import net.sf.jabref.AuthorList;\r\n+import net.sf.jabref.BibtexFields;\r\n+import net.sf.jabref.OutputPrinter;\r\n+\r\n+/**\r\n+ * Importer for the MEDLINE Plain format.\r\n+ * \r\n+ * check here for details on the format\r\n+ * http://www.nlm.nih.gov/bsd/mms/medlineelements.html\r\n+ * \r\n+ * @author vegeziel\r\n+ */\r\n+public class MedlinePlainImporter extends ImportFormat {\r\n+\r\n+    /**\r\n+     * Return the name of this import format.\r\n+     */\r\n+    public String getFormatName() {\r\n+        return \"MedlinePlain\";\r\n+    }\r\n+\r\n+    /*\r\n+     *  (non-Javadoc)\r\n+     * @see net.sf.jabref.imports.ImportFormat#getCLIId()\r\n+     */\r\n+    public String getCLIId() {\r\n+        return \"medlineplain\";\r\n+    }\r\n+\r\n+    /**\r\n+     * Check whether the source is in the correct format for this importer.\r\n+     */\r\n+    public boolean isRecognizedFormat(InputStream stream) throws IOException {\r\n+\r\n+    \t// Our strategy is to look for the \"PMID  - *\", \"PMC.*-.*\", or \"PMCR.*-.*\" line \r\n+    \t// (i.e., PubMed Unique Identifier, PubMed Central Identifier, PubMed Central Release)\r\n+        BufferedReader in = new BufferedReader(ImportFormatReader.getReaderDefaultEncoding(stream));\r\n+        Pattern pat1 = Pattern.compile(\"PMID.*-.*\"),\r\n+                pat2 = Pattern.compile(\"PMC.*-.*\"),\r\n+                pat3 = Pattern.compile(\"PMCR.*-.*\");\r\n+\r\n+        String str;\r\n+        while ((str = in.readLine()) != null){\r\n+            if (pat1.matcher(str).find() || pat2.matcher(str).find() || pat3.matcher(str).find())\r\n+                return true;\r\n+        }\r\n+\r\n+        return false;\r\n+    }\r\n+\r\n+    /**\r\n+     * Parse the entries in the source, and return a List of BibtexEntry\r\n+     * objects.\r\n+     */\r\n+    public List<BibtexEntry> importEntries(InputStream stream, OutputPrinter status) throws IOException {\r\n+        ArrayList<BibtexEntry> bibitems = new ArrayList<BibtexEntry>();\r\n+        StringBuffer sb = new StringBuffer();\r\n+        BufferedReader in = new BufferedReader(ImportFormatReader.getReaderDefaultEncoding(stream));\r\n+        String str;\r\n+        while ((str = in.readLine()) != null){\r\n+            sb.append(str);\r\n+            sb.append(\"\\n\");\r\n+        }\r\n+        String[] entries = sb.toString().replaceAll(\"\\u2013\", \"-\").replaceAll(\"\\u2014\", \"--\").replaceAll(\"\\u2015\", \"--\").split(\"\\\\n\\\\n\");\r\n+\r\n+        for (int i = 0; i < entries.length; i++){\r\n+\r\n+            if (entries[i].trim().length() == 0)\r\n+                continue;\r\n+\r\n+            String type = \"\", author = \"\", editor = \"\", comment = \"\";\r\n+            HashMap<String, String> hm = new HashMap<String, String>();\r\n+\r\n+\r\n+            String[] fields = entries[i].split(\"\\n\");\r\n+\r\n+            for (int j = 0; j < fields.length; j++){\r\n+            \tif(fields[j].equals(\"\"))\r\n+            \t\tcontinue;\r\n+            \t\r\n+                StringBuffer current = new StringBuffer(fields[j]);\r\n+                boolean done = false;\r\n+                \r\n+                while (!done && (j < fields.length-1)) {\r\n+                    if(fields[j+1].length() <=4 )\r\n+                    \tSystem.out.println(\"aaa\");\r\n+                \tif (fields[j+1].charAt(4) != '-') {\r\n+                        if ((current.length() > 0)\r\n+                                && !Character.isWhitespace(current.charAt(current.length()-1)))\r\n+                            current.append(' ');\r\n+                        current.append(fields[j+1].trim());\r\n+                        j++;\r\n+                    } else\r\n+                        done = true;\r\n+                }\r\n+                String entry = current.toString();\r\n+                \r\n+                String lab = entry.substring(0, entry.indexOf('-')).trim();\r\n+                String val = entry.substring(entry.indexOf('-')+1).trim();\r\n+                if (lab.equals(\"PT\")){\r\n+                \tval = val.toLowerCase();\r\n+                    if (val.equals(\"BOOK\")) type = \"book\";\r\n+                    else if (val.equals(\"journal article\") \r\n+                    \t\t\t|| val.equals(\"classical article\")\r\n+                    \t\t\t|| val.equals(\"corrected and republished article\")\r\n+                    \t\t\t|| val.equals(\"historical article\")\r\n+                    \t\t\t|| val.equals(\"introductory journal article\")\r\n+                    \t\t\t|| val.equals(\"newspaper article\")) type = \"article\";\r\n+                    else if (val.equals(\"clinical conference\")\r\n+                    \t\t|| val.equals(\"consensus development conference\")\r\n+                    \t\t|| val.equals(\"consensus development conference, NIH\")) type = \"conference\";\r\n+                    else if (val.equals(\"technical report\")) type = \"techreport\";\r\n+                    else if (val.equals(\"editorial\")) type = \"inproceedings\";//\"incollection\";\"inbook\";\r\n+                    else if (val.equals(\"overall\")) type = \"proceedings\";\r\n+                    else if(type.equals(\"\")) type = \"other\";\r\n+                    \r\n+                }else if (lab.equals(\"TI\")) {\r\n+                    String oldVal = hm.get(\"title\");\r\n+                    if (oldVal == null)\r\n+                        hm.put(\"title\", val);\r\n+                    else {\r\n+                        if (oldVal.endsWith(\":\") || oldVal.endsWith(\".\") || oldVal.endsWith(\"?\"))\r\n+                            hm.put(\"title\", oldVal+\" \"+val);\r\n+                        else\r\n+                            hm.put(\"title\", oldVal+\": \"+val);\r\n+                    }\r\n+                }\r\n+                    // =\r\n+                    // val;\r\n+                else if (lab.equals(\"BTI\") || lab.equals(\"CTI\")) {\r\n+                    hm.put(\"booktitle\", val);\r\n+                }\r\n+                else if (lab.equals(\"FAU\")) {\r\n+                    if (author.equals(\"\")) // don't add \" and \" for the first author\r\n+                        author = val;\r\n+                    else author += \" and \" + val;\r\n+                }\r\n+                else if (lab.equals(\"FED\")){\r\n+                    if (editor.equals(\"\")) // don't add \" and \" for the first editor\r\n+                        editor = val;\r\n+                    else editor += \" and \" + val;\r\n+                }\r\n+                else if (lab.equals(\"JT\")) {\r\n+                    if (type.equals(\"inproceedings\"))\r\n+                        hm.put(\"booktitle\", val);\r\n+                    else\r\n+                        hm.put(\"journal\", val);\r\n+                }\r\n+\r\n+                else if (lab.equals(\"PG\")) \r\n+                \thm.put(\"pages\", val);\r\n+                \r\n+//                else if (lab.equals(\"STAT\")) {\r\n+//                    if (val.equals(\"MEDLINE\"))\r\n+//                        hm.put(\"publisher\", \"PubMed\");\r\n+//                    else\r\n+//                        hm.put(\"publisher\", val);\r\n+//                }\r\n+                else if (lab.equals(\"PL\"))\r\n+                    hm.put(\"address\", val);\r\n+                else if (lab.equals(\"IS\"))\r\n+                    hm.put(\"issn\", val);\r\n+                else if (lab.equals(\"VI\")) \r\n+                \thm.put(\"volume\", val);\r\n+//                else if (lab.equals(\"\")) \r\n+//                \thm.put(\"number\", val);\r\n+                else if (lab.equals(\"AB\")) {\r\n+                    String oldAb = hm.get(\"abstract\");\r\n+                    if (oldAb == null)\r\n+                        hm.put(\"abstract\", val);\r\n+                    else\r\n+                        hm.put(\"abstract\", oldAb+\"\\n\"+val);\r\n+                }\r\n+                else if ((lab.equals(\"DP\"))) {\r\n+                    String[] parts = val.split(\" \");\r\n+                    hm.put(\"year\", parts[0]);\r\n+                    if ((parts.length > 1) && (parts[1].length() > 0)) {\r\n+                    \thm.put(\"month\", parts[1]);\r\n+                    }\r\n+                }\r\n+\r\n+                else if (lab.equals(\"MH\") || lab.equals(\"OT\")){\r\n+                    if (!hm.containsKey(\"keywords\")) hm.put(\"keywords\", val);\r\n+                    else{\r\n+                        String kw = hm.get(\"keywords\");\r\n+                        hm.put(\"keywords\", kw + \", \" + val);\r\n+                    }\r\n+                }\r\n+                else if (lab.equals(\"CON\") || lab.equals(\"CIN\") || lab.equals(\"EIN\")\r\n+                \t\t\t|| lab.equals(\"EFR\") || lab.equals(\"CRI\") || lab.equals(\"CRF\")\r\n+                \t\t\t|| lab.equals(\"PRIN\") || lab.equals(\"PROF\") || lab.equals(\"RPI\")\r\n+                \t\t\t|| lab.equals(\"RPF\") || lab.equals(\"RIN\") || lab.equals(\"ROF\")\r\n+                \t\t\t|| lab.equals(\"UIN\") || lab.equals(\"UOF\") || lab.equals(\"SPIN\")\r\n+                \t\t\t|| lab.equals(\"ORI\")) {\r\n+                    if (comment.length() > 0)\r\n+                        comment = comment+\"\\n\";\r\n+                    comment = comment+val;\r\n+                }\r\n+//                // Added ID import 2005.12.01, Morten Alver:\r\n+//                else if (lab.equals(\"ID\"))\r\n+//                    hm.put(\"refid\", val);\r\n+//                    // Added doi import (sciencedirect.com) 2011.01.10, Alexander Hug <alexander@alexanderhug.info>\r\n+                else if (lab.equals(\"AID\")){\r\n+                    String doi = val;\r\n+                    if (doi.startsWith(\"doi:\")){\r\n+                        doi = doi.replaceAll(\"(?i)doi:\", \"\").trim();\r\n+                        hm.put(\"doi\", doi);\r\n+                    }\r\n+                }\r\n+            }\r\n+            // fix authors\r\n+            if (author.length() > 0) {\r\n+                author = AuthorList.fixAuthor_lastNameFirst(author);\r\n+                hm.put(\"author\", author);\r\n+            }\r\n+            if (editor.length() > 0) {\r\n+                editor = AuthorList.fixAuthor_lastNameFirst(editor);\r\n+                hm.put(\"editor\", editor);\r\n+            }\r\n+            if (comment.length() > 0) {\r\n+                hm.put(\"comment\", comment);\r\n+            }\r\n+            \r\n+            BibtexEntry b = new BibtexEntry(BibtexFields.DEFAULT_BIBTEXENTRY_ID, Globals\r\n+                    .getEntryType(type)); // id assumes an existing database so don't\r\n+\r\n+            // Remove empty fields:\r\n+            ArrayList<Object> toRemove = new ArrayList<Object>();\r\n+            for (Iterator<String> it = hm.keySet().iterator(); it.hasNext();) {\r\n+                Object key = it.next();\r\n+                String content = hm.get(key);\r\n+                if ((content == null) || (content.trim().length() == 0))\r\n+                    toRemove.add(key);\r\n+            }\r\n+            for (Iterator<Object> iterator = toRemove.iterator(); iterator.hasNext();) {\r\n+                hm.remove(iterator.next());\r\n+\r\n+            }\r\n+\r\n+            // create one here\r\n+            b.setField(hm);\r\n+            bibitems.add(b);\r\n+\r\n+        }\r\n+\r\n+        return bibitems;\r\n+\r\n+    }\r\n+}\r, @@ -60,14 +60,12 @@ public boolean isRecognizedFormat(InputStream stream) throws IOException {\n \n         // Our strategy is to look for the \"AU  - *\" line.\n         BufferedReader in = new BufferedReader(ImportFormatReader.getReaderDefaultEncoding(stream));\n-        Pattern pat1 = Pattern.compile(\"AU  - .*\"),\n-                pat2 = Pattern.compile(\"A1  - .*\"),\n-                pat3 = Pattern.compile(\"A2  - .*\");\n+        Pattern pat1 = Pattern.compile(\"TY  - .*\");\n \n \n         String str;\n         while ((str = in.readLine()) != null){\n-            if (pat1.matcher(str).find() || pat2.matcher(str).find() || pat3.matcher(str).find())\n+            if (pat1.matcher(str).find())\n                 return true;\n         }\n , @@ -32,6 +32,15 @@\n \t\t<parameter id=\"description\"\n \t\t\tvalue=\"Import format for Medline references.\" />\n \t</extension>\n+\t\n+\t<extension id=\"MedlinePlainImporter\" plugin-id=\"net.sf.jabref.core\"\n+\t\tpoint-id=\"ImportFormat\">\n+\t\t<parameter id=\"importFormat\"\n+\t\t\tvalue=\"net.sf.jabref.imports.MedlinePlainImporter\" />\n+\t\t<parameter id=\"name\" value=\"Medline Plain Importer\" />\n+\t\t<parameter id=\"description\"\n+\t\t\tvalue=\"Import format for Medline references (not XML).\" />\n+\t</extension>\n \n \t<!-- To extend JabRef with an Entry Fetcher use the following extension point -->\n \t<extension-point id=\"EntryFetcher\">, ", 290, 4, "\"added, modified, modified, \"", 294], ["Ingvar Jackal", "Added message in CHANGELOG", "07/16/14, 05:25:59 PM", "Ingvar Jackal", "064f708300b76faa49135508c9dab6d5c9723db9", ["CHANGELOG"], "@@ -10,6 +10,7 @@\n     - Support FindFullText with ACS DOIs (pull request #9)\n     - Fixes groups and adds optional 2.9.2 save ordering (pull request #10)\n     - Fixes bug 880 \"PubMed Import broken\" (pull request #11 by vegeziel)\n+    - Fixes bug #959 \"StringIndexOutOfBoundsException with invalid Preview text\" (pull request #12 by IngvarJackal)\n 2.10\n     - Made IEEEXploreFetcher author parsing work again.\n     - Added a few more characters in the HTML/Unicode to LaTeX conversion., ", 1, 0, "\"modified, \"", 1], ["Ingvar Jackal", "Language locale fix for BugFix #959", "07/21/14, 06:34:42 PM", "Ingvar Jackal", "f42065e46ae8689ede4cbc1985e74aae599149a5", ["src/main/java/net/sf/jabref/PreviewPrefsTab.java", "src/main/java/net/sf/jabref/export/layout/LayoutHelper.java", "src/main/resources/resource/JabRef_da.properties", "src/main/resources/resource/JabRef_de.properties", "src/main/resources/resource/JabRef_en.properties", "src/main/resources/resource/JabRef_es.properties", "src/main/resources/resource/JabRef_fr.properties", "src/main/resources/resource/JabRef_in.properties", "src/main/resources/resource/JabRef_it.properties", "src/main/resources/resource/JabRef_ja.properties", "src/main/resources/resource/JabRef_nl.properties", "src/main/resources/resource/JabRef_no.properties", "src/main/resources/resource/JabRef_pt_BR.properties", "src/main/resources/resource/JabRef_ru.properties", "src/main/resources/resource/JabRef_tr.properties", "src/main/resources/resource/JabRef_vi.properties", "src/main/resources/resource/JabRef_zh.properties"], "@@ -170,7 +170,7 @@ public void actionPerformed(ActionEvent e) {\n \t\t\t\t\t\tJOptionPane.PLAIN_MESSAGE);\n \t\t\t\t} catch (StringIndexOutOfBoundsException ex) {\n \t\t\t\t\tex.printStackTrace();\n-\t\t\t\t\tJOptionPane.showMessageDialog(null, \"Parsing error: illegal backslash expression.\\n\" + ex.getMessage() + \"\\nLook at stderr for details.\", \"Parsing error\", JOptionPane.WARNING_MESSAGE);\n+\t\t\t\t\tJOptionPane.showMessageDialog(null, Globals.lang(\"Parsing error\") + \": \" + Globals.lang(\"illegal backslash expression\") + \".\\n\" + ex.getMessage() + \"\\n\" + Globals.lang(\"Look at stderr for details\") + \".\", Globals.lang(\"Parsing error\"), JOptionPane.ERROR_MESSAGE);\n \t\t\t\t}\n \t\t\t}\n \t\t});\n@@ -185,7 +185,7 @@ public void actionPerformed(ActionEvent e) {\n \t                                        Globals.lang(\"Preview\"), JOptionPane.PLAIN_MESSAGE);\n \t\t\t\t} catch (StringIndexOutOfBoundsException ex) {\n \t\t\t\t\tex.printStackTrace();\n-\t\t\t\t\tJOptionPane.showMessageDialog(null, \"Parsing error: illegal backslash expression.\\n\" + ex.getMessage() + \"\\nLook at stderr for details.\", \"Parsing error\", JOptionPane.WARNING_MESSAGE);\n+\t\t\t\t\tJOptionPane.showMessageDialog(null, \"Parsing error: illegal backslash expression.\\n\" + ex.getMessage() + \"\\nLook at stderr for details.\", \"Parsing error\", JOptionPane.ERROR_MESSAGE);\n \t\t\t\t}\n \t\t\t}\n \t\t});, @@ -22,6 +22,10 @@\n \n import javax.swing.JOptionPane;\n \n+import net.sf.jabref.Globals;\n+\n+import com.sun.star.ui.GlobalAcceleratorConfiguration;\n+\n \n /**\n  * Helper class to get a Layout object.\n@@ -376,7 +380,7 @@ private void parseField() throws IOException, StringIndexOutOfBoundsException\n                 \tfor (StringInt entry : parsedEntries.subList(Math.max(0, parsedEntries.size()-6), parsedEntries.size()-1)) {\n                 \t\tlastFive.append(entry.s);\n                 \t}\n-                \tthrow new StringIndexOutOfBoundsException(\"Backslash parsing error near \" + \"\\'\" + lastFive.toString().replace(\"\\n\", \" \") +  \"\\'\");\n+                \tthrow new StringIndexOutOfBoundsException(Globals.lang(\"Backslash parsing error near\") + \" \\'\" + lastFive.toString().replace(\"\\n\", \" \") +  \"\\'\");\n                 }\n                 \n                 //System.out.println(\"NAME:\" + name);, @@ -1664,3 +1664,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -2421,3 +2421,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -1513,10 +1513,6 @@ Sorted_all_subgroups_recursively.=Sorted_all_subgroups_recursively.\n \n Sorted_immediate_subgroups.=Sorted_immediate_subgroups.\n \n-Sort_fields_in_alphabeta_order_(as_ver_2.10)=Sort_fields_in_alphabeta_order_(as_ver_2.10)\n-Sort_fields_in_old_fasion_(as_ver_2.9.2)=Sort_fields_in_old_fasion_(as_ver_2.9.2)\n-Save_fields_as_user_defined_order=Save_fields_as_user_defined_order\n-\n source_edit=source_edit\n Special_Name_Formatters=Special_Name_Formatters\n \n@@ -2402,13 +2398,20 @@ Opened_%0_folder(s).=Opened_%0_folder(s).\n \n \n Searches_for_unlinked_PDF_files_on_the_file_system=Searches_for_unlinked_PDF_files_on_the_file_system\n-\n-Save_entries_ordered_as_specified=Save_entries_ordered_as_specified\n-Save_sort_order=Save_sort_order\n Export_entries_ordered_as_specified=Export_entries_ordered_as_specified\n Export_sort_order=Export_sort_order\n File_Sorting=File_Sorting\n Newline_separator=Newline_separator\n+\n+Save_entries_ordered_as_specified=Save_entries_ordered_as_specified\n+Save_sort_order=Save_sort_order\n Show_Extra_columns=Show_Extra_columns\n Save_entries_as_configured_globally=Save_entries_as_configured_globally\n Open_=Open_\n+\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=Sort_fields_in_alphabeta_order_(as_ver_2.10)\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=Sort_fields_in_old_fasion_(as_ver_2.9.2)\n+Save_fields_as_user_defined_order=Save_fields_as_user_defined_order\n+Parsing_error=Parsing_error\n+illegal_backslash_expression=illegal_backslash_expression\n+Backslash_parsing_error_near=Backslash_parsing_error_near, @@ -1556,3 +1556,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -1602,3 +1602,9 @@ Save_sort_order=Enregistrer_l'ordre_de_tri\n Show_Extra_columns=Montrer_les_colonnes_suppl\\u00e9mentaires\n Save_entries_as_configured_globally=Enregistrer_les_entr\\u00e9es_comme_dans_la_configuration_g\\u00e9n\\u00e9rale\n Open_=Ouvrir_\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -1575,3 +1575,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -1686,3 +1686,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -2406,3 +2406,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -2407,3 +2407,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -2873,3 +2873,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -1571,3 +1571,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, None, @@ -1593,3 +1593,9 @@ Save_sort_order=S\\u0131ralama_kriterlerini_kaydet\n Show_Extra_columns=Ekstra_s\\u00fctunlar\\u0131_g\\u00f6ster\n Save_entries_as_configured_globally=Girdileri_global_ayarlar_uyar\\u0131nca_kaydet\n Open_=A\\u00e7:_\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -2403,3 +2403,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, @@ -2396,3 +2396,9 @@ Save_sort_order=\n Show_Extra_columns=\n Save_entries_as_configured_globally=\n Open_=\n+Sort_fields_in_alphabeta_order_(as_ver_2.10)=\n+Sort_fields_in_old_fasion_(as_ver_2.9.2)=\n+Save_fields_as_user_defined_order=\n+Parsing_error=\n+illegal_backslash_expression=\n+Backslash_parsing_error_near=, ", 1681, 1590, "\"modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, \"", 3271], ["Ingvar Jackal", "Fix for Globals.lang call", "08/04/14, 02:10:04 PM", "Ingvar Jackal", "24654597d2df7da8e3774d7a4da0154633126a23", ["src/main/java/net/sf/jabref/JabRef.java", "src/main/java/net/sf/jabref/journals/ManageJournalsPanel.java"], "@@ -171,7 +171,7 @@ protected JabRef(String[] args) {\n \t\t\t\tGlobals.journalAbbrev.readJournalList(new File(\n \t\t\t\t\t\tpersonalJournalList));\n \t\t\t} catch (FileNotFoundException e) {\n-\t\t\t\tJOptionPane.showMessageDialog(null, Globals.lang(\"Journal_file_not_found\" + \": \" + e.getMessage()), Globals.lang(\"Error_opening_file\"), JOptionPane.ERROR_MESSAGE);\n+\t\t\t\tJOptionPane.showMessageDialog(null, Globals.lang(\"Journal file not found\") + \": \" + e.getMessage(), Globals.lang(\"Error opening file\"), JOptionPane.ERROR_MESSAGE);\n \t\t\t\tGlobals.prefs.put(\"personalJournalList\", \"\");\n \t\t\t}\n \t\t}, @@ -206,7 +206,7 @@ public void actionPerformed(ActionEvent e) {\n                 \t\tstoreSettings();\n                 \t\tdialog.dispose();\n                 \t} catch (FileNotFoundException ex) {\n-                \t\tJOptionPane.showMessageDialog(null, Globals.lang(\"Error_opening_file\" + \": \" + ex.getMessage()), Globals.lang(\"Error_opening_file\"), JOptionPane.ERROR_MESSAGE); \n+                \t\tJOptionPane.showMessageDialog(null, Globals.lang(\"Error opening file\") + \": \" + ex.getMessage(), Globals.lang(\"Error opening file\"), JOptionPane.ERROR_MESSAGE);\n                 \t}\n                 }\n             }, ", 2, 2, "\"modified, modified, \"", 4], ["Thorsten Dahlheimer", "Make (un)abbreviating journal titles also work on the journaltitle field", "08/19/14, 05:32:20 PM", "Thorsten Dahlheimer", "8ef71f3b3b6a7fe486f5822acfff08ed962905ac", ["CHANGELOG", "src/main/java/net/sf/jabref/BibtexFields.java", "src/main/java/net/sf/jabref/journals/AbbreviateAction.java", "src/main/java/net/sf/jabref/journals/UnabbreviateAction.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+    - Make (un)abbreviating journal titles also work on the journaltitle field\n     - Change default behaviour to be more non-invasive: timestamps and owners are NOT set by default per entry.\n     - \"Open Folder\" works again\n     - newline separator can now be configured globally, @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 Raik Nagel and JabRef contributors\n+/*  Copyright (C) 2003-2014 Raik Nagel and JabRef contributors\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -96,6 +96,10 @@ private BibtexFields()\n     dummy = new BibtexSingleField( \"journal\", true, GUIGlobals.SMALL_W ) ;\n     dummy.setExtras(\"journalNames\");\n     add(dummy) ;\n+    dummy = new BibtexSingleField( \"journaltitle\", true, GUIGlobals.SMALL_W ) ;\n+    dummy.setExtras(\"journalNames\");\n+    add(dummy) ;\n+\n     add( new BibtexSingleField( \"key\", true ) ) ;\n     add( new BibtexSingleField( \"month\", true, GUIGlobals.SMALL_W ) ) ;\n     add( new BibtexSingleField( \"note\", true, GUIGlobals.MEDIUM_W  ) ) ;, @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2003-2014 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -56,6 +56,8 @@ public void run() {\n         for (BibtexEntry entry : entries) {\n             if (Globals.journalAbbrev.abbreviate(panel.database(), entry, \"journal\", ce, iso))\n                 count++;\n+            if (Globals.journalAbbrev.abbreviate(panel.database(), entry, \"journaltitle\", ce, iso))\n+                count++;\n         }\n         if (count > 0) {\n             ce.end();, @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2003-2014 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -54,6 +54,8 @@ public void run() {\n         for (BibtexEntry entry : entries) {\n             if (Globals.journalAbbrev.unabbreviate(panel.database(), entry, \"journal\", ce))\n                 count++;\n+            if (Globals.journalAbbrev.unabbreviate(panel.database(), entry, \"journaltitle\", ce))\n+                count++;\n         }\n         if (count > 0) {\n             ce.end();, @@ -53,6 +53,7 @@ <h2>Contributions from:</h2>\n         Fedor Bezrukov,\n         Fabian Bieker,\n         Aaron Chen,\n+        Thorsten Dahlheimer,\n         Fabrice Dessaint,\n         Nathan Dunn,\n         E. Hakan Duran,, ", 13, 3, "\"modified, modified, modified, modified, modified, \"", 16], ["eduardogreco", "Update CHANGELOG and ABOUT", "08/22/14, 10:24:15 PM", "eduardogreco", "e7087082f0b481eb356526dd89a63cf5c29dcba4", ["CHANGELOG", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+\t- Feature 850: Keyboard shortcut for 'Cleanup entries' (by eduardogreco)\n     - Change default behaviour to be more non-invasive: timestamps and owners are NOT set by default per entry.\n     - \"Open Folder\" works again\n     - newline separator can now be configured globally, @@ -88,7 +88,8 @@ <h2>Contributions from:</h2>\n         David Weitzman,\n         Seb Wills,\n         John Zedlewski,\n-        Waluyo Adi Siswanto</p>\n+        Waluyo Adi Siswanto,\n+\t\tEduardo Roberto Greco</p>\n \n         <h2>Thanks to:</h2>\n , ", 3, 1, "\"modified, modified, \"", 4], ["Thorsten Dahlheimer", "Merge branch 'master' into store-edit-fix\n\nConflicts:\n\tCHANGELOG", "09/05/14, 04:59:36 PM", "Thorsten Dahlheimer", "783ea0493f7d218503555c6662ab060cf3765c0d", ["CHANGELOG", "src/main/java/net/sf/jabref/EntryEditor.java", "src/main/java/net/sf/jabref/JabRefFrame.java", "src/main/java/net/sf/jabref/JabRefPreferences.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+\t- Feature 850: Keyboard shortcut for 'Cleanup entries' (by eduardogreco)\n     - Change default behaviour to be more non-invasive: timestamps and owners are NOT set by default per entry.\n     - \"Open Folder\" works again\n     - newline separator can now be configured globally\n@@ -14,6 +15,7 @@\n     - Fixes bug #960 \"FileNotFoundException in Journal abbreviations window\" (pull request #13 by IngvarJackal)\n     - Make (un)abbreviating journal titles also work on the journaltitle field\n     - Fix edits getting lost in Biblatex mode\n+    - Fix error when setting a previously unset field via the source panel of the entry editor\n 2.10\n     - Made IEEEXploreFetcher author parsing work again.\n     - Added a few more characters in the HTML/Unicode to LaTeX conversion., @@ -840,15 +840,14 @@ public boolean storeSource(boolean showError) {\n \n             // Then set all fields that have been set by the user.\n             for (String field : nu.getAllFields()){\n-                if (!entry.getField(field).equals(nu.getField(field))) {\n-                    String toSet = nu.getField(field);\n-\n+                String oldValue = entry.getField(field);\n+                String newValue = nu.getField(field);\n+                if (oldValue == null || !oldValue.equals(newValue)) {\n                     // Test if the field is legally set.\n-                    (new LatexFieldFormatter()).format(toSet, field);\n+                    (new LatexFieldFormatter()).format(newValue, field);\n \n-                    compound.addEdit(new UndoableFieldChange(entry, field, entry\n-                        .getField(field), toSet));\n-                    entry.setField(field, toSet);\n+                    compound.addEdit(new UndoableFieldChange(entry, field, oldValue, newValue));\n+                    entry.setField(field, newValue);\n                     anyChanged = true;\n                 }\n             }, @@ -290,6 +290,7 @@ void addAction(Action a) {\n       writeXmpAction = new GeneralAction(\"writeXMP\", \"Write XMP-metadata to PDFs\",\n                                         Globals.lang(\"Will write XMP-metadata to the PDFs linked from selected entries.\"),\n                                         prefs.getKey(\"Write XMP\")),\n+                                        \n       openFolder = new GeneralAction(\"openFolder\", \"Open folder\",\n                                         Globals.lang(\"Open folder\"),\n                                         prefs.getKey(\"Open folder\")),\n@@ -355,7 +356,8 @@ void addAction(Action a) {\n \n     Cleanup = new GeneralAction(\"Cleanup\", \"Cleanup entries\", \n \t\t\t\t\tGlobals.lang(\"Cleanup entries\"), \n-\t\t\t\t\tGUIGlobals.getIconUrl(\"cleanupentries\") ),\n+\t\t\t\t\tprefs.getKey(\"Cleanup\"),\n+\t\t\t\t\t(\"cleanupentries\")),\n           \n     mergeEntries = new GeneralAction(\"mergeEntries\", \"Merge entries\", \n \t\t\t\t\tGlobals.lang(\"Merge entries\"),\n@@ -1121,16 +1123,15 @@ public GeneralAction(String command, String text, String description, KeyStroke\n           putValue(ACCELERATOR_KEY, key);\n       }\n \n-  /*    public GeneralAction(String command, String text, String description,\n-                           URL imageUrl, KeyStroke key) {\n+      public GeneralAction(String command, String text, String description, KeyStroke key, String imageUrl) {\n       this.command = command;\n-        ImageIcon icon = GUIGlobals.getImage(command);\n+        ImageIcon icon = GUIGlobals.getImage(imageUrl);\n         if (icon != null)\n             putValue(SMALL_ICON, icon);\n       putValue(NAME, text);\n       putValue(SHORT_DESCRIPTION, Globals.lang(description));\n         putValue(ACCELERATOR_KEY, key);\n-    }*/\n+    }\n \n     public void actionPerformed(ActionEvent e) {\n       if (tabbedPane.getTabCount() > 0) {, @@ -1145,6 +1145,7 @@ private void defineDefaultKeyBindings() {\n         defKeyBinds.put(\"Search ACM Portal\", \"ctrl shift F8\");\n         defKeyBinds.put(\"Fetch ArXiv.org\", \"shift F8\");\n         defKeyBinds.put(\"Search JSTOR\", \"shift F9\");\n+        defKeyBinds.put(\"Cleanup\", \"ctrl shift F7\");\n         defKeyBinds.put(\"Write XMP\", \"ctrl F7\");\n         defKeyBinds.put(\"New file link\", \"ctrl N\");\n         defKeyBinds.put(\"Fetch SPIRES\", \"ctrl F8\");, @@ -89,7 +89,8 @@ <h2>Contributions from:</h2>\n         David Weitzman,\n         Seb Wills,\n         John Zedlewski,\n-        Waluyo Adi Siswanto</p>\n+        Waluyo Adi Siswanto,\n+\t\tEduardo Roberto Greco</p>\n \n         <h2>Thanks to:</h2>\n , ", 17, 13, "\"modified, modified, modified, modified, modified, \"", 30], ["Thorsten Dahlheimer", "Fix error when setting unset field in source panel\n\nWhen the user tries to set a previously unset field of an entry via the\nsource panel of the entry editor, the program complains with an error\nmessage and refuses to store the field values.\nThis change fixes that behaviour.", "08/27/14, 05:34:14 PM", "Thorsten Dahlheimer", "1fe684ca7a0974f6e589fd7b2947be4b2086c0d8", ["CHANGELOG", "src/main/java/net/sf/jabref/EntryEditor.java"], "@@ -1,5 +1,4 @@\n [master]\n-    - Make (un)abbreviating journal titles also work on the journaltitle field\n     - Change default behaviour to be more non-invasive: timestamps and owners are NOT set by default per entry.\n     - \"Open Folder\" works again\n     - newline separator can now be configured globally\n@@ -13,6 +12,8 @@\n     - Fixes bug 880 \"PubMed Import broken\" (pull request #11 by vegeziel)\n     - Fixes bug #959 \"StringIndexOutOfBoundsException with invalid Preview text\" (pull request #13 by IngvarJackal)\n     - Fixes bug #960 \"FileNotFoundException in Journal abbreviations window\" (pull request #13 by IngvarJackal)\n+    - Make (un)abbreviating journal titles also work on the journaltitle field\n+    - Fix error when setting a previously unset field via the source panel of the entry editor\n 2.10\n     - Made IEEEXploreFetcher author parsing work again.\n     - Added a few more characters in the HTML/Unicode to LaTeX conversion., @@ -840,15 +840,14 @@ public boolean storeSource(boolean showError) {\n \n             // Then set all fields that have been set by the user.\n             for (String field : nu.getAllFields()){\n-                if (!entry.getField(field).equals(nu.getField(field))) {\n-                    String toSet = nu.getField(field);\n-\n+                String oldValue = entry.getField(field);\n+                String newValue = nu.getField(field);\n+                if (oldValue == null || !oldValue.equals(newValue)) {\n                     // Test if the field is legally set.\n-                    (new LatexFieldFormatter()).format(toSet, field);\n+                    (new LatexFieldFormatter()).format(newValue, field);\n \n-                    compound.addEdit(new UndoableFieldChange(entry, field, entry\n-                        .getField(field), toSet));\n-                    entry.setField(field, toSet);\n+                    compound.addEdit(new UndoableFieldChange(entry, field, oldValue, newValue));\n+                    entry.setField(field, newValue);\n                     anyChanged = true;\n                 }\n             }, ", 8, 8, "\"modified, modified, \"", 16], ["Joerg Lenhard", "Update to gradle 2.1", "09/11/14, 09:02:05 AM", "Joerg Lenhard", "421804a971c5dff4a5254a428dfb80c35010a869", ["build.gradle", "gradle/wrapper/gradle-wrapper.properties"], "@@ -95,7 +95,7 @@ sourceCompatibility = 1.6\n mainClassName = \"net.sf.jabref.JabRefMain\"\n \n task wrapper(type: Wrapper) {\n-    gradleVersion = '2.0'\n+    gradleVersion = '2.1'\n }\n \n compileJava {, @@ -3,4 +3,4 @@ distributionBase=GRADLE_USER_HOME\n distributionPath=wrapper/dists\n zipStoreBase=GRADLE_USER_HOME\n zipStorePath=wrapper/dists\n-distributionUrl=https\\://services.gradle.org/distributions/gradle-2.0-all.zip\n+distributionUrl=https\\://services.gradle.org/distributions/gradle-2.1-all.zip, ", 2, 2, "\"modified, modified, \"", 4], ["Thiago Toledo", "correcao do log4j.properties q tinha deixado para modo debug", "10/16/14, 01:04:57 PM", "Thiago Toledo", "a97dca23d3b4c062be3acc5db5c1c339a495dec3", ["src/main/resources/resource/log4j.properties"], "@@ -1,6 +1,6 @@\n #Uncomment next line for debugging\n-log4j.rootCategory=ALL,stderr\n-#log4j.rootCategory=WARN,stderr\n+#log4j.rootCategory=ALL,stderr\n+log4j.rootCategory=WARN,stderr\n log4j.appender.stderr=org.apache.log4j.ConsoleAppender\n log4j.appender.stderr.target=System.err\n log4j.appender.stderr.layout=org.apache.log4j.PatternLayout, ", 2, 2, "\"modified, \"", 4], ["Tobias", "Extended the 'unknown entry type' error message by the bibtex key in order to make it easier for the user to find the problematic entry.", "10/19/14, 08:14:50 AM", "Tobias", "c7dd9cc3eb5e2c7029dd540e333421cb1ee0f783", ["src/main/java/net/sf/jabref/imports/BibtexParser.java"], "@@ -979,7 +979,8 @@ public void checkEntryTypes(ParserResult _pr) {\n \t\t\t\t\t// \"+be.getType().getName());\n \t\t\t\t\t_pr\n \t\t\t\t\t\t.addWarning(Globals.lang(\"unknown entry type\") + \": \"\n-\t\t\t\t\t\t\t+ be.getType().getName() + \". \" + Globals.lang(\"Type set to 'other'\")\n+\t\t\t\t\t\t\t+ be.getType().getName() + \":\" + be.getField(BibtexFields.KEY_FIELD)\n+\t\t\t\t\t\t\t+ \" . \" + Globals.lang(\"Type set to 'other'\")\n \t\t\t\t\t\t\t+ \".\");\n \t\t\t\t\tbe.setType(BibtexEntryType.OTHER);\n \t\t\t\t}, ", 2, 1, "\"modified, \"", 3], ["rmmsilva", "The rest of steps of the contributing tutorial", "10/20/14, 07:36:15 PM", "rmmsilva", "02899e7dc1076352a4774a86f636b8dd77f20e90", ["CHANGELOG", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+\t- Fix for bug 949: Exception properly logged\n \t- Fix for bug 950: NullPointerException on \"Manage custom imports\"\n \t- Feature 850: Keyboard shortcut for 'Cleanup entries' (by eduardogreco)\n     - Change default behaviour to be more non-invasive: timestamps and owners are NOT set by default per entry., @@ -91,7 +91,8 @@ <h2>Contributions from:</h2>\n         John Zedlewski,\n         Waluyo Adi Siswanto,\n \t\tEduardo Roberto Greco,\n-\t\tThiago Gomes Toledo</p>\n+\t\tThiago Gomes Toledo,\n+\t\tRenato Massao Maeda da Silva</p>\n \n         <h2>Thanks to:</h2>\n , ", 3, 1, "\"modified, modified, \"", 4], ["Tobias", "Fixed bug where a missing year and date field in an entry resulted in crashimr.", "10/24/14, 11:48:28 PM", "Tobias", "11d7054f6a21146685024039a74dde66533c6b16", ["src/main/java/net/sf/jabref/BibtexEntry.java"], "@@ -371,6 +371,8 @@ public String getFieldOrAlias(String name) {\n         if(name.equals(\"year\") || name.equals(\"month\"))\n         {\n         \tString date = getField(\"date\");\n+        \tif(date == null)\n+        \t\treturn null;\n         \t\n         \t// Create date format matching dates with year and month\n         \tDateFormat df = new DateFormat() {, ", 2, 0, "\"modified, \"", 2], ["Mattias Ulbrich", "adapted a pattern to parse DBLP entries.\n\nDBLP seems to send <pre class=\"verbatim select-on-click\"> now\ninstead of only <pre>.", "10/25/14, 10:37:17 AM", "Mattias Ulbrich", "9be39c6446549f6d0631d61b5ae2e2185f9480f8", ["src/main/java/net/sf/jabref/imports/DBLPHelper.java"], "@@ -66,7 +66,7 @@ public String cleanDBLPQuery(String query) {\n \t */\n \tpublic List<BibtexEntry> getBibTexFromPage(final String page) {\n \t\tfinal List<BibtexEntry> bibtexList = new ArrayList<BibtexEntry>();\n-\t\tfinal String startPattern = \"<pre>\";\n+\t\tfinal String startPattern = \"<pre class=\\\"verbatim select-on-click\\\">\";\n \t\tfinal String endPattern = \"</pre>\";\n \n \t\tString tmpStr = page;, ", 1, 1, "\"modified, \"", 2], ["lucianamelo", "ArrayIndexOutOfBoundsException was produced when the user  tried to apply changes in \"Setup selectors\" right after closing all databases. Now the exception is caught and a message is shown, telling the user that the changes could not be applied.", "10/25/14, 05:35:39 PM", "lucianamelo", "bfbd3527171f96dc858c2d52bcbca80c299a9e3d", ["CHANGELOG", "src/main/java/net/sf/jabref/ContentSelectorDialog2.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+\t- Fix for bug 958: ArrayIndexOutOfBoundsException on \"Content Selector Dialog\"\n \t- Fix for bug 949: Exception properly logged\n \t- Fix for bug 950: NullPointerException on \"Manage custom imports\"\n \t- Feature 850: Keyboard shortcut for 'Cleanup entries' (by eduardogreco), @@ -251,8 +251,14 @@ public void actionPerformed(ActionEvent e) {\n \n \tok.addActionListener(new ActionListener() {\n \t\tpublic void actionPerformed(ActionEvent e) {\n-\t\t    applyChanges();\n-\t\t    dispose();\n+\t\t\ttry {\n+\t\t\t\tapplyChanges();\n+\t\t\t\tdispose();\n+\t\t\t}\n+\t\t\tcatch (Exception ex) {\n+\t\t\t\tGlobals.logger(\"Could not apply changes in \\\"Setup selectors\\\"\");\n+\t\t\t\tJOptionPane.showMessageDialog(frame, Globals.lang(\"Could not apply changes.\"));\n+\t\t\t}\n \t\t}\n \t    });\n \n@@ -262,7 +268,13 @@ public void actionPerformed(ActionEvent e) {\n             if (!wordEditField.getText().equals(\"\")) {\n                 wordEditFieldListener.actionPerformed(null);\n             }\n-\t\t    applyChanges();\n+            try {\n+            \tapplyChanges();\n+            }\n+            catch (Exception ex) {\n+\t\t\t\tGlobals.logger(\"Could not apply changes in \\\"Setup selectors\\\"\");\n+\t\t\t\tJOptionPane.showMessageDialog(frame, Globals.lang(\"Could not apply changes.\"));\n+\t\t\t}\n \t\t}\n \t    });\n \t, @@ -92,7 +92,8 @@ <h2>Contributions from:</h2>\n         Waluyo Adi Siswanto,\n \t\tEduardo Roberto Greco,\n \t\tThiago Gomes Toledo,\n-\t\tRenato Massao Maeda da Silva</p>\n+\t\tRenato Massao Maeda da Silva\n+\t\tLuciana de Melo e Abud</p>\n \n         <h2>Thanks to:</h2>\n , ", 18, 4, "\"modified, modified, modified, \"", 22], ["Yara Grassi Gouffon", "Updated CHANGELOG, About.html and header year", "10/26/14, 06:23:53 PM", "Yara Grassi Gouffon", "f87bc27e1f9395e45d8f32ee6d809b3d2e261238", ["CHANGELOG", "src/main/java/net/sf/jabref/export/OOCalcDatabase.java", "src/main/java/net/sf/jabref/export/OpenDocumentRepresentation.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+\t- Partial fix for bug 913: fixed export for .ods and .sxc (by yaragg)\n \t- Fix for bug 949: Exception properly logged\n \t- Fix for bug 950: NullPointerException on \"Manage custom imports\"\n \t- Feature 850: Keyboard shortcut for 'Cleanup entries' (by eduardogreco), @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2003-2014 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or, @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2003-2014 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or, @@ -92,7 +92,8 @@ <h2>Contributions from:</h2>\n         Waluyo Adi Siswanto,\n \t\tEduardo Roberto Greco,\n \t\tThiago Gomes Toledo,\n-\t\tRenato Massao Maeda da Silva</p>\n+\t\tRenato Massao Maeda da Silva,\n+\t\tYara Grassi Gouffon</p>\n \n         <h2>Thanks to:</h2>\n , ", 5, 3, "\"modified, modified, modified, modified, \"", 8], ["Tobias", "Added special fields 'Printed' and 'Read status'", "10/27/14, 08:34:07 PM", "Tobias", "cc344ca29fc359c6ac792325f74f6deb2ff4a117", ["CHANGELOG", "src/main/java/net/sf/jabref/BasePanel.java", "src/main/java/net/sf/jabref/BibtexFields.java", "src/main/java/net/sf/jabref/GUIGlobals.java", "src/main/java/net/sf/jabref/JabRefFrame.java", "src/main/java/net/sf/jabref/JabRefPreferences.java", "src/main/java/net/sf/jabref/RightClickMenu.java", "src/main/java/net/sf/jabref/TableColumnsTab.java", "src/main/java/net/sf/jabref/gui/MainTableFormat.java", "src/main/java/net/sf/jabref/gui/PreventDraggingJTableHeader.java", "src/main/java/net/sf/jabref/specialfields/Printed.java", "src/main/java/net/sf/jabref/specialfields/ReadStatus.java", "src/main/java/net/sf/jabref/specialfields/SpecialFieldsUtils.java", "src/main/java/net/sf/jabref/util/ManageKeywordsAction.java", "src/main/resources/images/crystal_16/Icons.properties", "src/main/resources/images/crystal_16/fileprint.png", "src/main/resources/images/crystal_16/read.png", "src/main/resources/images/crystal_16/readskimmed.png"], "@@ -22,6 +22,12 @@\n     \t- Fixes bug #1014 'journal' not recognized as alias for 'journaltitle''\n     \t- Fixes bug #874 Support of biblatex \"date\" field\n     \t- Fixes bug that prevented the secondary optional fields to update properly in the \"Customize entry fields\" dialog (in BibLatex mode)\n+\t- Added special fields 'Printed' and 'Read status', thereby implementing (at least partially):\n+\t\t- Feature #762 Printed attribute\n+\t\t- Feature #692 Marking of new entries and often read entries \n+\t\t- Feature #685 Highlight new entries that were \"forgotten\"\n+\t\t- Feature #602 could add the mark as read feature \n+\t\t- Feature #225 read? checkbox\n 2.10\n     - Made IEEEXploreFetcher author parsing work again.\n     - Added a few more characters in the HTML/Unicode to LaTeX conversion., @@ -90,9 +90,11 @@\n import net.sf.jabref.labelPattern.SearchFixDuplicateLabels;\n import net.sf.jabref.search.NoSearchMatcher;\n import net.sf.jabref.search.SearchMatcher;\n+import net.sf.jabref.specialfields.Printed;\n import net.sf.jabref.specialfields.Priority;\n import net.sf.jabref.specialfields.Quality;\n import net.sf.jabref.specialfields.Rank;\n+import net.sf.jabref.specialfields.ReadStatus;\n import net.sf.jabref.specialfields.Relevance;\n import net.sf.jabref.specialfields.SpecialFieldAction;\n import net.sf.jabref.specialfields.SpecialFieldDatabaseChangeListener;\n@@ -1558,13 +1560,17 @@ public void action() {\n                   new SpecialFieldAction(frame, Relevance.getInstance(), Relevance.getInstance().getValues().get(0).getFieldValue(), true, Globals.lang(\"Marked entries as relevant\"), \"Marked %0 entries as relevant\"));\n               actions.put(Quality.getInstance().getValues().get(0).getActionName(),\n                   new SpecialFieldAction(frame, Quality.getInstance(), Quality.getInstance().getValues().get(0).getFieldValue(), true, Globals.lang(\"Marked entries' quality as good\"), \"Set quality of %0 entries to good\"));\n+              actions.put(Printed.getInstance().getValues().get(0).getActionName(),\n+                      new SpecialFieldAction(frame, Printed.getInstance(), Printed.getInstance().getValues().get(0).getFieldValue(), true, Globals.lang(\"Marked entries as printed\"), \"Marked %0 entries as printed\"));\n               \n               for (SpecialFieldValue prio: Priority.getInstance().getValues()) {\n \t              actions.put(prio.getActionName(), prio.getAction(this.frame));\n               }\n-              \n-              for (SpecialFieldValue prio: Rank.getInstance().getValues()) {\n-\t              actions.put(prio.getActionName(), prio.getAction(this.frame));\n+              for (SpecialFieldValue rank: Rank.getInstance().getValues()) {\n+\t              actions.put(rank.getActionName(), rank.getAction(this.frame));\n+              }\n+              for (SpecialFieldValue status: ReadStatus.getInstance().getValues()) {\n+\t              actions.put(status.getActionName(), status.getAction(this.frame));\n               }\n               \n               actions.put(\"togglePreview\", new BaseAction() {, @@ -144,6 +144,20 @@ private BibtexFields()\n     \tdummy.setDisplayable(false);\n     }\n     add(dummy) ;\n+    dummy =  new BibtexSingleField( SpecialFieldsUtils.FIELDNAME_READ , false) ;\n+    if (!Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS)) {\n+    \tdummy.setPrivate();\n+    \tdummy.setWriteable(false);\n+    \tdummy.setDisplayable(false);\n+    }\n+    add(dummy) ;\n+    dummy =  new BibtexSingleField( SpecialFieldsUtils.FIELDNAME_PRINTED , false) ;\n+    if (!Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS)) {\n+    \tdummy.setPrivate();\n+    \tdummy.setWriteable(false);\n+    \tdummy.setDisplayable(false);\n+    }\n+    add(dummy) ;\n     \n     // some semi-standard fields\n     dummy = new BibtexSingleField( KEY_FIELD, true ) ;, @@ -27,14 +27,17 @@\n \n import javax.swing.ImageIcon;\n import javax.swing.JLabel;\n-\n import javax.swing.SwingConstants;\n+\n import net.sf.jabref.external.ExternalFileType;\n+\n import org.xnap.commons.gui.shortcut.EmacsKeyBindings;\n \n+import net.sf.jabref.specialfields.Printed;\n import net.sf.jabref.specialfields.Priority;\n import net.sf.jabref.specialfields.Quality;\n import net.sf.jabref.specialfields.Rank;\n+import net.sf.jabref.specialfields.ReadStatus;\n import net.sf.jabref.specialfields.Relevance;\n import net.sf.jabref.specialfields.SpecialFieldsUtils;\n \n@@ -440,6 +443,16 @@ public static void init() {\n         lab.setToolTipText(Rank.getInstance().getToolTip());\n         tableIcons.put(SpecialFieldsUtils.FIELDNAME_PRIORITY, lab);\n         \n+        // Read icon used for menu\n+        lab = new JLabel(ReadStatus.getInstance().getRepresentingIcon());\n+        lab.setToolTipText(ReadStatus.getInstance().getToolTip());\n+        tableIcons.put(SpecialFieldsUtils.FIELDNAME_READ, lab);\n+        \n+        // Print icon used for menu\n+        lab = new JLabel(Printed.getInstance().getRepresentingIcon());\n+        lab.setToolTipText(Printed.getInstance().getToolTip());\n+        tableIcons.put(SpecialFieldsUtils.FIELDNAME_PRINTED, lab);\n+        \n         //jabRefFont = new Font(\"arial\", Font.ITALIC/*+Font.BOLD*/, 20); \n \n         if (Globals.prefs.getBoolean(JabRefPreferences.EDITOR_EMACS_KEYBINDINGS)) {, @@ -68,9 +68,11 @@\n import net.sf.jabref.plugin.PluginInstallerAction;\n import net.sf.jabref.plugin.core.JabRefPlugin;\n import net.sf.jabref.plugin.core.generated._JabRefPlugin.EntryFetcherExtension;\n+import net.sf.jabref.specialfields.Printed;\n import net.sf.jabref.specialfields.Priority;\n import net.sf.jabref.specialfields.Quality;\n import net.sf.jabref.specialfields.Rank;\n+import net.sf.jabref.specialfields.ReadStatus;\n import net.sf.jabref.specialfields.Relevance;\n import net.sf.jabref.specialfields.SpecialFieldsUtils;\n import net.sf.jabref.sql.importer.DbImportAction;\n@@ -225,6 +227,10 @@ void addAction(Action a) {\n \t\t\t\tQuality.getInstance().getValues().get(0).getActionName(),\n \t\t\t\tQuality.getInstance().getValues().get(0).getMenuString(),\n \t\t\t\tQuality.getInstance().getValues().get(0).getToolTipText()),\n+\t\ttogglePrinted = new GeneralAction(\n+\t\t\t\tPrinted.getInstance().getValues().get(0).getActionName(),\n+\t\t\t\tPrinted.getInstance().getValues().get(0).getMenuString(),\n+\t\t\t\tPrinted.getInstance().getValues().get(0).getToolTipText()),\n //    \tpriority = new GeneralAction(\"setPriority\", \"Set priority\",\n //    \t\t\t                                            Globals.lang(\"Set priority\")),\n       manageSelectors = new GeneralAction(\"manageSelectors\", \"Manage content selectors\"),\n@@ -1346,6 +1352,14 @@ private void fillMenu() {\n     \t\t  RightClickMenu.populateSpecialFieldMenu(m, Priority.getInstance(), this);\n     \t\t  edit.add(m);\n     \t  }\n+    \t  if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED)) {\n+    \t\t  edit.add(togglePrinted);\n+    \t  }\n+    \t  if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_READ)) {\n+    \t\t  m = new JMenu();\n+    \t\t  RightClickMenu.populateSpecialFieldMenu(m, ReadStatus.getInstance(), this);\n+    \t\t  edit.add(m);\n+    \t  }\n       }\n       edit.addSeparator();\n       edit.add(manageKeywords);\n@@ -1572,6 +1586,12 @@ private void createToolBar() {\n     \tif (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY)) {\n     \t\ttlb.add(net.sf.jabref.specialfields.SpecialFieldDropDown.generateSpecialFieldButtonWithDropDown(Priority.getInstance(), this));\n     \t}\n+    \tif (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED)) {\n+    \t\ttlb.addAction(togglePrinted);\n+    \t}\n+    \tif (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_READ)) {\n+    \t\ttlb.add(net.sf.jabref.specialfields.SpecialFieldDropDown.generateSpecialFieldButtonWithDropDown(ReadStatus.getInstance(), this));\n+    \t}\n     }\n \n     tlb.addSeparator();, @@ -437,6 +437,8 @@ private JabRefPreferences() {\n         defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_RANKING, SpecialFieldsUtils.PREF_SHOWCOLUMN_RANKING_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_RANKING_COMPACT, SpecialFieldsUtils.PREF_RANKING_COMPACT_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_RELEVANCE, SpecialFieldsUtils.PREF_SHOWCOLUMN_RELEVANCE_DEFAULT);\n+        defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED, SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED_DEFAULT);\n+        defaults.put(SpecialFieldsUtils.PREF_SHOWCOLUMN_READ, SpecialFieldsUtils.PREF_SHOWCOLUMN_READ_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_AUTOSYNCSPECIALFIELDSTOKEYWORDS, SpecialFieldsUtils.PREF_AUTOSYNCSPECIALFIELDSTOKEYWORDS_DEFAULT);\n         defaults.put(SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS, SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS_DEFAULT);\n , @@ -25,9 +25,11 @@\n import javax.swing.event.PopupMenuListener;\n \n import net.sf.jabref.groups.*;\n+import net.sf.jabref.specialfields.Printed;\n import net.sf.jabref.specialfields.Priority;\n import net.sf.jabref.specialfields.Quality;\n import net.sf.jabref.specialfields.Rank;\n+import net.sf.jabref.specialfields.ReadStatus;\n import net.sf.jabref.specialfields.Relevance;\n import net.sf.jabref.specialfields.SpecialField;\n import net.sf.jabref.specialfields.SpecialFieldValue;\n@@ -45,6 +47,7 @@\n             groupMoveMenu = new JMenu(Globals.lang(\"Assign exclusively to group\")), // JZTODO lyrics\n             rankingMenu = new JMenu(),\n             priorityMenu = new JMenu(),\n+            readStatusMenu = new JMenu(),\n             typeMenu = new JMenu(Globals.lang(\"Change entry type\"));\n     JMenuItem groupAdd, groupRemove, groupMoveTo;\n     JCheckBoxMenuItem\n@@ -200,11 +203,19 @@ public void actionPerformed(ActionEvent e) {\n         \tif (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_QUALITY)) {\n         \t\tadd(Quality.getInstance().getValues().get(0).getMenuAction(panel.frame));\n         \t}\n+        \tif (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED)) {\n+        \t\tadd(Printed.getInstance().getValues().get(0).getMenuAction(panel.frame));\n+        \t}\n \n         \tif (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY)) {\n \t\t        populateSpecialFieldMenu(this.priorityMenu, Priority.getInstance(), panel.frame);\n \t\t        add(this.priorityMenu);\n         \t}\n+        \t\n+        \tif (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_READ)) {\n+\t\t        populateSpecialFieldMenu(this.readStatusMenu, ReadStatus.getInstance(), panel.frame);\n+\t\t        add(this.readStatusMenu);\n+        \t}\n \t        \n \t        addSeparator();\n         }, @@ -54,9 +54,9 @@\n     private JCheckBox showOneLetterHeadingForIconColumns;\n \n     /*** begin: special fields ***/\n-\tprivate JCheckBox specialFieldsEnabled, rankingColumn, compactRankingColumn, qualityColumn, priorityColumn, relevanceColumn;\n+\tprivate JCheckBox specialFieldsEnabled, rankingColumn, compactRankingColumn, qualityColumn, priorityColumn, relevanceColumn, printedColumn, readStatusColumn;\n \tprivate JRadioButton syncKeywords, writeSpecialFields;\n-\tprivate boolean oldSpecialFieldsEnabled, oldRankingColumn, oldCompcatRankingColumn, oldQualityColumn, oldPriorityColumn, oldRelevanceColumn, oldSyncKeyWords, oldWriteSpecialFields;\n+\tprivate boolean oldSpecialFieldsEnabled, oldRankingColumn, oldCompcatRankingColumn, oldQualityColumn, oldPriorityColumn, oldRelevanceColumn, oldPrintedColumn, oldReadStatusColumn, oldSyncKeyWords, oldWriteSpecialFields;\n \n     /*** end: special fields ***/\n \n@@ -237,6 +237,8 @@ public void stateChanged(ChangeEvent event) {\n \t\t\t\tqualityColumn.setEnabled(isEnabled);\n \t\t\t\tpriorityColumn.setEnabled(isEnabled);\n \t\t\t\trelevanceColumn.setEnabled(isEnabled);\n+\t\t\t\tprintedColumn.setEnabled(isEnabled);\n+\t\t\t\treadStatusColumn.setEnabled(isEnabled);\n \t\t\t\tsyncKeywords.setEnabled(isEnabled);\n \t\t\t\twriteSpecialFields.setEnabled(isEnabled);\n \t\t\t}\n@@ -251,6 +253,8 @@ public void stateChanged(ChangeEvent event) {\n \t\tqualityColumn = new JCheckBox(Globals.lang(\"Show quality\"));\n \t\tpriorityColumn = new JCheckBox(Globals.lang(\"Show priority\"));\n \t\trelevanceColumn = new JCheckBox(Globals.lang(\"Show relevance\"));\n+\t\tprintedColumn = new JCheckBox(Globals.lang(\"Show printed status\"));\n+\t\treadStatusColumn = new JCheckBox(Globals.lang(\"Show read status\"));\n \t\t\n \t\t// \"sync keywords\" and \"write special\" fields may be configured mutually exclusive only\n \t\t// The implementation supports all combinations (TRUE+TRUE and FALSE+FALSE, even if the latter does not make sense)\n@@ -266,7 +270,7 @@ public void stateChanged(ChangeEvent event) {\n \t\tbuilder.append(pan);\n \n \t\tDefaultFormBuilder specialTableColumnsBuilder = new DefaultFormBuilder(new FormLayout(\n-\t\t\t\t\"8dlu, 8dlu, 8cm, 8dlu, 8dlu, left:pref:grow\", \"pref, pref, pref, pref, pref, pref, pref, pref, pref, pref\"));\n+\t\t\t\t\"8dlu, 8dlu, 8cm, 8dlu, 8dlu, left:pref:grow\", \"pref, pref, pref, pref, pref, pref, pref, pref, pref, pref, pref, pref, pref\"));\n         CellConstraints cc = new CellConstraints();\n \t\t\n         specialTableColumnsBuilder.add(specialFieldsEnabled, cc.xyw(1, 1, 3));\n@@ -275,10 +279,12 @@ public void stateChanged(ChangeEvent event) {\n         specialTableColumnsBuilder.add(relevanceColumn, cc.xyw(2, 4, 2));\n         specialTableColumnsBuilder.add(qualityColumn, cc.xyw(2, 5, 2));\n         specialTableColumnsBuilder.add(priorityColumn, cc.xyw(2, 6, 2));\n-        specialTableColumnsBuilder.add(syncKeywords, cc.xyw(2, 7, 2));\n-        specialTableColumnsBuilder.add(writeSpecialFields, cc.xyw(2, 8, 2));\n-        specialTableColumnsBuilder.add(showOneLetterHeadingForIconColumns, cc.xyw(1, 9, 5));\n-\t\tspecialTableColumnsBuilder.add(hlb, cc.xyw(1, 10, 2));\n+        specialTableColumnsBuilder.add(printedColumn, cc.xyw(2, 7, 2));\n+        specialTableColumnsBuilder.add(readStatusColumn, cc.xyw(2, 8, 2));\n+        specialTableColumnsBuilder.add(syncKeywords, cc.xyw(2, 10, 2));\n+        specialTableColumnsBuilder.add(writeSpecialFields, cc.xyw(2, 11, 2));\n+        specialTableColumnsBuilder.add(showOneLetterHeadingForIconColumns, cc.xyw(1, 12, 4));\n+\t\tspecialTableColumnsBuilder.add(hlb, cc.xyw(1, 13, 2));\n \n \t\tspecialTableColumnsBuilder.add(fileColumn, cc.xyw(5, 1, 2));\t\n \t\tspecialTableColumnsBuilder.add(pdfColumn, cc.xyw(5, 2, 2));\t\n@@ -288,7 +294,7 @@ public void stateChanged(ChangeEvent event) {\n \t\tspecialTableColumnsBuilder.add(arxivColumn, cc.xyw(5, 6, 2));\t\n \n \t\tspecialTableColumnsBuilder.add(extraFileColumns, cc.xyw(5, 7, 2));\t\n-\t\tspecialTableColumnsBuilder.add(listOfFileColumnsScrollPane, cc.xywh(5, 8, 2, 3));\t\n+\t\tspecialTableColumnsBuilder.add(listOfFileColumnsScrollPane, cc.xywh(5, 8, 2, 5));\t\n \n \t\tbuilder.append(specialTableColumnsBuilder.getPanel());\n \t\tbuilder.nextLine();\n@@ -360,6 +366,12 @@ public void setValues() {\n \t\t\n \t\toldRelevanceColumn = _prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_RELEVANCE);\n         relevanceColumn.setSelected(oldRelevanceColumn);\n+        \n+        oldPrintedColumn = _prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED);\n+        printedColumn.setSelected(oldPrintedColumn);\n+        \n+        oldReadStatusColumn = _prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_READ);\n+        readStatusColumn.setSelected(oldReadStatusColumn);\n \t\t\n \t\toldSyncKeyWords = _prefs.getBoolean(SpecialFieldsUtils.PREF_AUTOSYNCSPECIALFIELDSTOKEYWORDS);\n \t\tsyncKeywords.setSelected(oldSyncKeyWords);\n@@ -630,7 +642,9 @@ public void storeSettings() {\n \t\tnewCompactRankingColumn = compactRankingColumn.isSelected(),\n \t\tnewQualityColumn = qualityColumn.isSelected(), \n \t\tnewPriorityColumn = priorityColumn.isSelected(), \n-\t\tnewRelevanceColumn = relevanceColumn.isSelected(), \n+\t\tnewRelevanceColumn = relevanceColumn.isSelected(),\n+\t\tnewPrintedColumn = printedColumn.isSelected(),\n+\t\tnewReadStatusColumn = readStatusColumn.isSelected(),\n \t\tnewSyncKeyWords = syncKeywords.isSelected(), \n \t\tnewWriteSpecialFields = writeSpecialFields.isSelected();\n \t\t\n@@ -641,6 +655,8 @@ public void storeSettings() {\n \t\t\t\t(oldQualityColumn != newQualityColumn) ||\n \t\t\t\t(oldPriorityColumn != newPriorityColumn) ||\n \t\t\t\t(oldRelevanceColumn != newRelevanceColumn) ||\n+\t\t\t\t(oldPrintedColumn != newPrintedColumn) ||\n+\t\t\t\t(oldReadStatusColumn != newReadStatusColumn) ||\n \t\t\t\t(oldSyncKeyWords != newSyncKeyWords) ||\n \t\t\t\t(oldWriteSpecialFields != newWriteSpecialFields);\n \t\tif (restartRequired) {\n@@ -661,6 +677,8 @@ public void storeSettings() {\n \t\t\t_prefs.putBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY, newPriorityColumn);\n \t\t\t_prefs.putBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_QUALITY, newQualityColumn);\n \t\t\t_prefs.putBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_RELEVANCE, newRelevanceColumn);\n+\t\t\t_prefs.putBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED, newPrintedColumn);\n+\t\t\t_prefs.putBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_READ, newReadStatusColumn);\n \t\t\t_prefs.putBoolean(SpecialFieldsUtils.PREF_AUTOSYNCSPECIALFIELDSTOKEYWORDS, newSyncKeyWords);\n \t\t\t_prefs.putBoolean(SpecialFieldsUtils.PREF_SERIALIZESPECIALFIELDS, newWriteSpecialFields);\n \t\t}, @@ -31,13 +31,16 @@\n import net.sf.jabref.Util;\n import net.sf.jabref.specialfields.Priority;\n import net.sf.jabref.specialfields.Rank;\n+import net.sf.jabref.specialfields.ReadStatus;\n import net.sf.jabref.specialfields.SpecialFieldValue;\n import net.sf.jabref.specialfields.SpecialFieldsUtils;\n import ca.odell.glazedlists.gui.TableFormat;\n import ca.odell.glazedlists.matchers.Matcher;\n+\n import java.awt.Color;\n import java.awt.Graphics;\n import java.awt.image.BufferedImage;\n+\n import javax.swing.Icon;\n import javax.swing.ImageIcon;\n import javax.swing.JLabel;\n@@ -66,6 +69,8 @@\n     PRIORITY = {SpecialFieldsUtils.FIELDNAME_PRIORITY},\n     RELEVANCE = {SpecialFieldsUtils.FIELDNAME_RELEVANCE},\n     QUALITY = {SpecialFieldsUtils.FIELDNAME_QUALITY},\n+    PRINTED = {SpecialFieldsUtils.FIELDNAME_PRINTED},\n+    READ = {SpecialFieldsUtils.FIELDNAME_READ},\n     FILE = {GUIGlobals.FILE_FIELD};\n \n     BasePanel panel;\n@@ -236,6 +241,13 @@ else if (iconType != null) {\n                 if (rank != null) {\n                     o = rank.createLabel();\n                 }\n+            // Handle read status column special\n+            // Extra handling because the icon depends on a FieldValue\n+            } else if (iconType[hasField].equals(READ[0])) {\n+                SpecialFieldValue status = ReadStatus.getInstance().parse(be.getField(SpecialFieldsUtils.FIELDNAME_READ));\n+                if (status != null) {\n+                    o = status.createLabel();\n+                }\n             } else {\n                 o = GUIGlobals.getTableIcon(iconType[hasField]);\n \n@@ -377,6 +389,10 @@ public void updateTableFormat() {\n                 iconCols.put(coln++, QUALITY);\n             if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY))\n                 iconCols.put(coln++, PRIORITY);\n+            if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED))\n+                iconCols.put(coln++, PRINTED);\n+            if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_READ))\n+                iconCols.put(coln++, READ);\n         }\n \n         if (Globals.prefs.getBoolean(\"fileColumn\")), @@ -135,6 +135,10 @@ private int getSpecialColumnsCount() {\n \t            count++;\n \t        if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRIORITY))\n \t            count++;\n+\t        if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_PRINTED))\n+\t            count++;\n+\t        if (Globals.prefs.getBoolean(SpecialFieldsUtils.PREF_SHOWCOLUMN_READ))\n+\t            count++;\n         }\n \n         return count;, @@ -0,0 +1,63 @@\n+/*  Copyright (C) 2012 JabRef contributors.\n+    This program is free software; you can redistribute it and/or modify\n+    it under the terms of the GNU General Public License as published by\n+    the Free Software Foundation; either version 2 of the License, or\n+    (at your option) any later version.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU General Public License for more details.\n+\n+    You should have received a copy of the GNU General Public License along\n+    with this program; if not, write to the Free Software Foundation, Inc.,\n+    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n+*/\n+package net.sf.jabref.specialfields;\n+\n+import java.util.ArrayList;\n+\n+import javax.swing.ImageIcon;\n+\n+import net.sf.jabref.GUIGlobals;\n+import net.sf.jabref.Globals;\n+\n+public class Printed extends SpecialField {\n+\n+\tprivate static Printed INSTANCE;\n+\n+\tpublic Printed() {\n+\t\tArrayList<SpecialFieldValue> values = new ArrayList<SpecialFieldValue>();\n+    \tvalues.add(new SpecialFieldValue(this, \"printed\", \"togglePrinted\", Globals.lang(\"Toogle print status\"), GUIGlobals.getImage(\"printed\"), Globals.lang(\"Toogle print status\")));\n+\t\tthis.setValues(values);\n+\t\tTEXT_DONE_PATTERN = \"Toggled print status for %0 entries\";\n+\t}\n+\t\n+\tpublic String getFieldName() {\n+\t\treturn SpecialFieldsUtils.FIELDNAME_PRINTED;\n+\t}\n+\n+\tpublic static Printed getInstance() {\n+\t\tif (INSTANCE == null) {\n+\t\t\tINSTANCE = new Printed();\n+\t\t}\n+\t\treturn INSTANCE;\n+\t}\n+\t\n+\tpublic ImageIcon getRepresentingIcon() {\n+\t\treturn this.getValues().get(0).getIcon();\n+\t}\n+\n+\tpublic String getToolTip() {\n+\t\treturn this.getValues().get(0).getToolTipText();\n+\t}\n+\n+\tpublic String getMenuString() {\n+\t\treturn Globals.lang(\"Printed\");\n+\t}\n+\t\n+\tpublic boolean isSingleValueField() {\n+\t\treturn true;\n+\t}\n+\n+}, @@ -0,0 +1,65 @@\n+/*  Copyright (C) 2012 JabRef contributors.\n+    This program is free software; you can redistribute it and/or modify\n+    it under the terms of the GNU General Public License as published by\n+    the Free Software Foundation; either version 2 of the License, or\n+    (at your option) any later version.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU General Public License for more details.\n+\n+    You should have received a copy of the GNU General Public License along\n+    with this program; if not, write to the Free Software Foundation, Inc.,\n+    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n+*/\n+package net.sf.jabref.specialfields;\n+\n+import java.util.ArrayList;\n+\n+import javax.swing.ImageIcon;\n+\n+import net.sf.jabref.GUIGlobals;\n+import net.sf.jabref.Globals;\n+\n+public class ReadStatus extends SpecialField {\n+\t\n+\tprivate static ReadStatus INSTANCE = null;\n+\t\n+\tprivate ImageIcon icon = new ImageIcon(GUIGlobals.getIconUrl(\"readstatus\"));\n+\t\n+\tpublic ReadStatus() {\n+\t\tArrayList<SpecialFieldValue> values = new ArrayList<SpecialFieldValue>();\n+\t\tvalues.add(new SpecialFieldValue(this, null, \"clearReadStatus\", Globals.lang(\"Clear read status\"), null, Globals.lang(\"No read status information\")));\n+\t\tImageIcon icon;\n+\t\ticon = GUIGlobals.getImage(\"readStatusRead\");\n+\t\tvalues.add(new SpecialFieldValue(this, \"read\", \"setReadStatusToRead\", Globals.lang(\"Set read status to read\"), icon, Globals.lang(\"Read status read\")));\n+\t\ticon = GUIGlobals.getImage(\"readStatusSkimmed\");\n+\t\tvalues.add(new SpecialFieldValue(this, \"skimmed\", \"setReadStatusToSkimmed\", Globals.lang(\"Set read status to skimmed\"), icon, Globals.lang(\"Read status skimmed\")));\n+\t\tthis.setValues(values);\n+\t\tTEXT_DONE_PATTERN = \"Set read status '%0' for %1 entries\";\n+\t}\n+\t\n+\tpublic static ReadStatus getInstance() {\n+\t\tif (INSTANCE == null) {\n+\t\t\tINSTANCE = new ReadStatus();\n+\t\t}\n+\t\treturn INSTANCE;\n+\t}\n+\t\n+\tpublic String getFieldName() {\n+\t\treturn SpecialFieldsUtils.FIELDNAME_READ;\n+\t}\n+\t\n+\tpublic ImageIcon getRepresentingIcon() {\n+\t\treturn this.icon;\n+\t}\n+\t\n+\tpublic String getToolTip() {\n+\t\treturn Globals.lang(\"Read status\");\n+\t}\n+\t\n+\tpublic String getMenuString() {\n+\t\treturn Globals.lang(\"Read status\");\n+\t}\n+}, @@ -30,6 +30,8 @@\n \tpublic final static String FIELDNAME_RANKING = \"ranking\";\n \tpublic final static String FIELDNAME_RELEVANCE = \"relevance\";\n \tpublic final static String FIELDNAME_QUALITY = \"qualityassured\";\n+\tpublic final static String FIELDNAME_READ = \"readstatus\";\n+\tpublic final static String FIELDNAME_PRINTED = \"printed\";\n \n \tpublic final static String  PREF_SPECIALFIELDSENABLED = \"specialFieldsEnabled\";\n \tpublic final static Boolean PREF_SPECIALFIELDSENABLED_DEFAULT = Boolean.FALSE;\n@@ -49,6 +51,12 @@\n \tpublic final static String  PREF_SHOWCOLUMN_QUALITY = \"showQualityColumn\";\n \tpublic final static Boolean PREF_SHOWCOLUMN_QUALITY_DEFAULT = Boolean.FALSE;\n \t\n+\tpublic final static String  PREF_SHOWCOLUMN_READ = \"showReadColumn\";\n+\tpublic final static Boolean PREF_SHOWCOLUMN_READ_DEFAULT = Boolean.FALSE;\n+\t\n+\tpublic final static String  PREF_SHOWCOLUMN_PRINTED = \"showPrintedColumn\";\n+\tpublic final static Boolean PREF_SHOWCOLUMN_PRINTED_DEFAULT = Boolean.FALSE;\n+\t\n \tpublic final static String  PREF_AUTOSYNCSPECIALFIELDSTOKEYWORDS = \"autoSyncSpecialFieldsToKeywords\";\n \tpublic final static Boolean PREF_AUTOSYNCSPECIALFIELDSTOKEYWORDS_DEFAULT = Boolean.FALSE;\n \t\n@@ -114,6 +122,8 @@ public static void syncKeywordsFromSpecialFields(BibtexEntry be, NamedCompound n\n \t\texportFieldToKeywords(Rank.getInstance(), be, nc);\n \t\texportFieldToKeywords(Relevance.getInstance(), be, nc);\n \t\texportFieldToKeywords(Quality.getInstance(), be, nc);\n+\t\texportFieldToKeywords(ReadStatus.getInstance(), be, nc);\n+\t\texportFieldToKeywords(Printed.getInstance(), be, nc);\n \t}\n \t\n \tprivate static void importKeywordsForField(ArrayList<String> keywordList, SpecialField c, BibtexEntry be, NamedCompound nc) {\n@@ -141,6 +151,8 @@ public static void syncSpecialFieldsFromKeywords(BibtexEntry be, NamedCompound c\n \t\timportKeywordsForField(keywordList, Rank.getInstance(), be, ce);\n \t\timportKeywordsForField(keywordList, Quality.getInstance(), be, ce);\n \t\timportKeywordsForField(keywordList, Relevance.getInstance(), be, ce);\n+\t\timportKeywordsForField(keywordList, ReadStatus.getInstance(), be, ce);\n+\t\timportKeywordsForField(keywordList, Printed.getInstance(), be, ce);\n \t}\n \t\n \t/**\n@@ -156,6 +168,10 @@ public static SpecialField getSpecialFieldInstanceFromFieldName(String fieldName\n \t\t\treturn Rank.getInstance();\n \t\t} else if (fieldName.equals(FIELDNAME_RELEVANCE)) {\n \t\t\treturn Relevance.getInstance();\n+\t\t} else if (fieldName.equals(FIELDNAME_READ)) {\n+\t\t\treturn ReadStatus.getInstance();\n+\t\t} else if (fieldName.equals(FIELDNAME_PRINTED)) {\n+\t\t\treturn Printed.getInstance();\n \t\t} else {\n \t\t\treturn null;\n \t\t}, @@ -20,7 +20,6 @@\n import java.awt.event.ActionListener;\n import java.awt.event.KeyEvent;\n import java.awt.event.KeyListener;\n-\n import java.util.ArrayList;\n import java.util.Enumeration;\n import java.util.HashSet;\n@@ -50,9 +49,11 @@\n import net.sf.jabref.Util;\n import net.sf.jabref.autocompleter.AbstractAutoCompleter;\n import net.sf.jabref.gui.AutoCompleteListener;\n+import net.sf.jabref.specialfields.Printed;\n import net.sf.jabref.specialfields.Priority;\n import net.sf.jabref.specialfields.Quality;\n import net.sf.jabref.specialfields.Rank;\n+import net.sf.jabref.specialfields.ReadStatus;\n import net.sf.jabref.specialfields.Relevance;\n import net.sf.jabref.specialfields.SpecialFieldsUtils;\n import net.sf.jabref.undo.NamedCompound;\n@@ -326,6 +327,20 @@ public void actionPerformed(ActionEvent e) {\n \t        \tif (!clone.isEmpty()) {\n \t        \t\tkeywordsToRemove.addAll(Relevance.getInstance().getKeyWords());\n \t        \t}\n+\t        \t\n+\t        \t// Read status\n+\t        \tclone = createClone(keywordsToAdd);\n+\t        \tclone.retainAll(ReadStatus.getInstance().getKeyWords());\n+\t        \tif (!clone.isEmpty()) {\n+\t        \t\tkeywordsToRemove.addAll(ReadStatus.getInstance().getKeyWords());\n+\t        \t}\n+\t        \t\n+\t        \t// Printed\n+\t        \tclone = createClone(keywordsToAdd);\n+\t        \tclone.retainAll(Printed.getInstance().getKeyWords());\n+\t        \tif (!clone.isEmpty()) {\n+\t        \t\tkeywordsToRemove.addAll(Printed.getInstance().getKeyWords());\n+\t        \t}\n \t        }\n         }\n , @@ -88,6 +88,8 @@ setRelevant=relevance.png\n qualityAssured=button_ok.png\n toggleQualityAssured=button_ok.png\n quality=button_ok.png\n+printed=fileprint.png\n+togglePrinted=fileprint.png\n rank1=rank1.png\n rank2=rank2.png\n rank3=rank3.png\n@@ -99,6 +101,9 @@ rankc2=rankc2.png\n rankc3=rankc3.png\n rankc4=rankc4.png\n rankc5=rankc5.png\n+readstatus=read.png\n+readStatusRead=read.png\n+readStatusSkimmed=readskimmed.png\n priority=priority.png\n red=red.png\n orange=orange.png, None, None, None, ", 288, 14, "\"modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, added, added, modified, modified, modified, added, added, added, \"", 302], ["Leonardo Haddad", "Fixed bug #1240. Now, strings with length of one character can be included and no exception is thrown by the system.", "10/28/14, 03:46:39 AM", "Leonardo Haddad", "dd4676b6cc75f0ce38cf44843ab7abea89249fb1", ["CHANGELOG", "src/main/java/net/sf/jabref/BibtexString.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+\t- Fix for bug 1240: Accepting string with length of one character (by lhaddad).\n \t- Fix for bug 949: Exception properly logged\n \t- Fix for bug 950: NullPointerException on \"Manage custom imports\"\n \t- Feature 850: Keyboard shortcut for 'Cleanup entries' (by eduardogreco), @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2003-2014 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -67,7 +67,7 @@\n         }\n \n         public static final Type get(String name) {\n-        \tif (name.length() == 0) {\n+        \tif (name.length() <= 1) {\n         \t\treturn OTHER;\n         \t}\n             if (!(name.charAt(1) + \"\").toUpperCase().equals(, @@ -92,7 +92,8 @@ <h2>Contributions from:</h2>\n         Waluyo Adi Siswanto,\n \t\tEduardo Roberto Greco,\n \t\tThiago Gomes Toledo,\n-\t\tRenato Massao Maeda da Silva</p>\n+\t\tRenato Massao Maeda da Silva\n+\t\tLeonardo Haddad Carlos</p>\n \n         <h2>Thanks to:</h2>\n , ", 5, 3, "\"modified, modified, modified, \"", 8], ["Thorsten Dahlheimer", "Fix undoing Cleanup/Convert to Biblatex\n\nWhen Cleanup/Convert to Biblatex converted year/month fields to a date\nfield, it used to store erroneous undo information. This change fixes\nit.", "10/30/14, 10:23:25 AM", "Thorsten Dahlheimer", "993f4fc83b63777d635ba7ed29581b058bb5b5a1", ["src/main/java/net/sf/jabref/gui/CleanUpAction.java"], "@@ -680,8 +680,8 @@ private void doConvertToBiblatex(BibtexEntry entry, NamedCompound ce) {\n     \t\tentry.setField(\"month\", null);\n     \t\t\n     \t\tce.addEdit(new UndoableFieldChange(entry, \"date\", null, newDate));\n-    \t\tce.addEdit(new UndoableFieldChange(entry, \"date\", oldYear, null));\n-    \t\tce.addEdit(new UndoableFieldChange(entry, \"date\", oldMonth, null));\n+    \t\tce.addEdit(new UndoableFieldChange(entry, \"year\", oldYear, null));\n+    \t\tce.addEdit(new UndoableFieldChange(entry, \"month\", oldMonth, null));\n     \t}\n     }\n , ", 2, 2, "\"modified, \"", 4], ["Thorsten Dahlheimer", "Take aliased fields into account when sorting entries", "11/03/14, 01:25:32 PM", "Thorsten Dahlheimer", "6d65da786f56b393cbf0f8a1b7777ac45b0905bb", ["CHANGELOG", "src/main/java/net/sf/jabref/FieldComparator.java"], "@@ -34,6 +34,7 @@\n         - Feature #685 Highlight new entries that were \"forgotten\"\n         - Feature #602 could add the mark as read feature\n         - Feature #225 read? checkbox\n+    - Take aliased fields into account when sorting entries\n 2.10\n     - Made IEEEXploreFetcher author parsing work again.\n     - Added a few more characters in the HTML/Unicode to LaTeX conversion., @@ -180,7 +180,7 @@ public int compare(BibtexEntry e1, BibtexEntry e2) {\n \n     private Object getField(BibtexEntry entry) {\n         for (String aField : field) {\n-            Object o = entry.getField(aField);\n+            Object o = entry.getFieldOrAlias(aField);\n             if (o != null)\n                 return o;\n         }, ", 2, 1, "\"modified, modified, \"", 3], ["Philip Johnson", "Feature 809: import Pubmed Central ID\n\nImport \"pmc\" field into bibtex from pubmed/medline records.  This field\nis analogous to other pubmed identifiers (pubmed id, doi, pii) and is\nused in NIH grant applications when listing publications produced by\nNIH-funded work.", "12/02/14, 08:30:04 PM", "Philip Johnson", "1a11c01b407379c5ac11afcff47ad3e09e7a702c", ["CHANGELOG", "src/main/java/net/sf/jabref/imports/MedlineHandler.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+    - Feature #809: import pubmed central id (pmc) field from medline\n     - Fix undoing Cleanup/Convert to Biblatex\n     - Adapted pattern to parse DBLP entries\n     - Partial fix for bug 913: fixed export for .ods and .sxc (by yaragg), @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2003-2014 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -38,14 +38,14 @@\n \t\tinMedlineID = false,\t\tinURL=false,\n \t\tinIssue = false,\t\t\tinPubDate = false,\n         inUrl=false, inForename=false, inAbstractText=false, inMedlineDate=false,\n-\t\tinPubMedID=false, inDescriptorName=false,inDoi=false,inPii=false,\n+\t\tinPubMedID=false, inDescriptorName=false,inDoi=false,inPii=false,inPmc=false,\n         inAffiliation=false, inMeshHeader=false, inQualifierName=false,\n         inLanguage=false, inPst=false;\n     String title=\"\", journal=\"\", keywords =\"\",author=\"\",\n \t\tlastName=\"\",suffix=\"\",year=\"\",forename=\"\", abstractText=\"\", affiliation=\"\";\n     String month=\"\",volume=\"\",lastname=\"\",initials=\"\",number=\"\",page=\"\",medlineID=\"\",url=\"\",MedlineDate=\"\";\n     String series=\"\",editor=\"\",booktitle=\"\",type=\"article\",key=\"\",address=\"\",\n-\t\tpubmedid=\"\",doi=\"\",pii=\"\", majorTopic = \"\", minorTopics = \"\", language = \"\", pst= \"\";\n+        pubmedid=\"\",doi=\"\",pii=\"\", pmc=\"\",majorTopic = \"\", minorTopics = \"\", language = \"\", pst= \"\";\n     ArrayList<String> authors=new ArrayList<String>();\n     TreeSet<String> descriptors = new TreeSet<String>(); // To gather keywords\n     int rowNum=0;\n@@ -117,6 +117,8 @@ else if(localName.equals(\"ArticleId\")){\n \t\t\t\t\tinDoi=true;\n \t\t\t\telse if(value.equals(\"pii\"))\n \t\t\t\t\tinPii=true;\n+\t\t\t\telse if(value.equals(\"pmc\"))\n+\t\t\t\t\tinPmc=true;\n \n \t\t\t}\n \t\t}\n@@ -194,6 +196,8 @@ public void endElement( String uri, String localName, String qName ) {\n \t\t\t}\n \t\t\tif(!pii.equals(\"\"))\n \t\t\t    b.setField(\"pii\",pii);\n+\t\t\tif(!pmc.equals(\"\"))\n+\t\t\t    b.setField(\"pmc\",pmc);\n             if(!affiliation.equals(\"\")) {\n                 b.setField(\"institution\",affiliation.replaceAll(\"#\", \"\\\\\\\\#\"));\n             }\n@@ -212,7 +216,7 @@ public void endElement( String uri, String localName, String qName ) {\n \t\t\ttitle=\"\";\n \t\t\tjournal=\"\";\n \t\t\tkeywords =\"\";\n-            doi=\"\"; pii=\"\";\n+                        doi=\"\"; pii=\"\"; pmc=\"\";\n \t\t\tyear=\"\";\n \t\t\tforename=\"\";\n \t\t\tlastName=\"\";\n@@ -293,7 +297,9 @@ else if(localName.equals(\"ArticleId\")){\n \t\t\tif(inDoi)\n \t\t\t\tinDoi=false;\n \t\t\telse if(inPii)\n-\t\t\t\tinPii=false;}\n+\t\t\t\tinPii=false;\n+\t\t\telse if(inPmc)\n+\t\t\t\tinPmc=false;}\n     }\n \n     public void characters( char[] data, int start, int length ) {\n@@ -332,6 +338,7 @@ else if(inForename){\n \t\telse if(inMedlineDate){ MedlineDate += new String(data,start,length);}\n \t\telse if(inDoi){ doi=new String(data,start,length);}\n \t\telse if(inPii){ pii=new String(data,start,length);}\n+\t\telse if(inPmc){ pmc=new String(data,start,length);}\n         else if(inAffiliation){ affiliation = new String(data,start,length);}\n     }\n , @@ -67,6 +67,7 @@ <h2>Contributions from:</h2>\n         Yara Grassi Gouffon,\n         Leonardo Haddad Carlos\n         Sascha Hunold,\n+        Philip Johnson,\n         Bernd Kalbfuss,\n         Martin K&auml;hmer,\n         Ervin Kolenovic,, ", 14, 5, "\"modified, modified, modified, \"", 19], ["Brian Quistorff", "+Contribution notes for DOI encoding fix", "12/07/14, 09:02:05 PM", "Brian Quistorff", "a3521705d9515a8b16fc10b69daeb058fcd4efcb", ["CHANGELOG", "src/main/java/net/sf/jabref/imports/DOItoBibTeXFetcher.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+    - Fix for bug 1213 (sourceforge): Fix encoding for DOI import\n     - Feature #809: import pubmed central id (pmc) field from medline\n     - Fix undoing Cleanup/Convert to Biblatex\n     - Adapted pattern to parse DBLP entries, @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2012 JabRef contributors.\n+/*  Copyright (C) 2014 JabRef contributors.\n     This program is free software: you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation, either version 3 of the License, or, @@ -83,6 +83,7 @@ <h2>Contributions from:</h2>\n         Alex Montgomery,\n         Saverio Mori,\n         Ambrogio Oliva,\n+        Brian Quistorff,\n         Stephan Rave,\n         John Relph,\n         Hannes Restel,, ", 3, 1, "\"modified, modified, modified, \"", 4], ["Ruy Minoru Ito Takata", "Fix for bug #1253: Cleanup entries error 2\n\nCommitter: Ruy Minoru Ito Takata <ruy.takata@gmail.com>", "03/31/15, 06:43:22 PM", "Ruy Minoru Ito Takata - SUPCD/CDISO/CDSSP", "65ddbbe725b6123ca676c312d492561edbb4a180", ["CHANGELOG", "src/main/java/net/sf/jabref/imports/HTMLConverter.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,5 @@\n [master]\n+\t- Fix for bug #1253: Cleanup entries error 2 (by ruy.takata)\n     - Fix for bug 1213 (sourceforge): Fix encoding for DOI import\n     - Feature #809: import pubmed central id (pmc) field from medline\n     - Fix undoing Cleanup/Convert to Biblatex, @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2012 JabRef contributors.\n+/*  Copyright (C) 2003-2015 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -107,7 +107,7 @@\n         //                                 U+00C3 ISOlat1 \n         {\"196\", \"Auml\", \"\\\\{\\\\\\\\\\\"\\\\{A\\\\}\\\\}\"}, // latin capital letter A with diaeresis, \n         //                                 U+00C4 ISOlat1 \n-        {\"197\", \"Aring\", \"\\\\{\\\\\\\\AA\\\\}\"}, // latin capital letter A with ring above \n+        {\"197\", \"Aring\", \"\\\\{\\\\{\\\\\\\\AA\\\\}\\\\}\"}, // latin capital letter A with ring above \n         //                                 = latin capital letter A ring,\n         //                                 U+00C5 ISOlat1 \n         {\"198\", \"AElig\", \"\\\\{\\\\\\\\AE\\\\}\"}, // latin capital letter AE \n@@ -173,7 +173,7 @@\n         //                                 U+00E3 ISOlat1 \n         {\"228\", \"auml\", \"\\\\{\\\\\\\\\\\"\\\\{a\\\\}\\\\}\"}, // latin small letter a with diaeresis, \n         //                                 U+00E4 ISOlat1 \n-        {\"229\", \"aring\", \"\\\\{\\\\\\\\aa\\\\}\"}, // latin small letter a with ring above \n+        {\"229\", \"aring\", \"\\\\{\\\\{\\\\\\\\aa\\\\}\\\\}\"}, // latin small letter a with ring above \n         //                                 = latin small letter a ring,\n         //                                 U+00E5 ISOlat1 \n         {\"230\", \"aelig\", \"\\\\{\\\\\\\\ae\\\\}\"}, // latin small letter ae , @@ -101,7 +101,8 @@ <h2>Contributions from:</h2>\n         Mattias Ulbrich,\n         David Weitzman,\n         Seb Wills,\n-        John Zedlewski</p>\n+        John Zedlewski,\n+        Ruy Minoru Ito Takata</p>\n \n         <h2>Thanks to:</h2>\n , ", 6, 4, "\"modified, modified, modified, \"", 10], ["NS", "Update About.html", "04/09/15, 07:37:07 AM", "NS", "18e787861faeab5a22303ae539ad8fbfe0392e10", ["src/main/resources/help/About.html"], "@@ -90,6 +90,7 @@ <h2>Contributions from:</h2>\n         Moritz Ringler,\n         Andreas Rudert,\n         Mark Schenk,\n+        Nathan Sheffield,\n         Rudolf Seemann,\n         Toralf Senger,\n         Manuel Siebeneicher,, ", 1, 0, "\"modified, \"", 1], ["Ruy Minoru Ito Takata - SUPCD/CDISO/CDSSP", "Fix for bug #1270: Cleanup entries error 3", "04/23/15, 06:56:07 PM", "Ruy Minoru Ito Takata - SUPCD/CDISO/CDSSP", "d60322ef108fe9d864227ad9234ed1b16c7c57a4", ["CHANGELOG", "src/main/java/net/sf/jabref/imports/HTMLConverter.java"], "@@ -1,4 +1,5 @@\n [master]\n+\t- Fix for bug #1270: Cleanup entries error 3\n     - Fix for bug #919: Accents don't export to RTF (by ruy.takata)\n     - Change the CrossRef content negotiation for bibtex DOI import (by sheffien)\n     - Fix for bug #1253: Cleanup entries error 2 (by ruy.takata), @@ -188,13 +188,13 @@\n         //                                 U+00EA ISOlat1 \n         {\"235\", \"euml\", \"\\\\{\\\\\\\\\\\"\\\\{e\\\\}\\\\}\"}, // latin small letter e with diaeresis, \n         //                                 U+00EB ISOlat1 \n-        {\"236\", \"igrave\", \"\\\\{\\\\\\\\`\\\\{\\\\\\\\i\\\\}\\\\}\"}, // latin small letter i with grave,\n+        {\"236\", \"igrave\", \"\\\\{\\\\\\\\`\\\\{i\\\\}\\\\}\"}, // latin small letter i with grave,\n         //                                 U+00EC ISOlat1 \n-        {\"237\", \"iacute\", \"\\\\{\\\\\\\\'\\\\{\\\\\\\\i\\\\}\\\\}\"}, // latin small letter i with acute, \n+        {\"237\", \"iacute\", \"\\\\{\\\\\\\\'\\\\{i\\\\}\\\\}\"}, // latin small letter i with acute, \n         //                                 U+00ED ISOlat1 \n-        {\"238\", \"icirc\", \"\\\\{\\\\\\\\\\\\^\\\\{\\\\\\\\i\\\\}\\\\}\"}, // latin small letter i with circumflex, \n+        {\"238\", \"icirc\", \"\\\\{\\\\\\\\\\\\^\\\\{i\\\\}\\\\}\"}, // latin small letter i with circumflex, \n         //                                 U+00EE ISOlat1 \n-        {\"239\", \"iuml\", \"\\\\{\\\\\\\\\\\"\\\\{\\\\\\\\i\\\\}\\\\}\"}, // latin small letter i with diaeresis, \n+        {\"239\", \"iuml\", \"\\\\{\\\\\\\\\\\"\\\\{i\\\\}\\\\}\"}, // latin small letter i with diaeresis, \n         //                                 U+00EF ISOlat1 \n         {\"240\", \"eth\", \"\\\\{\\\\\\\\dh\\\\}\"}, // latin small letter eth, U+00F0 ISOlat1  \n         {\"241\", \"ntilde\", \"\\\\{\\\\\\\\~\\\\{n\\\\}\\\\}\"}, // latin small letter n with tilde, \n@@ -227,6 +227,8 @@\n         //                                 U+00FE ISOlat1 \n         {\"255\", \"yuml\", \"\\\\{\\\\\\\\\\\"\\\\{y\\\\}\\\\}\"}, // latin small letter y with diaeresis, \n         //                                 U+00FF ISOlat1 \n+        {\"332\", \"Omacro\", \"\\\\{\\\\\\\\=\\\\{O\\\\}\\\\}\"}, // the small letter o with macron\n+        {\"333\", \"omacro\", \"\\\\{\\\\\\\\=\\\\{o\\\\}\\\\}\"}, // the big letter O with macron\n         {\"402\", \"fnof\", \"\\\\$f\\\\$\"}, // latin small f with hook = function \n         //                                   = florin, U+0192 ISOtech \n , ", 7, 4, "\"modified, modified, \"", 11], ["NaN", "NaN", "NaN", "NaN", "NaN", [], "", 0, 0, "NaN", 0], ["Tobias", "Updated some paths in Launch4j configuration file", "05/11/15, 11:31:46 AM", "Tobias", "8c0cf77e9cd954e71d46d5cf50fbf6e0ac3da573", ["README.md", "jabref-launch4j.xml"], "@@ -128,7 +128,8 @@ To get a list of all targets, use `gradlew tasks`.\n To compile, use the command `gradlew generateSource antTargets.jars`.\n After the build is finished, you can find the executable jar file\n named `JabRef-$VERSION.jar` (where $VERSION is the current version of the\n-source tree) in the `build/lib` directory. Enjoy!\n+source tree) in the `buildant\\lib` directory. Enjoy!\n+The setup files are created by invoking the command `gradlew generateSource antTargets.release`.\n \n On Mac OS X you should include the targets osx and osxjar,\n making the correct command `gradlew generateSource antTargets.compile antTargets.unjarlib antTargets.osx antTargets.jars antTargets.osxjar`., @@ -2,7 +2,7 @@\n   <dontWrapJar>true</dontWrapJar>\n   <headerType>gui</headerType>\n   <jar>JabRef-1.1.1.jar</jar>\n-  <outfile>.\\src\\windows\\nsis\\dist\\JabRef.exe</outfile>\n+  <outfile>./src/main/resources/windows/nsis/dist/JabRef.exe</outfile>\n   <errTitle></errTitle>\n   <cmdLine></cmdLine>\n   <chdir></chdir>\n@@ -12,7 +12,7 @@\n   <customProcName>false</customProcName>\n   <stayAlive>false</stayAlive>\n   <manifest></manifest>\n-  <icon>./src/resources/images/JabRef.ico</icon>\n+  <icon>./src/main/resources/images/JabRef.ico</icon>\n   <jre>\n     <path></path>\n     <minVersion>1.6.0</minVersion>, ", 4, 3, "\"modified, modified, \"", 7], ["Tobias", "Fix for bug #876: Windows 7/8/10 - Pinning Jabref to the taskbar now works\n\nDetails:\nPreviously, JabRef couldn't be pinned to the taskbar ([bug report](https://sourceforge.net/p/jabref/bugs/876/)). The reason is that, by wrapping JabRef with Launch4j, Windows thinks only Java is running and does not recognize JabRef as something separate.\n\nBased on a [stackoverflow question](http://stackoverflow.com/questions/9330209/whats-the-best-way-to-start-java-applications-on-windows-7) the fix proceeds in two stages:\n* During the setup, we create a (dummy) shortcut and set the [Application User Model Id](https://msdn.microsoft.com/en-us/library/windows/desktop/dd378459%28v=vs.85%29.aspx). For this, we use the [WinShell plugin](http://nsis.sourceforge.net/WinShell_plug-in) for NSIS.\n* At program start, we notify Windows that this JabRef instance has the AppUserModelId specified in the setup. In order to do this, we invoke native commands using the Java Native Access (JNA) library.", "05/11/15, 04:30:01 PM", "Tobias", "5b8e37d8491610d3109ead40ea69172d628827bb", ["CHANGELOG", "build.gradle", "build.xml", "lib/jna-4.1.0.jar", "lib/licenses.txt", "src/main/java/net/sf/jabref/JabRef.java", "src/main/resources/windows/nsis/setup.nsi"], "@@ -1,4 +1,5 @@\n [master]\n+    - Fix for bug #876: Windows 7/8/10 - Pinning Jabref to the taskbar\t\n     - Fix for bug #1270: Cleanup entries error 3\n     - Fix for bug #919: Accents don't export to RTF (by ruy.takata)\n     - Change the CrossRef content negotiation for bibtex DOI import (by sheffien), @@ -77,6 +77,8 @@ dependencies {\n \n     compile fileTree(dir: 'lib', includes: ['glazedlists-1.8.0_java15.jar', 'jayatana-1.2.4.jar', 'microba.jar', 'spin.jar'])\n \n+    compile 'net.java.dev.jna:jna:4.1.0'\n+\n     // not available in maven repository\n     compile fileTree(dir: 'lib/plugin', includes: ['jpf.jar', 'jpf-boot.jar', 'commons-logging.jar', 'JPFCodeGenerator-rt.jar'])\n , @@ -101,6 +101,7 @@\n \t\t<include name=\"jgoodies-looks-2.5.2.jar\" />\n \t\t<include name=\"jgoodies-forms-1.6.0.jar\" />\n         <include name=\"jgoodies/jgoodies-uif-lite.jar\" />\n+        <include name=\"jna-4.1.0.jar\" />\n         <include name=\"ritopt/ritopt-0.2.1-bin.jar\" />\n \t\t<include name=\"jayatana-1.2.4.jar\" />\n \t\t<include name=\"spin.jar\" />, None, @@ -138,6 +138,11 @@ Project: JGoodies Looks\n URL:     http://www.jgoodies.com/downloads/libraries/\n License: BSD\n \n+Path:    jna-4.1.0.jar\n+Project: Java Native Access (JNA)\n+URL:     https://github.com/twall/jna\n+License: LGPL 2.1\n+\n Path:    microba.jar\n Project: Microba\n URL:     http://microba.sourceforge.net/, @@ -50,6 +50,12 @@\n import net.sf.jabref.remote.RemoteListener;\n import net.sf.jabref.wizard.auximport.AuxCommandLine;\n \n+import com.sun.jna.Native;\n+import com.sun.jna.NativeLong;\n+import com.sun.jna.Pointer;\n+import com.sun.jna.WString;\n+import com.sun.jna.ptr.PointerByReference;\n+\n /**\n  * JabRef Main Class - The application gets started here.\n  *\n@@ -181,9 +187,44 @@ protected JabRef(String[] args) {\n \t\tGlobals.NEWLINE = Globals.prefs.get(JabRefPreferences.NEWLINE);\n \t\tGlobals.NEWLINE_LENGTH = Globals.NEWLINE.length();\n \t\t\n+\t\t\n+\t\t// Set application user model id so that pinning JabRef to the Win7/8 taskbar works\n+\t\t// Based on http://stackoverflow.com/a/1928830\n+\t\tsetCurrentProcessExplicitAppUserModelID(\"JabRef.\"+Globals.VERSION);\n+\t    //System.out.println(getCurrentProcessExplicitAppUserModelID());\n+\t\t\n \t\topenWindow(processArguments(args, true));\n \t}\n     \n+    // Do not use this code in release version, it contains some memory leaks\n+    public static String getCurrentProcessExplicitAppUserModelID()\n+    {\n+      final PointerByReference r = new PointerByReference();\n+\n+      if (GetCurrentProcessExplicitAppUserModelID(r).longValue() == 0)\n+      {\n+        final Pointer p = r.getValue();\n+\n+\n+        return p.getString(0, true); // here we leak native memory by lazyness\n+      }      \n+      return \"N/A\";\n+    }\n+\n+    public static void setCurrentProcessExplicitAppUserModelID(final String appID)\n+    {\n+      if (SetCurrentProcessExplicitAppUserModelID(new WString(appID)).longValue() != 0)\n+        throw new RuntimeException(\"unable to set current process explicit AppUserModelID to: \" + appID);\n+    }\n+\n+    private static native NativeLong GetCurrentProcessExplicitAppUserModelID(PointerByReference appID);\n+    private static native NativeLong SetCurrentProcessExplicitAppUserModelID(WString appID);\n+\n+\n+    static\n+    {\n+      Native.register(\"shell32\");\n+    }\n \n \n     public Vector<ParserResult> processArguments(String[] args, boolean initialStartup) {, @@ -26,8 +26,7 @@ Name \"JabRef ${VERSION}\"\n !define PRODUCT_NAME \"JabRef\"\n !define PRODUCT_UNINST_KEY \"Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$(^Name)\"\n !define PRODUCT_LICENSE_FILE \"dist\\gpl3.txt\"\n-\n-\n+!define AppUserModelId \"JabRef.${VERSION}\"\n \n # Variables\n Var StartmenuFolder\n@@ -179,6 +178,9 @@ Section \"-Installation actions\" SecInstallation\n   ; register JabRef\n   WriteRegStr SHCTX \"${REGKEY}\" Path $INSTDIR\n   WriteUninstaller $INSTDIR\\uninstall.exe\n+  ; register application user model id so that JabRef works with Win7 taskbar\n+  CreateShortCut \"$INSTDIR\\$(^Name).lnk\" \"$INSTDIR\\${PRODUCT_EXE}\" \"\" \"$INSTDIR\\JabRef.exe\" 0 SW_SHOWNORMAL\n+  WinShell::SetLnkAUMI \"$INSTDIR\\$(^Name).lnk\" \"${AppUserModelId}\"\n   ; create shortcuts to startmenu\n   SetOutPath \"$INSTDIR\"\n   CreateDirectory \"$SMPROGRAMS\\$StartmenuFolder\"\n@@ -212,6 +214,10 @@ Section \"un.JabRef\" un.SecUnProgramFiles\n   ; delete executables\n   Delete $INSTDIR\\${PRODUCT_EXE}\n   Delete $INSTDIR\\uninstall.exe\n+  ; remove application user model id\n+  WinShell::UninstAppUserModelId \"${AppUserModelId}\"\n+  WinShell::UninstShortcut \"$INSTDIR\\$(^Name).lnk\"\n+  Delete \"$INSTDIR\\$(^Name).lnk\"\n   ; delete dir only if empty\n   RMDir $INSTDIR\n   ; delete start menu entry, ", 58, 2, "\"modified, modified, modified, added, modified, modified, modified, \"", 60], ["Tobias", "Add entry under the 'View' menu to hide the toolbar", "05/11/15, 07:38:47 PM", "Tobias", "769090b229a72b50197b8d77485da7d029a44cd3", ["CHANGELOG", "src/main/java/net/sf/jabref/BasePanel.java", "src/main/java/net/sf/jabref/JabRefFrame.java", "src/main/java/net/sf/jabref/JabRefPreferences.java"], "@@ -1,4 +1,5 @@\n [master]\n+    - Feature: Make it possible to hide the toolbar\n     - Fix for bug #1270: Cleanup entries error 3\n     - Fix for bug #919: Accents don't export to RTF (by ruy.takata)\n     - Change the CrossRef content negotiation for bibtex DOI import (by sheffien), @@ -691,6 +691,12 @@ public void action() {\n             }\n         });\n \n+        // The action for toggling the visibility of the toolbar\n+        actions.put(\"toggleToolbar\", new BaseAction() {\n+            public void action() {\n+            \tframe.tlb.setVisible(! frame.tlb.isVisible());\n+            }\n+        });\n \n         // action for collecting database strings from user\n         actions.put(\"dbConnect\", new DbConnectAction(this));, @@ -270,6 +270,9 @@ void addAction(Action a) {\n       editStrings = new GeneralAction(\"editStrings\", \"Edit strings\",\n                                       Globals.lang(\"Edit strings\"),\n                                       prefs.getKey(\"Edit strings\")),\n+\t  toggleToolbar = new GeneralAction(\"toggleToolbar\", \"Hide/show toolbar\",\n+              Globals.lang(\"Hide/show toolbar\"),\n+\t          prefs.getKey(\"Hide/show toolbar\")),\n       toggleGroups = new GeneralAction(\"toggleGroups\",\n                                        \"Toggle groups interface\",\n                                        Globals.lang(\"Toggle groups interface\"),\n@@ -470,6 +473,8 @@ public void windowClosing(WindowEvent e) {\n         \n         initActions();\n \n+        // Show the toolbar if it was visible at last shutdown:\n+        tlb.setVisible(Globals.prefs.getBoolean(\"toolbarVisible\"));\n       \n       setBounds(GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds());\n       if ( !prefs.getBoolean(\"windowMaximised\") ) {\n@@ -809,6 +814,7 @@ public void quit() {\n       //prefs.putBoolean(\"windowMaximised\", (getExtendedState()&MAXIMIZED_BOTH)>0);\n       prefs.putBoolean(\"windowMaximised\", (getExtendedState() == Frame.MAXIMIZED_BOTH));\n       \n+      prefs.putBoolean(\"toolbarVisible\", tlb.isVisible());\n       prefs.putBoolean(\"searchPanelVisible\", sidePaneManager.isComponentVisible(\"search\"));\n       // Store divider location for side pane:\n       int width = contentPane.getDividerLocation();\n@@ -1394,6 +1400,7 @@ private void fillMenu() {\n       view.add(increaseFontSize);\n       view.add(decreseFontSize);\n       view.addSeparator();\n+      view.add(toggleToolbar);\n       view.add(toggleGroups);\n       view.add(togglePreview);\n       view.add(switchPreview);\n@@ -1649,7 +1656,6 @@ private void createToolBar() {\n     //Insets margin = new Insets(0, 0, 0, 0);\n     //for (int i=0; i<tlb.getComponentCount(); i++)\n     //  ((JButton)tlb.getComponentAtIndex(i)).setMargin(margin);\n-\n   }\n \n   , @@ -373,6 +373,7 @@ private JabRefPreferences() {\n         defaults.put(EDIT_GROUP_MEMBERSHIP_MODE, Boolean.FALSE);\n         defaults.put(\"highlightGroupsMatchingAny\", Boolean.FALSE);\n         defaults.put(\"highlightGroupsMatchingAll\", Boolean.FALSE);\n+        defaults.put(\"toolbarVisible\", Boolean.TRUE);\n         defaults.put(\"searchPanelVisible\", Boolean.FALSE);\n         defaults.put(\"defaultEncoding\", System.getProperty(\"file.encoding\"));\n         defaults.put(\"groupsVisibleRows\", 8);, ", 15, 1, "\"modified, modified, modified, modified, \"", 16], ["Adam Rehn", "Added the option to change the table row height padding.\n\nPreviously, the padding added to the row height for the main table was hardcoded.\nThe padding value can now be modified by the user through the preferences dialog.\nThe old hardcoded value is used as the default value for the new preference.", "05/13/15, 10:51:16 AM", "Adam Rehn", "9499e02420dcc440283e6aac04ea0239af6d788d", ["src/main/java/net/sf/jabref/AppearancePrefsTab.java", "src/main/java/net/sf/jabref/JabRefPreferences.java", "src/main/java/net/sf/jabref/gui/MainTable.java"], "@@ -36,7 +36,7 @@\n     private Font font = GUIGlobals.CURRENTFONT;\n     private int oldMenuFontSize;\n     private boolean oldOverrideFontSize;\n-    private JTextField fontSize;//, customIconThemeFile;\n+    private JTextField fontSize, rowPadding;//, customIconThemeFile;\n \n     /**\n      * Customization of appearance parameters.\n@@ -50,6 +50,8 @@ public AppearancePrefsTab(JabRefPreferences prefs) {\n         // Font sizes:\n         fontSize = new JTextField(5);\n \n+        // Row padding size:\n+        rowPadding = new JTextField(5);\n \n         colorCodes = new JCheckBox(\n                    Globals.lang(\"Color codes for required and optional fields\"));\n@@ -77,6 +79,11 @@ public AppearancePrefsTab(JabRefPreferences prefs) {\n         builder.appendSeparator(Globals.lang(\"Table appearance\"));\n         //builder.append(antialias);\n         //builder.nextLine();\n+        JPanel p2 = new JPanel();\n+        p2.add(new JLabel(Globals.lang(\"Table row height padding\") + \":\"));\n+        p2.add(rowPadding);\n+        builder.append(p2);\n+        builder.nextLine();\n         builder.append(colorCodes);\n         builder.nextLine();\n         JButton fontButton = new JButton(Globals.lang(\"Set table font\"));\n@@ -143,6 +150,7 @@ public void setValues() {\n         colorCodes.setSelected(_prefs.getBoolean(\"tableColorCodesOn\"));\n         //antialias.setSelected(_prefs.getBoolean(\"antialias\"));\n         fontSize.setText(\"\" + _prefs.getInt(\"menuFontSize\"));\n+        rowPadding.setText(\"\" + _prefs.getInt(\"tableRowPadding\"));\n         oldMenuFontSize = _prefs.getInt(\"menuFontSize\");\n         overrideFonts.setSelected(_prefs.getBoolean(\"overrideDefaultFonts\"));\n         oldOverrideFontSize = overrideFonts.isSelected();\n@@ -183,20 +191,41 @@ public void storeSettings() {\n         } catch (NumberFormatException ex) {\n             ex.printStackTrace();\n         }\n+        try {\n+            int padding = Integer.parseInt(rowPadding.getText());\n+                _prefs.putInt(\"tableRowPadding\", padding);\n+        } catch (NumberFormatException ex) {\n+            ex.printStackTrace();\n+        }\n     }\n \n-    public boolean readyToClose() {\n+    private boolean validateIntegerField(String fieldName, String fieldValue, String errorTitle)\n+    {\n         try {\n-            // Test if font size is a number:\n-            Integer.parseInt(fontSize.getText());\n+            // Test if the field value is a number:\n+            Integer.parseInt(fieldValue);\n         } catch (NumberFormatException ex) {\n             JOptionPane.showMessageDialog\n                     (null, Globals.lang(\"You must enter an integer value in the text field for\") + \" '\" +\n-                            Globals.lang(\"Menu and label font size\") + \"'\", Globals.lang(\"Changed font settings\"),\n+                            Globals.lang(fieldName) + \"'\", Globals.lang(errorTitle),\n                             JOptionPane.ERROR_MESSAGE);\n             return false;\n         }\n         return true;\n+    }\n+\n+    public boolean readyToClose() {\n+        // Test if font size is a number:\n+        if (validateIntegerField(\"Menu and label font size\", fontSize.getText(), \"Changed font settings\") == false) {\n+            return false;\n+        }\n+\n+        // Test if row padding is a number:\n+        if (validateIntegerField(\"Table row height padding\", rowPadding.getText(), \"Changed table appearance settings\") == false) {\n+            return false;\n+        }\n+        \n+        return true;\n \n     }\n , @@ -396,6 +396,7 @@ private JabRefPreferences() {\n         defaults.put(\"menuFontFamily\", \"Times\");\n         defaults.put(\"menuFontStyle\", java.awt.Font.PLAIN);\n         defaults.put(\"menuFontSize\", 11);\n+        defaults.put(\"tableRowPadding\", GUIGlobals.TABLE_ROW_PADDING);\n         // Main table color settings:\n         defaults.put(\"tableBackground\", \"255:255:255\");\n         defaults.put(\"tableReqFieldBackground\", \"230:235:255\");, @@ -525,7 +525,7 @@ public void scrollTo(int y) {\n      */\n     public void updateFont() {\n         setFont(GUIGlobals.CURRENTFONT);\n-        setRowHeight(GUIGlobals.TABLE_ROW_PADDING + GUIGlobals.CURRENTFONT.getSize());\n+        setRowHeight(Globals.prefs.getInt(\"tableRowPadding\") + GUIGlobals.CURRENTFONT.getSize());\n     }\n \n     public void ensureVisible(int row) {, ", 36, 6, "\"modified, modified, modified, \"", 42], ["Tobias", "Add option to hide/show gridlines in the main table", "05/16/15, 09:34:49 PM", "Tobias", "d41f26eaa0104ed195b7aaf7a829b3b62bc86db6", ["CHANGELOG", "src/main/java/net/sf/jabref/AppearancePrefsTab.java", "src/main/java/net/sf/jabref/BasePanel.java", "src/main/java/net/sf/jabref/EntryEditorTab.java", "src/main/java/net/sf/jabref/FieldNameLabel.java", "src/main/java/net/sf/jabref/GUIGlobals.java", "src/main/java/net/sf/jabref/JabRefFrame.java", "src/main/java/net/sf/jabref/JabRefPreferences.java", "src/main/java/net/sf/jabref/SidePaneComponent.java", "src/main/java/net/sf/jabref/gui/MainTable.java"], "@@ -1,4 +1,6 @@\n [master]\n+    - Some UI updates (mainly removing unnecessary boundaries)\n+    - Feature: Gridlines are now optional (and disabled by default)\n     - Fix for bug #1248: Key bindings not modified\n     - Fix for bug #876: Windows 7/8/10 - Pinning Jabref to the taskbar\n     - Feature: Option to change the table row height padding, @@ -31,7 +31,7 @@\n class AppearancePrefsTab extends JPanel implements PrefsTab {\n \n     JabRefPreferences _prefs;\n-    private JCheckBox colorCodes, overrideFonts;//, useCustomIconTheme;\n+    private JCheckBox colorCodes, overrideFonts, showGrid;//, useCustomIconTheme;\n     private ColorSetupPanel colorPanel = new ColorSetupPanel();\n     private Font font = GUIGlobals.CURRENTFONT;\n     private int oldMenuFontSize;\n@@ -59,6 +59,8 @@ public AppearancePrefsTab(JabRefPreferences prefs) {\n                   (\"Use antialiasing font\"));*/\n         overrideFonts = new JCheckBox(Globals.lang(\"Override default font settings\"));\n \n+        showGrid = new JCheckBox(Globals.lang(\"Show gridlines\"));\n+        \n         //useCustomIconTheme = new JCheckBox(Globals.lang(\"Use custom icon theme\"));\n         //customIconThemeFile = new JTextField();\n         FormLayout layout = new FormLayout\n@@ -86,6 +88,8 @@ public AppearancePrefsTab(JabRefPreferences prefs) {\n         builder.nextLine();\n         builder.append(colorCodes);\n         builder.nextLine();\n+        builder.append(showGrid);\n+        builder.nextLine();\n         JButton fontButton = new JButton(Globals.lang(\"Set table font\"));\n         builder.append(fontButton);\n         builder.nextLine();\n@@ -157,6 +161,7 @@ public void setValues() {\n         fontSize.setEnabled(overrideFonts.isSelected());\n         //useCustomIconTheme.setSelected(_prefs.getBoolean(\"useCustomIconTheme\"));\n         //customIconThemeFile.setText(_prefs.get(\"customIconThemeFile\"));\n+        showGrid.setSelected(_prefs.getBoolean(\"tableShowGrid\"));\n         colorPanel.setValues();\n     }\n \n@@ -175,6 +180,7 @@ public void storeSettings() {\n         _prefs.putBoolean(\"overrideDefaultFonts\", overrideFonts.isSelected());\n         GUIGlobals.CURRENTFONT = font;\n         colorPanel.storeSettings();\n+        _prefs.putBoolean(\"tableShowGrid\", showGrid.isSelected());\n         try {\n             int size = Integer.parseInt(fontSize.getText());\n             if ((overrideFonts.isSelected() != oldOverrideFontSize) ||\n@@ -187,7 +193,6 @@ public void storeSettings() {\n                         Globals.lang(\"Changed font settings\"),\n                         JOptionPane.WARNING_MESSAGE);\n             }\n-\n         } catch (NumberFormatException ex) {\n             ex.printStackTrace();\n         }, @@ -16,6 +16,7 @@\n package net.sf.jabref;\n \n import java.awt.BorderLayout;\n+import java.awt.Color;\n import java.awt.Component;\n import java.awt.GridBagConstraints;\n import java.awt.GridBagLayout;\n@@ -45,6 +46,7 @@\n import java.util.logging.Logger;\n \n import javax.swing.AbstractAction;\n+import javax.swing.BorderFactory;\n import javax.swing.JComponent;\n import javax.swing.JFileChooser;\n import javax.swing.JOptionPane;\n@@ -2084,6 +2086,10 @@ protected boolean accept(Component c) {\n \n         splitPane.setTopComponent(mainTable.getPane());\n \n+        // Remove borders\n+        splitPane.setBorder(BorderFactory.createEmptyBorder());\n+        setBorder(BorderFactory.createEmptyBorder());\n+                \n         //setupTable();\n         // If an entry is currently being shown, make sure it stays shown,\n         // otherwise set the bottom component to null., @@ -26,6 +26,7 @@\n import java.util.List;\n \n import javax.swing.ActionMap;\n+import javax.swing.BorderFactory;\n import javax.swing.InputMap;\n import javax.swing.JComponent;\n import javax.swing.JPanel;\n@@ -129,7 +130,7 @@ void setupPanel(JabRefFrame frame, BasePanel bPanel, boolean addKeyField,\n \n         DefaultFormBuilder builder = new DefaultFormBuilder\n                 (new FormLayout(colSpec, rowSpec), panel);\n-\n+        \n         for (int i = 0; i < fields.length; i++) {\n             // Create the text area:\n             int editorType = BibtexFields.getEditorType(fields[i]);, @@ -30,8 +30,9 @@ public FieldNameLabel(String name) {\n       setVerticalAlignment(TOP);\n     //setFont(GUIGlobals.fieldNameFont);\n     setForeground(GUIGlobals.entryEditorLabelColor);\n-      setBorder(BorderFactory.createMatteBorder(1,0,0,0, Color.GRAY));\n+    //  setBorder(BorderFactory.createMatteBorder(1,0,0,0, Color.GRAY));\n     //setBorder(BorderFactory.createEtchedBorder());\n+    setBorder(BorderFactory.createEmptyBorder());\n   }\n \n   public void paintComponent(Graphics g) {, @@ -78,7 +78,7 @@\n \tpublic static final int\n \tSPLIT_PANE_DIVIDER_SIZE = 4,\n \tSPLIT_PANE_DIVIDER_LOCATION = 145 + 15, // + 15 for possible scrollbar.\n-\tTABLE_ROW_PADDING = 4,\n+\tTABLE_ROW_PADDING = 8,\n \tKEYBIND_COL_0 = 200,\n \tKEYBIND_COL_1 = 80, // Added to the font size when determining table\n \tMAX_CONTENT_SELECTOR_WIDTH = 240; // The max width of the combobox for content selectors., @@ -1797,7 +1797,7 @@ public void addTab(BasePanel bp, File file, boolean raisePanel) {\n         } else {\n             title = file.getName();\n         }\n-        tabbedPane.add(title, bp);\n+        tabbedPane.add(\"<html><div style='padding:2px 5px;'>\" + title + \"</div></html>\", bp);\n         tabbedPane.setToolTipTextAt(tabbedPane.getTabCount()-1,\n                 file != null ? file.getAbsolutePath() : null);\n         if (raisePanel) {, @@ -398,6 +398,7 @@ private JabRefPreferences() {\n         defaults.put(\"menuFontStyle\", java.awt.Font.PLAIN);\n         defaults.put(\"menuFontSize\", 11);\n         defaults.put(\"tableRowPadding\", GUIGlobals.TABLE_ROW_PADDING);\n+        defaults.put(\"tableShowGrid\", Boolean.FALSE);\n         // Main table color settings:\n         defaults.put(\"tableBackground\", \"255:255:255\");\n         defaults.put(\"tableReqFieldBackground\", \"230:235:255\");, @@ -21,6 +21,7 @@\n import java.awt.event.ActionListener;\n import java.net.URL;\n \n+import javax.swing.BorderFactory;\n import javax.swing.ImageIcon;\n import javax.swing.JButton;\n import javax.swing.JToolBar;\n@@ -50,7 +51,7 @@ public SidePaneComponent(SidePaneManager manager, URL icon, String title) {\n \t\tclose.addActionListener(new CloseButtonListener());\n \t\tsetToolBar(tlb);\n \t\t// setBorder(BorderFactory.createEtchedBorder());\n-\n+\t\tsetBorder(BorderFactory.createEmptyBorder());\n \t\t// setBorder(BorderFactory.createMatteBorder(1,1,1,1,java.awt.Color.green));\n \t\t// setPreferredSize(new java.awt.Dimension\n \t\t// (GUIGlobals.SPLIT_PANE_DIVIDER_LOCATION, 200));, @@ -16,6 +16,7 @@\n package net.sf.jabref.gui;\n \n import java.awt.Color;\n+import java.awt.Dimension;\n import java.awt.Rectangle;\n import java.awt.event.ActionEvent;\n import java.awt.event.ActionListener;\n@@ -25,6 +26,7 @@\n \n import javax.swing.*;\n import javax.swing.plaf.TableUI;\n+import javax.swing.table.DefaultTableCellRenderer;\n import javax.swing.table.TableCellRenderer;\n import javax.swing.table.TableColumnModel;\n \n@@ -84,6 +86,7 @@ public MainTable(MainTableFormat tableFormat, EventList<BibtexEntry> list, JabRe\n \n         addFocusListener(Globals.focusListener);\n         setAutoResizeMode(Globals.prefs.getInt(\"autoResizeMode\"));\n+      \n         this.tableFormat = tableFormat;\n         this.panel = panel;\n         // This SortedList has a Comparator controlled by the TableComparatorChooser\n@@ -109,8 +112,16 @@ public MainTable(MainTableFormat tableFormat, EventList<BibtexEntry> list, JabRe\n         selectionModel = new EventSelectionModel<BibtexEntry>(sortedForGrouping);\n         setSelectionModel(selectionModel);\n         pane = new JScrollPane(this);\n+        pane.setBorder(BorderFactory.createEmptyBorder());\n         pane.getViewport().setBackground(Globals.prefs.getColor(\"tableBackground\"));\n         setGridColor(Globals.prefs.getColor(\"gridColor\"));\n+        if(Globals.prefs.getBoolean(\"tableShowGrid\"))\n+        \tsetShowGrid(true);\n+        else\n+        {\n+\t        setShowGrid(false);\n+\t        setIntercellSpacing(new Dimension(0, 0));\n+        }\n \n         this.setTableHeader(new PreventDraggingJTableHeader(this.getColumnModel()));\n \n@@ -217,7 +228,7 @@ public JScrollPane getPane() {\n     public TableCellRenderer getCellRenderer(int row, int column) {\n         \n         int score = -3;\n-        TableCellRenderer renderer = defRenderer;\n+        DefaultTableCellRenderer renderer = defRenderer;\n \n         int status = getCellStatus(row, column);\n \n@@ -256,14 +267,15 @@ else if (column == 0) {\n                 } else\n                     renderer = compRenderer;\n             }\n+            renderer.setHorizontalAlignment( JLabel.CENTER );\n         }\n         else if (tableColorCodes) {\n             if (status == REQUIRED)\n                 renderer = reqRenderer;\n             else if (status == OPTIONAL)\n                 renderer = optRenderer;\n             else if (status == BOOLEAN)\n-                renderer = getDefaultRenderer(Boolean.class);\n+                renderer = (DefaultTableCellRenderer) getDefaultRenderer(Boolean.class);\n         }\n \n         // For MARKED feature:, ", 38, 9, "\"modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, \"", 47], ["Adam Rehn", "Fixed a Java 7 compatibility issue in the side pane reordering code.\n\nThe previous implementation used Map.getOrDefault(), which is introduced in Java 8.", "05/18/15, 11:09:50 AM", "Adam Rehn", "9e9e7216600e6dcb7172783fc7392e3732693600", ["src/main/java/net/sf/jabref/SidePaneManager.java"], "@@ -205,10 +205,12 @@ public PreferredIndexSort() {\n \t\tpublic int compare(SidePaneComponent comp1, SidePaneComponent comp2) {\n \t\t\tString comp1Name = getComponentName(comp1);\n \t\t\tString comp2Name = getComponentName(comp2);\n-\t\t\treturn Integer.compare(\n-\t\t\t\t\tpreferredPositions.getOrDefault(comp1Name, 0),\n-\t\t\t\t\tpreferredPositions.getOrDefault(comp2Name, 0)\n-\t\t\t);\n+\t\t\t\n+\t\t\t// Manually provide default values, since getOrDefault() doesn't exist prior to Java 8\n+\t\t\tint pos1 = (preferredPositions.containsKey(comp1Name) ? preferredPositions.get(comp1Name) : 0);\n+\t\t\tint pos2 = (preferredPositions.containsKey(comp2Name) ? preferredPositions.get(comp2Name) : 0);\n+\t\t\t\n+\t\t\treturn Integer.compare(pos1, pos2);\n \t\t}\n \t}\n \t, ", 6, 4, "\"modified, \"", 10], ["Adam Rehn", "Update the plain BibTeX export code to use an enum instead of a boolean.\n\nInstead of a boolean that determines whether or not plain BibTeX is exported, an enum is now used that differentiates between the default and plain export options.\n\nThe use of an enum provides flexibility that facilitates the addition of further format customisation options in the future.", "05/19/15, 11:53:20 AM", "Adam Rehn", "d2ac141c36501f2c81361b14c05f69fa7c414f52", ["src/main/java/net/sf/jabref/BasePanel.java", "src/main/java/net/sf/jabref/export/FileActions.java", "src/main/java/net/sf/jabref/export/SaveDatabaseAction.java"], "@@ -70,6 +70,7 @@\n import net.sf.jabref.export.SaveDatabaseAction;\n import net.sf.jabref.export.SaveException;\n import net.sf.jabref.export.SaveSession;\n+import net.sf.jabref.export.FileActions.DatabaseSaveType;\n import net.sf.jabref.export.layout.Layout;\n import net.sf.jabref.export.layout.LayoutHelper;\n import net.sf.jabref.external.AttachFileAction;\n@@ -411,9 +412,9 @@ public void action() throws Throwable {\n             }\n         });\n \n-        actions.put(\"saveSelectedAs\", new SaveSelectedAction(false));\n+        actions.put(\"saveSelectedAs\", new SaveSelectedAction(FileActions.DatabaseSaveType.DEFAULT));\n         \n-        actions.put(\"saveSelectedAsPlain\", new SaveSelectedAction(true));\n+        actions.put(\"saveSelectedAsPlain\", new SaveSelectedAction(FileActions.DatabaseSaveType.PLAIN_BIBTEX));\n         \n         // The action for copying selected entries.\n         actions.put(\"copy\", new BaseAction() {\n@@ -1696,7 +1697,7 @@ public void runCommand(String _command) {\n       //}).start();\n     }\n \n-    private boolean saveDatabase(File file, boolean selectedOnly, String encoding, boolean savePlainBibtex) throws SaveException {\n+    private boolean saveDatabase(File file, boolean selectedOnly, String encoding, FileActions.DatabaseSaveType saveType) throws SaveException {\n         SaveSession session;\n         frame.block();\n         try {\n@@ -1705,7 +1706,7 @@ private boolean saveDatabase(File file, boolean selectedOnly, String encoding, b\n                                            Globals.prefs, false, false, encoding, false);\n             else\n                 session = FileActions.savePartOfDatabase(database, metaData, file,\n-                                               Globals.prefs, mainTable.getSelectedEntries(), encoding, savePlainBibtex);\n+                                               Globals.prefs, mainTable.getSelectedEntries(), encoding, saveType);\n \n         } catch (UnsupportedCharsetException ex2) {\n             JOptionPane.showMessageDialog(frame, Globals.lang(\"Could not save file. \"\n@@ -1755,7 +1756,7 @@ private boolean saveDatabase(File file, boolean selectedOnly, String encoding, b\n                         JOptionPane.QUESTION_MESSAGE, null, Globals.ENCODINGS, encoding);\n                 if (choice != null) {\n                     String newEncoding = (String)choice;\n-                    return saveDatabase(file, selectedOnly, newEncoding, savePlainBibtex);\n+                    return saveDatabase(file, selectedOnly, newEncoding, saveType);\n                 } else\n                     commit = false;\n             } else if (answer == JOptionPane.CANCEL_OPTION)\n@@ -3078,10 +3079,10 @@ public void setBackAndForwardEnabledState() {\n \n     private class SaveSelectedAction extends BaseAction {\n     \t\n-    \tprivate boolean savePlainBibtex;\n+    \tprivate DatabaseSaveType saveType;\n     \t\n-    \tpublic SaveSelectedAction(boolean savePlainBibtex) {\n-    \t\tthis.savePlainBibtex = savePlainBibtex;\n+    \tpublic SaveSelectedAction(DatabaseSaveType saveType) {\n+    \t\tthis.saveType = saveType;\n     \t}\n     \t\n         public void action() throws Throwable {\n@@ -3097,7 +3098,7 @@ public void action() throws Throwable {\n                     Globals.lang(\"Save database\"), JOptionPane.OK_CANCEL_OPTION)\n                    == JOptionPane.OK_OPTION)) {\n \n-                saveDatabase(expFile, true, Globals.prefs.get(\"defaultEncoding\"), savePlainBibtex);\n+                saveDatabase(expFile, true, Globals.prefs.get(\"defaultEncoding\"), saveType);\n                 //runCommand(\"save\");\n                 frame.getFileHistory().newFile(expFile.getPath());\n                 frame.output(Globals.lang(\"Saved selected to\")+\" '\", @@ -55,7 +55,11 @@\n import ca.odell.glazedlists.SortedList;\n \n public class FileActions {\n-\n+\t\n+\tpublic enum DatabaseSaveType {\n+\t\tDEFAULT, PLAIN_BIBTEX\n+\t}\n+\t\n     private static Pattern refPat = Pattern.compile(\"(#[A-Za-z]+#)\"); // Used to detect string references in strings\n     private static BibtexString.Type previousStringType;\n \n@@ -357,7 +361,7 @@ public SaveSettings(boolean isSaveOperation, MetaData metaData) {\n      * @return A List containing warnings, if any.\n      */\n     public static SaveSession savePartOfDatabase(BibtexDatabase database, MetaData metaData,\n-            File file, JabRefPreferences prefs, BibtexEntry[] bes, String encoding, boolean writePlainBibtex) throws SaveException {\n+            File file, JabRefPreferences prefs, BibtexEntry[] bes, String encoding, DatabaseSaveType saveType) throws SaveException {\n \n         TreeMap<String, BibtexEntryType> types = new TreeMap<String, BibtexEntryType>(); // Map\n         // to\n@@ -382,7 +386,7 @@ public static SaveSession savePartOfDatabase(BibtexDatabase database, MetaData m\n             // Define our data stream.\n             VerifyingWriter fw = session.getWriter();\n \n-            if (!writePlainBibtex) {\n+            if (saveType != DatabaseSaveType.PLAIN_BIBTEX) {\n             \t// Write signature.\n             \twriteBibFileHeader(fw, encoding);\n             }\n@@ -425,7 +429,7 @@ public static SaveSession savePartOfDatabase(BibtexDatabase database, MetaData m\n             }\n \n             // Write meta data.\n-            if (!writePlainBibtex && metaData != null) {\n+            if (saveType != DatabaseSaveType.PLAIN_BIBTEX && metaData != null) {\n                 metaData.writeMetaData(fw);\n             }\n , @@ -218,7 +218,7 @@ private boolean saveDatabase(File file, boolean selectedOnly, String encoding) t\n                         Globals.prefs, false, false, encoding, false);\n             else\n                 session = FileActions.savePartOfDatabase(panel.database(), panel.metaData(), file,\n-                        Globals.prefs, panel.getSelectedEntries(), encoding, false);\n+                        Globals.prefs, panel.getSelectedEntries(), encoding, FileActions.DatabaseSaveType.DEFAULT);\n \n         } catch (UnsupportedCharsetException ex2) {\n             JOptionPane.showMessageDialog(frame, Globals.lang(\"Could not save file. \", ", 19, 14, "\"modified, modified, modified, \"", 33], ["Adam Rehn", "Minor UI Fix: Add \"Save selected as plain BibTeX...\" to the list of open database-only actions.\n\nThe \"Save selected as plain BibTeX...\" menu option is now correctly enabled and disabled based on whether or not a database is currently open.", "05/20/15, 05:11:58 AM", "Adam Rehn", "586b695ebf704b4c062f53b295e9ec849f8c8e8d", ["src/main/java/net/sf/jabref/JabRefFrame.java"], "@@ -1686,7 +1686,7 @@ public void stopShowingSearchResults() {\n     protected void initActions() {\n         openDatabaseOnlyActions = new LinkedList<Object>();\n         openDatabaseOnlyActions.addAll(Arrays.asList(manageSelectors,\n-                mergeDatabaseAction, newSubDatabaseAction, close, save, saveAs, saveSelectedAs, undo,\n+                mergeDatabaseAction, newSubDatabaseAction, close, save, saveAs, saveSelectedAs, saveSelectedAsPlain, undo,\n                 redo, cut, delete, copy, paste, mark, unmark, unmarkAll, editEntry,\n                 selectAll, copyKey, copyCiteKey, copyKeyAndTitle, editPreamble, editStrings, toggleGroups, toggleSearch,\n                 makeKeyAction, normalSearch,, ", 1, 1, "\"modified, \"", 2], ["Ward Poelmans", "Trim journal names before looking up the Abbreviation\n\nSome journals put trailing space in the journal names when\nexporting a bibtex citation. This causes the abbreviation\nto fail. This should fix that.", "05/20/15, 08:56:24 AM", "Ward Poelmans", "56f35901bf262d9a1a4dedc2face3b4c0b6b82ca", ["src/main/java/net/sf/jabref/journals/JournalAbbreviations.java"], "@@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2003-2015 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -91,7 +91,7 @@ public String dotsToNodots(String name) {\n      * @return The abbreviated name, or null if it couldn't be found.\n      */\n     public String getAbbreviatedName(String journalName, boolean withDots) {\n-        String s = journalName.toLowerCase();\n+        String s = journalName.toLowerCase().trim();\n         String abbr;\n         if (fullNameKeyed.containsKey(s)) {\n             abbr = fullNameKeyed.get(s);, ", 2, 2, "\"modified, \"", 4], ["Ward Poelmans", "update journal list", "05/20/15, 09:18:13 AM", "Ward Poelmans", "b01d00dfb78db358290b45ddb00c66837fc59b78", ["src/main/resources/resource/journalList.txt"], "None, ", 5301, 100, "\"modified, \"", 5401], ["Ward Poelmans", "Clean up journallist\n\nSome journal names has weird suffix. Probably left over\nfrom the HTML from which they were fetched.", "05/24/15, 03:16:46 PM", "Ward Poelmans", "a1158d814034241e670ee31ef2bca2f9fefb8dd0", ["src/main/resources/resource/journalList.txt"], "None, ", 1063, 1063, "\"modified, \"", 2126], ["Tobias", "Add some predefined look and feels in preference window (some of them are documented here https://sourceforge.net/p/jabref/mailman/message/32703401/, but are not working by default on windows)", "05/26/15, 08:31:26 PM", "Tobias", "17463147a4ce6b664a0dbb84477770ed61dbe128", ["CHANGELOG", "src/main/java/net/sf/jabref/AdvancedTab.java"], "@@ -1,4 +1,5 @@\n [master]\n+    - Add some predefined look and feels in preference window\n     - Fixes #1131: MacOSX: JabRef minimizes when clicking on x\n     - Dropped jayatana version 1.2.4 as version 2.x superseeds it\n     - Feature: Trim journal names before looking up the abbreviation, @@ -40,7 +40,8 @@\n     JLabel lab;\n     JCheckBox useDefault, useRemoteServer, useNativeFileDialogOnMac, filechooserDisableRename,\n             useIEEEAbrv, biblatexMode;\n-    JTextField className, remoteServerPort;\n+    JComboBox<String> className;\n+    JTextField remoteServerPort;\n     JButton def1 = new JButton(Globals.lang(\"Default\")),\n         def2 = new JButton(Globals.lang(\"Default\"));\n     JPanel p1 = new JPanel(),\n@@ -69,8 +70,17 @@ public AdvancedTab(JabRefPreferences prefs, HelpDialog diag) {\n     useIEEEAbrv = new JCheckBox(Globals.lang(\"Use IEEE LaTeX abbreviations\"));\n     biblatexMode = new JCheckBox(Globals.lang(\"BibLaTeX mode\"));\n     remoteServerPort = new JTextField();\n-    className = new JTextField(50);\n-    final JTextField clName = className;\n+    String[] lookAndFeels = {\n+    \t\"com.jgoodies.plaf.plastic.Plastic3DLookAndFeel\",\n+    \t\"com.sun.java.swing.plaf.windows.WindowsLookAndFeel\",\n+    \t\"com.sun.java.swing.plaf.motif.MotifLookAndFeel\",\n+    \t\"javax.swing.plaf.mac.MacLookAndFeel\",\n+    \t\"com.sun.java.swing.plaf.gtk.GTKLookAndFeel\",\n+    \t\"javax.swing.plaf.metal.MetalLookAndFeel\"\n+    };\n+    className = new JComboBox<String>(lookAndFeels);\n+    className.setEditable(true);\n+    final JComboBox<String> clName = className;\n     useDefault.addChangeListener(new ChangeListener() {\n         public void stateChanged(ChangeEvent e) {\n             clName.setEnabled(((JCheckBox)e.getSource()).isSelected());\n@@ -173,7 +183,7 @@ public void setValues() {\n         oldUseDef = _prefs.getBoolean(\"useDefaultLookAndFeel\");\n         oldLnf = _prefs.get(\"lookAndFeel\");\n         useDefault.setSelected(!oldUseDef);\n-        className.setText(oldLnf);\n+        className.setSelectedItem(oldLnf);\n         className.setEnabled(!oldUseDef);\n         useRemoteServer.setSelected(_prefs.getBoolean(\"useRemoteServer\"));\n         oldPort = _prefs.getInt(\"remoteServerPort\");\n@@ -193,7 +203,7 @@ public void setValues() {\n \n     public void storeSettings() {\n         _prefs.putBoolean(\"useDefaultLookAndFeel\", !useDefault.isSelected());\n-        _prefs.put(\"lookAndFeel\", className.getText());\n+        _prefs.put(\"lookAndFeel\", className.getSelectedItem().toString());\n         _prefs.putBoolean(\"useNativeFileDialogOnMac\", useNativeFileDialogOnMac.isSelected());\n         _prefs.putBoolean(\"filechooserDisableRename\", filechooserDisableRename.isSelected());\n         UIManager.put(\"FileChooser.readOnly\", filechooserDisableRename.isSelected());\n@@ -228,7 +238,7 @@ public void storeSettings() {\n         _prefs.putBoolean(\"biblatexMode\", biblatexMode.isSelected());\n \n         if ((useDefault.isSelected() == oldUseDef) ||\n-            !oldLnf.equals(className.getText())) {\n+            !oldLnf.equals(className.getSelectedItem().toString())) {\n             JOptionPane.showMessageDialog(null, \n             \t\tGlobals.lang(\"You have changed the look and feel setting.\")\n             \t\t.concat(\" \"), ", 17, 6, "\"modified, modified, \"", 23], ["Tobias", "Fix for Bug #1278 Crash after changing LookAndFeel.\nNow a proper error message is shown at start if the L&F is not available.\nMoreover, only available L&Fs are listed in the preference window.", "05/29/15, 08:12:05 PM", "Tobias", "6f23b7f8bf393826924f3755579dc546c044b091", ["CHANGELOG", "src/main/java/net/sf/jabref/AdvancedTab.java", "src/main/java/net/sf/jabref/JabRef.java"], "@@ -1,5 +1,6 @@\n [master]\n-    - Add some predefined look and feels in preference window\n+    - Fix for bug #1278 Crash after changing LookAndFeel (showing a proper error message if L&F is not available)\n+    - Adds some predefined look and feels in preference window (lists only available L&Fs)\n     - Fixes #1131: MacOSX: JabRef minimizes when clicking on x\n     - Dropped jayatana version 1.2.4 as version 2.x superseeds it\n     - Feature: Trim journal names before looking up the abbreviation, @@ -16,6 +16,8 @@\n package net.sf.jabref;\n \n import java.awt.BorderLayout;\n+import java.util.ArrayList;\n+import java.util.List;\n \n import javax.swing.*;\n import javax.swing.event.ChangeEvent;\n@@ -70,15 +72,24 @@ public AdvancedTab(JabRefPreferences prefs, HelpDialog diag) {\n     useIEEEAbrv = new JCheckBox(Globals.lang(\"Use IEEE LaTeX abbreviations\"));\n     biblatexMode = new JCheckBox(Globals.lang(\"BibLaTeX mode\"));\n     remoteServerPort = new JTextField();\n-    String[] lookAndFeels = {\n+    String[] possibleLookAndFeels = {\n     \t\"com.jgoodies.plaf.plastic.Plastic3DLookAndFeel\",\n     \t\"com.sun.java.swing.plaf.windows.WindowsLookAndFeel\",\n     \t\"com.sun.java.swing.plaf.motif.MotifLookAndFeel\",\n     \t\"javax.swing.plaf.mac.MacLookAndFeel\",\n     \t\"com.sun.java.swing.plaf.gtk.GTKLookAndFeel\",\n     \t\"javax.swing.plaf.metal.MetalLookAndFeel\"\n     };\n-    className = new JComboBox<String>(lookAndFeels);\n+    // Only list L&F which are available\n+    List<String> lookAndFeels = new ArrayList<String>();\n+    for (String lf : possibleLookAndFeels) {\n+    \ttry {\n+    \t\t// Try to find L&F, throws exception if not successful\n+    \t\tClass.forName(lf);\n+    \t\tlookAndFeels.add(lf);\n+    \t} catch(ClassNotFoundException e) {}\n+    }\n+    className = new JComboBox<String>(lookAndFeels.toArray(new String[lookAndFeels.size()]));\n     className.setEditable(true);\n     final JComboBox<String> clName = className;\n     useDefault.addChangeListener(new ChangeListener() {, @@ -614,24 +614,36 @@ protected ParserResult fetch(String fetchCommand) {\n     \n     private void setLookAndFeel() {\n         try {\n-            String systemLnF;\n-            // * Look first into the Preferences\n-            // * Fallback to the System Look & Fell\n+            String lookFeel;\n+        \tString systemLnF = UIManager.getSystemLookAndFeelClassName();\n+            \n             if (Globals.prefs.getBoolean(\"useDefaultLookAndFeel\")) {\n-                systemLnF = UIManager.getSystemLookAndFeelClassName();\n+            \t// Use system Look & Feel by default\n+            \tlookFeel = systemLnF;\n             } else {\n-                systemLnF = Globals.prefs.get(\"lookAndFeel\");\n+            \tlookFeel = Globals.prefs.get(\"lookAndFeel\");\n             }\n \n             // At all cost, avoid ending up with the Metal look and feel:\n-            if (systemLnF.equals(\"javax.swing.plaf.metal.MetalLookAndFeel\")) {\n+            if (lookFeel.equals(\"javax.swing.plaf.metal.MetalLookAndFeel\")) {\n                 Plastic3DLookAndFeel lnf = new Plastic3DLookAndFeel();\n                 Plastic3DLookAndFeel.setCurrentTheme(new SkyBluer());\n                 com.jgoodies.looks.Options.setPopupDropShadowEnabled(true);\n                 UIManager.setLookAndFeel(lnf);\n             }\n             else {\n-                UIManager.setLookAndFeel(systemLnF);\n+            \ttry {\n+            \t\tUIManager.setLookAndFeel(lookFeel);\n+            \t} catch(ClassNotFoundException e) {\n+            \t\t// specified look and feel does not exist on the classpath, so use system l&f\n+            \t\tUIManager.setLookAndFeel(systemLnF);\n+            \t\t// also set system l&f as default\n+            \t\tGlobals.prefs.put(\"lookAndFeel\", systemLnF);\n+            \t\t// notify the user\n+            \t\tJOptionPane.showMessageDialog(jrf, Globals.lang(\"Unable to find the requested Look & Feel and thus the default one is used.\"),\n+                            Globals.lang(\"Warning\"),\n+                            JOptionPane.WARNING_MESSAGE);\n+            \t}\n             }\n         } catch (Exception e) {\n             e.printStackTrace();, ", 34, 10, "\"modified, modified, modified, \"", 44], ["Nicolas Pavillon", "Update copyright years,\nAdd name to contributors", "05/31/15, 03:52:20 AM", "Nicolas Pavillon", "c5c65778f59af540cb238e8ac245498eb7b868f1", ["src/main/java/net/sf/jabref/JabRefFrame.java", "src/main/resources/help/About.html"], "@@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2012 JabRef contributors.\n+/*  Copyright (C) 2003-2015 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or, @@ -87,6 +87,7 @@ <h2>Contributions from:</h2>\n         Alex Montgomery,\n         Saverio Mori,\n         Ambrogio Oliva,\n+        Nicolas Pavillon,\n         Brian Quistorff,\n         Ward Poelmans,\n         Stephan Rave,, ", 2, 1, "\"modified, modified, \"", 3], ["Nicolas Pavillon", "Move registration of Apple events to fix document opening when application starts", "05/31/15, 04:14:09 AM", "Nicolas Pavillon", "d9f0c86f36d3e104d11ec602afdcd68709b1c89d", ["src/main/java/net/sf/jabref/JabRefFrame.java"], "@@ -449,8 +449,6 @@ public JabRefFrame() {\n   private void init() {\n \t    tabbedPane = new DragDropPopupPane(manageSelectors, databaseProperties, bibtexKeyPattern);\n \n-        macOSXRegistration();\n-\n         UIManager.put(\"FileChooser.readOnly\", Globals.prefs.getBoolean(\"filechooserDisableRename\"));\n \n         MyGlassPane glassPane = new MyGlassPane();\n@@ -580,6 +578,11 @@ public void stateChanged(ChangeEvent e) {\n                 }\n             }\n         });\n+        \n+        //Note: The registration of Apple event is at the end of initialization, because\n+        //if the events happen too early (ie when the window is not initialized yet), the\n+        //opened (double-clicked) documents are not displayed.\n+        macOSXRegistration();\n     }\n \n     public void setWindowTitle() {, ", 5, 2, "\"modified, \"", 7], ["The Gitter Badger", "Added Gitter badge", "06/15/15, 11:38:36 AM", "The Gitter Badger", "d2e5463976b26da8ddc6a973696fb906146b432a", ["README.md"], "@@ -1,5 +1,7 @@\n # JabRef 2.11 development version\n \n+[![Join the chat at https://gitter.im/JabRef/jabref](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/JabRef/jabref?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n+\n [![Build Status](https://api.travis-ci.org/JabRef/jabref.png?branch=master)](https://travis-ci.org/JabRef/jabref)\n \n This version is a development version. Features may not work as expected., ", 2, 0, "\"modified, \"", 2], ["nikmilpv", "Fixed typo that prevented ant builds", "06/20/15, 11:07:32 PM", "nikmilpv", "990e2ab837c66b6070848a40e2e3335d6aef27a0", ["build.gradle"], "@@ -97,7 +97,7 @@ dependencies {\n // use ant targets with prefix antTargets.XXXXX\n ant.importBuild \"build-wrapper.xml\"\n // add jars from this classpath to the classpath for the ant build\n-ant.references.jars.setFiles(configurations.compile.asPath.replace(\";\",\" \"))\n+ant.references.jars.setFiles(configurations.compile.asPath.replace(\":\",\" \"))\n \n sourceCompatibility = 1.6\n mainClassName = \"net.sf.jabref.JabRefMain\", ", 1, 1, "\"modified, \"", 2], ["Igor Steinmacher", "Updated missing entries (last 2)", "07/02/15, 05:46:27 PM", "Igor Steinmacher", "4ffdb4250cedf718ce96615d903b1c0590b12180", ["src/main/resources/resource/Menu_pt_BR.properties"], "@@ -128,6 +128,6 @@ Merge_entries=Unir_entradas\n Open_folder=Abrir_diret\\u00f3rio\n Find_unlinked_files...=Encontrar_arquivos_n\\u00e3o_referenciados\n \n-Hide/show_toolbar=\n+Hide/show_toolbar=Mostrar/esconder_barra_de_ferramentas\n \n-Fork_me_on_GitHub=\n+Fork_me_on_GitHub=Criar_um_fork_no_GitHub, ", 2, 2, "\"modified, \"", 4], ["Joerg Lenhard", "Add comment for DateFormat changes", "07/17/15, 12:00:51 PM", "Joerg Lenhard", "b5ef0c700b198b25e4944bb02767ce9d4c2aa904", ["src/main/java/net/sf/jabref/net/Cookie.java"], "@@ -28,8 +28,11 @@\n     private Date expires;\n     private String path;\n \n+    /**\n+     * DateFormats should not be reused among instances (or rather among threads), because they are not thread-safe.\n+     * If they are shared, their usage should be synchronized.\n+     */\n     private final DateFormat expiresFormat1 = new SimpleDateFormat(\"E, dd MMM yyyy k:m:s 'GMT'\", Locale.US);\n-\n     private final DateFormat expiresFormat2 = new SimpleDateFormat(\"E, dd-MMM-yyyy k:m:s 'GMT'\", Locale.US);\n \n , ", 4, 1, "\"modified, \"", 5], ["Joerg Lenhard", "Update library documentation", "07/21/15, 09:56:42 AM", "Joerg Lenhard", "2cbf542654db3384e2c263686d186e9433f973fa", ["used-libaries.txt"], "@@ -64,7 +64,7 @@ Note:    This should fetch org.jvnet.mimepull:mimepull; maybe that version is br\n Id:      mysql:mysql-connector-java\n Project: MySQL Connector/J\n URL:     http://www.mysql.de/downloads/connector/j/\n-License: GPLv2! and Oracle\ufffds FOSS License Exception (http://www.mysql.com/about/legal/licensing/foss-exception/) allowing GPLv3\n+License: GPLv2! and Oracle\ufffds FOSS License Exception (http://www.mysql.com/about/legal/licensing/foss-exception/) allowing GPLv3\n \n Id:      net.java.dev.glazedlists:glazedlists_java15\n Project: Glazed Lists\n@@ -111,18 +111,16 @@ Project: OpenOffice.org\n URL:     http://www.openoffice.org/api/SDK\n License: LGPL 3.0\n \n+Id:      org.swinglabs:swingx\n+Project: SwingX\n+URL:     https://swingx.java.net/\n+License: LGPL 3.0\n+\n Path:    org.postgresql:postgresql\n Project: PostgreSQL JDBC Driver\n URL:     http://jdbc.postgresql.org/download.html\n License: BSD\n \n-\n-\n-Path:    lib/jgoodies/com.jgoodies.uif_lite-2.1.4.jar\n-Project: com.jgoodies.uif_lite\n-URL:     https://github.com/JabRef/com.jgoodies.uif_lite\n-License: BSD\n-\n Path:    lib/microba.jar\n Project: Microba\n URL:     https://github.com/tdbear/microba, ", 6, 8, "\"modified, \"", 14], ["Joerg Lenhard", "Document changes", "07/21/15, 12:58:51 PM", "Joerg Lenhard", "0957ffd0ad11fb9f2b7df08374938eca385ebac6", ["CHANGELOG"], "@@ -1,4 +1,5 @@\n [master]\n+    - Refactored preferences\n     - Remove local jgoodies dependency: replace SimpleInteralFrame with swingx JXTitledPanel and UIFSplitPane by JSplitPane\n     - Fix several FindBugs warnings\n     - Fix for bug #1276: OO styles do not consider editor fields anymore for sorting, ", 1, 0, "\"modified, \"", 1], ["Joerg Lenhard", "Document changes", "07/21/15, 02:07:15 PM", "Joerg Lenhard", "cce4784f423a564cd54effc52b93de0a4bcde1de", ["CHANGELOG"], "@@ -1,4 +1,5 @@\n [master]\n+    - Update dependencies: jersey, commons.logging, pdfbox, jgoodies, lazedlists, JDBC connectors\n     - Refactored preferences\n     - Remove local jgoodies dependency: replace SimpleInteralFrame with swingx JXTitledPanel and UIFSplitPane by JSplitPane\n     - Fix several FindBugs warnings, ", 1, 0, "\"modified, \"", 1], ["Joerg Lenhard", "Replace occurrences of remaining default preferences 221 - 253", "07/22/15, 02:41:35 PM", "Joerg Lenhard", "8ac00be7468db13a93fb4781f669a7484a45ab30", ["src/main/java/net/sf/jabref/AdvancedTab.java", "src/main/java/net/sf/jabref/BasePanel.java", "src/main/java/net/sf/jabref/BibtexEntryType.java", "src/main/java/net/sf/jabref/BibtexEntryWriter.java", "src/main/java/net/sf/jabref/BibtexFields.java", "src/main/java/net/sf/jabref/EntryEditor.java", "src/main/java/net/sf/jabref/ExternalTab.java", "src/main/java/net/sf/jabref/FileTab.java", "src/main/java/net/sf/jabref/Globals.java", "src/main/java/net/sf/jabref/JabRef.java", "src/main/java/net/sf/jabref/JabRefFrame.java", "src/main/java/net/sf/jabref/MetaData.java", "src/main/java/net/sf/jabref/TabLabelPattern.java", "src/main/java/net/sf/jabref/TablePrefsTab.java", "src/main/java/net/sf/jabref/export/AutoSaveManager.java", "src/main/java/net/sf/jabref/export/SaveSession.java", "src/main/java/net/sf/jabref/gui/EntryCustomizationDialog2.java", "src/main/java/net/sf/jabref/gui/FileListEntryEditor.java", "src/main/java/net/sf/jabref/imports/ACMPortalFetcher.java", "src/main/java/net/sf/jabref/imports/AutosaveStartupPrompter.java", "src/main/java/net/sf/jabref/imports/DOItoBibTeXFetcher.java", "src/main/java/net/sf/jabref/imports/DiVAtoBibTeXFetcher.java", "src/main/java/net/sf/jabref/imports/GeneralFetcher.java", "src/main/java/net/sf/jabref/imports/HTMLConverter.java", "src/main/java/net/sf/jabref/imports/IEEEXploreFetcher.java", "src/main/java/net/sf/jabref/imports/OpenDatabaseAction.java", "src/main/java/net/sf/jabref/imports/fetcher/ISBNtoBibTeXFetcher.java", "src/main/java/net/sf/jabref/labelPattern/LabelPatternUtil.java", "src/main/java/net/sf/jabref/plugin/PluginInstaller.java", "src/main/java/net/sf/jabref/sql/DBStrings.java", "src/main/java/net/sf/jabref/util/Util.java"], "@@ -218,12 +218,12 @@ public void setValues() {\n         remoteServerPort.setText(String.valueOf(oldPort));\n         useNativeFileDialogOnMac.setSelected(Globals.prefs.getBoolean(JabRefPreferences.USE_NATIVE_FILE_DIALOG_ON_MAC));\n         filechooserDisableRename.setSelected(Globals.prefs.getBoolean(JabRefPreferences.FILECHOOSER_DISABLE_RENAME));\n-        useIEEEAbrv.setSelected(Globals.prefs.getBoolean(\"useIEEEAbrv\"));\n-        oldBiblMode = Globals.prefs.getBoolean(\"biblatexMode\");\n+        useIEEEAbrv.setSelected(Globals.prefs.getBoolean(JabRefPreferences.USE_IEEE_ABRV));\n+        oldBiblMode = Globals.prefs.getBoolean(JabRefPreferences.BIBLATEX_MODE);\n         biblatexMode.setSelected(oldBiblMode);\n-        useConvertToEquation.setSelected(Globals.prefs.getBoolean(\"useConvertToEquation\"));\n-        useCaseKeeperOnSearch.setSelected(Globals.prefs.getBoolean(\"useCaseKeeperOnSearch\"));\n-        useUnitFormatterOnSearch.setSelected(Globals.prefs.getBoolean(\"useUnitFormatterOnSearch\"));\n+        useConvertToEquation.setSelected(Globals.prefs.getBoolean(JabRefPreferences.USE_CONVERT_TO_EQUATION));\n+        useCaseKeeperOnSearch.setSelected(Globals.prefs.getBoolean(JabRefPreferences.USE_CASE_KEEPER_ON_SEARCH));\n+        useUnitFormatterOnSearch.setSelected(Globals.prefs.getBoolean(JabRefPreferences.USE_UNIT_FORMATTER_ON_SEARCH));\n     }\n \n     @Override\n@@ -233,14 +233,14 @@ public void storeSettings() {\n         preferences.putBoolean(JabRefPreferences.USE_NATIVE_FILE_DIALOG_ON_MAC, useNativeFileDialogOnMac.isSelected());\n         preferences.putBoolean(JabRefPreferences.FILECHOOSER_DISABLE_RENAME, filechooserDisableRename.isSelected());\n         UIManager.put(\"FileChooser.readOnly\", filechooserDisableRename.isSelected());\n-        preferences.putBoolean(\"useIEEEAbrv\", useIEEEAbrv.isSelected());\n+        preferences.putBoolean(JabRefPreferences.USE_IEEE_ABRV, useIEEEAbrv.isSelected());\n         if (useIEEEAbrv.isSelected()) {\n             Globals.journalAbbrev = new JournalAbbreviationRepository();\n             Globals.journalAbbrev.readJournalListFromResource(Globals.JOURNALS_IEEE_INTERNAL_LIST);\n         }\n         storeRemoteSettings();\n \n-        preferences.putBoolean(\"biblatexMode\", biblatexMode.isSelected());\n+        preferences.putBoolean(JabRefPreferences.BIBLATEX_MODE, biblatexMode.isSelected());\n \n         if ((useDefault.isSelected() == oldUseDef) ||\n                 !oldLnf.equals(className.getSelectedItem().toString())) {\n@@ -260,9 +260,9 @@ public void storeSettings() {\n                     Globals.lang(\"BibLaTeX mode\"), JOptionPane.WARNING_MESSAGE);\n         }\n \n-        preferences.putBoolean(\"useConvertToEquation\", useConvertToEquation.isSelected());\n-        preferences.putBoolean(\"useCaseKeeperOnSearch\", useCaseKeeperOnSearch.isSelected());\n-        preferences.putBoolean(\"useUnitFormatterOnSearch\", useUnitFormatterOnSearch.isSelected());\n+        preferences.putBoolean(JabRefPreferences.USE_CONVERT_TO_EQUATION, useConvertToEquation.isSelected());\n+        preferences.putBoolean(JabRefPreferences.USE_CASE_KEEPER_ON_SEARCH, useCaseKeeperOnSearch.isSelected());\n+        preferences.putBoolean(JabRefPreferences.USE_UNIT_FORMATTER_ON_SEARCH, useUnitFormatterOnSearch.isSelected());\n     }\n \n     public void storeRemoteSettings() {, @@ -1190,7 +1190,7 @@ public void run() {\n                             if (link != null) {\n                                 filepath = link.toString();\n                             } else {\n-                                if (Globals.prefs.getBoolean(\"runAutomaticFileSearch\")) {\n+                                if (Globals.prefs.getBoolean(JabRefPreferences.RUN_AUTOMATIC_FILE_SEARCH)) {\n \n                                     /*  The search can lead to an unexpected 100% CPU usage which is perceived\n                                         as a bug, if the search incidentally starts at a directory with lots, @@ -1048,7 +1048,7 @@ public boolean isVisibleAtNewEntryDialog() {\n     private static final TreeMap<String, BibtexEntryType> STANDARD_TYPES;\n     static {\n         // Put the standard entry types into the type map.\n-        if (!Globals.prefs.getBoolean(\"biblatexMode\")) {\n+        if (!Globals.prefs.getBoolean(JabRefPreferences.BIBLATEX_MODE)) {\n             BibtexEntryType.ALL_TYPES.put(\"article\", BibtexEntryType.ARTICLE);\n             BibtexEntryType.ALL_TYPES.put(\"inbook\", BibtexEntryType.INBOOK);\n             BibtexEntryType.ALL_TYPES.put(\"book\", BibtexEntryType.BOOK);, @@ -54,7 +54,7 @@\n     private final boolean write;\n     private final boolean writeFieldCameCaseName = Globals.prefs.getBoolean(JabRefPreferences.WRITEFIELD_CAMELCASENAME);\n     private final boolean writeFieldAddSpaces = Globals.prefs.getBoolean(JabRefPreferences.WRITEFIELD_ADDSPACES);\n-    private final boolean includeEmptyFields = Globals.prefs.getBoolean(\"includeEmptyFields\");\n+    private final boolean includeEmptyFields = Globals.prefs.getBoolean(JabRefPreferences.INCLUDE_EMPTY_FIELDS);\n     private final int writeFieldSortStype = Globals.prefs.getInt(JabRefPreferences.WRITEFIELD_SORTSTYLE);\n \n , @@ -266,7 +266,7 @@ private BibtexFields()\n      * add a field descriptor for the new field.\n      */\n     public static void setNumericFieldsFromPrefs() {\n-        String[] numFields = Globals.prefs.getStringArray(\"numericFields\");\n+        String[] numFields = Globals.prefs.getStringArray(JabRefPreferences.NUMERIC_FIELDS);\n         if (numFields == null) {\n             return;\n         }, @@ -228,7 +228,7 @@ private void setupFieldPanels() {\n \n         if ((entry.getOptionalFields() != null) && (entry.getOptionalFields().length >= 1)) {\n             EntryEditorTab optPan;\n-            if (!prefs.getBoolean(\"biblatexMode\")) {\n+            if (!prefs.getBoolean(JabRefPreferences.BIBLATEX_MODE)) {\n                 optPan = new EntryEditorTab(frame, panel, java.util.Arrays.asList(entry.getOptionalFields()), this,\n                         false, false, Globals.lang(\"Optional fields\"));\n                 if (optPan.fileListEditor != null) {, @@ -235,12 +235,12 @@ public void setValues() {\n         pdfDir.setText(_prefs.get(\"pdfDirectory\"));\n         psDir.setText(_prefs.get(\"psDirectory\"));\n         fileDir.setText(_prefs.get(GUIGlobals.FILE_FIELD + \"Directory\"));\n-        bibLocationAsFileDir.setSelected(_prefs.getBoolean(\"bibLocationAsFileDir\"));\n-        bibLocAsPrimaryDir.setSelected(_prefs.getBoolean(\"bibLocAsPrimaryDir\"));\n+        bibLocationAsFileDir.setSelected(_prefs.getBoolean(JabRefPreferences.BIB_LOCATION_AS_FILE_DIR));\n+        bibLocAsPrimaryDir.setSelected(_prefs.getBoolean(JabRefPreferences.BIB_LOC_AS_PRIMARY_DIR));\n         bibLocAsPrimaryDir.setEnabled(bibLocationAsFileDir.isSelected());\n-        runAutoFileSearch.setSelected(_prefs.getBoolean(\"runAutomaticFileSearch\"));\n+        runAutoFileSearch.setSelected(_prefs.getBoolean(JabRefPreferences.RUN_AUTOMATIC_FILE_SEARCH));\n         regExpTextField.setText(_prefs.get(JabRefPreferences.REG_EXP_SEARCH_EXPRESSION_KEY));\n-        allowFileAutoOpenBrowse.setSelected(_prefs.getBoolean(\"allowFileAutoOpenBrowse\"));\n+        allowFileAutoOpenBrowse.setSelected(_prefs.getBoolean(JabRefPreferences.ALLOW_FILE_AUTO_OPEN_BROWSE));\n \n         emailSubject.setText(_prefs.get(JabRefPreferences.EMAIL_SUBJECT));\n         openFoldersOfAttachedFiles.setSelected(_prefs.getBoolean(JabRefPreferences.OPEN_FOLDERS_OF_ATTACHED_FILES));\n@@ -266,11 +266,11 @@ public void storeSettings() {\n         _prefs.put(\"pdfDirectory\", pdfDir.getText());\n         _prefs.put(\"psDirectory\", psDir.getText());\n         _prefs.put(GUIGlobals.FILE_FIELD + \"Directory\", fileDir.getText());\n-        _prefs.putBoolean(\"bibLocationAsFileDir\", bibLocationAsFileDir.isSelected());\n-        _prefs.putBoolean(\"bibLocAsPrimaryDir\", bibLocAsPrimaryDir.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.BIB_LOCATION_AS_FILE_DIR, bibLocationAsFileDir.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.BIB_LOC_AS_PRIMARY_DIR, bibLocAsPrimaryDir.isSelected());\n         _prefs.putBoolean(JabRefPreferences.AUTOLINK_EXACT_KEY_ONLY, matchExactKeyOnly.isSelected());\n-        _prefs.putBoolean(\"runAutomaticFileSearch\", runAutoFileSearch.isSelected());\n-        _prefs.putBoolean(\"allowFileAutoOpenBrowse\", allowFileAutoOpenBrowse.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.RUN_AUTOMATIC_FILE_SEARCH, runAutoFileSearch.isSelected());\n+        _prefs.putBoolean(JabRefPreferences.ALLOW_FILE_AUTO_OPEN_BROWSE, allowFileAutoOpenBrowse.isSelected());\n         _prefs.put(JabRefPreferences.EMAIL_SUBJECT, emailSubject.getText());\n         _prefs.putBoolean(JabRefPreferences.OPEN_FOLDERS_OF_ATTACHED_FILES, openFoldersOfAttachedFiles.isSelected());\n     }, @@ -85,7 +85,7 @@ public FileTab(JabRefFrame frame, JabRefPreferences prefs) {\n                 GUIGlobals.getIconUrl(\"helpSmall\"));\n         openLast = new JCheckBox(Globals.lang(\"Open last edited databases at startup\"));\n         backup = new JCheckBox(Globals.lang(\"Backup old file when saving\"));\n-        autoSave = new JCheckBox(Globals.lang(\"Autosave\"));\n+        autoSave = new JCheckBox(Globals.lang(JabRefPreferences.AUTO_SAVE));\n         promptBeforeUsingAutoSave = new JCheckBox(Globals.lang(\"Prompt before recovering a database from an autosave file\"));\n         autoSaveInterval = new JSpinner(new SpinnerNumberModel(1, 1, 60, 1));\n         valueDelimiter = new JComboBox(new String[] {\n@@ -300,12 +300,12 @@ public void setValues() {\n         bracesAroundCapitalsFields.setText(_prefs.get(JabRefPreferences.PUT_BRACES_AROUND_CAPITALS));\n         nonWrappableFields.setText(_prefs.get(JabRefPreferences.NON_WRAPPABLE_FIELDS));\n \n-        autoSave.setSelected(_prefs.getBoolean(\"autoSave\"));\n-        promptBeforeUsingAutoSave.setSelected(_prefs.getBoolean(\"promptBeforeUsingAutosave\"));\n-        autoSaveInterval.setValue(_prefs.getInt(\"autoSaveInterval\"));\n+        autoSave.setSelected(_prefs.getBoolean(JabRefPreferences.AUTO_SAVE));\n+        promptBeforeUsingAutoSave.setSelected(_prefs.getBoolean(JabRefPreferences.PROMPT_BEFORE_USING_AUTOSAVE));\n+        autoSaveInterval.setValue(_prefs.getInt(JabRefPreferences.AUTO_SAVE_INTERVAL));\n         origAutoSaveSetting = autoSave.isSelected();\n-        valueDelimiter.setSelectedIndex(_prefs.getInt(\"valueDelimiters\"));\n-        includeEmptyFields.setSelected(_prefs.getBoolean(\"includeEmptyFields\"));\n+        valueDelimiter.setSelectedIndex(_prefs.getInt(JabRefPreferences.VALUE_DELIMITERS2));\n+        includeEmptyFields.setSelected(_prefs.getBoolean(JabRefPreferences.INCLUDE_EMPTY_FIELDS));\n         camelCase.setSelected(_prefs.getBoolean(JabRefPreferences.WRITEFIELD_CAMELCASENAME));\n         sameColumn.setSelected(_prefs.getBoolean(JabRefPreferences.WRITEFIELD_ADDSPACES));\n \n@@ -341,7 +341,7 @@ public void storeSettings() {\n         _prefs.putBoolean(JabRefPreferences.AUTO_SAVE, autoSave.isSelected());\n         _prefs.putBoolean(JabRefPreferences.PROMPT_BEFORE_USING_AUTOSAVE, promptBeforeUsingAutoSave.isSelected());\n         _prefs.putInt(JabRefPreferences.AUTO_SAVE_INTERVAL, (Integer) autoSaveInterval.getValue());\n-        _prefs.putInt(\"valueDelimiters\", valueDelimiter.getSelectedIndex());\n+        _prefs.putInt(JabRefPreferences.VALUE_DELIMITERS2, valueDelimiter.getSelectedIndex());\n         _prefs.putBoolean(JabRefPreferences.INCLUDE_EMPTY_FIELDS, includeEmptyFields.isSelected());\n         _prefs.putBoolean(JabRefPreferences.WRITEFIELD_CAMELCASENAME, camelCase.isSelected());\n         _prefs.putBoolean(JabRefPreferences.WRITEFIELD_ADDSPACES, sameColumn.isSelected());, @@ -1298,7 +1298,7 @@ public static void initializeJournalNames() {\n         // Read internal lists:\n         Globals.journalAbbrev = new JournalAbbreviationRepository();\n         Globals.journalAbbrev.readJournalListFromResource(Globals.JOURNALS_FILE_BUILTIN);\n-        if (Globals.prefs.getBoolean(\"useIEEEAbrv\")) {\n+        if (Globals.prefs.getBoolean(JabRefPreferences.USE_IEEE_ABRV)) {\n             Globals.journalAbbrev.readJournalListFromResource(JOURNALS_IEEE_INTERNAL_LIST);\n         }\n , @@ -801,7 +801,7 @@ else if (!pr.isPostponedAutosaveFound()) {\n                 Globals.lang(\"Beta version\"), JOptionPane.WARNING_MESSAGE);*/\n \n         // Start auto save timer:\n-        if (Globals.prefs.getBoolean(\"autoSave\")) {\n+        if (Globals.prefs.getBoolean(JabRefPreferences.AUTO_SAVE)) {\n             Globals.startAutoSaveManager(JabRef.jrf);\n         }\n , @@ -1432,7 +1432,7 @@ private void fillMenu() {\n         search.addSeparator();\n         GeneralFetcher generalFetcher = new GeneralFetcher(sidePaneManager, this, fetchers);\n         search.add(generalFetcher.getAction());\n-        if (prefs.getBoolean(\"webSearchVisible\")) {\n+        if (prefs.getBoolean(JabRefPreferences.WEB_SEARCH_VISIBLE)) {\n             sidePaneManager.register(generalFetcher.getTitle(), generalFetcher);\n             sidePaneManager.show(generalFetcher.getTitle());\n         }, @@ -204,9 +204,9 @@ public void putData(String key, Vector<String> orderedData) {\n         }\n \n         // Check if the bib file location should be included, and if so, if it is set:\n-        if (Globals.prefs.getBoolean(\"bibLocationAsFileDir\") && (getFile() != null)) {\n+        if (Globals.prefs.getBoolean(JabRefPreferences.BIB_LOCATION_AS_FILE_DIR) && (getFile() != null)) {\n             // Check if we should add it as primary file dir (first in the list) or not:\n-            if (Globals.prefs.getBoolean(\"bibLocAsPrimaryDir\")) {\n+            if (Globals.prefs.getBoolean(JabRefPreferences.BIB_LOC_AS_PRIMARY_DIR)) {\n                 dirs.add(0, getFile().getParent());\n             } else {\n                 dirs.add(getFile().getParent());, @@ -83,11 +83,11 @@ public void storeSettings() {\n         if (alwaysAddLetter.isSelected()) {\n             Globals.prefs.putBoolean(JabRefPreferences.KEY_GEN_ALWAYS_ADD_LETTER, true);\n         } else if (letterStartA.isSelected()) {\n-            Globals.prefs.putBoolean(\"keyGenFirstLetterA\", true);\n+            Globals.prefs.putBoolean(JabRefPreferences.KEY_GEN_FIRST_LETTER_A, true);\n             Globals.prefs.putBoolean(JabRefPreferences.KEY_GEN_ALWAYS_ADD_LETTER, false);\n         }\n         else {\n-            Globals.prefs.putBoolean(\"keyGenFirstLetterA\", false);\n+            Globals.prefs.putBoolean(JabRefPreferences.KEY_GEN_FIRST_LETTER_A, false);\n             Globals.prefs.putBoolean(JabRefPreferences.KEY_GEN_ALWAYS_ADD_LETTER, false);\n         }\n , @@ -323,7 +323,7 @@ public void storeSettings() {\n         if (((newVal != null) && (oldVal == null))\n                 || ((newVal == null) && (oldVal != null))\n                 || ((newVal != null) && !newVal.equals(oldVal))) {\n-            _prefs.put(\"numericFields\", newVal);\n+            _prefs.put(JabRefPreferences.NUMERIC_FIELDS, newVal);\n             BibtexFields.setNumericFieldsFromPrefs();\n         }\n , @@ -18,6 +18,7 @@\n import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.BasePanel;\n import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefPreferences;\n \n import java.util.Timer;\n import java.util.TimerTask;\n@@ -47,7 +48,7 @@ public void startAutoSaveTimer() {\n \n         TimerTask task = new AutoSaveTask();\n         t = new Timer();\n-        long interval = 60000 * Globals.prefs.getInt(\"autoSaveInterval\");\n+        long interval = 60000 * Globals.prefs.getInt(JabRefPreferences.AUTO_SAVE_INTERVAL);\n         t.scheduleAtFixedRate(task, interval, interval);\n     }\n , @@ -15,6 +15,7 @@\n */\n package net.sf.jabref.export;\n \n+import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.util.FileBasedLock;\n import net.sf.jabref.util.FileUtil;\n import net.sf.jabref.Globals;\n@@ -62,7 +63,7 @@ public SaveSession(File file, String encoding, boolean backup) throws IOExceptio\n             UnsupportedCharsetException {\n         this.file = file;\n         tmp = File.createTempFile(SaveSession.TEMP_PREFIX, SaveSession.TEMP_SUFFIX);\n-        useLockFile = Globals.prefs.getBoolean(\"useLockFiles\");\n+        useLockFile = Globals.prefs.getBoolean(JabRefPreferences.USE_LOCK_FILES);\n         this.backup = backup;\n         this.encoding = encoding;\n         writer = new VerifyingWriter(new FileOutputStream(tmp), encoding);, @@ -71,7 +71,7 @@ private void initGui() {\n         Container pane = getContentPane();\n         pane.setLayout(new BorderLayout());\n \n-        biblatexMode = Globals.prefs.getBoolean(\"biblatexMode\");\n+        biblatexMode = Globals.prefs.getBoolean(JabRefPreferences.BIBLATEX_MODE);\n \n         JPanel main = new JPanel(), buttons = new JPanel(), right = new JPanel();\n         main.setLayout(new BorderLayout());, @@ -278,7 +278,7 @@ public void setEntry(FileListEntry entry) {\n     }\n \n     public void setVisible(boolean visible, boolean openBrowse) {\n-        openBrowseWhenShown = openBrowse && Globals.prefs.getBoolean(\"allowFileAutoOpenBrowse\");\n+        openBrowseWhenShown = openBrowse && Globals.prefs.getBoolean(JabRefPreferences.ALLOW_FILE_AUTO_OPEN_BROWSE);\n         if (visible) {\n             okPressed = false;\n         }, @@ -15,19 +15,37 @@\n */\n package net.sf.jabref.imports;\n \n-import java.awt.*;\n-import java.io.*;\n+import java.awt.Dimension;\n+import java.awt.GridLayout;\n+import java.io.BufferedInputStream;\n+import java.io.BufferedReader;\n+import java.io.BufferedWriter;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n import java.net.ConnectException;\n import java.net.MalformedURLException;\n import java.net.URL;\n-import java.util.*;\n+import java.util.Collection;\n+import java.util.LinkedHashMap;\n+import java.util.Map;\n+import java.util.NoSuchElementException;\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n-import javax.swing.*;\n+import javax.swing.ButtonGroup;\n+import javax.swing.JCheckBox;\n+import javax.swing.JLabel;\n+import javax.swing.JOptionPane;\n+import javax.swing.JPanel;\n+import javax.swing.JRadioButton;\n \n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.OutputPrinter;\n import net.sf.jabref.gui.FetcherPreviewDialog;\n \n@@ -176,12 +194,12 @@ public void getEntries(Map<String, Boolean> selection, ImportInspector inspector\n                         title = convertHTMLChars(title);\n \n                         // Unit formatting\n-                        if (Globals.prefs.getBoolean(\"useUnitFormatterOnSearch\")) {\n+                        if (Globals.prefs.getBoolean(JabRefPreferences.USE_UNIT_FORMATTER_ON_SEARCH)) {\n                             title = unitFormatter.format(title);\n                         }\n \n                         // Case keeping\n-                        if (Globals.prefs.getBoolean(\"useCaseKeeperOnSearch\")) {\n+                        if (Globals.prefs.getBoolean(JabRefPreferences.USE_CASE_KEEPER_ON_SEARCH)) {\n                             title = caseKeeper.format(title);\n                         }\n                         entry.setField(\"title\", title);, @@ -54,7 +54,7 @@ public void run() {\n         for (File file : files) {\n             File fileToLoad = file;\n             boolean tryingAutosave;\n-            if (Globals.prefs.getBoolean(\"promptBeforeUsingAutosave\")) {\n+            if (Globals.prefs.getBoolean(JabRefPreferences.PROMPT_BEFORE_USING_AUTOSAVE)) {\n                 int answer = JOptionPane.showConfirmDialog(null, \"<html>\" +\n                         Globals.lang(\"An autosave file was found for this database. This could indicate \")\n                         + Globals.lang(\"that JabRef didn't shut down cleanly last time the file was used.\") + \"<br>\", @@ -14,19 +14,20 @@\n */\n package net.sf.jabref.imports;\n \n-import java.io.IOException;\n import java.io.FileNotFoundException;\n+import java.io.IOException;\n import java.io.UnsupportedEncodingException;\n import java.net.MalformedURLException;\n import java.net.URL;\n import java.net.URLConnection;\n import java.net.URLEncoder;\n-import javax.swing.JOptionPane;\n \n+import javax.swing.JOptionPane;\n import javax.swing.JPanel;\n \n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.OutputPrinter;\n import net.sf.jabref.util.Util;\n \n@@ -135,12 +136,12 @@ private BibtexEntry getEntryFromDOI(String doi, OutputPrinter status) {\n             if (title != null) {\n \n                 // Unit formatting\n-                if (Globals.prefs.getBoolean(\"useUnitFormatterOnSearch\")) {\n+                if (Globals.prefs.getBoolean(JabRefPreferences.USE_UNIT_FORMATTER_ON_SEARCH)) {\n                     title = unitFormatter.format(title);\n                 }\n \n                 // Case keeping\n-                if (Globals.prefs.getBoolean(\"useCaseKeeperOnSearch\")) {\n+                if (Globals.prefs.getBoolean(JabRefPreferences.USE_CASE_KEEPER_ON_SEARCH)) {\n                     title = caseKeeper.format(title);\n                 }\n                 entry.setField(\"title\", title);, @@ -14,19 +14,20 @@\n */\n package net.sf.jabref.imports;\n \n-import java.io.IOException;\n import java.io.FileNotFoundException;\n+import java.io.IOException;\n import java.io.UnsupportedEncodingException;\n import java.net.MalformedURLException;\n import java.net.URL;\n import java.net.URLConnection;\n import java.net.URLEncoder;\n-import javax.swing.JOptionPane;\n \n+import javax.swing.JOptionPane;\n import javax.swing.JPanel;\n \n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.OutputPrinter;\n import net.sf.jabref.util.Util;\n \n@@ -96,12 +97,12 @@ public boolean processQuery(String query, ImportInspector inspector, OutputPrint\n             String title = entry.getField(\"title\");\n             if (title != null) {\n                 // Unit formatting\n-                if (Globals.prefs.getBoolean(\"useUnitFormatterOnSearch\")) {\n+                if (Globals.prefs.getBoolean(JabRefPreferences.USE_UNIT_FORMATTER_ON_SEARCH)) {\n                     title = unitFormatter.format(title);\n                 }\n \n                 // Case keeping\n-                if (Globals.prefs.getBoolean(\"useCaseKeeperOnSearch\")) {\n+                if (Globals.prefs.getBoolean(JabRefPreferences.USE_CASE_KEEPER_ON_SEARCH)) {\n                     title = caseKeeper.format(title);\n                 }\n                 entry.setField(\"title\", title);, @@ -88,7 +88,7 @@ public GeneralFetcher(SidePaneManager p0, JabRefFrame frame, final List<EntryFet\n                 optionsPanel.add(new JPanel(), String.valueOf(i));*/\n         }\n         fetcherChoice = new JComboBox(choices);\n-        int defaultFetcher = Globals.prefs.getInt(\"selectedFetcherIndex\");\n+        int defaultFetcher = Globals.prefs.getInt(JabRefPreferences.SELECTED_FETCHER_INDEX);\n         if (defaultFetcher >= fetcherArray.length) {\n             defaultFetcher = 0;\n         }\n@@ -123,7 +123,7 @@ public Component getListCellRendererComponent(JList jList, Object o, int i, bool\n             @Override\n             public void actionPerformed(ActionEvent actionEvent) {\n                 activeFetcher = fetcherArray[fetcherChoice.getSelectedIndex()];\n-                Globals.prefs.putInt(\"selectedFetcherIndex\", fetcherChoice.getSelectedIndex());\n+                Globals.prefs.putInt(JabRefPreferences.SELECTED_FETCHER_INDEX, fetcherChoice.getSelectedIndex());\n                 if (activeFetcher.getHelpPage() != null) {\n                     help.setHelpFile(activeFetcher.getHelpPage());\n                     helpBut.setEnabled(true);\n@@ -328,13 +328,13 @@ public void actionPerformed(ActionEvent e) {\n     @Override\n     public void componentClosing() {\n         super.componentClosing();\n-        Globals.prefs.putBoolean(\"webSearchVisible\", Boolean.FALSE);\n+        Globals.prefs.putBoolean(JabRefPreferences.WEB_SEARCH_VISIBLE, Boolean.FALSE);\n     }\n \n     @Override\n     public void componentOpening() {\n         super.componentOpening();\n-        Globals.prefs.putBoolean(\"webSearchVisible\", Boolean.TRUE);\n+        Globals.prefs.putBoolean(JabRefPreferences.WEB_SEARCH_VISIBLE, Boolean.TRUE);\n     }\n \n , @@ -20,8 +20,9 @@\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n-import net.sf.jabref.export.layout.LayoutFormatter;\n import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefPreferences;\n+import net.sf.jabref.export.layout.LayoutFormatter;\n \n public class HTMLConverter implements LayoutFormatter {\n \n@@ -790,7 +791,7 @@ public String format(String text) {\n         // Deal with the form <sup>k</sup>and <sub>k</sub>\n         // If the result is in text or equation form can be controlled\n         // From the \"Advanced settings\" tab\n-        if (Globals.prefs.getBoolean(\"useConvertToEquation\")) {\n+        if (Globals.prefs.getBoolean(JabRefPreferences.USE_CONVERT_TO_EQUATION)) {\n             text = text.replaceAll(\"<[ ]?sup>([^<]+)</sup>\", \"\\\\$\\\\^\\\\{$1\\\\}\\\\$\");\n             text = text.replaceAll(\"<[ ]?sub>([^<]+)</sub>\", \"\\\\$_\\\\{$1\\\\}\\\\$\");\n         } else {, @@ -351,7 +351,7 @@ private BibtexEntry cleanup(BibtexEntry entry) {\n             // Replace general expressions\n             title = title.replaceAll(\"/[sS]pl ([^/]+)/\", \"\\\\$\\\\\\\\$1\\\\$\");\n             // Deal with subscripts and superscripts       \n-            if (Globals.prefs.getBoolean(\"useConvertToEquation\")) {\n+            if (Globals.prefs.getBoolean(JabRefPreferences.USE_CONVERT_TO_EQUATION)) {\n                 title = title.replaceAll(\"/sup ([^/]+)/\", \"\\\\$\\\\^\\\\{$1\\\\}\\\\$\");\n                 title = title.replaceAll(\"/sub ([^/]+)/\", \"\\\\$_\\\\{$1\\\\}\\\\$\");\n                 title = title.replaceAll(\"\\\\(sup\\\\)([^(]+)\\\\(/sup\\\\)\", \"\\\\$\\\\^\\\\{$1\\\\}\\\\$\");\n@@ -367,12 +367,12 @@ private BibtexEntry cleanup(BibtexEntry entry) {\n             title = title.replaceAll(\"\\\\\\\\infin\", \"\\\\\\\\infty\");\n \n             // Unit formatting\n-            if (Globals.prefs.getBoolean(\"useUnitFormatterOnSearch\")) {\n+            if (Globals.prefs.getBoolean(JabRefPreferences.USE_UNIT_FORMATTER_ON_SEARCH)) {\n                 title = unitFormatter.format(title);\n             }\n \n             // Automatic case keeping\n-            if (Globals.prefs.getBoolean(\"useCaseKeeperOnSearch\")) {\n+            if (Globals.prefs.getBoolean(JabRefPreferences.USE_CASE_KEEPER_ON_SEARCH)) {\n                 title = caseKeeper.format(title);\n             }\n             // Write back\n@@ -513,7 +513,7 @@ private BibtexEntry cleanup(BibtexEntry entry) {\n                 fullName = fullName.replace(\" - \", \"-\"); //IEE Proceedings-\n \n                 fullName = fullName.trim();\n-                if (Globals.prefs.getBoolean(\"useIEEEAbrv\")) {\n+                if (Globals.prefs.getBoolean(JabRefPreferences.USE_IEEE_ABRV)) {\n                     fullName = Globals.journalAbbrev.getMedlineAbbreviation(fullName).or(fullName);\n                 }\n             }\n@@ -566,7 +566,7 @@ private BibtexEntry cleanup(BibtexEntry entry) {\n             // Replace general expressions\n             abstr = abstr.replaceAll(\"/[sS]pl ([^/]+)/\", \"\\\\$\\\\\\\\$1\\\\$\");\n             // Deal with subscripts and superscripts       \n-            if (Globals.prefs.getBoolean(\"useConvertToEquation\")) {\n+            if (Globals.prefs.getBoolean(JabRefPreferences.USE_CONVERT_TO_EQUATION)) {\n                 abstr = abstr.replaceAll(\"/sup ([^/]+)/\", \"\\\\$\\\\^\\\\{$1\\\\}\\\\$\");\n                 abstr = abstr.replaceAll(\"/sub ([^/]+)/\", \"\\\\$_\\\\{$1\\\\}\\\\$\");\n                 abstr = abstr.replaceAll(\"\\\\(sup\\\\)([^(]+)\\\\(/sup\\\\)\", \"\\\\$\\\\^\\\\{$1\\\\}\\\\$\");, @@ -179,7 +179,7 @@ public void openIt(File file, boolean raisePanel) {\n             frame.output(Globals.lang(\"Opening\") + \": '\" + file.getPath() + \"'\");\n             boolean tryingAutosave = false;\n             boolean autoSaveFound = AutoSaveManager.newerAutoSaveExists(file);\n-            if (autoSaveFound && !Globals.prefs.getBoolean(\"promptBeforeUsingAutosave\")) {\n+            if (autoSaveFound && !Globals.prefs.getBoolean(JabRefPreferences.PROMPT_BEFORE_USING_AUTOSAVE)) {\n                 // We have found a newer autosave, and the preferences say we should load\n                 // it without prompting, so we replace the fileToLoad:\n                 fileToLoad = AutoSaveManager.getAutoSaveFile(file);, @@ -27,6 +27,7 @@\n \n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.OutputPrinter;\n import net.sf.jabref.imports.BibtexParser;\n import net.sf.jabref.imports.CaseKeeper;\n@@ -100,12 +101,12 @@ public boolean processQuery(String query, ImportInspector inspector, OutputPrint\n             String title = entry.getField(\"title\");\n             if (title != null) {\n                 // Unit formatting\n-                if (Globals.prefs.getBoolean(\"useUnitFormatterOnSearch\")) {\n+                if (Globals.prefs.getBoolean(JabRefPreferences.USE_UNIT_FORMATTER_ON_SEARCH)) {\n                     title = unitFormatter.format(title);\n                 }\n \n                 // Case keeping\n-                if (Globals.prefs.getBoolean(\"useCaseKeeperOnSearch\")) {\n+                if (Globals.prefs.getBoolean(JabRefPreferences.USE_CASE_KEEPER_ON_SEARCH)) {\n                     title = caseKeeper.format(title);\n                 }\n                 entry.setField(\"title\", title);, @@ -526,7 +526,7 @@ public static BibtexEntry makeLabel(MetaData metaData, BibtexDatabase database,\n             occurences--; // No change, so we can accept one dupe.\n         }\n \n-        boolean alwaysAddLetter = Globals.prefs.getBoolean(JabRefPreferences.KEY_GEN_ALWAYS_ADD_LETTER), firstLetterA = Globals.prefs.getBoolean(\"keyGenFirstLetterA\");\n+        boolean alwaysAddLetter = Globals.prefs.getBoolean(JabRefPreferences.KEY_GEN_ALWAYS_ADD_LETTER), firstLetterA = Globals.prefs.getBoolean(JabRefPreferences.KEY_GEN_FIRST_LETTER_A);\n \n         if (!alwaysAddLetter && (occurences == 0)) {\n             // No dupes found, so we can just go ahead., @@ -17,6 +17,7 @@\n \n import ca.odell.glazedlists.BasicEventList;\n import ca.odell.glazedlists.EventList;\n+import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.net.URLDownload;\n import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.Globals;\n@@ -349,13 +350,13 @@ public boolean accept(File file, String s) {\n      * @param filename The path to the file to delete.\n      */\n     private static void schedulePluginForDeletion(String filename) {\n-        String[] oldValues = Globals.prefs.getStringArray(\"deletePlugins\");\n+        String[] oldValues = Globals.prefs.getStringArray(JabRefPreferences.DELETE_PLUGINS);\n         String[] newValues = oldValues == null ? new String[1] : new String[oldValues.length + 1];\n         if (oldValues != null) {\n             System.arraycopy(oldValues, 0, newValues, 0, oldValues.length);\n         }\n         newValues[newValues.length - 1] = filename;\n-        Globals.prefs.putStringArray(\"deletePlugins\", newValues);\n+        Globals.prefs.putStringArray(JabRefPreferences.DELETE_PLUGINS, newValues);\n     }\n \n     /**, @@ -128,9 +128,9 @@ public void isConfigValid(boolean configValid) {\n      * Store these db strings into JabRef preferences.\n      */\n     public void storeToPreferences() {\n-        Globals.prefs.put(\"dbConnectServerType\", getServerType());\n-        Globals.prefs.put(\"dbConnectHostname\", getServerHostname());\n-        Globals.prefs.put(\"dbConnectDatabase\", getDatabase());\n-        Globals.prefs.put(\"dbConnectUsername\", getUsername());\n+        Globals.prefs.put(JabRefPreferences.DB_CONNECT_SERVER_TYPE, getServerType());\n+        Globals.prefs.put(JabRefPreferences.DB_CONNECT_HOSTNAME, getServerHostname());\n+        Globals.prefs.put(JabRefPreferences.DB_CONNECT_DATABASE, getDatabase());\n+        Globals.prefs.put(JabRefPreferences.DB_CONNECT_USERNAME, getUsername());\n     }\n }, @@ -211,7 +211,7 @@ public static String checkLegalKey(String key) {\n         if (key == null) {\n             return null;\n         }\n-        if (!JabRefPreferences.getInstance().getBoolean(\"enforceLegalBibtexKey\")) {\n+        if (!JabRefPreferences.getInstance().getBoolean(JabRefPreferences.ENFORCE_LEGAL_BIBTEX_KEY)) {\n             // User doesn't want us to enforce legal characters. We must still look\n             // for whitespace and some characters such as commas, since these would\n             // interfere with parsing:, ", 104, 79, "\"modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, \"", 183], ["Stefano", "Update INSPIREBibtexFilterReader.java", "07/23/15, 12:11:30 PM", "Stefano", "84aa6e0bc79450070048989e3c9b342780361ffc", ["src/main/java/net/sf/jabref/imports/INSPIREBibtexFilterReader.java"], "@@ -57,11 +57,11 @@ private String readpreLine() throws IOException {\n             if (l == null) {\n                 return null;\n             }\n-            if (l.indexOf(\"<pre>\") != -1) {\n+            if (l.contains(\"<pre>\")) {\n                 pre = true;\n                 l = in.readLine();\n             }\n-            if (l.indexOf(\"</pre>\") != -1) {\n+            if (l.contains(\"</pre>\")) {\n                 pre = false;\n             }\n         } while (!pre);, ", 2, 2, "\"modified, \"", 4], ["Stefano", "deprecated url", "07/23/15, 11:26:29 AM", "Stefano", "82890963d42f90460fc51d479ddacffe0da66bf9", ["src/main/java/net/sf/jabref/imports/INSPIREFetcher.java"], "@@ -47,7 +47,7 @@\n  */\n public class INSPIREFetcher implements EntryFetcher {\n \n-    private static final String INSPIRE_HOST = \"inspirebeta.net\";\n+    private static final String INSPIRE_HOST = \"inspirehep.net\";\n \n \n     public INSPIREFetcher() {, ", 1, 1, "\"modified, \"", 2], ["Stefano", "Update CHANGELOG", "07/23/15, 12:39:01 PM", "Stefano", "8ceb537f09ca7d9da8fa1a4a973023e90db8b57f", ["CHANGELOG"], "@@ -11,6 +11,7 @@\n     - JabRef metadata (\"jabref-meta\") @comments are now always written in alphabetical order\n     - Switch vom antlr2 grammar to antlr4 for capturing the search expressions. Should be backwards compatible.\n     - Changed html description of search expressions, expressing the conditional logic more explicitly with brackets.\n+    - Fixed INSPIRE searches compatibility problem (by Stefano Gariazzo).\n 2.11 beta 3\n     - New MacOSX integration\n     - Two releases for MacOSX: OSX-Java6 for Apple Java 1.6 and OSX for Oracle Java 1.7+, ", 1, 0, "\"modified, \"", 1], ["Stefano", "Update About.html", "07/23/15, 12:40:50 PM", "Stefano", "3114a35a17dec203e03e870e27a62dfc4652f4a1", ["src/main/resources/help/About.html"], "@@ -66,6 +66,7 @@ <h2>Contributions from:</h2>\n         Brian Van Essen,\n         Michael Falkenthal,\n         Alexis Gallagher,\n+        Stefano Gariazzo,\n         David Gleich,\n         Eduardo Roberto Greco,\n         Yara Grassi Gouffon,, ", 1, 0, "\"modified, \"", 1], ["Joerg Lenhard", "Logging system initialization not needed, since commons chooses it by default", "07/29/15, 10:47:39 AM", "Joerg Lenhard", "24a194fc8ce20bf58e8f1ab6bf785709d2b33127", ["src/main/java/net/sf/jabref/JabRef.java"], "@@ -80,13 +80,6 @@\n     private boolean graphicFailure = false;\n     private JabRefCLI cli;\n     private SplashScreenLifecycle splashScreen = new SplashScreenLifecycle();\n-    \n-    //initialize logging system\n-    static {\n-        LogFactory factory = LogFactory.getFactory();\n-        //tell commons logging to default to Java's internal logging implementation\n-        factory.setAttribute(\"org.apache.commons.logging.Log\", \"org.apache.commons.logging.impl.Jdk14Logger\");\n-    }\n \n     public void start(String[] args) {\n         JabRefPreferences prefs = JabRefPreferences.getInstance();, ", 0, 7, "\"modified, \"", 7], ["Joerg Lenhard", "Use absolute version numbers for pdfbox dependencies", "07/29/15, 12:50:11 PM", "Joerg Lenhard", "4c3e0d5d02ce60780e6a83abcef03d42b769588f", ["build.gradle"], "@@ -76,9 +76,9 @@ dependencies {\n     \n     compile 'org.swinglabs:swingx:1.6.1'\n \n-    compile 'org.apache.pdfbox:pdfbox:1.8.+'\n-    compile 'org.apache.pdfbox:fontbox:1.8.+'\n-    compile 'org.apache.pdfbox:jempbox:1.8.+'\n+    compile 'org.apache.pdfbox:pdfbox:1.8.10'\n+    compile 'org.apache.pdfbox:fontbox:1.8.10'\n+    compile 'org.apache.pdfbox:jempbox:1.8.10'\n \n     compile 'commons-cli:commons-cli:1.3.1'\n , ", 3, 3, "\"modified, \"", 6], ["stefan-kolb", "Removes old TODO file", "07/29/15, 01:55:59 PM", "stefan-kolb", "982e9e0c0fb10fc0867d4c996cabe0160f3e4800", ["TODO"], "@@ -1,28 +0,0 @@\n-\n-Chris:\n-------\n-  * Think about synchronizing XMP.\n-  * Document data schema used (BibteXmp)\n-  * Add build.xml target to export standalone XMPUtil for the CLI.\n-  * Allow search relativ to bibtex-file\n-  * Plugin-System may crash...\n-  \n-Morten:\n-\n-* Encoding used for reading URLs. URLDownload.java\n-\n-* Look into whether incremental search could be made more persistent when search panel loses focus.\n-* Problem: when looking at group with hiding non-hits, newly created entry doesn't appear in entry editor.\n-\n-* Plugins like SVN plugin might need hooks for performing actions before a database is\n-  closed, and may need the ability to cancel the closing, and to avoid questions about\n-  saving changes.\n-\n-* Enable \"Open spires entry\" (\"openSpires\" action)? Think about better integration of this?\n-  Look into which viewer is used.\n-* Add \"Copy all externally linked files for this set of entries\"-feature.\n-  Basic functionality in AccessLinksForEntries.\n-* Problem setting today with Microba calendar.\n-\n-* [POSTPONE] Icon selection for external file types: - select arbitrary images from disk?\n-, ", 0, 28, "\"removed, \"", 28], ["Joerg Lenhard", "Undo rename of Formatter classes since they might be loaded by forName()", "07/29/15, 02:30:16 PM", "Joerg Lenhard", "bff0d3e5368254a52d716b4282bd8f66e54bb51d", ["src/main/java/net/sf/jabref/export/layout/format/CreateDocBookAuthors.java", "src/main/java/net/sf/jabref/export/layout/format/HTMLChars.java", "src/main/java/net/sf/jabref/export/layout/format/RTFChars.java", "src/main/java/net/sf/jabref/export/layout/format/XMLChars.java", "src/main/java/net/sf/jabref/mods/MODSEntry.java", "src/main/java/net/sf/jabref/msbib/MSBibEntry.java", "src/test/java/net/sf/jabref/export/layout/HTMLCharsTest.java", "src/test/java/net/sf/jabref/export/layout/LayoutEntryTest.java", "src/test/java/net/sf/jabref/export/layout/RTFCharsTest.java"], "@@ -49,7 +49,7 @@\n public class CreateDocBookAuthors implements LayoutFormatter\n {\n \n-    private static final XMLCharFormatter xc = new XMLCharFormatter();\n+    private static final XMLChars xc = new XMLChars();\n \n \n     @Override, @@ -22,7 +22,7 @@\n /**\n  * This formatter escapes characters so they are suitable for HTML.\n  */\n-public class HTMLCharFormatter implements LayoutFormatter {\n+public class HTMLChars implements LayoutFormatter {\n     \n     private static final HtmlCharsMap HTML_CHARS = new HtmlCharsMap();\n , @@ -35,7 +35,7 @@\n  *\n  *   5.) Replace --- by \\emdash and -- by \\endash.\n  */\n-public class RTFCharFormatter implements LayoutFormatter {\n+public class RTFChars implements LayoutFormatter {\n \n     // Instantiate logger:\n     private static final Log LOGGER = LogFactory.getLog(LayoutFormatter.class);, @@ -45,7 +45,7 @@\n /**\n  * Changes {\\^o} or {\\^{o}} to ?\n  */\n-public class XMLCharFormatter implements LayoutFormatter {\n+public class XMLChars implements LayoutFormatter {\n \n     private final static XmlCharsMap XML_CHARS = new XmlCharsMap();\n     , @@ -29,7 +29,7 @@\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.BibtexEntryType;\n import net.sf.jabref.export.layout.LayoutFormatter;\n-import net.sf.jabref.export.layout.format.XMLCharFormatter;\n+import net.sf.jabref.export.layout.format.XMLChars;\n \n import org.w3c.dom.Document;\n import org.w3c.dom.Element;\n@@ -83,7 +83,7 @@ public MODSEntry(BibtexEntry bibtex) {\n     }\n \n     private void populateFromBibtex(BibtexEntry bibtex) {\n-        LayoutFormatter chars = new XMLCharFormatter();\n+        LayoutFormatter chars = new XMLChars();\n         if (bibtex.getField(\"title\") != null) {\n             if (CHARFORMAT) {\n                 title = chars.format(bibtex.getField(\"title\"));\n@@ -149,7 +149,7 @@ private void populateExtensionFields(BibtexEntry e) {\n \n     private List<PersonName> getAuthors(String authors) {\n         List<PersonName> result = new LinkedList<PersonName>();\n-        LayoutFormatter chars = new XMLCharFormatter();\n+        LayoutFormatter chars = new XMLChars();\n \n         if (!authors.contains(\" and \")) {\n             if (CHARFORMAT) {, @@ -34,7 +34,7 @@\n import net.sf.jabref.BibtexEntryType;\n import net.sf.jabref.BibtexFields;\n import net.sf.jabref.export.layout.LayoutFormatter;\n-import net.sf.jabref.export.layout.format.XMLCharFormatter;\n+import net.sf.jabref.export.layout.format.XMLChars;\n import net.sf.jabref.mods.PageNumbers;\n import net.sf.jabref.mods.PersonName;\n \n@@ -566,7 +566,7 @@ private String format(String value)\n             return null;\n         }\n         String result = null;\n-        LayoutFormatter chars = new XMLCharFormatter();\n+        LayoutFormatter chars = new XMLChars();\n         result = chars.format(value);\n         return result;\n     }, @@ -1,6 +1,6 @@\n package net.sf.jabref.export.layout;\n \n-import net.sf.jabref.export.layout.format.HTMLCharFormatter;\n+import net.sf.jabref.export.layout.format.HTMLChars;\n \n import org.junit.Assert;\n import org.junit.Test;\n@@ -12,7 +12,7 @@\n     @Test\n     public void testBasicFormat() {\n \n-        LayoutFormatter layout = new HTMLCharFormatter();\n+        LayoutFormatter layout = new HTMLChars();\n \n         Assert.assertEquals(\"\", layout.format(\"\"));\n \n@@ -36,7 +36,7 @@ public void testBasicFormat() {\n     @Test\n     public void testLaTeXHighlighting() {\n \n-        LayoutFormatter layout = new HTMLCharFormatter();\n+        LayoutFormatter layout = new HTMLChars();\n \n         Assert.assertEquals(\"<em>hallo</em>\", layout.format(\"\\\\emph{hallo}\"));\n         Assert.assertEquals(\"<em>hallo</em>\", layout.format(\"{\\\\emph hallo}\"));, @@ -105,7 +105,7 @@ public void testNoHighlighting() throws Exception {\n         // define the highlighting settings\n         Globals.prefs.putBoolean(\"caseSensitiveSearch\", false);\n \n-        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLCharFormatter]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, new ArrayList<String>());\n+        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLChars]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, new ArrayList<String>());\n         String expecting = \"<font face=\\\"arial\\\"><BR><BR><b>Abstract: </b> In this paper, we initiate a formal study of security on Android: Google's new open-source platform for mobile devices. Tags: Paper android google Open-Source Devices</font>\";\n \n         Assert.assertEquals(expecting, result);\n@@ -126,7 +126,7 @@ public void testHighlightingOneWordCaseInsesitive() throws Exception {\n         // define the highlighting settings\n         Globals.prefs.putBoolean(\"caseSensitiveSearch\", false);\n \n-        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLCharFormatter]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, words);\n+        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLChars]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, words);\n         String containing = \"<span style=\\\"background-color:#3399FF;\\\">Google</span>\";\n \n         // check\n@@ -149,7 +149,7 @@ public void testHighlightingTwoWordsCaseInsesitive() throws Exception {\n         // define the highlighting settings\n         Globals.prefs.putBoolean(\"caseSensitiveSearch\", false);\n \n-        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLCharFormatter]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, words);\n+        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLChars]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, words);\n \n         String containing = \"<span style=\\\"background-color:#3399FF;\\\">Android</span>\";\n         String containing2 = \"<span style=\\\"background-color:#3399FF;\\\">study</span>\";\n@@ -174,7 +174,7 @@ public void testHighlightingOneWordCaseSesitive() throws Exception {\n         // define the highlighting settings\n         Globals.prefs.putBoolean(\"caseSensitiveSearch\", true);\n \n-        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLCharFormatter]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, words);\n+        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLChars]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, words);\n         String expected = \"<font face=\\\"arial\\\"><BR><BR><b>Abstract: </b> In this paper, we initiate a formal study of security on Android: Google's new open-source platform for mobile devices. Tags: Paper android <span style=\\\"background-color:#3399FF;\\\">google</span> Open-Source Devices</font>\";\n \n         // check\n@@ -199,7 +199,7 @@ public void testHighlightingMoreWordsCaseSesitive() throws Exception {\n         Globals.prefs.putBoolean(\"caseSensitiveSearch\", false);\n \n         String highlightColor = \"#3399FF;\";\n-        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLCharFormatter]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, words);\n+        String result = this.layout(\"<font face=\\\"arial\\\">\\\\begin{abstract}<BR><BR><b>Abstract: </b> \\\\format[HTMLChars]{\\\\abstract}\\\\end{abstract}</font>\", mBTE, words);\n         String expected = \"<font face=\\\"arial\\\"><BR><BR><b>Abstract: </b> In this paper, we initiate a formal <span style=\\\"background-color:\" + highlightColor + \"\\\">study</span> of security on <span style=\\\"background-color:\" + highlightColor + \"\\\">Android</span>: Google's new <span style=\\\"background-color:\" + highlightColor + \"\\\">open</span>-source platform for mobile devices. Tags: Paper <span style=\\\"background-color:\" + highlightColor + \"\\\">android</span> google <span style=\\\"background-color:\" + highlightColor + \"\\\">Open</span>-Source Devices</font>\";\n \n         // check, @@ -1,6 +1,6 @@\n package net.sf.jabref.export.layout;\n \n-import net.sf.jabref.export.layout.format.RTFCharFormatter;\n+import net.sf.jabref.export.layout.format.RTFChars;\n \n import org.junit.Assert;\n import org.junit.Ignore;\n@@ -13,7 +13,7 @@\n     @Test\n     public void testBasicFormat() {\n \n-        LayoutFormatter layout = new RTFCharFormatter();\n+        LayoutFormatter layout = new RTFChars();\n \n         Assert.assertEquals(\"\", layout.format(\"\"));\n \n@@ -29,7 +29,7 @@ public void testBasicFormat() {\n     @Test\n     public void testLaTeXHighlighting() {\n \n-        LayoutFormatter layout = new RTFCharFormatter();\n+        LayoutFormatter layout = new RTFChars();\n \n         Assert.assertEquals(\"{\\\\i hallo}\", layout.format(\"\\\\emph{hallo}\"));\n         Assert.assertEquals(\"{\\\\i hallo}\", layout.format(\"{\\\\emph hallo}\"));\n@@ -44,7 +44,7 @@ public void testLaTeXHighlighting() {\n     @Test\n     @Ignore\n     public void testComplicated() {\n-        LayoutFormatter layout = new RTFCharFormatter();\n+        LayoutFormatter layout = new RTFChars();\n \n         Assert.assertEquals(\"R\\\\u233eflexions sur le timing de la quantit\\\\u233e \\\\u230ae should be \\\\u230ae\", layout.format(\"R\u00e9flexions sur le timing de la quantit\u00e9 \\\\ae should be \u00e6\"));\n \n@@ -55,7 +55,7 @@ public void testComplicated() {\n     @Ignore\n     public void testSpecialCharacters() {\n \n-        LayoutFormatter layout = new RTFCharFormatter();\n+        LayoutFormatter layout = new RTFChars();\n \n         Assert.assertEquals(\"\\\\u243o\", layout.format(\"\\\\'{o}\")); // \u00f3\n         Assert.assertEquals(\"\\\\'f2\", layout.format(\"\\\\`{o}\")); // \u00f2, ", 22, 22, "\"modified, renamed, renamed, renamed, modified, modified, modified, modified, modified, \"", 44], ["stefan-kolb", "Redundant local variable", "07/29/15, 02:49:26 PM", "stefan-kolb", "973b01581f3dfdbf26aca08fd6756280da5d3852", ["src/main/java/net/sf/jabref/PreambleEditor.java"], "@@ -37,7 +37,6 @@ public PreambleEditor(JabRefFrame baseFrame,\n             BasePanel panel, BibtexDatabase base,\n             JabRefPreferences prefs) {\n         super(baseFrame);\n-        JabRefFrame baseFrame1 = baseFrame;\n         this.panel = panel;\n         this.base = base;\n         this.prefs = prefs;, ", 0, 1, "\"modified, \"", 1], ["stefan-kolb", "Fix typo", "07/29/15, 05:06:44 PM", "stefan-kolb", "04d55f1ad757cab66534c71cd509a6f58d8ae669", ["external-libraries.txt"], "None, ", 0, 0, "\"renamed, \"", 0], ["stefan-kolb", "Remove unnecessary braces around code blocks", "07/29/15, 04:51:44 PM", "stefan-kolb", "4e071e9831c1913ce08a7943e1e5e1d6b5725370", ["src/main/java/net/sf/jabref/FileSortTab.java", "src/main/java/net/sf/jabref/JabRef.java", "src/main/java/net/sf/jabref/JabRefFrame.java", "src/main/java/net/sf/jabref/export/layout/LayoutEntry.java", "src/main/java/net/sf/jabref/groups/GroupSelector.java", "src/main/java/net/sf/jabref/gui/MainTableSelectionListener.java", "src/main/java/net/sf/jabref/imports/CopacImporter.java", "src/main/java/net/sf/jabref/util/XMPUtil.java", "src/test/java/net/sf/jabref/AuthorListTest.java", "src/test/java/net/sf/jabref/bst/BibtexNameFormatterTest.java", "src/test/java/net/sf/jabref/bst/TestVM.java", "src/test/java/net/sf/jabref/export/layout/format/CompositeFormatTest.java", "src/test/java/net/sf/jabref/imports/BibtexParserTest.java", "src/test/java/net/sf/jabref/imports/OAI2ImportTest.java", "src/test/java/net/sf/jabref/util/UtilFindFileTest.java", "src/test/java/net/sf/jabref/util/XMPSchemaBibtexTest.java", "src/test/java/net/sf/jabref/util/XMPUtilTest.java"], "@@ -182,124 +182,123 @@ public void actionPerformed(ActionEvent e) {\n             builder.nextLine();\n         }\n \n-        { // EXPORT SORT ORDER\n-          // create Components\n-            exportInOriginalOrder = new JRadioButton(Globals.lang(\"Export entries in their original order\"));\n-            exportInTableOrder = new JRadioButton(Globals.lang(\"Export in current table sort order\"));\n-            exportInSpecifiedOrder = new JRadioButton(Globals.lang(\"Export entries ordered as specified\"));\n-\n-            ButtonGroup bg = new ButtonGroup();\n-            bg.add(exportInOriginalOrder);\n-            bg.add(exportInTableOrder);\n-            bg.add(exportInSpecifiedOrder);\n-\n-            ActionListener listener = new ActionListener() {\n-\n-                @Override\n-                public void actionPerformed(ActionEvent e) {\n-                    boolean selected = e.getSource() == exportInSpecifiedOrder;\n-                    exportPriSort.setEnabled(selected);\n-                    exportPriField.setEnabled(selected);\n-                    exportPriDesc.setEnabled(selected);\n-                    exportSecSort.setEnabled(selected);\n-                    exportSecField.setEnabled(selected);\n-                    exportSecDesc.setEnabled(selected);\n-                    exportTerSort.setEnabled(selected);\n-                    exportTerField.setEnabled(selected);\n-                    exportTerDesc.setEnabled(selected);\n+        // EXPORT SORT ORDER\n+        // create Components\n+        exportInOriginalOrder = new JRadioButton(Globals.lang(\"Export entries in their original order\"));\n+        exportInTableOrder = new JRadioButton(Globals.lang(\"Export in current table sort order\"));\n+        exportInSpecifiedOrder = new JRadioButton(Globals.lang(\"Export entries ordered as specified\"));\n+\n+        ButtonGroup bg = new ButtonGroup();\n+        bg.add(exportInOriginalOrder);\n+        bg.add(exportInTableOrder);\n+        bg.add(exportInSpecifiedOrder);\n+\n+        ActionListener listener = new ActionListener() {\n+\n+            @Override\n+            public void actionPerformed(ActionEvent e) {\n+                boolean selected = e.getSource() == exportInSpecifiedOrder;\n+                exportPriSort.setEnabled(selected);\n+                exportPriField.setEnabled(selected);\n+                exportPriDesc.setEnabled(selected);\n+                exportSecSort.setEnabled(selected);\n+                exportSecField.setEnabled(selected);\n+                exportSecDesc.setEnabled(selected);\n+                exportTerSort.setEnabled(selected);\n+                exportTerField.setEnabled(selected);\n+                exportTerDesc.setEnabled(selected);\n+            }\n+        };\n+        exportInOriginalOrder.addActionListener(listener);\n+        exportInTableOrder.addActionListener(listener);\n+        exportInSpecifiedOrder.addActionListener(listener);\n+\n+        ArrayList<String> v = new ArrayList<String>(Arrays.asList(BibtexFields.getAllFieldNames()));\n+        v.add(BibtexFields.KEY_FIELD);\n+        Collections.sort(v);\n+        String[] allPlusKey = v.toArray(new String[v.size()]);\n+        exportPriSort = new JComboBox(allPlusKey);\n+        exportSecSort = new JComboBox(allPlusKey);\n+        exportTerSort = new JComboBox(allPlusKey);\n+\n+        exportPriField = new JTextField(10);\n+        exportSecField = new JTextField(10);\n+        exportTerField = new JTextField(10);\n+\n+        exportPriSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+        exportSecSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+        exportTerSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n+\n+        exportPriSort.addActionListener(new ActionListener() {\n+\n+            @Override\n+            public void actionPerformed(ActionEvent e) {\n+                if (exportPriSort.getSelectedIndex() > 0) {\n+                    exportPriField.setText(exportPriSort.getSelectedItem().toString());\n+                    exportPriSort.setSelectedIndex(0);\n                 }\n-            };\n-            exportInOriginalOrder.addActionListener(listener);\n-            exportInTableOrder.addActionListener(listener);\n-            exportInSpecifiedOrder.addActionListener(listener);\n-\n-            ArrayList<String> v = new ArrayList<String>(Arrays.asList(BibtexFields.getAllFieldNames()));\n-            v.add(BibtexFields.KEY_FIELD);\n-            Collections.sort(v);\n-            String[] allPlusKey = v.toArray(new String[v.size()]);\n-            exportPriSort = new JComboBox(allPlusKey);\n-            exportSecSort = new JComboBox(allPlusKey);\n-            exportTerSort = new JComboBox(allPlusKey);\n-\n-            exportPriField = new JTextField(10);\n-            exportSecField = new JTextField(10);\n-            exportTerField = new JTextField(10);\n-\n-            exportPriSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n-            exportSecSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n-            exportTerSort.insertItemAt(Globals.lang(\"<select>\"), 0);\n-\n-            exportPriSort.addActionListener(new ActionListener() {\n-\n-                @Override\n-                public void actionPerformed(ActionEvent e) {\n-                    if (exportPriSort.getSelectedIndex() > 0) {\n-                        exportPriField.setText(exportPriSort.getSelectedItem().toString());\n-                        exportPriSort.setSelectedIndex(0);\n-                    }\n+            }\n+        });\n+        exportSecSort.addActionListener(new ActionListener() {\n+\n+            @Override\n+            public void actionPerformed(ActionEvent e) {\n+                if (exportSecSort.getSelectedIndex() > 0) {\n+                    exportSecField.setText(exportSecSort.getSelectedItem().toString());\n+                    exportSecSort.setSelectedIndex(0);\n                 }\n-            });\n-            exportSecSort.addActionListener(new ActionListener() {\n-\n-                @Override\n-                public void actionPerformed(ActionEvent e) {\n-                    if (exportSecSort.getSelectedIndex() > 0) {\n-                        exportSecField.setText(exportSecSort.getSelectedItem().toString());\n-                        exportSecSort.setSelectedIndex(0);\n-                    }\n+            }\n+        });\n+        exportTerSort.addActionListener(new ActionListener() {\n+\n+            @Override\n+            public void actionPerformed(ActionEvent e) {\n+                if (exportTerSort.getSelectedIndex() > 0) {\n+                    exportTerField.setText(exportTerSort.getSelectedItem().toString());\n+                    exportTerSort.setSelectedIndex(0);\n                 }\n-            });\n-            exportTerSort.addActionListener(new ActionListener() {\n-\n-                @Override\n-                public void actionPerformed(ActionEvent e) {\n-                    if (exportTerSort.getSelectedIndex() > 0) {\n-                        exportTerField.setText(exportTerSort.getSelectedItem().toString());\n-                        exportTerSort.setSelectedIndex(0);\n-                    }\n-                }\n-            });\n-\n-            exportPriDesc = new JCheckBox(Globals.lang(\"Descending\"));\n-            exportSecDesc = new JCheckBox(Globals.lang(\"Descending\"));\n-            exportTerDesc = new JCheckBox(Globals.lang(\"Descending\"));\n-\n-            // create GUI\n-            JLabel lab;\n-\n-            builder.appendSeparator(Globals.lang(\"Export sort order\"));\n-            builder.append(exportInOriginalOrder, 1);\n-            builder.nextLine();\n-            builder.append(exportInTableOrder, 1);\n-            builder.nextLine();\n-            builder.append(exportInSpecifiedOrder, 1);\n-            builder.nextLine();\n-\n-            // Create a new panel with its own FormLayout for these items:\n-            FormLayout layout2 = new FormLayout(\n-                    \"right:pref, 8dlu, fill:pref, 4dlu, fill:60dlu, 4dlu, left:pref\", \"\");\n-            DefaultFormBuilder builder2 = new DefaultFormBuilder(layout2);\n-            lab = new JLabel(Globals.lang(\"Primary sort criterion\"));\n-            builder2.append(lab);\n-            builder2.append(exportPriSort);\n-            builder2.append(exportPriField);\n-            builder2.append(exportPriDesc);\n-            builder2.nextLine();\n-            lab = new JLabel(Globals.lang(\"Secondary sort criterion\"));\n-            builder2.append(lab);\n-            builder2.append(exportSecSort);\n-            builder2.append(exportSecField);\n-            builder2.append(exportSecDesc);\n-            builder2.nextLine();\n-            lab = new JLabel(Globals.lang(\"Tertiary sort criterion\"));\n-            builder2.append(lab);\n-            builder2.append(exportTerSort);\n-            builder2.append(exportTerField);\n-            builder2.append(exportTerDesc);\n-\n-            builder.append(builder2.getPanel());\n-            builder.nextLine();\n-        }\n+            }\n+        });\n+\n+        exportPriDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+        exportSecDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+        exportTerDesc = new JCheckBox(Globals.lang(\"Descending\"));\n+\n+        // create GUI\n+        JLabel lab;\n+\n+        builder.appendSeparator(Globals.lang(\"Export sort order\"));\n+        builder.append(exportInOriginalOrder, 1);\n+        builder.nextLine();\n+        builder.append(exportInTableOrder, 1);\n+        builder.nextLine();\n+        builder.append(exportInSpecifiedOrder, 1);\n+        builder.nextLine();\n+\n+        // Create a new panel with its own FormLayout for these items:\n+        FormLayout layout2 = new FormLayout(\n+                \"right:pref, 8dlu, fill:pref, 4dlu, fill:60dlu, 4dlu, left:pref\", \"\");\n+        DefaultFormBuilder builder2 = new DefaultFormBuilder(layout2);\n+        lab = new JLabel(Globals.lang(\"Primary sort criterion\"));\n+        builder2.append(lab);\n+        builder2.append(exportPriSort);\n+        builder2.append(exportPriField);\n+        builder2.append(exportPriDesc);\n+        builder2.nextLine();\n+        lab = new JLabel(Globals.lang(\"Secondary sort criterion\"));\n+        builder2.append(lab);\n+        builder2.append(exportSecSort);\n+        builder2.append(exportSecField);\n+        builder2.append(exportSecDesc);\n+        builder2.nextLine();\n+        lab = new JLabel(Globals.lang(\"Tertiary sort criterion\"));\n+        builder2.append(lab);\n+        builder2.append(exportTerSort);\n+        builder2.append(exportTerField);\n+        builder2.append(exportTerDesc);\n+\n+        builder.append(builder2.getPanel());\n+        builder.nextLine();\n \n         // COMBINE EVERYTHING\n         JPanel pan = builder.getPanel();\n@@ -351,18 +350,16 @@ public void setValues() {\n             exportInTableOrder.setSelected(true);\n         }\n \n-        {\n-            boolean selected = _prefs.getBoolean(JabRefPreferences.EXPORT_IN_SPECIFIED_ORDER);\n-            exportPriSort.setEnabled(selected);\n-            exportPriField.setEnabled(selected);\n-            exportPriDesc.setEnabled(selected);\n-            exportSecSort.setEnabled(selected);\n-            exportSecField.setEnabled(selected);\n-            exportSecDesc.setEnabled(selected);\n-            exportTerSort.setEnabled(selected);\n-            exportTerField.setEnabled(selected);\n-            exportTerDesc.setEnabled(selected);\n-        }\n+        boolean selected = _prefs.getBoolean(JabRefPreferences.EXPORT_IN_SPECIFIED_ORDER);\n+        exportPriSort.setEnabled(selected);\n+        exportPriField.setEnabled(selected);\n+        exportPriDesc.setEnabled(selected);\n+        exportSecSort.setEnabled(selected);\n+        exportSecField.setEnabled(selected);\n+        exportSecDesc.setEnabled(selected);\n+        exportTerSort.setEnabled(selected);\n+        exportTerField.setEnabled(selected);\n+        exportTerDesc.setEnabled(selected);\n \n         exportPriField.setText(_prefs.get(JabRefPreferences.EXPORT_PRIMARY_SORT_FIELD));\n         exportSecField.setText(_prefs.get(JabRefPreferences.EXPORT_SECONDARY_SORT_FIELD));, @@ -395,19 +395,16 @@ private static void setCurrentProcessExplicitAppUserModelID(final String appID)\n \n                     //read in the export format, take default format if no format entered\n                     switch (data.length) {\n-                    case (3): {\n+                    case (3):\n                         formatName = data[2];\n                         break;\n-                    }\n-                    case (2): {\n-                        //default ExportFormat: HTML table (with Abstract & BibTeX)\n-                        formatName = \"tablerefsabsbib\";\n-                        break;\n-                    }\n-                    default: {\n-                        System.err.println(Globals.lang(\"Output file missing\").concat(\". \\n \\t \").concat(\"Usage\").concat(\": \") + JabRefCLI.getExportMatchesSyntax());\n-                        return null; // TODO replace with optional one day\n-                    }\n+                        case (2):\n+                            //default ExportFormat: HTML table (with Abstract & BibTeX)\n+                            formatName = \"tablerefsabsbib\";\n+                            break;\n+                        default:\n+                            System.err.println(Globals.lang(\"Output file missing\").concat(\". \\n \\t \").concat(\"Usage\").concat(\": \") + JabRefCLI.getExportMatchesSyntax());\n+                            return null; // TODO replace with optional one day\n                     } //end switch\n \n                     //export new database, @@ -652,7 +652,7 @@ public void stateChanged(ChangeEvent e) {\n                 Method method = macreg.getMethod(\"registerMacEvents\", JabRefFrame.class);\n                 method.invoke(macreg.newInstance(), this);\n             } catch (Exception e) {\n-                System.err.println(\"Exception (\" + e.getClass().toString() + \"): \" + e.getMessage());\n+                System.err.println(\"Exception (\" + e.getClass() + \"): \" + e.getMessage());\n             }\n         }\n     }, @@ -278,7 +278,7 @@ public String doLayout(BibtexEntry bibtex, BibtexDatabase database, ArrayList<St\n         case LayoutHelper.IS_FIELD_END:\n         case LayoutHelper.IS_GROUP_END:\n             return \"\";\n-        case LayoutHelper.IS_OPTION_FIELD: {\n+        case LayoutHelper.IS_OPTION_FIELD:\n             String fieldEntry;\n \n             if (text.equals(\"bibtextype\")) {\n@@ -309,14 +309,12 @@ public String doLayout(BibtexEntry bibtex, BibtexDatabase database, ArrayList<St\n             }\n \n             return fieldEntry;\n-        }\n-        case LayoutHelper.IS_ENCODING_NAME: {\n-            // Printing the encoding name is not supported in entry layouts, only\n-            // in begin/end layouts. This prevents breakage if some users depend\n-            // on a field called \"encoding\". We simply return this field instead:\n-            return BibtexDatabase.getResolvedField(\"encoding\", bibtex, database);\n-        }\n-        default:\n+            case LayoutHelper.IS_ENCODING_NAME:\n+                // Printing the encoding name is not supported in entry layouts, only\n+                // in begin/end layouts. This prevents breakage if some users depend\n+                // on a field called \"encoding\". We simply return this field instead:\n+                return BibtexDatabase.getResolvedField(\"encoding\", bibtex, database);\n+            default:\n             return \"\";\n         }\n     }, @@ -677,10 +677,10 @@ private void updateGroupContent(GroupTreeNode node) {\n         for (BibtexEntry entry : entries) {\n             // Sort according to current state of the entries\n             if (group.contains(entry)) {\n-                LOGGER.info(\"Removing entry \" + entry.toString());\n+                LOGGER.info(\"Removing entry \" + entry);\n                 toRemove.add(entry);\n             } else {\n-                LOGGER.info(\"Adding entry \" + entry.toString());\n+                LOGGER.info(\"Adding entry \" + entry);\n                 toAdd.add(entry);\n             }\n         }\n@@ -722,7 +722,7 @@ public void updateGroupContentIfEnabled(boolean deletion) {\n     }\n \n     private void annotationEvent(GroupTreeNode node) {\n-        LOGGER.info(\"Performing annotation \" + node.toString());\n+        LOGGER.info(\"Performing annotation \" + node);\n         if (editModeIndicator) {\n             updateGroupContent(node);\n             panel.markBaseChanged();, @@ -346,70 +346,68 @@ public void run() {\n                         return; // There is an icon, but the field is not set.\n                     }\n \n-                    {\n-                        // See if this is a simple file link field, or if it is a file-list\n-                        // field that can specify a list of links:\n-                        if (fieldName.equals(GUIGlobals.FILE_FIELD)) {\n-\n-                            // We use a FileListTableModel to parse the field content:\n-                            FileListTableModel fileList = new FileListTableModel();\n-                            fileList.setContent((String) link);\n-\n-                            FileListEntry flEntry = null;\n-                            // If there are one or more links of the correct type,\n-                            // open the first one:\n-                            if (!listOfFileTypes.isEmpty()) {\n-                                for (int i = 0; i < fileList.getRowCount(); i++) {\n-                                    flEntry = fileList.getEntry(i);\n-                                    boolean correctType = false;\n-                                    for (String listOfFileType : listOfFileTypes) {\n-                                        if (flEntry.getType().toString().equals(listOfFileType)) {\n-                                            correctType = true;\n-                                        }\n+                    // See if this is a simple file link field, or if it is a file-list\n+                    // field that can specify a list of links:\n+                    if (fieldName.equals(GUIGlobals.FILE_FIELD)) {\n+\n+                        // We use a FileListTableModel to parse the field content:\n+                        FileListTableModel fileList = new FileListTableModel();\n+                        fileList.setContent((String) link);\n+\n+                        FileListEntry flEntry = null;\n+                        // If there are one or more links of the correct type,\n+                        // open the first one:\n+                        if (!listOfFileTypes.isEmpty()) {\n+                            for (int i = 0; i < fileList.getRowCount(); i++) {\n+                                flEntry = fileList.getEntry(i);\n+                                boolean correctType = false;\n+                                for (String listOfFileType : listOfFileTypes) {\n+                                    if (flEntry.getType().toString().equals(listOfFileType)) {\n+                                        correctType = true;\n                                     }\n-                                    if (correctType) {\n-                                        break;\n-                                    }\n-                                    flEntry = null;\n                                 }\n-                            }\n-                            //If there are no file types specified, consider all files.\n-                            else if (fileList.getRowCount() > 0) {\n-                                flEntry = fileList.getEntry(0);\n-                            }\n-                            if (flEntry != null) {\n-                                //                            if (fileList.getRowCount() > 0) {\n-                                //                                FileListEntry flEntry = fileList.getEntry(0);\n-\n-                                ExternalFileMenuItem item = new ExternalFileMenuItem\n-                                        (panel.frame(), entry, \"\",\n-                                                flEntry.getLink(), flEntry.getType().getIcon(),\n-                                                panel.metaData(), flEntry.getType());\n-                                boolean success = item.openLink();\n-                                if (!success) {\n-                                    panel.output(Globals.lang(\"Unable to open link.\"));\n+                                if (correctType) {\n+                                    break;\n                                 }\n+                                flEntry = null;\n                             }\n-                        } else {\n-                            try {\n-                                Util.openExternalViewer(panel.metaData(), (String) link, fieldName);\n-                            } catch (IOException ex) {\n-                                panel.output(Globals.lang(\"Unable to open link.\"));\n-                            }\n+                        }\n+                        //If there are no file types specified, consider all files.\n+                        else if (fileList.getRowCount() > 0) {\n+                            flEntry = fileList.getEntry(0);\n+                        }\n+                        if (flEntry != null) {\n+                            //                            if (fileList.getRowCount() > 0) {\n+                            //                                FileListEntry flEntry = fileList.getEntry(0);\n \n-                            /*ExternalFileType type = Globals.prefs.getExternalFileTypeByMimeType(\"text/html\");\n                             ExternalFileMenuItem item = new ExternalFileMenuItem\n                                     (panel.frame(), entry, \"\",\n-                                    (String)link, type.getIcon(),\n-                                    panel.metaData(), type);\n+                                            flEntry.getLink(), flEntry.getType().getIcon(),\n+                                            panel.metaData(), flEntry.getType());\n                             boolean success = item.openLink();\n                             if (!success) {\n                                 panel.output(Globals.lang(\"Unable to open link.\"));\n-                            } */\n-                            //Util.openExternalViewer(panel.metaData(), (String)link, fieldName);\n+                            }\n+                        }\n+                    } else {\n+                        try {\n+                            Util.openExternalViewer(panel.metaData(), (String) link, fieldName);\n+                        } catch (IOException ex) {\n+                            panel.output(Globals.lang(\"Unable to open link.\"));\n                         }\n \n+                        /*ExternalFileType type = Globals.prefs.getExternalFileTypeByMimeType(\"text/html\");\n+                        ExternalFileMenuItem item = new ExternalFileMenuItem\n+                                (panel.frame(), entry, \"\",\n+                                (String)link, type.getIcon(),\n+                                panel.metaData(), type);\n+                        boolean success = item.openLink();\n+                        if (!success) {\n+                            panel.output(Globals.lang(\"Unable to open link.\"));\n+                        } */\n+                        //Util.openExternalViewer(panel.metaData(), (String)link, fieldName);\n                     }\n+\n                     //catch (IOException ex) {\n                     //    panel.output(Globals.lang(\"Error\") + \": \" + ex.getMessage());\n                     //}, @@ -91,35 +91,34 @@ public boolean isRecognizedFormat(InputStream stream) throws IOException {\n \n         List<String> entries = new LinkedList<String>();\n \n-        { // Preprocess entries\n-            String str;\n-            StringBuffer sb = new StringBuffer();\n+        // Preprocess entries\n+        String str;\n+        StringBuffer sb = new StringBuffer();\n \n-            while ((str = in.readLine()) != null) {\n+        while ((str = in.readLine()) != null) {\n \n-                if (str.length() < 4) {\n-                    continue;\n-                }\n+            if (str.length() < 4) {\n+                continue;\n+            }\n \n-                String code = str.substring(0, 4);\n+            String code = str.substring(0, 4);\n \n-                if (code.equals(\"    \")) {\n-                    sb.append(\" \").append(str.trim());\n-                } else {\n+            if (code.equals(\"    \")) {\n+                sb.append(\" \").append(str.trim());\n+            } else {\n \n-                    // begining of a new item\n-                    if (str.substring(0, 4).equals(\"TI- \")) {\n-                        if (sb.length() > 0) {\n-                            entries.add(sb.toString());\n-                        }\n-                        sb = new StringBuffer();\n+                // begining of a new item\n+                if (str.substring(0, 4).equals(\"TI- \")) {\n+                    if (sb.length() > 0) {\n+                        entries.add(sb.toString());\n                     }\n-                    sb.append('\\n').append(str);\n+                    sb = new StringBuffer();\n                 }\n+                sb.append('\\n').append(str);\n             }\n-            if (sb.length() > 0) {\n-                entries.add(sb.toString());\n-            }\n+        }\n+        if (sb.length() > 0) {\n+            entries.add(sb.toString());\n         }\n \n         List<BibtexEntry> results = new LinkedList<BibtexEntry>();, @@ -1211,7 +1211,7 @@ public static void main(String[] args) throws IOException,\n         case 0:\n             XMPUtil.usage();\n             break;\n-        case 1: {\n+        case 1:\n \n             if (args[0].endsWith(\".pdf\")) {\n                 // Read from pdf and write as BibTex\n@@ -1245,64 +1245,61 @@ public static void main(String[] args) throws IOException,\n                 XMPUtil.usage();\n             }\n             break;\n-        }\n-        case 2: {\n-            if (args[0].equals(\"-x\") && args[1].endsWith(\".pdf\")) {\n-                // Read from pdf and write as BibTex\n-                XMPMetadata meta = XMPUtil.readRawXMP(new File(args[1]));\n-\n-                if (meta == null) {\n-                    System.err\n-                            .println(\"The given pdf does not contain any XMP-metadata.\");\n-                } else {\n-                    XMLUtil.save(meta.getXMPDocument(), System.out, \"UTF-8\");\n+            case 2:\n+                if (args[0].equals(\"-x\") && args[1].endsWith(\".pdf\")) {\n+                    // Read from pdf and write as BibTex\n+                    XMPMetadata meta = XMPUtil.readRawXMP(new File(args[1]));\n+\n+                    if (meta == null) {\n+                        System.err\n+                                .println(\"The given pdf does not contain any XMP-metadata.\");\n+                    } else {\n+                        XMLUtil.save(meta.getXMPDocument(), System.out, \"UTF-8\");\n+                    }\n+                    break;\n                 }\n-                break;\n-            }\n \n-            if (args[0].endsWith(\".bib\") && args[1].endsWith(\".pdf\")) {\n-                ParserResult result = BibtexParser\n-                        .parse(new FileReader(args[0]));\n+                if (args[0].endsWith(\".bib\") && args[1].endsWith(\".pdf\")) {\n+                    ParserResult result = BibtexParser\n+                            .parse(new FileReader(args[0]));\n \n-                Collection<BibtexEntry> entries = result.getDatabase()\n-                        .getEntries();\n+                    Collection<BibtexEntry> entries = result.getDatabase()\n+                            .getEntries();\n \n-                if (entries.isEmpty()) {\n-                    System.err.println(\"Could not find BibtexEntry in \"\n-                            + args[0]);\n-                } else {\n-                    XMPUtil.writeXMP(new File(args[1]), entries, result\n-                            .getDatabase(), false);\n-                    System.out.println(\"XMP written.\");\n+                    if (entries.isEmpty()) {\n+                        System.err.println(\"Could not find BibtexEntry in \"\n+                                + args[0]);\n+                    } else {\n+                        XMPUtil.writeXMP(new File(args[1]), entries, result\n+                                .getDatabase(), false);\n+                        System.out.println(\"XMP written.\");\n+                    }\n+                    break;\n                 }\n-                break;\n-            }\n \n-            XMPUtil.usage();\n-            break;\n-        }\n-        case 3: {\n-            if (!args[1].endsWith(\".bib\") && !args[2].endsWith(\".pdf\")) {\n                 XMPUtil.usage();\n                 break;\n-            }\n+            case 3:\n+                if (!args[1].endsWith(\".bib\") && !args[2].endsWith(\".pdf\")) {\n+                    XMPUtil.usage();\n+                    break;\n+                }\n \n-            ParserResult result = BibtexParser.parse(new FileReader(args[1]));\n+                ParserResult result = BibtexParser.parse(new FileReader(args[1]));\n \n-            BibtexEntry e = result.getDatabase().getEntryByKey(args[0]);\n+                BibtexEntry e = result.getDatabase().getEntryByKey(args[0]);\n \n-            if (e == null) {\n-                System.err.println(\"Could not find BibtexEntry \" + args[0]\n-                        + \" in \" + args[0]);\n-            } else {\n-                XMPUtil.writeXMP(new File(args[2]), e, result.getDatabase());\n+                if (e == null) {\n+                    System.err.println(\"Could not find BibtexEntry \" + args[0]\n+                            + \" in \" + args[0]);\n+                } else {\n+                    XMPUtil.writeXMP(new File(args[2]), e, result.getDatabase());\n \n-                System.out.println(\"XMP written.\");\n-            }\n-            break;\n-        }\n+                    System.out.println(\"XMP written.\");\n+                }\n+                break;\n \n-        default:\n+            default:\n             XMPUtil.usage();\n         }\n     }, @@ -39,71 +39,69 @@ public void testGetAuthorList() {\n     @Test\n     public void testFixAuthor_firstNameFirstCommas() {\n \n-        { // No Commas\n-            Assert.assertEquals(\"\", AuthorList.fixAuthor_firstNameFirstCommas(\"\", true, false));\n-            Assert.assertEquals(\"\", AuthorList.fixAuthor_firstNameFirstCommas(\"\", false, false));\n+        // No Commas\n+        Assert.assertEquals(\"\", AuthorList.fixAuthor_firstNameFirstCommas(\"\", true, false));\n+        Assert.assertEquals(\"\", AuthorList.fixAuthor_firstNameFirstCommas(\"\", false, false));\n \n-            Assert.assertEquals(\"John Smith\", AuthorList.fixAuthor_firstNameFirstCommas(\"John Smith\",\n-                    false, false));\n-            Assert.assertEquals(\"J. Smith\", AuthorList.fixAuthor_firstNameFirstCommas(\"John Smith\", true,\n-                    false));\n-\n-            // Check caching\n-            Assert.assertTrue(AuthorList.fixAuthor_firstNameFirstCommas(\n-                    \"John von Neumann and John Smith and Black Brown, Peter\", true, false).equals(AuthorList\n-                    .fixAuthor_firstNameFirstCommas(\"John von Neumann\" + (0 == 1 ? \"\" : \" and \")\n-                            + \"John Smith and Black Brown, Peter\", true, false)));\n-\n-            Assert.assertEquals(\"John Smith and Peter Black Brown\", AuthorList\n-                    .fixAuthor_firstNameFirstCommas(\"John Smith and Black Brown, Peter\", false, false));\n-            Assert.assertEquals(\"J. Smith and P. Black Brown\", AuthorList.fixAuthor_firstNameFirstCommas(\n-                    \"John Smith and Black Brown, Peter\", true, false));\n-\n-            // Method description is different than code -> additional comma\n-            // there\n-            Assert.assertEquals(\"John von Neumann, John Smith and Peter Black Brown\", AuthorList\n-                    .fixAuthor_firstNameFirstCommas(\n-                            \"John von Neumann and John Smith and Black Brown, Peter\", false, false));\n-            Assert.assertEquals(\"J. von Neumann, J. Smith and P. Black Brown\", AuthorList\n-                    .fixAuthor_firstNameFirstCommas(\n-                            \"John von Neumann and John Smith and Black Brown, Peter\", true, false));\n-\n-            Assert.assertEquals(\"J. P. von Neumann\", AuthorList.fixAuthor_firstNameFirstCommas(\n-                    \"John Peter von Neumann\", true, false));\n-        }\n-        { // Oxford Commas\n-            Assert.assertEquals(\"\", AuthorList.fixAuthor_firstNameFirstCommas(\"\", true, true));\n-            Assert.assertEquals(\"\", AuthorList.fixAuthor_firstNameFirstCommas(\"\", false, true));\n-\n-            Assert.assertEquals(\"John Smith\", AuthorList.fixAuthor_firstNameFirstCommas(\"John Smith\",\n-                    false, true));\n-            Assert.assertEquals(\"J. Smith\", AuthorList.fixAuthor_firstNameFirstCommas(\"John Smith\", true,\n-                    true));\n+        Assert.assertEquals(\"John Smith\", AuthorList.fixAuthor_firstNameFirstCommas(\"John Smith\",\n+                false, false));\n+        Assert.assertEquals(\"J. Smith\", AuthorList.fixAuthor_firstNameFirstCommas(\"John Smith\", true,\n+                false));\n \n-            // Check caching\n-            Assert.assertTrue(AuthorList.fixAuthor_firstNameFirstCommas(\n-                    \"John von Neumann and John Smith and Black Brown, Peter\", true, true).equals(AuthorList\n-                    .fixAuthor_firstNameFirstCommas(\"John von Neumann\" + (0 == 1 ? \"\" : \" and \")\n-                            + \"John Smith and Black Brown, Peter\", true, true)));\n+        // Check caching\n+        Assert.assertTrue(AuthorList.fixAuthor_firstNameFirstCommas(\n+                \"John von Neumann and John Smith and Black Brown, Peter\", true, false).equals(AuthorList\n+                .fixAuthor_firstNameFirstCommas(\"John von Neumann\" + (0 == 1 ? \"\" : \" and \")\n+                        + \"John Smith and Black Brown, Peter\", true, false)));\n \n-            Assert.assertEquals(\"John Smith and Peter Black Brown\", AuthorList\n-                    .fixAuthor_firstNameFirstCommas(\"John Smith and Black Brown, Peter\", false, true));\n-            Assert.assertEquals(\"J. Smith and P. Black Brown\", AuthorList.fixAuthor_firstNameFirstCommas(\n-                    \"John Smith and Black Brown, Peter\", true, true));\n+        Assert.assertEquals(\"John Smith and Peter Black Brown\", AuthorList\n+                .fixAuthor_firstNameFirstCommas(\"John Smith and Black Brown, Peter\", false, false));\n+        Assert.assertEquals(\"J. Smith and P. Black Brown\", AuthorList.fixAuthor_firstNameFirstCommas(\n+                \"John Smith and Black Brown, Peter\", true, false));\n+\n+        // Method description is different than code -> additional comma\n+        // there\n+        Assert.assertEquals(\"John von Neumann, John Smith and Peter Black Brown\", AuthorList\n+                .fixAuthor_firstNameFirstCommas(\n+                        \"John von Neumann and John Smith and Black Brown, Peter\", false, false));\n+        Assert.assertEquals(\"J. von Neumann, J. Smith and P. Black Brown\", AuthorList\n+                .fixAuthor_firstNameFirstCommas(\n+                        \"John von Neumann and John Smith and Black Brown, Peter\", true, false));\n+\n+        Assert.assertEquals(\"J. P. von Neumann\", AuthorList.fixAuthor_firstNameFirstCommas(\n+                \"John Peter von Neumann\", true, false));\n+        // Oxford Commas\n+        Assert.assertEquals(\"\", AuthorList.fixAuthor_firstNameFirstCommas(\"\", true, true));\n+        Assert.assertEquals(\"\", AuthorList.fixAuthor_firstNameFirstCommas(\"\", false, true));\n+\n+        Assert.assertEquals(\"John Smith\", AuthorList.fixAuthor_firstNameFirstCommas(\"John Smith\",\n+                false, true));\n+        Assert.assertEquals(\"J. Smith\", AuthorList.fixAuthor_firstNameFirstCommas(\"John Smith\", true,\n+                true));\n \n-            // Method description is different than code -> additional comma\n-            // there\n-            Assert.assertEquals(\"John von Neumann, John Smith, and Peter Black Brown\", AuthorList\n-                    .fixAuthor_firstNameFirstCommas(\n-                            \"John von Neumann and John Smith and Black Brown, Peter\", false, true));\n-            Assert.assertEquals(\"J. von Neumann, J. Smith, and P. Black Brown\", AuthorList\n-                    .fixAuthor_firstNameFirstCommas(\n-                            \"John von Neumann and John Smith and Black Brown, Peter\", true, true));\n+        // Check caching\n+        Assert.assertTrue(AuthorList.fixAuthor_firstNameFirstCommas(\n+                \"John von Neumann and John Smith and Black Brown, Peter\", true, true).equals(AuthorList\n+                .fixAuthor_firstNameFirstCommas(\"John von Neumann\" + (0 == 1 ? \"\" : \" and \")\n+                        + \"John Smith and Black Brown, Peter\", true, true)));\n \n-            Assert.assertEquals(\"J. P. von Neumann\", AuthorList.fixAuthor_firstNameFirstCommas(\n-                    \"John Peter von Neumann\", true, true));\n+        Assert.assertEquals(\"John Smith and Peter Black Brown\", AuthorList\n+                .fixAuthor_firstNameFirstCommas(\"John Smith and Black Brown, Peter\", false, true));\n+        Assert.assertEquals(\"J. Smith and P. Black Brown\", AuthorList.fixAuthor_firstNameFirstCommas(\n+                \"John Smith and Black Brown, Peter\", true, true));\n+\n+        // Method description is different than code -> additional comma\n+        // there\n+        Assert.assertEquals(\"John von Neumann, John Smith, and Peter Black Brown\", AuthorList\n+                .fixAuthor_firstNameFirstCommas(\n+                        \"John von Neumann and John Smith and Black Brown, Peter\", false, true));\n+        Assert.assertEquals(\"J. von Neumann, J. Smith, and P. Black Brown\", AuthorList\n+                .fixAuthor_firstNameFirstCommas(\n+                        \"John von Neumann and John Smith and Black Brown, Peter\", true, true));\n+\n+        Assert.assertEquals(\"J. P. von Neumann\", AuthorList.fixAuthor_firstNameFirstCommas(\n+                \"John Peter von Neumann\", true, true));\n \n-        }\n     }\n \n     @Test\n@@ -163,39 +161,38 @@ public void testFixAuthor_lastNameFirstCommas() {\n             Assert.assertEquals(\"von Neumann, J. P.\", AuthorList.fixAuthor_lastNameFirstCommas(\n                     \"John Peter von Neumann\", true, false));\n         }\n-        { // Oxford Commas\n-            Assert.assertEquals(\"\", AuthorList.fixAuthor_lastNameFirstCommas(\"\", true, true));\n-            Assert.assertEquals(\"\", AuthorList.fixAuthor_lastNameFirstCommas(\"\", false, true));\n-\n-            Assert.assertEquals(\"Smith, John\", AuthorList.fixAuthor_lastNameFirstCommas(\"John Smith\",\n-                    false, true));\n-            Assert.assertEquals(\"Smith, J.\", AuthorList.fixAuthor_lastNameFirstCommas(\"John Smith\", true,\n-                    true));\n+        // Oxford Commas\n+        Assert.assertEquals(\"\", AuthorList.fixAuthor_lastNameFirstCommas(\"\", true, true));\n+        Assert.assertEquals(\"\", AuthorList.fixAuthor_lastNameFirstCommas(\"\", false, true));\n \n-            String a = AuthorList.fixAuthor_lastNameFirstCommas(\n-                    \"John von Neumann and John Smith and Black Brown, Peter\", true, true);\n-            String b = AuthorList.fixAuthor_lastNameFirstCommas(\"John von Neumann\"\n-                    + (0 == 1 ? \"\" : \" and \") + \"John Smith and Black Brown, Peter\", true, true);\n+        Assert.assertEquals(\"Smith, John\", AuthorList.fixAuthor_lastNameFirstCommas(\"John Smith\",\n+                false, true));\n+        Assert.assertEquals(\"Smith, J.\", AuthorList.fixAuthor_lastNameFirstCommas(\"John Smith\", true,\n+                true));\n \n-            // Check caching\n-            Assert.assertEquals(a, b);\n-            Assert.assertTrue(a.equals(b));\n+        String a = AuthorList.fixAuthor_lastNameFirstCommas(\n+                \"John von Neumann and John Smith and Black Brown, Peter\", true, true);\n+        String b = AuthorList.fixAuthor_lastNameFirstCommas(\"John von Neumann\"\n+                + (0 == 1 ? \"\" : \" and \") + \"John Smith and Black Brown, Peter\", true, true);\n \n-            Assert.assertEquals(\"Smith, John and Black Brown, Peter\", AuthorList\n-                    .fixAuthor_lastNameFirstCommas(\"John Smith and Black Brown, Peter\", false, true));\n-            Assert.assertEquals(\"Smith, J. and Black Brown, P.\", AuthorList.fixAuthor_lastNameFirstCommas(\n-                    \"John Smith and Black Brown, Peter\", true, true));\n-\n-            Assert.assertEquals(\"von Neumann, John, Smith, John, and Black Brown, Peter\", AuthorList\n-                    .fixAuthor_lastNameFirstCommas(\n-                            \"John von Neumann and John Smith and Black Brown, Peter\", false, true));\n-            Assert.assertEquals(\"von Neumann, J., Smith, J., and Black Brown, P.\", AuthorList\n-                    .fixAuthor_lastNameFirstCommas(\n-                            \"John von Neumann and John Smith and Black Brown, Peter\", true, true));\n+        // Check caching\n+        Assert.assertEquals(a, b);\n+        Assert.assertTrue(a.equals(b));\n \n-            Assert.assertEquals(\"von Neumann, J. P.\", AuthorList.fixAuthor_lastNameFirstCommas(\n-                    \"John Peter von Neumann\", true, true));\n-        }\n+        Assert.assertEquals(\"Smith, John and Black Brown, Peter\", AuthorList\n+                .fixAuthor_lastNameFirstCommas(\"John Smith and Black Brown, Peter\", false, true));\n+        Assert.assertEquals(\"Smith, J. and Black Brown, P.\", AuthorList.fixAuthor_lastNameFirstCommas(\n+                \"John Smith and Black Brown, Peter\", true, true));\n+\n+        Assert.assertEquals(\"von Neumann, John, Smith, John, and Black Brown, Peter\", AuthorList\n+                .fixAuthor_lastNameFirstCommas(\n+                        \"John von Neumann and John Smith and Black Brown, Peter\", false, true));\n+        Assert.assertEquals(\"von Neumann, J., Smith, J., and Black Brown, P.\", AuthorList\n+                .fixAuthor_lastNameFirstCommas(\n+                        \"John von Neumann and John Smith and Black Brown, Peter\", true, true));\n+\n+        Assert.assertEquals(\"von Neumann, J. P.\", AuthorList.fixAuthor_lastNameFirstCommas(\n+                \"John Peter von Neumann\", true, true));\n     }\n \n     @Test\n@@ -260,34 +257,32 @@ public void testFixAuthor_lastNameFirst() {\n     @Test\n     public void testFixAuthor_lastNameOnlyCommas() {\n \n-        { // No comma before and\n-            Assert.assertEquals(\"\", AuthorList.fixAuthor_lastNameOnlyCommas(\"\", false));\n-            Assert.assertEquals(\"Smith\", AuthorList.fixAuthor_lastNameOnlyCommas(\"John Smith\", false));\n-            Assert.assertEquals(\"Smith\", AuthorList.fixAuthor_lastNameOnlyCommas(\"Smith, Jr, John\", false));\n+        // No comma before and\n+        Assert.assertEquals(\"\", AuthorList.fixAuthor_lastNameOnlyCommas(\"\", false));\n+        Assert.assertEquals(\"Smith\", AuthorList.fixAuthor_lastNameOnlyCommas(\"John Smith\", false));\n+        Assert.assertEquals(\"Smith\", AuthorList.fixAuthor_lastNameOnlyCommas(\"Smith, Jr, John\", false));\n+\n+        Assert.assertTrue(AuthorList.fixAuthor_lastNameOnlyCommas(\n+                \"John von Neumann and John Smith and Black Brown, Peter\", false).equals(AuthorList\n+                .fixAuthor_lastNameOnlyCommas(\"John von Neumann\" + (0 == 1 ? \"\" : \" and \")\n+                        + \"John Smith and Black Brown, Peter\", false)));\n+\n+        Assert.assertEquals(\"von Neumann, Smith and Black Brown\", AuthorList\n+                .fixAuthor_lastNameOnlyCommas(\n+                        \"John von Neumann and John Smith and Black Brown, Peter\", false));\n+        // Oxford Comma\n+        Assert.assertEquals(\"\", AuthorList.fixAuthor_lastNameOnlyCommas(\"\", true));\n+        Assert.assertEquals(\"Smith\", AuthorList.fixAuthor_lastNameOnlyCommas(\"John Smith\", true));\n+        Assert.assertEquals(\"Smith\", AuthorList.fixAuthor_lastNameOnlyCommas(\"Smith, Jr, John\", true));\n \n-            Assert.assertTrue(AuthorList.fixAuthor_lastNameOnlyCommas(\n-                    \"John von Neumann and John Smith and Black Brown, Peter\", false).equals(AuthorList\n-                    .fixAuthor_lastNameOnlyCommas(\"John von Neumann\" + (0 == 1 ? \"\" : \" and \")\n-                            + \"John Smith and Black Brown, Peter\", false)));\n+        Assert.assertTrue(AuthorList.fixAuthor_lastNameOnlyCommas(\n+                \"John von Neumann and John Smith and Black Brown, Peter\", true).equals(AuthorList\n+                .fixAuthor_lastNameOnlyCommas(\"John von Neumann\" + (0 == 1 ? \"\" : \" and \")\n+                        + \"John Smith and Black Brown, Peter\", true)));\n \n-            Assert.assertEquals(\"von Neumann, Smith and Black Brown\", AuthorList\n-                    .fixAuthor_lastNameOnlyCommas(\n-                            \"John von Neumann and John Smith and Black Brown, Peter\", false));\n-        }\n-        { // Oxford Comma\n-            Assert.assertEquals(\"\", AuthorList.fixAuthor_lastNameOnlyCommas(\"\", true));\n-            Assert.assertEquals(\"Smith\", AuthorList.fixAuthor_lastNameOnlyCommas(\"John Smith\", true));\n-            Assert.assertEquals(\"Smith\", AuthorList.fixAuthor_lastNameOnlyCommas(\"Smith, Jr, John\", true));\n-\n-            Assert.assertTrue(AuthorList.fixAuthor_lastNameOnlyCommas(\n-                    \"John von Neumann and John Smith and Black Brown, Peter\", true).equals(AuthorList\n-                    .fixAuthor_lastNameOnlyCommas(\"John von Neumann\" + (0 == 1 ? \"\" : \" and \")\n-                            + \"John Smith and Black Brown, Peter\", true)));\n-\n-            Assert.assertEquals(\"von Neumann, Smith, and Black Brown\", AuthorList\n-                    .fixAuthor_lastNameOnlyCommas(\n-                            \"John von Neumann and John Smith and Black Brown, Peter\", true));\n-        }\n+        Assert.assertEquals(\"von Neumann, Smith, and Black Brown\", AuthorList\n+                .fixAuthor_lastNameOnlyCommas(\n+                        \"John von Neumann and John Smith and Black Brown, Peter\", true));\n     }\n \n     @Test\n@@ -397,24 +392,22 @@ public void testGetAuthorsNatbib() {\n     @Test\n     public void testGetAuthorsLastOnly() {\n \n-        { // No comma before and\n-            Assert.assertEquals(\"\", AuthorList.getAuthorList(\"\").getAuthorsLastOnly(false));\n-            Assert.assertEquals(\"Smith\", AuthorList.getAuthorList(\"John Smith\").getAuthorsLastOnly(false));\n-            Assert.assertEquals(\"Smith\", AuthorList.getAuthorList(\"Smith, Jr, John\").getAuthorsLastOnly(\n-                    false));\n+        // No comma before and\n+        Assert.assertEquals(\"\", AuthorList.getAuthorList(\"\").getAuthorsLastOnly(false));\n+        Assert.assertEquals(\"Smith\", AuthorList.getAuthorList(\"John Smith\").getAuthorsLastOnly(false));\n+        Assert.assertEquals(\"Smith\", AuthorList.getAuthorList(\"Smith, Jr, John\").getAuthorsLastOnly(\n+                false));\n \n-            Assert.assertEquals(\"von Neumann, Smith and Black Brown\", AuthorList.getAuthorList(\n-                    \"John von Neumann and John Smith and Black Brown, Peter\").getAuthorsLastOnly(false));\n-        }\n-        { // Oxford comma\n-            Assert.assertEquals(\"\", AuthorList.getAuthorList(\"\").getAuthorsLastOnly(true));\n-            Assert.assertEquals(\"Smith\", AuthorList.getAuthorList(\"John Smith\").getAuthorsLastOnly(true));\n-            Assert.assertEquals(\"Smith\", AuthorList.getAuthorList(\"Smith, Jr, John\").getAuthorsLastOnly(\n-                    true));\n-\n-            Assert.assertEquals(\"von Neumann, Smith, and Black Brown\", AuthorList.getAuthorList(\n-                    \"John von Neumann and John Smith and Black Brown, Peter\").getAuthorsLastOnly(true));\n-        }\n+        Assert.assertEquals(\"von Neumann, Smith and Black Brown\", AuthorList.getAuthorList(\n+                \"John von Neumann and John Smith and Black Brown, Peter\").getAuthorsLastOnly(false));\n+        // Oxford comma\n+        Assert.assertEquals(\"\", AuthorList.getAuthorList(\"\").getAuthorsLastOnly(true));\n+        Assert.assertEquals(\"Smith\", AuthorList.getAuthorList(\"John Smith\").getAuthorsLastOnly(true));\n+        Assert.assertEquals(\"Smith\", AuthorList.getAuthorList(\"Smith, Jr, John\").getAuthorsLastOnly(\n+                true));\n+\n+        Assert.assertEquals(\"von Neumann, Smith, and Black Brown\", AuthorList.getAuthorList(\n+                \"John von Neumann and John Smith and Black Brown, Peter\").getAuthorsLastOnly(true));\n     }\n \n     @Test\n@@ -445,30 +438,29 @@ public void testGetAuthorsLastFirst() {\n             al = AuthorList.getAuthorList(\"John Peter von Neumann\");\n             Assert.assertEquals(\"von Neumann, J. P.\", al.getAuthorsLastFirst(true, false));\n         }\n-        { // Oxford comma\n-            AuthorList al;\n+        // Oxford comma\n+        AuthorList al;\n \n-            al = AuthorList.getAuthorList(\"\");\n-            Assert.assertEquals(\"\", al.getAuthorsLastFirst(true, true));\n-            Assert.assertEquals(\"\", al.getAuthorsLastFirst(false, true));\n+        al = AuthorList.getAuthorList(\"\");\n+        Assert.assertEquals(\"\", al.getAuthorsLastFirst(true, true));\n+        Assert.assertEquals(\"\", al.getAuthorsLastFirst(false, true));\n \n-            al = AuthorList.getAuthorList(\"John Smith\");\n-            Assert.assertEquals(\"Smith, John\", al.getAuthorsLastFirst(false, true));\n-            Assert.assertEquals(\"Smith, J.\", al.getAuthorsLastFirst(true, true));\n+        al = AuthorList.getAuthorList(\"John Smith\");\n+        Assert.assertEquals(\"Smith, John\", al.getAuthorsLastFirst(false, true));\n+        Assert.assertEquals(\"Smith, J.\", al.getAuthorsLastFirst(true, true));\n \n-            al = AuthorList.getAuthorList(\"John Smith and Black Brown, Peter\");\n-            Assert.assertEquals(\"Smith, John and Black Brown, Peter\", al.getAuthorsLastFirst(false, true));\n-            Assert.assertEquals(\"Smith, J. and Black Brown, P.\", al.getAuthorsLastFirst(true, true));\n+        al = AuthorList.getAuthorList(\"John Smith and Black Brown, Peter\");\n+        Assert.assertEquals(\"Smith, John and Black Brown, Peter\", al.getAuthorsLastFirst(false, true));\n+        Assert.assertEquals(\"Smith, J. and Black Brown, P.\", al.getAuthorsLastFirst(true, true));\n \n-            al = AuthorList.getAuthorList(\"John von Neumann and John Smith and Black Brown, Peter\");\n-            Assert.assertEquals(\"von Neumann, John, Smith, John, and Black Brown, Peter\", al\n-                    .getAuthorsLastFirst(false, true));\n-            Assert.assertEquals(\"von Neumann, J., Smith, J., and Black Brown, P.\", al.getAuthorsLastFirst(\n-                    true, true));\n+        al = AuthorList.getAuthorList(\"John von Neumann and John Smith and Black Brown, Peter\");\n+        Assert.assertEquals(\"von Neumann, John, Smith, John, and Black Brown, Peter\", al\n+                .getAuthorsLastFirst(false, true));\n+        Assert.assertEquals(\"von Neumann, J., Smith, J., and Black Brown, P.\", al.getAuthorsLastFirst(\n+                true, true));\n \n-            al = AuthorList.getAuthorList(\"John Peter von Neumann\");\n-            Assert.assertEquals(\"von Neumann, J. P.\", al.getAuthorsLastFirst(true, true));\n-        }\n+        al = AuthorList.getAuthorList(\"John Peter von Neumann\");\n+        Assert.assertEquals(\"von Neumann, J. P.\", al.getAuthorsLastFirst(true, true));\n     }\n \n     @Test, @@ -54,20 +54,18 @@ public void warn(String s) {\n             }));\n         }\n \n-        {\n-            AuthorList al = AuthorList\n-                    .getAuthorList(\"Charles Louis Xavier Joseph de la Vall{\\\\'e}e Poussin\");\n+        AuthorList al = AuthorList\n+                .getAuthorList(\"Charles Louis Xavier Joseph de la Vall{\\\\'e}e Poussin\");\n \n-            Assert.assertEquals(\"dlVP\", BibtexNameFormatter.formatName(al.getAuthor(0), \"{v{}}{l{}}\",\n-                    new Warn() {\n+        Assert.assertEquals(\"dlVP\", BibtexNameFormatter.formatName(al.getAuthor(0), \"{v{}}{l{}}\",\n+                new Warn() {\n \n-                        @Override\n-                        public void warn(String s) {\n-                            Assert.fail(s);\n-                        }\n+                    @Override\n+                    public void warn(String s) {\n+                        Assert.fail(s);\n                     }\n-                    ));\n-        }\n+                }\n+                ));\n \n         assertNameFormatA(\"Meyer, J?\", \"Jonathan Meyer and Charles Louis Xavier Joseph de la Vall{\\\\'e}e Poussin\");\n         assertNameFormatB(\"J.~Meyer\", \"Jonathan Meyer and Charles Louis Xavier Joseph de la Vall{\\\\'e}e Poussin\");\n@@ -122,12 +120,10 @@ public void testConsumeToMatchingBrace() {\n                     .toCharArray(), 12));\n             Assert.assertEquals(\"{WORLD}\", sb.toString());\n         }\n-        {\n-            StringBuffer sb = new StringBuffer();\n-            Assert.assertEquals(10, BibtexNameFormatter.consumeToMatchingBrace(sb, \"{HE{L{}L}O} {WORLD}\"\n-                    .toCharArray(), 0));\n-            Assert.assertEquals(\"{HE{L{}L}O}\", sb.toString());\n-        }\n+        StringBuffer sb = new StringBuffer();\n+        Assert.assertEquals(10, BibtexNameFormatter.consumeToMatchingBrace(sb, \"{HE{L{}L}O} {WORLD}\"\n+                .toCharArray(), 0));\n+        Assert.assertEquals(\"{HE{L{}L}O}\", sb.toString());\n     }\n \n     @Test, @@ -110,26 +110,24 @@ public void testVMExecuteSimple() throws RecognitionException, IOException {\n             vm.run(v);\n             Assert.assertEquals(new Integer(5), vm.getIntegers().get(\"variable.a\"));\n         }\n-        {\n-            VM vm = new VM(\"FUNCTION {a}{ #5 #5 = \" + \"#1 #2 = \" + \"#3 #4 < \" + \"#4 #3 < \"\n-                    + \"#4 #4 < \" + \"#3 #4 > \" + \"#4 #3 > \" + \"#4 #4 > \" + \"\\\"H\\\" \\\"H\\\" = \"\n-                    + \"\\\"H\\\" \\\"Ha\\\" = } \" + \"EXECUTE {a}\");\n+        VM vm = new VM(\"FUNCTION {a}{ #5 #5 = \" + \"#1 #2 = \" + \"#3 #4 < \" + \"#4 #3 < \"\n+                + \"#4 #4 < \" + \"#3 #4 > \" + \"#4 #3 > \" + \"#4 #4 > \" + \"\\\"H\\\" \\\"H\\\" = \"\n+                + \"\\\"H\\\" \\\"Ha\\\" = } \" + \"EXECUTE {a}\");\n \n-            Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n-            vm.run(v);\n+        Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n+        vm.run(v);\n \n-            Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n-            Assert.assertEquals(VM.TRUE, vm.getStack().pop());\n-            Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n-            Assert.assertEquals(VM.TRUE, vm.getStack().pop());\n-            Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n-            Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n-            Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n-            Assert.assertEquals(VM.TRUE, vm.getStack().pop());\n-            Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n-            Assert.assertEquals(VM.TRUE, vm.getStack().pop());\n-            Assert.assertEquals(0, vm.getStack().size());\n-        }\n+        Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n+        Assert.assertEquals(VM.TRUE, vm.getStack().pop());\n+        Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n+        Assert.assertEquals(VM.TRUE, vm.getStack().pop());\n+        Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n+        Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n+        Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n+        Assert.assertEquals(VM.TRUE, vm.getStack().pop());\n+        Assert.assertEquals(VM.FALSE, vm.getStack().pop());\n+        Assert.assertEquals(VM.TRUE, vm.getStack().pop());\n+        Assert.assertEquals(0, vm.getStack().size());\n     }\n \n     @Test\n@@ -166,17 +164,15 @@ public void testVMArithmetic() throws RecognitionException, IOException {\n             Assert.assertEquals(2, vm.getStack().pop());\n             Assert.assertEquals(0, vm.getStack().size());\n         }\n-        {\n-            VM vm = new VM(\"FUNCTION {test} { \" + \"#1 \\\"HELLO\\\" + #5 #2 - }\" + \"EXECUTE {test}\");\n+        VM vm = new VM(\"FUNCTION {test} { \" + \"#1 \\\"HELLO\\\" + #5 #2 - }\" + \"EXECUTE {test}\");\n \n-            Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n+        Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n \n-            try {\n-                vm.run(v);\n-                Assert.fail();\n-            } catch (VMException ignored) {\n+        try {\n+            vm.run(v);\n+            Assert.fail();\n+        } catch (VMException ignored) {\n \n-            }\n         }\n     }\n \n@@ -191,40 +187,36 @@ public void testNumNames() throws RecognitionException, IOException {\n             Assert.assertEquals(2, vm.getStack().pop());\n             Assert.assertEquals(0, vm.getStack().size());\n         }\n-        {\n-            VM vm = new VM(\"FUNCTION {test} { \\\"Johnny Foo { and } Mary Bar\\\" num.names$ }\"\n-                    + \"EXECUTE {test}\");\n+        VM vm = new VM(\"FUNCTION {test} { \\\"Johnny Foo { and } Mary Bar\\\" num.names$ }\"\n+                + \"EXECUTE {test}\");\n \n-            Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n-            vm.run(v);\n-            Assert.assertEquals(1, vm.getStack().pop());\n-            Assert.assertEquals(0, vm.getStack().size());\n-        }\n+        Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n+        vm.run(v);\n+        Assert.assertEquals(1, vm.getStack().pop());\n+        Assert.assertEquals(0, vm.getStack().size());\n     }\n \n     @Test\n     public void testVMStringOps1() throws RecognitionException, IOException {\n-        {\n-            VM vm = new VM(\n-                    \"FUNCTION {test} { \\\"H\\\" \\\"allo\\\" * \\\"Johnny\\\" add.period$ \\\"Johnny.\\\" add.period$\"\n-                            + \"\\\"Johnny!\\\" add.period$ \\\"Johnny?\\\" add.period$ \\\"Johnny} }}}\\\" add.period$\"\n-                            + \"\\\"Johnny!}\\\" add.period$ \\\"Johnny?}\\\" add.period$ \\\"Johnny.}\\\" add.period$ }\"\n-                            + \"EXECUTE {test}\"\n-                    );\n+        VM vm = new VM(\n+                \"FUNCTION {test} { \\\"H\\\" \\\"allo\\\" * \\\"Johnny\\\" add.period$ \\\"Johnny.\\\" add.period$\"\n+                        + \"\\\"Johnny!\\\" add.period$ \\\"Johnny?\\\" add.period$ \\\"Johnny} }}}\\\" add.period$\"\n+                        + \"\\\"Johnny!}\\\" add.period$ \\\"Johnny?}\\\" add.period$ \\\"Johnny.}\\\" add.period$ }\"\n+                        + \"EXECUTE {test}\"\n+                );\n \n-            Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n-            vm.run(v);\n-            Assert.assertEquals(\"Johnny.}\", vm.getStack().pop());\n-            Assert.assertEquals(\"Johnny?}\", vm.getStack().pop());\n-            Assert.assertEquals(\"Johnny!}\", vm.getStack().pop());\n-            Assert.assertEquals(\"Johnny.}\", vm.getStack().pop());\n-            Assert.assertEquals(\"Johnny?\", vm.getStack().pop());\n-            Assert.assertEquals(\"Johnny!\", vm.getStack().pop());\n-            Assert.assertEquals(\"Johnny.\", vm.getStack().pop());\n-            Assert.assertEquals(\"Johnny.\", vm.getStack().pop());\n-            Assert.assertEquals(\"Hallo\", vm.getStack().pop());\n-            Assert.assertEquals(0, vm.getStack().size());\n-        }\n+        Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n+        vm.run(v);\n+        Assert.assertEquals(\"Johnny.}\", vm.getStack().pop());\n+        Assert.assertEquals(\"Johnny?}\", vm.getStack().pop());\n+        Assert.assertEquals(\"Johnny!}\", vm.getStack().pop());\n+        Assert.assertEquals(\"Johnny.}\", vm.getStack().pop());\n+        Assert.assertEquals(\"Johnny?\", vm.getStack().pop());\n+        Assert.assertEquals(\"Johnny!\", vm.getStack().pop());\n+        Assert.assertEquals(\"Johnny.\", vm.getStack().pop());\n+        Assert.assertEquals(\"Johnny.\", vm.getStack().pop());\n+        Assert.assertEquals(\"Hallo\", vm.getStack().pop());\n+        Assert.assertEquals(0, vm.getStack().size());\n     }\n \n     @Test\n@@ -363,14 +355,12 @@ public void testVMChrToInt() throws RecognitionException, IOException {\n             Assert.assertEquals(72, vm.getStack().pop());\n             Assert.assertEquals(0, vm.getStack().size());\n         }\n-        {\n-            VM vm = new VM(\"FUNCTION {test} { \\\"H\\\" chr.to.int$ int.to.chr$ }\" + \"EXECUTE {test}\");\n+        VM vm = new VM(\"FUNCTION {test} { \\\"H\\\" chr.to.int$ int.to.chr$ }\" + \"EXECUTE {test}\");\n \n-            Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n-            vm.run(v);\n-            Assert.assertEquals(\"H\", vm.getStack().pop());\n-            Assert.assertEquals(0, vm.getStack().size());\n-        }\n+        Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n+        vm.run(v);\n+        Assert.assertEquals(\"H\", vm.getStack().pop());\n+        Assert.assertEquals(0, vm.getStack().size());\n     }\n \n     @Test\n@@ -520,21 +510,19 @@ public void testFormatName() throws RecognitionException, IOException {\n             Assert.assertEquals(\"de~la Vall{\\\\'e}e~Poussin, C.~L. X.~J?\", vm.getStack().pop());\n             Assert.assertEquals(0, vm.getStack().size());\n         }\n-        {\n-            VM vm = new VM(\"ENTRY  { author }  { }  { label } \"\n-                    + \"FUNCTION {presort} { cite$ 'sort.key$ := } \" + \"ITERATE { presort } \" + \"READ \"\n-                    + \"SORT \" + \"FUNCTION {format}{ author #2 \\\"{vv~}{ll}{, jj}{, f}?\\\" format.name$ }\"\n-                    + \"ITERATE {format}\");\n+        VM vm = new VM(\"ENTRY  { author }  { }  { label } \"\n+                + \"FUNCTION {presort} { cite$ 'sort.key$ := } \" + \"ITERATE { presort } \" + \"READ \"\n+                + \"SORT \" + \"FUNCTION {format}{ author #2 \\\"{vv~}{ll}{, jj}{, f}?\\\" format.name$ }\"\n+                + \"ITERATE {format}\");\n \n-            Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n-            v.add(t1BibtexEntry());\n-            v\n-                    .add(TestVM.bibtexString2BibtexEntry(\"@book{test, author=\\\"Jonathan Meyer and Charles Louis Xavier Joseph de la Vall{\\\\'e}e Poussin\\\"}\"));\n-            vm.run(v);\n-            Assert.assertEquals(\"de~la Vall{\\\\'e}e~Poussin, C.~L. X.~J?\", vm.getStack().pop());\n-            Assert.assertEquals(\"Annabi, H?\", vm.getStack().pop());\n-            Assert.assertEquals(0, vm.getStack().size());\n-        }\n+        Vector<BibtexEntry> v = new Vector<BibtexEntry>();\n+        v.add(t1BibtexEntry());\n+        v\n+                .add(TestVM.bibtexString2BibtexEntry(\"@book{test, author=\\\"Jonathan Meyer and Charles Louis Xavier Joseph de la Vall{\\\\'e}e Poussin\\\"}\"));\n+        vm.run(v);\n+        Assert.assertEquals(\"de~la Vall{\\\\'e}e~Poussin, C.~L. X.~J?\", vm.getStack().pop());\n+        Assert.assertEquals(\"Annabi, H?\", vm.getStack().pop());\n+        Assert.assertEquals(0, vm.getStack().size());\n     }\n \n     @Test, @@ -43,15 +43,13 @@ public String format(String fieldText) {\n             Assert.assertEquals(\"BAff\", f.format(\"f\"));\n         }\n \n-        {\n-            LayoutFormatter f = new CompositeFormat(new AuthorOrgSci(),\n-                    new NoSpaceBetweenAbbreviations());\n-            LayoutFormatter first = new AuthorOrgSci();\n-            LayoutFormatter second = new NoSpaceBetweenAbbreviations();\n+        LayoutFormatter f = new CompositeFormat(new AuthorOrgSci(),\n+                new NoSpaceBetweenAbbreviations());\n+        LayoutFormatter first = new AuthorOrgSci();\n+        LayoutFormatter second = new NoSpaceBetweenAbbreviations();\n \n-            Assert.assertEquals(second.format(first.format(\"John Flynn and Sabine Gartska\")), f.format(\"John Flynn and Sabine Gartska\"));\n-            Assert.assertEquals(second.format(first.format(\"Sa Makridakis and Sa Ca Wheelwright and Va Ea McGee\")), f.format(\"Sa Makridakis and Sa Ca Wheelwright and Va Ea McGee\"));\n-        }\n+        Assert.assertEquals(second.format(first.format(\"John Flynn and Sabine Gartska\")), f.format(\"John Flynn and Sabine Gartska\"));\n+        Assert.assertEquals(second.format(first.format(\"Sa Makridakis and Sa Ca Wheelwright and Va Ea McGee\")), f.format(\"Sa Makridakis and Sa Ca Wheelwright and Va Ea McGee\"));\n     }\n \n }, @@ -123,10 +123,9 @@ public void testFromString() throws Exception {\n             Assert.assertEquals(0, c.size());\n \n         }\n-        { // Error\n-            Collection<BibtexEntry> c = BibtexParser.fromString(\"@@article@@{{{{{{}\");\n-            Assert.assertEquals(null, c);\n-        }\n+        // Error\n+        Collection<BibtexEntry> c = BibtexParser.fromString(\"@@article@@{{{{{{}\");\n+        Assert.assertEquals(null, c);\n \n     }\n , @@ -167,14 +167,12 @@ public void testOnline() throws InterruptedException {\n             Thread.sleep(20000);\n         }\n \n-        {\n-            OAI2Fetcher fetcher = new OAI2Fetcher();\n-            be = fetcher.importOai2Entry(\"0709.3040\");\n-            Assert.assertNotNull(be);\n+        OAI2Fetcher fetcher = new OAI2Fetcher();\n+        be = fetcher.importOai2Entry(\"0709.3040\");\n+        Assert.assertNotNull(be);\n \n-            Assert.assertEquals(\"2007\", be.getField(\"year\"));\n-            Assert.assertEquals(\"#sep#\", be.getField(\"month\"));\n-        }\n+        Assert.assertEquals(\"2007\", be.getField(\"year\"));\n+        Assert.assertEquals(\"#sep#\", be.getField(\"month\"));\n \n     }\n }, @@ -127,37 +127,35 @@ public void testFindPdfInMultiple() throws IOException {\n                     .getAbsolutePath());\n         }\n \n-        {\n-            String[] dirsToSearch = new String[]{root.getAbsolutePath() + \"/pdfs/\",\n-                    root.getAbsolutePath()};\n-            String pdf = UtilFindFiles.findPdf(entry, \"pdf\", dirsToSearch);\n-            AssertUtil.assertEqualPaths(\"sub/HipKro03-sub.pdf\", pdf);\n+        String[] dirsToSearch = new String[]{root.getAbsolutePath() + \"/pdfs/\",\n+                root.getAbsolutePath()};\n+        String pdf = UtilFindFiles.findPdf(entry, \"pdf\", dirsToSearch);\n+        AssertUtil.assertEqualPaths(\"sub/HipKro03-sub.pdf\", pdf);\n \n-            File fullPath = FileUtil.expandFilename(pdf, dirsToSearch);\n-            Assert.assertNotNull(fullPath);\n-            Assert.assertTrue(fullPath.exists());\n-            AssertUtil.assertEqualPaths(root.getAbsolutePath() + \"/pdfs/sub/HipKro03-sub.pdf\", fullPath\n-                    .getAbsolutePath());\n+        File fullPath = FileUtil.expandFilename(pdf, dirsToSearch);\n+        Assert.assertNotNull(fullPath);\n+        Assert.assertTrue(fullPath.exists());\n+        AssertUtil.assertEqualPaths(root.getAbsolutePath() + \"/pdfs/sub/HipKro03-sub.pdf\", fullPath\n+                .getAbsolutePath());\n \n-            String tmp = dirsToSearch[1];\n-            dirsToSearch[1] = dirsToSearch[0];\n-            dirsToSearch[0] = tmp;\n+        String tmp = dirsToSearch[1];\n+        dirsToSearch[1] = dirsToSearch[0];\n+        dirsToSearch[0] = tmp;\n \n-            fullPath = FileUtil.expandFilename(pdf, dirsToSearch);\n-            Assert.assertNotNull(fullPath);\n-            Assert.assertTrue(fullPath.exists());\n-            AssertUtil.assertEqualPaths(root.getAbsolutePath() + \"/pdfs/sub/HipKro03-sub.pdf\", fullPath\n-                    .getAbsolutePath());\n+        fullPath = FileUtil.expandFilename(pdf, dirsToSearch);\n+        Assert.assertNotNull(fullPath);\n+        Assert.assertTrue(fullPath.exists());\n+        AssertUtil.assertEqualPaths(root.getAbsolutePath() + \"/pdfs/sub/HipKro03-sub.pdf\", fullPath\n+                .getAbsolutePath());\n \n-            fullPath = FileUtil.expandFilename(pdf, new String[]{dirsToSearch[0]});\n-            Assert.assertNull(fullPath);\n+        fullPath = FileUtil.expandFilename(pdf, new String[]{dirsToSearch[0]});\n+        Assert.assertNull(fullPath);\n \n-            fullPath = FileUtil.expandFilename(pdf, new String[]{dirsToSearch[1]});\n-            Assert.assertNotNull(fullPath);\n-            Assert.assertTrue(fullPath.exists());\n-            AssertUtil.assertEqualPaths(root.getAbsolutePath() + \"/pdfs/sub/HipKro03-sub.pdf\", fullPath\n-                    .getAbsolutePath());\n-        }\n+        fullPath = FileUtil.expandFilename(pdf, new String[]{dirsToSearch[1]});\n+        Assert.assertNotNull(fullPath);\n+        Assert.assertTrue(fullPath.exists());\n+        AssertUtil.assertEqualPaths(root.getAbsolutePath() + \"/pdfs/sub/HipKro03-sub.pdf\", fullPath\n+                .getAbsolutePath());\n \n     }\n , @@ -157,11 +157,10 @@ public void testSetGetBagListString() throws IOException {\n             Assert.assertTrue(l.get(0).equals(\"Tom DeMarco\"));\n             Assert.assertTrue(l.get(1).equals(\"Tom DeMarco\"));\n         }\n-        { // Removes both\n-            bibtex.removeBagValue(\"author\", \"Tom DeMarco\");\n-            List<String> l = bibtex.getBagList(\"author\");\n-            Assert.assertEquals(0, l.size());\n-        }\n+        // Removes both\n+        bibtex.removeBagValue(\"author\", \"Tom DeMarco\");\n+        List<String> l = bibtex.getBagList(\"author\");\n+        Assert.assertEquals(0, l.size());\n     }\n \n     @Test\n@@ -200,11 +199,10 @@ public void testGetSequenceListString() throws IOException {\n             Assert.assertTrue(l.get(0).equals(\"Kent Beck\"));\n             Assert.assertTrue(l.get(1).equals(\"Kent Beck\"));\n         }\n-        { // Remvoes all\n-            bibtex.removeSequenceValue(\"author\", \"Kent Beck\");\n-            List<String> l = bibtex.getSequenceList(\"author\");\n-            Assert.assertEquals(0, l.size());\n-        }\n+        // Remvoes all\n+        bibtex.removeSequenceValue(\"author\", \"Kent Beck\");\n+        List<String> l = bibtex.getSequenceList(\"author\");\n+        Assert.assertEquals(0, l.size());\n     }\n \n     @Test, @@ -351,28 +351,27 @@ public void testPrivacyFilter() throws IOException, TransformerException {\n \n             Assert.assertEquals(expectedFields, x.getAllFields());\n         }\n-        { // First set:\n-            prefs.putBoolean(\"useXmpPrivacyFilter\", true);\n-            prefs\n-                    .putStringArray(\n-                            JabRefPreferences.XMP_PRIVACY_FILTERS,\n-                            new String[] {\"author;title;note;booktitle;year;owner;timestamp\"});\n+        // First set:\n+        prefs.putBoolean(\"useXmpPrivacyFilter\", true);\n+        prefs\n+                .putStringArray(\n+                        JabRefPreferences.XMP_PRIVACY_FILTERS,\n+                        new String[] {\"author;title;note;booktitle;year;owner;timestamp\"});\n \n-            BibtexEntry e = t1BibtexEntry();\n+        BibtexEntry e = t1BibtexEntry();\n \n-            XMPUtil.writeXMP(pdfFile, e, null);\n+        XMPUtil.writeXMP(pdfFile, e, null);\n \n-            List<BibtexEntry> l = XMPUtil.readXMP(pdfFile.getAbsoluteFile());\n-            Assert.assertEquals(1, l.size());\n-            BibtexEntry x = l.get(0);\n-            Set<String> ts = x.getAllFields();\n-            Assert.assertEquals(8, ts.size());\n+        List<BibtexEntry> l = XMPUtil.readXMP(pdfFile.getAbsoluteFile());\n+        Assert.assertEquals(1, l.size());\n+        BibtexEntry x = l.get(0);\n+        Set<String> ts = x.getAllFields();\n+        Assert.assertEquals(8, ts.size());\n \n-            ts.contains(\"bibtextype\");\n-            ts.contains(\"bibtexkey\");\n-            ts.contains(\"year\");\n-            ts.contains(\"url\");\n-        }\n+        ts.contains(\"bibtextype\");\n+        ts.contains(\"bibtexkey\");\n+        ts.contains(\"year\");\n+        ts.contains(\"url\");\n \n     }\n \n@@ -538,25 +537,23 @@ public void testReadWriteXMP() throws Exception {\n     @Test\n     public void testNewlineHandling() throws Exception {\n \n-        {\n-            String bibtex = \"<bibtex:title>\\nHallo\\nWorld \\nthis \\n is\\n\\nnot \\n\\nan \\n\\n exercise \\n \\n.\\n \\n\\n</bibtex:title>\\n\"\n-                    + \"<bibtex:tabs>\\nHallo\\tWorld \\tthis \\t is\\t\\tnot \\t\\tan \\t\\n exercise \\t \\n.\\t \\n\\t</bibtex:tabs>\\n\"\n-                    + \"<bibtex:abstract>\\n\\nAbstract preserve\\n\\t Whitespace\\n\\n</bibtex:abstract>\";\n+        String bibtex = \"<bibtex:title>\\nHallo\\nWorld \\nthis \\n is\\n\\nnot \\n\\nan \\n\\n exercise \\n \\n.\\n \\n\\n</bibtex:title>\\n\"\n+                + \"<bibtex:tabs>\\nHallo\\tWorld \\tthis \\t is\\t\\tnot \\t\\tan \\t\\n exercise \\t \\n.\\t \\n\\t</bibtex:tabs>\\n\"\n+                + \"<bibtex:abstract>\\n\\nAbstract preserve\\n\\t Whitespace\\n\\n</bibtex:abstract>\";\n \n-            writeManually(pdfFile, XMPUtilTest.bibtexXPacket(XMPUtilTest.bibtexDescription(bibtex)));\n+        writeManually(pdfFile, XMPUtilTest.bibtexXPacket(XMPUtilTest.bibtexDescription(bibtex)));\n \n-            List<BibtexEntry> l = XMPUtil.readXMP(pdfFile.getAbsoluteFile());\n-            Assert.assertEquals(1, l.size());\n-            BibtexEntry e = l.get(0);\n+        List<BibtexEntry> l = XMPUtil.readXMP(pdfFile.getAbsoluteFile());\n+        Assert.assertEquals(1, l.size());\n+        BibtexEntry e = l.get(0);\n \n-            Assert.assertNotNull(e);\n-            Assert.assertEquals(\"Hallo World this is not an exercise .\", e\n-                    .getField(\"title\"));\n-            Assert.assertEquals(\"Hallo World this is not an exercise .\", e\n-                    .getField(\"tabs\"));\n-            Assert.assertEquals(\"\\n\\nAbstract preserve\\n\\t Whitespace\\n\\n\", e\n-                    .getField(\"abstract\"));\n-        }\n+        Assert.assertNotNull(e);\n+        Assert.assertEquals(\"Hallo World this is not an exercise .\", e\n+                .getField(\"title\"));\n+        Assert.assertEquals(\"Hallo World this is not an exercise .\", e\n+                .getField(\"tabs\"));\n+        Assert.assertEquals(\"\\n\\nAbstract preserve\\n\\t Whitespace\\n\\n\", e\n+                .getField(\"abstract\"));\n     }\n \n     /**\n@@ -735,92 +732,91 @@ public void testSimpleUpdate() throws Exception {\n             }\n         }\n \n-        { // Now alter the Bibtex entry, write it and do all the checks again\n-            BibtexEntry toSet = t1BibtexEntry();\n-            toSet.setField(\"author\", \"Pokemon!\");\n-\n-            XMPUtil.writeXMP(pdfFile, toSet, null);\n-\n-            List<BibtexEntry> l = XMPUtil.readXMP(pdfFile.getAbsoluteFile());\n-            Assert.assertEquals(1, l.size());\n-            BibtexEntry e = l.get(0);\n-\n-            assertEqualsBibtexEntry(toSet, e);\n+        // Now alter the Bibtex entry, write it and do all the checks again\n+        BibtexEntry toSet = t1BibtexEntry();\n+        toSet.setField(\"author\", \"Pokemon!\");\n \n-            // This is what we really want to test: Is the rest of the\n-            // descriptions still there?\n+        XMPUtil.writeXMP(pdfFile, toSet, null);\n \n-            PDDocument document = null;\n-            try {\n-                document = PDDocument.load(pdfFile.getAbsoluteFile());\n-                if (document.isEncrypted()) {\n-                    throw new IOException(\n-                            \"Error: Cannot read metadata from encrypted document.\");\n-                }\n-                PDDocumentCatalog catalog = document.getDocumentCatalog();\n-                PDMetadata metaRaw = catalog.getMetadata();\n+        List<BibtexEntry> l = XMPUtil.readXMP(pdfFile.getAbsoluteFile());\n+        Assert.assertEquals(1, l.size());\n+        BibtexEntry e = l.get(0);\n \n-                XMPMetadata meta;\n-                if (metaRaw != null) {\n-                    meta = new XMPMetadata(XMLUtil.parse(metaRaw\n-                            .createInputStream()));\n-                } else {\n-                    meta = new XMPMetadata();\n-                }\n-                meta.addXMLNSMapping(XMPSchemaBibtex.NAMESPACE,\n-                        XMPSchemaBibtex.class);\n+        assertEqualsBibtexEntry(toSet, e);\n \n-                List<XMPSchema> schemas = meta.getSchemas();\n+        // This is what we really want to test: Is the rest of the\n+        // descriptions still there?\n \n-                Assert.assertEquals(4, schemas.size());\n+        PDDocument document = null;\n+        try {\n+            document = PDDocument.load(pdfFile.getAbsoluteFile());\n+            if (document.isEncrypted()) {\n+                throw new IOException(\n+                        \"Error: Cannot read metadata from encrypted document.\");\n+            }\n+            PDDocumentCatalog catalog = document.getDocumentCatalog();\n+            PDMetadata metaRaw = catalog.getMetadata();\n \n-                schemas = meta\n-                        .getSchemasByNamespaceURI(XMPSchemaBibtex.NAMESPACE);\n-                Assert.assertEquals(1, schemas.size());\n+            XMPMetadata meta;\n+            if (metaRaw != null) {\n+                meta = new XMPMetadata(XMLUtil.parse(metaRaw\n+                        .createInputStream()));\n+            } else {\n+                meta = new XMPMetadata();\n+            }\n+            meta.addXMLNSMapping(XMPSchemaBibtex.NAMESPACE,\n+                    XMPSchemaBibtex.class);\n \n-                schemas = meta\n-                        .getSchemasByNamespaceURI(XMPSchemaDublinCore.NAMESPACE);\n-                Assert.assertEquals(1, schemas.size());\n-                XMPSchemaDublinCore dc = (XMPSchemaDublinCore) schemas.get(0);\n-                Assert.assertEquals(\"application/pdf\", dc.getFormat());\n+            List<XMPSchema> schemas = meta.getSchemas();\n \n-                schemas = meta\n-                        .getSchemasByNamespaceURI(XMPSchemaBasic.NAMESPACE);\n-                Assert.assertEquals(1, schemas.size());\n-                XMPSchemaBasic bs = (XMPSchemaBasic) schemas.get(0);\n-                Assert.assertEquals(\"Acrobat PDFMaker 7.0.7\", bs.getCreatorTool());\n+            Assert.assertEquals(4, schemas.size());\n \n-                Calendar c = Calendar.getInstance();\n-                c.clear();\n-                c.set(Calendar.YEAR, 2006);\n-                c.set(Calendar.MONTH, 7);\n-                c.set(Calendar.DATE, 7);\n-                c.set(Calendar.HOUR, 14);\n-                c.set(Calendar.MINUTE, 44);\n-                c.set(Calendar.SECOND, 24);\n-                c.setTimeZone(TimeZone.getTimeZone(\"GMT+2\"));\n-\n-                Calendar other = bs.getCreateDate();\n+            schemas = meta\n+                    .getSchemasByNamespaceURI(XMPSchemaBibtex.NAMESPACE);\n+            Assert.assertEquals(1, schemas.size());\n \n-                Assert.assertEquals(c.get(Calendar.YEAR), other.get(Calendar.YEAR));\n-                Assert.assertEquals(c.get(Calendar.MONTH), other.get(Calendar.MONTH));\n-                Assert.assertEquals(c.get(Calendar.DATE), other.get(Calendar.DATE));\n-                Assert.assertEquals(c.get(Calendar.HOUR), other.get(Calendar.HOUR));\n-                Assert.assertEquals(c.get(Calendar.MINUTE), other.get(Calendar.MINUTE));\n-                Assert.assertEquals(c.get(Calendar.SECOND), other.get(Calendar.SECOND));\n-                Assert.assertTrue(c.getTimeZone().hasSameRules(other.getTimeZone()));\n+            schemas = meta\n+                    .getSchemasByNamespaceURI(XMPSchemaDublinCore.NAMESPACE);\n+            Assert.assertEquals(1, schemas.size());\n+            XMPSchemaDublinCore dc = (XMPSchemaDublinCore) schemas.get(0);\n+            Assert.assertEquals(\"application/pdf\", dc.getFormat());\n \n-                schemas = meta\n-                        .getSchemasByNamespaceURI(XMPSchemaMediaManagement.NAMESPACE);\n-                Assert.assertEquals(1, schemas.size());\n-                XMPSchemaMediaManagement mm = (XMPSchemaMediaManagement) schemas\n-                        .get(0);\n-                Assert.assertEquals(\"17\", mm.getSequenceList(\"xapMM:VersionID\").get(0));\n+            schemas = meta\n+                    .getSchemasByNamespaceURI(XMPSchemaBasic.NAMESPACE);\n+            Assert.assertEquals(1, schemas.size());\n+            XMPSchemaBasic bs = (XMPSchemaBasic) schemas.get(0);\n+            Assert.assertEquals(\"Acrobat PDFMaker 7.0.7\", bs.getCreatorTool());\n+\n+            Calendar c = Calendar.getInstance();\n+            c.clear();\n+            c.set(Calendar.YEAR, 2006);\n+            c.set(Calendar.MONTH, 7);\n+            c.set(Calendar.DATE, 7);\n+            c.set(Calendar.HOUR, 14);\n+            c.set(Calendar.MINUTE, 44);\n+            c.set(Calendar.SECOND, 24);\n+            c.setTimeZone(TimeZone.getTimeZone(\"GMT+2\"));\n+\n+            Calendar other = bs.getCreateDate();\n+\n+            Assert.assertEquals(c.get(Calendar.YEAR), other.get(Calendar.YEAR));\n+            Assert.assertEquals(c.get(Calendar.MONTH), other.get(Calendar.MONTH));\n+            Assert.assertEquals(c.get(Calendar.DATE), other.get(Calendar.DATE));\n+            Assert.assertEquals(c.get(Calendar.HOUR), other.get(Calendar.HOUR));\n+            Assert.assertEquals(c.get(Calendar.MINUTE), other.get(Calendar.MINUTE));\n+            Assert.assertEquals(c.get(Calendar.SECOND), other.get(Calendar.SECOND));\n+            Assert.assertTrue(c.getTimeZone().hasSameRules(other.getTimeZone()));\n+\n+            schemas = meta\n+                    .getSchemasByNamespaceURI(XMPSchemaMediaManagement.NAMESPACE);\n+            Assert.assertEquals(1, schemas.size());\n+            XMPSchemaMediaManagement mm = (XMPSchemaMediaManagement) schemas\n+                    .get(0);\n+            Assert.assertEquals(\"17\", mm.getSequenceList(\"xapMM:VersionID\").get(0));\n \n-            } finally {\n-                if (document != null) {\n-                    document.close();\n-                }\n+        } finally {\n+            if (document != null) {\n+                document.close();\n             }\n         }\n     }\n@@ -1288,44 +1284,42 @@ public void testCommandLineSinglePdf() throws Exception {\n \n             assertEqualsBibtexEntry(e, x);\n         }\n-        {\n-            // Write XMP to file\n-            BibtexEntry e = t1BibtexEntry();\n+        // Write XMP to file\n+        BibtexEntry e = t1BibtexEntry();\n \n-            XMPUtil.writeXMP(pdfFile, e, null);\n+        XMPUtil.writeXMP(pdfFile, e, null);\n \n-            ByteArrayOutputStream s = new ByteArrayOutputStream();\n-            PrintStream oldOut = System.out;\n-            System.setOut(new PrintStream(s));\n-            XMPUtil.main(new String[] {\"-x\", pdfFile.getAbsolutePath()});\n-            System.setOut(oldOut);\n-            s.close();\n-            String xmp = s.toString();\n+        ByteArrayOutputStream s = new ByteArrayOutputStream();\n+        PrintStream oldOut = System.out;\n+        System.setOut(new PrintStream(s));\n+        XMPUtil.main(new String[] {\"-x\", pdfFile.getAbsolutePath()});\n+        System.setOut(oldOut);\n+        s.close();\n+        String xmp = s.toString();\n \n             /* Test minimal syntaxical completeness */\n-            Assert.assertTrue(xmp.indexOf(\"xpacket\") > 0);\n-            Assert.assertTrue(xmp.indexOf(\"adobe:ns:meta\") > 0);\n-            Assert.assertTrue((xmp\n-                    .indexOf(\"<bibtex:bibtexkey>canh05</bibtex:bibtexkey>\") > 0)\n-                    || (xmp.indexOf(\"bibtex:bibtexkey=\") > 0));\n-            Assert.assertTrue(xmp.indexOf(\"<rdf:li>K. Crowston</rdf:li>\") > 0);\n-            Assert.assertTrue((xmp.indexOf(\"id='W5M0MpCehiHzreSzNTczkc9d'?>\") > 0)\n-                    || (xmp.indexOf(\"id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\") > 0));\n-            Assert.assertTrue((xmp\n-                    .indexOf(\"xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'\") > 0)\n-                    || (xmp\n-                    .indexOf(\"xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\"\") > 0));\n-            Assert.assertTrue(xmp.indexOf(\"<rdf:Description\") > 0);\n-            Assert.assertTrue((xmp.indexOf(\"<?xpacket end='w'?>\") > 0)\n-                    || (xmp.indexOf(\"<?xpacket end=\\\"w\\\"?>\") > 0));\n+        Assert.assertTrue(xmp.indexOf(\"xpacket\") > 0);\n+        Assert.assertTrue(xmp.indexOf(\"adobe:ns:meta\") > 0);\n+        Assert.assertTrue((xmp\n+                .indexOf(\"<bibtex:bibtexkey>canh05</bibtex:bibtexkey>\") > 0)\n+                || (xmp.indexOf(\"bibtex:bibtexkey=\") > 0));\n+        Assert.assertTrue(xmp.indexOf(\"<rdf:li>K. Crowston</rdf:li>\") > 0);\n+        Assert.assertTrue((xmp.indexOf(\"id='W5M0MpCehiHzreSzNTczkc9d'?>\") > 0)\n+                || (xmp.indexOf(\"id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\") > 0));\n+        Assert.assertTrue((xmp\n+                .indexOf(\"xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'\") > 0)\n+                || (xmp\n+                .indexOf(\"xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\"\") > 0));\n+        Assert.assertTrue(xmp.indexOf(\"<rdf:Description\") > 0);\n+        Assert.assertTrue((xmp.indexOf(\"<?xpacket end='w'?>\") > 0)\n+                || (xmp.indexOf(\"<?xpacket end=\\\"w\\\"?>\") > 0));\n \n             /* Test contents of string */\n-            writeManually(pdfFile, xmp);\n-            List<BibtexEntry> l = XMPUtil.readXMP(pdfFile);\n-            Assert.assertEquals(1, l.size());\n+        writeManually(pdfFile, xmp);\n+        List<BibtexEntry> l = XMPUtil.readXMP(pdfFile);\n+        Assert.assertEquals(1, l.size());\n \n-            assertEqualsBibtexEntry(t1BibtexEntry(), l.get(0));\n-        }\n+        assertEqualsBibtexEntry(t1BibtexEntry(), l.get(0));\n     }\n \n     /**\n@@ -1363,23 +1357,22 @@ public void testCommandLineByKey() throws Exception {\n                 Assert.assertEquals(1, l.size());\n                 assertEqualsBibtexEntry(t1BibtexEntry(), l.get(0));\n             }\n-            { // Now try OezbekC06\n-                ByteArrayOutputStream s = new ByteArrayOutputStream();\n-                PrintStream oldOut = System.out;\n-                System.setOut(new PrintStream(s));\n-                try {\n-                    XMPUtil.main(new String[] {\"OezbekC06\",\n-                            tempBib.getAbsolutePath(), pdfFile.getAbsolutePath()});\n-                } finally {\n-                    System.setOut(oldOut);\n-                    s.close();\n-                }\n-\n-                // PDF should be annotated:\n-                List<BibtexEntry> l = XMPUtil.readXMP(pdfFile);\n-                Assert.assertEquals(1, l.size());\n-                assertEqualsBibtexEntry(t2BibtexEntry(), l.get(0));\n+            // Now try OezbekC06\n+            ByteArrayOutputStream s = new ByteArrayOutputStream();\n+            PrintStream oldOut = System.out;\n+            System.setOut(new PrintStream(s));\n+            try {\n+                XMPUtil.main(new String[] {\"OezbekC06\",\n+                        tempBib.getAbsolutePath(), pdfFile.getAbsolutePath()});\n+            } finally {\n+                System.setOut(oldOut);\n+                s.close();\n             }\n+\n+            // PDF should be annotated:\n+            List<BibtexEntry> l = XMPUtil.readXMP(pdfFile);\n+            Assert.assertEquals(1, l.size());\n+            assertEqualsBibtexEntry(t2BibtexEntry(), l.get(0));\n         } finally {\n             if (fileWriter != null) {\n                 fileWriter.close();, ", 667, 721, "\"modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, \"", 1388], ["stefan-kolb", "Add myself to the list of contributors", "07/29/15, 05:30:11 PM", "stefan-kolb", "120eae8d1ad95c69edef8345fec2269406ce55e4", ["src/main/resources/help/About.html"], "@@ -75,6 +75,7 @@ <h2>Contributions from:</h2>\n         Philip Johnson,\n         Bernd Kalbfuss,\n         Martin K&auml;hmer,\n+        Stefan Kolb,\n         Ervin Kolenovic,\n         Krzysztof A. Ko&#347;ciuszkiewicz,\n         Christian Kopf,, ", 1, 0, "\"modified, \"", 1], ["stefan-kolb", "Use GPL2 as current license", "07/29/15, 06:14:40 PM", "stefan-kolb", "f54dcec3a86d32ab642b8b97fc7c7ea73478a250", ["LICENSE", "README.md", "build.xml", "gpl3.txt", "src/main/resources/windows/nsis/setup.nsi"], "None, @@ -138,6 +138,7 @@ JabRef is free software: you can redistribute it and/or modify it under the\n terms of the GNU General Public License as published by the Free Software\n Foundation, either version 2 of the License, or (at your option) any later\n version.\n-See the enclosed text files [gpl2.txt](gpl2.txt) and [gpl3.txt](gpl3.txt) for full details.\n+See the [LICENSE](LICENSE) for full details.\n \n-JabRef also uses libraries distributed by other parties; see the About box for details.\n+JabRef also uses libraries distributed by other parties.\n+See [external libraries](external-libraries.txt) for details., @@ -168,8 +168,7 @@\n \t\t\t\t<include name=\"plugins/**\" />\n \t\t\t</fileset>\n \t\t\t<fileset dir=\"${txt.dir}\">\n-\t\t\t\t<include name=\"gpl2.txt\" />\n-\t\t\t\t<include name=\"gpl3.txt\" />\n+\t\t\t\t<include name=\"LICENSE\" />\n \t\t\t\t<include name=\"README.md\" />\n \t\t\t</fileset>\n \t\t\t<manifest>\n@@ -444,10 +443,8 @@ version=${jabref.version}</echo>\n \n \t\t<copy todir=\"${win.installer.dir}/dist\">\n \t\t\t<fileset dir=\"${txt.dir}\">\n-\t\t\t\t<include name=\"gpl2.txt\" />\n-\t\t\t\t<include name=\"gpl3.txt\" />\n-\t\t\t\t<include name=\"lesser.txt\" />\n-\t\t\t\t<include name=\"README\" />\n+\t\t\t\t<include name=\"LICENSE\" />\n+\t\t\t\t<include name=\"README.md\" />\n \t\t\t</fileset>\n \t\t</copy>\n , @@ -1,674 +0,0 @@\n-                    GNU GENERAL PUBLIC LICENSE\n-                       Version 3, 29 June 2007\n-\n- Copyright (C) 2007 Free Software Foundation, Inc. <http://fsf.org/>\n- Everyone is permitted to copy and distribute verbatim copies\n- of this license document, but changing it is not allowed.\n-\n-                            Preamble\n-\n-  The GNU General Public License is a free, copyleft license for\n-software and other kinds of works.\n-\n-  The licenses for most software and other practical works are designed\n-to take away your freedom to share and change the works.  By contrast,\n-the GNU General Public License is intended to guarantee your freedom to\n-share and change all versions of a program--to make sure it remains free\n-software for all its users.  We, the Free Software Foundation, use the\n-GNU General Public License for most of our software; it applies also to\n-any other work released this way by its authors.  You can apply it to\n-your programs, too.\n-\n-  When we speak of free software, we are referring to freedom, not\n-price.  Our General Public Licenses are designed to make sure that you\n-have the freedom to distribute copies of free software (and charge for\n-them if you wish), that you receive source code or can get it if you\n-want it, that you can change the software or use pieces of it in new\n-free programs, and that you know you can do these things.\n-\n-  To protect your rights, we need to prevent others from denying you\n-these rights or asking you to surrender the rights.  Therefore, you have\n-certain responsibilities if you distribute copies of the software, or if\n-you modify it: responsibilities to respect the freedom of others.\n-\n-  For example, if you distribute copies of such a program, whether\n-gratis or for a fee, you must pass on to the recipients the same\n-freedoms that you received.  You must make sure that they, too, receive\n-or can get the source code.  And you must show them these terms so they\n-know their rights.\n-\n-  Developers that use the GNU GPL protect your rights with two steps:\n-(1) assert copyright on the software, and (2) offer you this License\n-giving you legal permission to copy, distribute and/or modify it.\n-\n-  For the developers' and authors' protection, the GPL clearly explains\n-that there is no warranty for this free software.  For both users' and\n-authors' sake, the GPL requires that modified versions be marked as\n-changed, so that their problems will not be attributed erroneously to\n-authors of previous versions.\n-\n-  Some devices are designed to deny users access to install or run\n-modified versions of the software inside them, although the manufacturer\n-can do so.  This is fundamentally incompatible with the aim of\n-protecting users' freedom to change the software.  The systematic\n-pattern of such abuse occurs in the area of products for individuals to\n-use, which is precisely where it is most unacceptable.  Therefore, we\n-have designed this version of the GPL to prohibit the practice for those\n-products.  If such problems arise substantially in other domains, we\n-stand ready to extend this provision to those domains in future versions\n-of the GPL, as needed to protect the freedom of users.\n-\n-  Finally, every program is threatened constantly by software patents.\n-States should not allow patents to restrict development and use of\n-software on general-purpose computers, but in those that do, we wish to\n-avoid the special danger that patents applied to a free program could\n-make it effectively proprietary.  To prevent this, the GPL assures that\n-patents cannot be used to render the program non-free.\n-\n-  The precise terms and conditions for copying, distribution and\n-modification follow.\n-\n-                       TERMS AND CONDITIONS\n-\n-  0. Definitions.\n-\n-  \"This License\" refers to version 3 of the GNU General Public License.\n-\n-  \"Copyright\" also means copyright-like laws that apply to other kinds of\n-works, such as semiconductor masks.\n-\n-  \"The Program\" refers to any copyrightable work licensed under this\n-License.  Each licensee is addressed as \"you\".  \"Licensees\" and\n-\"recipients\" may be individuals or organizations.\n-\n-  To \"modify\" a work means to copy from or adapt all or part of the work\n-in a fashion requiring copyright permission, other than the making of an\n-exact copy.  The resulting work is called a \"modified version\" of the\n-earlier work or a work \"based on\" the earlier work.\n-\n-  A \"covered work\" means either the unmodified Program or a work based\n-on the Program.\n-\n-  To \"propagate\" a work means to do anything with it that, without\n-permission, would make you directly or secondarily liable for\n-infringement under applicable copyright law, except executing it on a\n-computer or modifying a private copy.  Propagation includes copying,\n-distribution (with or without modification), making available to the\n-public, and in some countries other activities as well.\n-\n-  To \"convey\" a work means any kind of propagation that enables other\n-parties to make or receive copies.  Mere interaction with a user through\n-a computer network, with no transfer of a copy, is not conveying.\n-\n-  An interactive user interface displays \"Appropriate Legal Notices\"\n-to the extent that it includes a convenient and prominently visible\n-feature that (1) displays an appropriate copyright notice, and (2)\n-tells the user that there is no warranty for the work (except to the\n-extent that warranties are provided), that licensees may convey the\n-work under this License, and how to view a copy of this License.  If\n-the interface presents a list of user commands or options, such as a\n-menu, a prominent item in the list meets this criterion.\n-\n-  1. Source Code.\n-\n-  The \"source code\" for a work means the preferred form of the work\n-for making modifications to it.  \"Object code\" means any non-source\n-form of a work.\n-\n-  A \"Standard Interface\" means an interface that either is an official\n-standard defined by a recognized standards body, or, in the case of\n-interfaces specified for a particular programming language, one that\n-is widely used among developers working in that language.\n-\n-  The \"System Libraries\" of an executable work include anything, other\n-than the work as a whole, that (a) is included in the normal form of\n-packaging a Major Component, but which is not part of that Major\n-Component, and (b) serves only to enable use of the work with that\n-Major Component, or to implement a Standard Interface for which an\n-implementation is available to the public in source code form.  A\n-\"Major Component\", in this context, means a major essential component\n-(kernel, window system, and so on) of the specific operating system\n-(if any) on which the executable work runs, or a compiler used to\n-produce the work, or an object code interpreter used to run it.\n-\n-  The \"Corresponding Source\" for a work in object code form means all\n-the source code needed to generate, install, and (for an executable\n-work) run the object code and to modify the work, including scripts to\n-control those activities.  However, it does not include the work's\n-System Libraries, or general-purpose tools or generally available free\n-programs which are used unmodified in performing those activities but\n-which are not part of the work.  For example, Corresponding Source\n-includes interface definition files associated with source files for\n-the work, and the source code for shared libraries and dynamically\n-linked subprograms that the work is specifically designed to require,\n-such as by intimate data communication or control flow between those\n-subprograms and other parts of the work.\n-\n-  The Corresponding Source need not include anything that users\n-can regenerate automatically from other parts of the Corresponding\n-Source.\n-\n-  The Corresponding Source for a work in source code form is that\n-same work.\n-\n-  2. Basic Permissions.\n-\n-  All rights granted under this License are granted for the term of\n-copyright on the Program, and are irrevocable provided the stated\n-conditions are met.  This License explicitly affirms your unlimited\n-permission to run the unmodified Program.  The output from running a\n-covered work is covered by this License only if the output, given its\n-content, constitutes a covered work.  This License acknowledges your\n-rights of fair use or other equivalent, as provided by copyright law.\n-\n-  You may make, run and propagate covered works that you do not\n-convey, without conditions so long as your license otherwise remains\n-in force.  You may convey covered works to others for the sole purpose\n-of having them make modifications exclusively for you, or provide you\n-with facilities for running those works, provided that you comply with\n-the terms of this License in conveying all material for which you do\n-not control copyright.  Those thus making or running the covered works\n-for you must do so exclusively on your behalf, under your direction\n-and control, on terms that prohibit them from making any copies of\n-your copyrighted material outside their relationship with you.\n-\n-  Conveying under any other circumstances is permitted solely under\n-the conditions stated below.  Sublicensing is not allowed; section 10\n-makes it unnecessary.\n-\n-  3. Protecting Users' Legal Rights From Anti-Circumvention Law.\n-\n-  No covered work shall be deemed part of an effective technological\n-measure under any applicable law fulfilling obligations under article\n-11 of the WIPO copyright treaty adopted on 20 December 1996, or\n-similar laws prohibiting or restricting circumvention of such\n-measures.\n-\n-  When you convey a covered work, you waive any legal power to forbid\n-circumvention of technological measures to the extent such circumvention\n-is effected by exercising rights under this License with respect to\n-the covered work, and you disclaim any intention to limit operation or\n-modification of the work as a means of enforcing, against the work's\n-users, your or third parties' legal rights to forbid circumvention of\n-technological measures.\n-\n-  4. Conveying Verbatim Copies.\n-\n-  You may convey verbatim copies of the Program's source code as you\n-receive it, in any medium, provided that you conspicuously and\n-appropriately publish on each copy an appropriate copyright notice;\n-keep intact all notices stating that this License and any\n-non-permissive terms added in accord with section 7 apply to the code;\n-keep intact all notices of the absence of any warranty; and give all\n-recipients a copy of this License along with the Program.\n-\n-  You may charge any price or no price for each copy that you convey,\n-and you may offer support or warranty protection for a fee.\n-\n-  5. Conveying Modified Source Versions.\n-\n-  You may convey a work based on the Program, or the modifications to\n-produce it from the Program, in the form of source code under the\n-terms of section 4, provided that you also meet all of these conditions:\n-\n-    a) The work must carry prominent notices stating that you modified\n-    it, and giving a relevant date.\n-\n-    b) The work must carry prominent notices stating that it is\n-    released under this License and any conditions added under section\n-    7.  This requirement modifies the requirement in section 4 to\n-    \"keep intact all notices\".\n-\n-    c) You must license the entire work, as a whole, under this\n-    License to anyone who comes into possession of a copy.  This\n-    License will therefore apply, along with any applicable section 7\n-    additional terms, to the whole of the work, and all its parts,\n-    regardless of how they are packaged.  This License gives no\n-    permission to license the work in any other way, but it does not\n-    invalidate such permission if you have separately received it.\n-\n-    d) If the work has interactive user interfaces, each must display\n-    Appropriate Legal Notices; however, if the Program has interactive\n-    interfaces that do not display Appropriate Legal Notices, your\n-    work need not make them do so.\n-\n-  A compilation of a covered work with other separate and independent\n-works, which are not by their nature extensions of the covered work,\n-and which are not combined with it such as to form a larger program,\n-in or on a volume of a storage or distribution medium, is called an\n-\"aggregate\" if the compilation and its resulting copyright are not\n-used to limit the access or legal rights of the compilation's users\n-beyond what the individual works permit.  Inclusion of a covered work\n-in an aggregate does not cause this License to apply to the other\n-parts of the aggregate.\n-\n-  6. Conveying Non-Source Forms.\n-\n-  You may convey a covered work in object code form under the terms\n-of sections 4 and 5, provided that you also convey the\n-machine-readable Corresponding Source under the terms of this License,\n-in one of these ways:\n-\n-    a) Convey the object code in, or embodied in, a physical product\n-    (including a physical distribution medium), accompanied by the\n-    Corresponding Source fixed on a durable physical medium\n-    customarily used for software interchange.\n-\n-    b) Convey the object code in, or embodied in, a physical product\n-    (including a physical distribution medium), accompanied by a\n-    written offer, valid for at least three years and valid for as\n-    long as you offer spare parts or customer support for that product\n-    model, to give anyone who possesses the object code either (1) a\n-    copy of the Corresponding Source for all the software in the\n-    product that is covered by this License, on a durable physical\n-    medium customarily used for software interchange, for a price no\n-    more than your reasonable cost of physically performing this\n-    conveying of source, or (2) access to copy the\n-    Corresponding Source from a network server at no charge.\n-\n-    c) Convey individual copies of the object code with a copy of the\n-    written offer to provide the Corresponding Source.  This\n-    alternative is allowed only occasionally and noncommercially, and\n-    only if you received the object code with such an offer, in accord\n-    with subsection 6b.\n-\n-    d) Convey the object code by offering access from a designated\n-    place (gratis or for a charge), and offer equivalent access to the\n-    Corresponding Source in the same way through the same place at no\n-    further charge.  You need not require recipients to copy the\n-    Corresponding Source along with the object code.  If the place to\n-    copy the object code is a network server, the Corresponding Source\n-    may be on a different server (operated by you or a third party)\n-    that supports equivalent copying facilities, provided you maintain\n-    clear directions next to the object code saying where to find the\n-    Corresponding Source.  Regardless of what server hosts the\n-    Corresponding Source, you remain obligated to ensure that it is\n-    available for as long as needed to satisfy these requirements.\n-\n-    e) Convey the object code using peer-to-peer transmission, provided\n-    you inform other peers where the object code and Corresponding\n-    Source of the work are being offered to the general public at no\n-    charge under subsection 6d.\n-\n-  A separable portion of the object code, whose source code is excluded\n-from the Corresponding Source as a System Library, need not be\n-included in conveying the object code work.\n-\n-  A \"User Product\" is either (1) a \"consumer product\", which means any\n-tangible personal property which is normally used for personal, family,\n-or household purposes, or (2) anything designed or sold for incorporation\n-into a dwelling.  In determining whether a product is a consumer product,\n-doubtful cases shall be resolved in favor of coverage.  For a particular\n-product received by a particular user, \"normally used\" refers to a\n-typical or common use of that class of product, regardless of the status\n-of the particular user or of the way in which the particular user\n-actually uses, or expects or is expected to use, the product.  A product\n-is a consumer product regardless of whether the product has substantial\n-commercial, industrial or non-consumer uses, unless such uses represent\n-the only significant mode of use of the product.\n-\n-  \"Installation Information\" for a User Product means any methods,\n-procedures, authorization keys, or other information required to install\n-and execute modified versions of a covered work in that User Product from\n-a modified version of its Corresponding Source.  The information must\n-suffice to ensure that the continued functioning of the modified object\n-code is in no case prevented or interfered with solely because\n-modification has been made.\n-\n-  If you convey an object code work under this section in, or with, or\n-specifically for use in, a User Product, and the conveying occurs as\n-part of a transaction in which the right of possession and use of the\n-User Product is transferred to the recipient in perpetuity or for a\n-fixed term (regardless of how the transaction is characterized), the\n-Corresponding Source conveyed under this section must be accompanied\n-by the Installation Information.  But this requirement does not apply\n-if neither you nor any third party retains the ability to install\n-modified object code on the User Product (for example, the work has\n-been installed in ROM).\n-\n-  The requirement to provide Installation Information does not include a\n-requirement to continue to provide support service, warranty, or updates\n-for a work that has been modified or installed by the recipient, or for\n-the User Product in which it has been modified or installed.  Access to a\n-network may be denied when the modification itself materially and\n-adversely affects the operation of the network or violates the rules and\n-protocols for communication across the network.\n-\n-  Corresponding Source conveyed, and Installation Information provided,\n-in accord with this section must be in a format that is publicly\n-documented (and with an implementation available to the public in\n-source code form), and must require no special password or key for\n-unpacking, reading or copying.\n-\n-  7. Additional Terms.\n-\n-  \"Additional permissions\" are terms that supplement the terms of this\n-License by making exceptions from one or more of its conditions.\n-Additional permissions that are applicable to the entire Program shall\n-be treated as though they were included in this License, to the extent\n-that they are valid under applicable law.  If additional permissions\n-apply only to part of the Program, that part may be used separately\n-under those permissions, but the entire Program remains governed by\n-this License without regard to the additional permissions.\n-\n-  When you convey a copy of a covered work, you may at your option\n-remove any additional permissions from that copy, or from any part of\n-it.  (Additional permissions may be written to require their own\n-removal in certain cases when you modify the work.)  You may place\n-additional permissions on material, added by you to a covered work,\n-for which you have or can give appropriate copyright permission.\n-\n-  Notwithstanding any other provision of this License, for material you\n-add to a covered work, you may (if authorized by the copyright holders of\n-that material) supplement the terms of this License with terms:\n-\n-    a) Disclaiming warranty or limiting liability differently from the\n-    terms of sections 15 and 16 of this License; or\n-\n-    b) Requiring preservation of specified reasonable legal notices or\n-    author attributions in that material or in the Appropriate Legal\n-    Notices displayed by works containing it; or\n-\n-    c) Prohibiting misrepresentation of the origin of that material, or\n-    requiring that modified versions of such material be marked in\n-    reasonable ways as different from the original version; or\n-\n-    d) Limiting the use for publicity purposes of names of licensors or\n-    authors of the material; or\n-\n-    e) Declining to grant rights under trademark law for use of some\n-    trade names, trademarks, or service marks; or\n-\n-    f) Requiring indemnification of licensors and authors of that\n-    material by anyone who conveys the material (or modified versions of\n-    it) with contractual assumptions of liability to the recipient, for\n-    any liability that these contractual assumptions directly impose on\n-    those licensors and authors.\n-\n-  All other non-permissive additional terms are considered \"further\n-restrictions\" within the meaning of section 10.  If the Program as you\n-received it, or any part of it, contains a notice stating that it is\n-governed by this License along with a term that is a further\n-restriction, you may remove that term.  If a license document contains\n-a further restriction but permits relicensing or conveying under this\n-License, you may add to a covered work material governed by the terms\n-of that license document, provided that the further restriction does\n-not survive such relicensing or conveying.\n-\n-  If you add terms to a covered work in accord with this section, you\n-must place, in the relevant source files, a statement of the\n-additional terms that apply to those files, or a notice indicating\n-where to find the applicable terms.\n-\n-  Additional terms, permissive or non-permissive, may be stated in the\n-form of a separately written license, or stated as exceptions;\n-the above requirements apply either way.\n-\n-  8. Termination.\n-\n-  You may not propagate or modify a covered work except as expressly\n-provided under this License.  Any attempt otherwise to propagate or\n-modify it is void, and will automatically terminate your rights under\n-this License (including any patent licenses granted under the third\n-paragraph of section 11).\n-\n-  However, if you cease all violation of this License, then your\n-license from a particular copyright holder is reinstated (a)\n-provisionally, unless and until the copyright holder explicitly and\n-finally terminates your license, and (b) permanently, if the copyright\n-holder fails to notify you of the violation by some reasonable means\n-prior to 60 days after the cessation.\n-\n-  Moreover, your license from a particular copyright holder is\n-reinstated permanently if the copyright holder notifies you of the\n-violation by some reasonable means, this is the first time you have\n-received notice of violation of this License (for any work) from that\n-copyright holder, and you cure the violation prior to 30 days after\n-your receipt of the notice.\n-\n-  Termination of your rights under this section does not terminate the\n-licenses of parties who have received copies or rights from you under\n-this License.  If your rights have been terminated and not permanently\n-reinstated, you do not qualify to receive new licenses for the same\n-material under section 10.\n-\n-  9. Acceptance Not Required for Having Copies.\n-\n-  You are not required to accept this License in order to receive or\n-run a copy of the Program.  Ancillary propagation of a covered work\n-occurring solely as a consequence of using peer-to-peer transmission\n-to receive a copy likewise does not require acceptance.  However,\n-nothing other than this License grants you permission to propagate or\n-modify any covered work.  These actions infringe copyright if you do\n-not accept this License.  Therefore, by modifying or propagating a\n-covered work, you indicate your acceptance of this License to do so.\n-\n-  10. Automatic Licensing of Downstream Recipients.\n-\n-  Each time you convey a covered work, the recipient automatically\n-receives a license from the original licensors, to run, modify and\n-propagate that work, subject to this License.  You are not responsible\n-for enforcing compliance by third parties with this License.\n-\n-  An \"entity transaction\" is a transaction transferring control of an\n-organization, or substantially all assets of one, or subdividing an\n-organization, or merging organizations.  If propagation of a covered\n-work results from an entity transaction, each party to that\n-transaction who receives a copy of the work also receives whatever\n-licenses to the work the party's predecessor in interest had or could\n-give under the previous paragraph, plus a right to possession of the\n-Corresponding Source of the work from the predecessor in interest, if\n-the predecessor has it or can get it with reasonable efforts.\n-\n-  You may not impose any further restrictions on the exercise of the\n-rights granted or affirmed under this License.  For example, you may\n-not impose a license fee, royalty, or other charge for exercise of\n-rights granted under this License, and you may not initiate litigation\n-(including a cross-claim or counterclaim in a lawsuit) alleging that\n-any patent claim is infringed by making, using, selling, offering for\n-sale, or importing the Program or any portion of it.\n-\n-  11. Patents.\n-\n-  A \"contributor\" is a copyright holder who authorizes use under this\n-License of the Program or a work on which the Program is based.  The\n-work thus licensed is called the contributor's \"contributor version\".\n-\n-  A contributor's \"essential patent claims\" are all patent claims\n-owned or controlled by the contributor, whether already acquired or\n-hereafter acquired, that would be infringed by some manner, permitted\n-by this License, of making, using, or selling its contributor version,\n-but do not include claims that would be infringed only as a\n-consequence of further modification of the contributor version.  For\n-purposes of this definition, \"control\" includes the right to grant\n-patent sublicenses in a manner consistent with the requirements of\n-this License.\n-\n-  Each contributor grants you a non-exclusive, worldwide, royalty-free\n-patent license under the contributor's essential patent claims, to\n-make, use, sell, offer for sale, import and otherwise run, modify and\n-propagate the contents of its contributor version.\n-\n-  In the following three paragraphs, a \"patent license\" is any express\n-agreement or commitment, however denominated, not to enforce a patent\n-(such as an express permission to practice a patent or covenant not to\n-sue for patent infringement).  To \"grant\" such a patent license to a\n-party means to make such an agreement or commitment not to enforce a\n-patent against the party.\n-\n-  If you convey a covered work, knowingly relying on a patent license,\n-and the Corresponding Source of the work is not available for anyone\n-to copy, free of charge and under the terms of this License, through a\n-publicly available network server or other readily accessible means,\n-then you must either (1) cause the Corresponding Source to be so\n-available, or (2) arrange to deprive yourself of the benefit of the\n-patent license for this particular work, or (3) arrange, in a manner\n-consistent with the requirements of this License, to extend the patent\n-license to downstream recipients.  \"Knowingly relying\" means you have\n-actual knowledge that, but for the patent license, your conveying the\n-covered work in a country, or your recipient's use of the covered work\n-in a country, would infringe one or more identifiable patents in that\n-country that you have reason to believe are valid.\n-\n-  If, pursuant to or in connection with a single transaction or\n-arrangement, you convey, or propagate by procuring conveyance of, a\n-covered work, and grant a patent license to some of the parties\n-receiving the covered work authorizing them to use, propagate, modify\n-or convey a specific copy of the covered work, then the patent license\n-you grant is automatically extended to all recipients of the covered\n-work and works based on it.\n-\n-  A patent license is \"discriminatory\" if it does not include within\n-the scope of its coverage, prohibits the exercise of, or is\n-conditioned on the non-exercise of one or more of the rights that are\n-specifically granted under this License.  You may not convey a covered\n-work if you are a party to an arrangement with a third party that is\n-in the business of distributing software, under which you make payment\n-to the third party based on the extent of your activity of conveying\n-the work, and under which the third party grants, to any of the\n-parties who would receive the covered work from you, a discriminatory\n-patent license (a) in connection with copies of the covered work\n-conveyed by you (or copies made from those copies), or (b) primarily\n-for and in connection with specific products or compilations that\n-contain the covered work, unless you entered into that arrangement,\n-or that patent license was granted, prior to 28 March 2007.\n-\n-  Nothing in this License shall be construed as excluding or limiting\n-any implied license or other defenses to infringement that may\n-otherwise be available to you under applicable patent law.\n-\n-  12. No Surrender of Others' Freedom.\n-\n-  If conditions are imposed on you (whether by court order, agreement or\n-otherwise) that contradict the conditions of this License, they do not\n-excuse you from the conditions of this License.  If you cannot convey a\n-covered work so as to satisfy simultaneously your obligations under this\n-License and any other pertinent obligations, then as a consequence you may\n-not convey it at all.  For example, if you agree to terms that obligate you\n-to collect a royalty for further conveying from those to whom you convey\n-the Program, the only way you could satisfy both those terms and this\n-License would be to refrain entirely from conveying the Program.\n-\n-  13. Use with the GNU Affero General Public License.\n-\n-  Notwithstanding any other provision of this License, you have\n-permission to link or combine any covered work with a work licensed\n-under version 3 of the GNU Affero General Public License into a single\n-combined work, and to convey the resulting work.  The terms of this\n-License will continue to apply to the part which is the covered work,\n-but the special requirements of the GNU Affero General Public License,\n-section 13, concerning interaction through a network will apply to the\n-combination as such.\n-\n-  14. Revised Versions of this License.\n-\n-  The Free Software Foundation may publish revised and/or new versions of\n-the GNU General Public License from time to time.  Such new versions will\n-be similar in spirit to the present version, but may differ in detail to\n-address new problems or concerns.\n-\n-  Each version is given a distinguishing version number.  If the\n-Program specifies that a certain numbered version of the GNU General\n-Public License \"or any later version\" applies to it, you have the\n-option of following the terms and conditions either of that numbered\n-version or of any later version published by the Free Software\n-Foundation.  If the Program does not specify a version number of the\n-GNU General Public License, you may choose any version ever published\n-by the Free Software Foundation.\n-\n-  If the Program specifies that a proxy can decide which future\n-versions of the GNU General Public License can be used, that proxy's\n-public statement of acceptance of a version permanently authorizes you\n-to choose that version for the Program.\n-\n-  Later license versions may give you additional or different\n-permissions.  However, no additional obligations are imposed on any\n-author or copyright holder as a result of your choosing to follow a\n-later version.\n-\n-  15. Disclaimer of Warranty.\n-\n-  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY\n-APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT\n-HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY\n-OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,\n-THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n-PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM\n-IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF\n-ALL NECESSARY SERVICING, REPAIR OR CORRECTION.\n-\n-  16. Limitation of Liability.\n-\n-  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n-WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS\n-THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY\n-GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE\n-USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF\n-DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD\n-PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),\n-EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF\n-SUCH DAMAGES.\n-\n-  17. Interpretation of Sections 15 and 16.\n-\n-  If the disclaimer of warranty and limitation of liability provided\n-above cannot be given local legal effect according to their terms,\n-reviewing courts shall apply local law that most closely approximates\n-an absolute waiver of all civil liability in connection with the\n-Program, unless a warranty or assumption of liability accompanies a\n-copy of the Program in return for a fee.\n-\n-                     END OF TERMS AND CONDITIONS\n-\n-            How to Apply These Terms to Your New Programs\n-\n-  If you develop a new program, and you want it to be of the greatest\n-possible use to the public, the best way to achieve this is to make it\n-free software which everyone can redistribute and change under these terms.\n-\n-  To do so, attach the following notices to the program.  It is safest\n-to attach them to the start of each source file to most effectively\n-state the exclusion of warranty; and each file should have at least\n-the \"copyright\" line and a pointer to where the full notice is found.\n-\n-    <one line to give the program's name and a brief idea of what it does.>\n-    Copyright (C) <year>  <name of author>\n-\n-    This program is free software: you can redistribute it and/or modify\n-    it under the terms of the GNU General Public License as published by\n-    the Free Software Foundation, either version 3 of the License, or\n-    (at your option) any later version.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU General Public License for more details.\n-\n-    You should have received a copy of the GNU General Public License\n-    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-\n-Also add information on how to contact you by electronic and paper mail.\n-\n-  If the program does terminal interaction, make it output a short\n-notice like this when it starts in an interactive mode:\n-\n-    <program>  Copyright (C) <year>  <name of author>\n-    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n-    This is free software, and you are welcome to redistribute it\n-    under certain conditions; type `show c' for details.\n-\n-The hypothetical commands `show w' and `show c' should show the appropriate\n-parts of the General Public License.  Of course, your program's commands\n-might be different; for a GUI interface, you would use an \"about box\".\n-\n-  You should also get your employer (if you work as a programmer) or school,\n-if any, to sign a \"copyright disclaimer\" for the program, if necessary.\n-For more information on this, and how to apply and follow the GNU GPL, see\n-<http://www.gnu.org/licenses/>.\n-\n-  The GNU General Public License does not permit incorporating your program\n-into proprietary programs.  If your program is a subroutine library, you\n-may consider it more useful to permit linking proprietary applications with\n-the library.  If this is what you want to do, use the GNU Lesser General\n-Public License instead of this License.  But first, please read\n-<http://www.gnu.org/philosophy/why-not-lgpl.html>.\n\\ No newline at end of file, @@ -1,5 +1,5 @@\n # owner\t\tJabRef Team\n-# license\tGPL version 3\n+# license\tGPL version 2\n # author\tUwe St\u00f6hr and others\n \n ; To compile this script NSIS 2.23 and newer are required\n@@ -25,7 +25,7 @@ Name \"JabRef ${VERSION}\"\n !define PRODUCT_EXE \"JabRef.exe\"\n !define PRODUCT_NAME \"JabRef\"\n !define PRODUCT_UNINST_KEY \"Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$(^Name)\"\n-!define PRODUCT_LICENSE_FILE \"dist\\gpl3.txt\"\n+!define PRODUCT_LICENSE_FILE \"dist\\LICENSE\"\n !define AppUserModelId \"JabRef.${VERSION}\"\n \n # Variables, ", 8, 684, "\"renamed, modified, modified, removed, modified, \"", 692], ["stefan-kolb", "Do not use multiple variables in one declaration", "07/29/15, 08:57:58 PM", "stefan-kolb", "9cd1a712652a536a6aed3194b13dc28b591ea497", ["src/main/java/net/sf/jabref/gui/CleanUpAction.java", "src/main/java/net/sf/jabref/gui/MainTable.java", "src/main/java/net/sf/jabref/oo/OOPreFormatter.java", "src/main/java/net/sf/jabref/oo/OpenOfficePanel.java"], "@@ -236,7 +236,19 @@ public void run() {\n             return;\n         }\n         storeSettings();\n-        boolean choiceCleanUpSuperscripts = cleanUpSuperscrips.isSelected(), choiceCleanUpDOI = cleanUpDOI.isSelected(), choiceCleanUpMonth = cleanUpMonth.isSelected(), choiceCleanUpPageNumbers = cleanUpPageNumbers.isSelected(), choiceCleanUpUpgradeExternalLinks = cleanUpUpgradeExternalLinks.isSelected(), choiceMakePathsRelative = cleanUpMakePathsRelative.isSelected(), choiceRenamePDF = cleanUpRenamePDF.isSelected(), choiceConvertHTML = cleanUpHTML.isSelected(), choiceConvertCase = cleanUpCase.isSelected(), choiceConvertLaTeX = cleanUpLaTeX.isSelected(), choiceConvertUnits = cleanUpUnits.isSelected(), choiceConvertUnicode = cleanUpUnicode.isSelected(), choiceConvertToBiblatex = cleanUpBiblatex.isSelected();\n+        boolean choiceCleanUpSuperscripts = cleanUpSuperscrips.isSelected();\n+        boolean choiceCleanUpDOI = cleanUpDOI.isSelected();\n+        boolean choiceCleanUpMonth = cleanUpMonth.isSelected();\n+        boolean choiceCleanUpPageNumbers = cleanUpPageNumbers.isSelected();\n+        boolean choiceCleanUpUpgradeExternalLinks = cleanUpUpgradeExternalLinks.isSelected();\n+        boolean choiceMakePathsRelative = cleanUpMakePathsRelative.isSelected();\n+        boolean choiceRenamePDF = cleanUpRenamePDF.isSelected();\n+        boolean choiceConvertHTML = cleanUpHTML.isSelected();\n+        boolean choiceConvertCase = cleanUpCase.isSelected();\n+        boolean choiceConvertLaTeX = cleanUpLaTeX.isSelected();\n+        boolean choiceConvertUnits = cleanUpUnits.isSelected();\n+        boolean choiceConvertUnicode = cleanUpUnicode.isSelected();\n+        boolean choiceConvertToBiblatex = cleanUpBiblatex.isSelected();\n \n         if (choiceRenamePDF && Globals.prefs.getBoolean(CleanUpAction.AKS_AUTO_NAMING_PDFS_AGAIN)) {\n             CheckBoxMessage cbm = new CheckBoxMessage(Globals.lang(\"Auto-generating PDF-Names does not support undo. Continue?\"),, @@ -72,7 +72,8 @@\n     private Comparator<BibtexEntry> searchComparator;\n     private Comparator<BibtexEntry> groupComparator;\n     private final Comparator<BibtexEntry> markingComparator = new IsMarkedComparator();\n-    private Matcher<BibtexEntry> searchMatcher, groupMatcher;\n+    private Matcher<BibtexEntry> searchMatcher;\n+    private Matcher<BibtexEntry> groupMatcher;\n \n     // needed to activate/deactivate the listener\n     private final PersistenceTableColumnListener tableColumnListener;\n@@ -620,16 +621,19 @@ public void scrollToCenter(int rowIndex, int vColIndex) {\n     }\n \n \n-    private static GeneralRenderer defRenderer, reqRenderer, optRenderer, grayedOutRenderer,\n-            veryGrayedOutRenderer;\n+    private static GeneralRenderer defRenderer;\n+    private static GeneralRenderer reqRenderer;\n+    private static GeneralRenderer optRenderer;\n+    private static GeneralRenderer grayedOutRenderer;\n+    private static GeneralRenderer veryGrayedOutRenderer;\n \n     private static GeneralRenderer[] markedRenderers;\n \n     private static IncompleteRenderer incRenderer;\n     private static CompleteRenderer\n-            compRenderer,\n-            grayedOutNumberRenderer,\n-            veryGrayedOutNumberRenderer;\n+            compRenderer;\n+    private static CompleteRenderer grayedOutNumberRenderer;\n+    private static CompleteRenderer veryGrayedOutNumberRenderer;\n \n     private static CompleteRenderer[] markedNumberRenderers;\n , @@ -245,7 +245,8 @@ public String format(String field) {\n         StringBuffer currentCommand = null;\n \n         char c;\n-        boolean escaped = false, incommand = false;\n+        boolean escaped = false;\n+        boolean incommand = false;\n \n         for (i = 0; i < field.length(); i++) {\n             c = field.charAt(i);, @@ -95,7 +95,8 @@\n     private static boolean useDefaultAuthoryearStyle = false;\n     private static boolean useDefaultNumericalStyle = false;\n     private StyleSelectDialog styleDialog = null;\n-    private boolean dialogOkPressed = false, autoDetected = false;\n+    private boolean dialogOkPressed = false;\n+    private boolean autoDetected = false;\n     private String sOffice = null;\n     private Throwable connectException = null;\n \n@@ -120,7 +121,8 @@ private OpenOfficePanel() {\n         OpenOfficePanel.selectDocument.setToolTipText(Globals.lang(\"Select Writer document\"));\n         OpenOfficePanel.update = new JButton(GUIGlobals.getImage(\"refresh\"));\n         OpenOfficePanel.update.setToolTipText(Globals.lang(\"Sync OO bibliography\"));\n-        String defExecutable, defJarsDir;\n+        String defExecutable;\n+        String defJarsDir;\n         if (Globals.ON_WIN) {\n             Globals.prefs.putDefaultValue(\"ooPath\", \"C:\\\\Program Files\\\\OpenOffice.org 3\");\n             Globals.prefs.putDefaultValue(\"ooExecutablePath\", \"C:\\\\Program Files\\\\OpenOffice.org 2.3\\\\program\\\\soffice.exe\");\n@@ -490,7 +492,8 @@ private void connect(boolean auto) {\n             return;\n         }*/\n \n-        String unoilDir, ooBaseDirectory;\n+        String unoilDir;\n+        String ooBaseDirectory;\n         if (auto) {\n             AutoDetectPaths adp = new AutoDetectPaths(diag);\n , ", 31, 11, "\"modified, modified, modified, modified, \"", 42], ["Joerg Lenhard", "Merge branch 'master' into move-logic-ui", "07/30/15, 10:41:00 AM", "Joerg Lenhard", "dca8909dafc033bf82226c17ac3de5dd1283ea49", [".gitignore", "CHANGELOG", "CLI", "circle.yml", "src/main/java/net/sf/jabref/export/ExportFormats.java", "src/main/resources/osx/macadapter/MacAdapter.java", "src/main/resources/plugins/net.sf.jabref.export.misq/build.xml", "src/main/resources/plugins/net.sf.jabref.export.misq/plugin.xml", "src/main/resources/plugins/readme.txt", "src/main/resources/resource/.gitignore", "src/main/resources/resource/layout/misq/misq.article.layout", "src/main/resources/resource/layout/misq/misq.begin.layout", "src/main/resources/resource/layout/misq/misq.book.layout", "src/main/resources/resource/layout/misq/misq.end.layout", "src/main/resources/resource/layout/misq/misq.layout", "src/main/resources/resource/layout/misq/readme.txt"], "@@ -1,8 +1,12 @@\n # no generated files in version control\n src/main/gen/\n \n+# JVM errors\n hs_err*.log\n \n+# backup files from JabRef itself\n+*.bak\n+\n # Ant\n buildant/\n build.number, @@ -18,7 +18,6 @@\n     - BREAKING: Search groups now use same search logic as UI --> avoids confusion when converting a UI search into a search group. Behaviour before: contains/regex check of whole search string; behaviour after: contains/regex check of every word of the search string. The new search is more powerful and con simulate the old behaviour: enclose everything in double quotes, e.g., process language --> \"process language\".\n     - Change default of use IEEE abbreviations from TRUE to FALSE\n     - BREAKING: Remove plugin functionality.\n->>>>>>> no-plugins\n 2.11 beta 3\n     - New MacOSX integration\n     - Two releases for MacOSX: OSX-Java6 for Apple Java 1.6 and OSX for Oracle Java 1.7+, @@ -1,51 +0,0 @@\n-usage: jabref [OPTIONS] [BIBTEX_FILE]\n-\n-Options: [-a <FILE>] [-b] [-d <FILE>] [-f <FILE>] [-h] [-i <FILE>]\n-       [--importToOpen <FILE>] [-l] [-m <FILE>] [-n] [-o <FILE>] [-p\n-       <FILE>] [-s] [-v] [-x <FILE>]\n- -a,--aux <FILE>             Subdatabase from aux: file[.aux],new[.bib]\n- -b,--blank                  Do not open any files at startup\n- -d,--prdef <FILE>           Reset preferences (key1,key2,... or 'all')\n- -f,--fetch <FILE>           Run Fetcher, e.g. \"--fetch=Medline:cancer\"\n- -h,--help                   Display help on command line options\n- -i,--import <FILE>          Import file: filename[,import format]\n-    --importToOpen <FILE>    Import to open tab\n- -l,--loads                  Load session\n- -m,--exportMatches <FILE>   [field]searchTerm,outputFile:\n-                             file[,exportFormat]\n- -n,--nogui                  No GUI. Only process command line options.\n- -o,--output <FILE>          Output or export file: filename[,export\n-                             format]\n- -p,--primp <FILE>           Import preferences from file\n- -s,--nosplash               Do not show splash window at startup\n- -v,--version                Display version\n- -x,--prexp <FILE>           Export preferences to file\n-\n-Available import formats:\n-  BibTeX         : bibtex\n-  BibTeXML       : bibtexml\n-  Biblioscape    : biblioscape\n-  Biomail        : biomail\n-  CSA            : csa\n-  Copac          : cpc\n-  INSPEC         : inspec\n-  ISI            : isi\n-  JStor (tab delimited) : jstor\n-  MSBib          : msbib\n-  Medline        : medline\n-  MedlinePlain   : medlineplain\n-  Ovid           : ovid\n-  REPEC New Economic Papers (NEP) : repecnep\n-  RIS            : ris\n-  Refer/Endnote  : refer\n-  Scifinder      : scifinder\n-  SilverPlatter  : silverplatter\n-  Sixpack        : sixpack\n-  XMP-annotated PDF : xmpannotatedpdf\n-\n-Available export formats: MSBib, bibordf, bibtexml, din1505, docbook,\n-endnote, harvard, html, iso690rtf, iso690txt, listrefs, misq, mods,\n-mysql, ods, oocalc, oocsv, postgresql, ris, simplehtml, tablerefs,\n-tablerefsabsbib\n-\n-Please report issues at http://sourceforge.net/p/jabref/bugs/\n\\ No newline at end of file, @@ -1,6 +1,6 @@\n machine:\n   java:\n-    version: openjdk8\n+    version: oraclejdk8\n \n dependencies:\n   override:, @@ -69,6 +69,7 @@ public static void initAllExports() {\n         ExportFormat ef = new ExportFormat(Globals.lang(\"RIS\"), \"ris\", \"ris\", \"ris\", \".ris\");\n         ef.encoding = \"UTF-8\";\n         ExportFormats.putFormat(ef);\n+        ExportFormats.putFormat(new ExportFormat(Globals.lang(\"MIS Quarterly\"), \"misq\", \"misq\", \"misq\",\".rtf\"));\n \n         ExportFormats.putFormat(new OpenOfficeDocumentCreator());\n         ExportFormats.putFormat(new OpenDocumentSpreadsheetCreator());, @@ -20,6 +20,12 @@\n \n import net.sf.jabref.JabRefFrame;\n \n+import com.apple.eawt.*;\n+import com.apple.eawt.AppEvent.AboutEvent;\n+import com.apple.eawt.AppEvent.OpenFilesEvent;\n+import com.apple.eawt.AppEvent.PreferencesEvent;\n+import com.apple.eawt.AppEvent.QuitEvent;\n+\n public class MacAdapter implements PreferencesHandler, AboutHandler, QuitHandler, OpenFilesHandler {\n \n \tprivate JabRefFrame parentFrame = null;, @@ -1,29 +0,0 @@\n-<?xml version=\"1.0\"?>\n-<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n-\n-   Example Ant build file how to create a jar for distribution \n-   for an export plugin.\n-\n-   Version:  $Revision$\n-             $Date$\n-             $Author$\n-\n-+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->\n-<project name=\"net.sf.jabref.export.misq\" default=\"jar\" basedir=\".\">\n-\n-\t<!-- Properties -->\n-\t<property name=\"version\" value=\"1.0\" />\n-\t<property name=\"jar\" value=\"../${ant.project.name}-${version}.jar\" />\n-\n-\t<!-- Jars up project -->\n-\t<target name=\"jar\">\n-\t\t<jar destfile=\"${jar}\">\n-\t\t\t<fileset dir=\".\"/>\n-\t\t</jar>\n-\t</target>\n-\n-\t<target name=\"clean\" description=\"Clean project\">\n-\t\t<delete file=\"${jar}\" />\n-\t</target>\n-\n-</project>, @@ -1,22 +0,0 @@\n-<?xml version=\"1.0\" ?>\n-<!DOCTYPE plugin PUBLIC \"-//JPF//Java Plug-in Manifest 1.0\" \"http://jpf.sourceforge.net/plugin_1_0.dtd\">\n-<plugin id=\"net.sf.jabref.export.misq\" version=\"1.0\">\n-\t\n-\t<requires>\n-\t\t<import plugin-id=\"net.sf.jabref.core\"/>\n-\t</requires>\n-\t\n-\t<runtime>\n-\t\t<library type=\"resources\" path=\"templates/\" id=\"templates\"/>\n-\t</runtime>\n-\t\n-\t<extension id=\"MISQuarterly\" plugin-id=\"net.sf.jabref.core\"\n-\t\tpoint-id=\"ExportFormatTemplate\">\n-\t\t<parameter id=\"displayName\" value=\"MIS Quarterly\" />\n-\t\t<parameter id=\"consoleName\" value=\"misq\" />\n-\t\t<parameter id=\"layoutFilename\" value=\"misq\" />\n-\t\t<parameter id=\"dir\" value=\"templates/\"/>\n-\t\t<parameter id=\"extension\" value=\".rtf\" />\n-\t</extension>\n-\n-</plugin>\n\\ No newline at end of file, @@ -1,9 +0,0 @@\n-Plugins for JabRef that are supposed to be distributed with the system should go here.\n-\n-At the moment we need an ugly hack in \n-\n-net.sf.jabref.plugin.PluginCore.java\n-\n-to add all plugins manually. Since they are loaded from the resulting JabRef jar.\n-\n-To work around this issue, one can add all extension directly to the core plugin instead. \n\\ No newline at end of file, @@ -1 +0,0 @@\n-*.bak\n\\ No newline at end of file, None, None, None, None, None, None, ", 12, 114, "\"modified, modified, removed, modified, modified, modified, removed, removed, removed, removed, renamed, renamed, renamed, renamed, renamed, renamed, \"", 126], ["Joerg Lenhard", "Merge branch 'master' into move-field-editor", "07/30/15, 11:51:59 AM", "Joerg Lenhard", "fc03e2cb9eb0bcf4db6130aaef397e8320274946", ["build.gradle", "gradle/wrapper/gradle-wrapper.jar", "gradle/wrapper/gradle-wrapper.properties"], "@@ -119,7 +119,7 @@ sourceCompatibility = 1.8\n mainClassName = \"net.sf.jabref.JabRefMain\"\n \n task wrapper(type: Wrapper) {\n-    gradleVersion = '2.4'\n+    gradleVersion = '2.5'\n }\n \n compileJava {, None, @@ -1,6 +1,6 @@\n-#Tue Jul 21 17:57:36 CEST 2015\n+#Thu Jul 30 13:20:57 CEST 2015\n distributionBase=GRADLE_USER_HOME\n distributionPath=wrapper/dists\n zipStoreBase=GRADLE_USER_HOME\n zipStorePath=wrapper/dists\n-distributionUrl=https\\://services.gradle.org/distributions/gradle-2.4-all.zip\n+distributionUrl=https\\://services.gradle.org/distributions/gradle-2.5-all.zip, ", 3, 3, "\"modified, modified, modified, \"", 6], ["stefan-kolb", "Change source and documentation URL", "08/01/15, 07:31:59 PM", "stefan-kolb", "c59e66a2902b7e1ed3cc05178b927f41982d56f7", ["src/main/resources/help/About.html"], "@@ -15,7 +15,7 @@ <h1>JabRef version ${version}</h1>\n     License</a> as published by the Free Software Foundation, either\n     version 2 of the License, or (at your option) any later version.</p>\n \n-    <p>The source code and documentation can be found at the homepage of JabRef <a href=\"http://jabref.sourceforge.net/\">http://jabref.sourceforge.net/</a>.\n+    <p>The source code and documentation can be found at <a href=\"https://github.com/JabRef/jabref/\">https://github.com/JabRef/jabref/</a>.\n         Please submit bugs and feature requests to\n         <a href=\"https://github.com/JabRef/jabref/issues\">https://github.com/JabRef/jabref/issues</a>.\n     </p>, ", 1, 1, "\"modified, \"", 2], ["Francois Charette", "typo", "08/03/15, 02:36:02 PM", "Francois Charette", "2afe0ff70629497e19573ed48e3ffe79d3b79cf5", ["src/main/java/net/sf/jabref/BibtexEntryType.java"], "@@ -1058,7 +1058,7 @@ public static void saveCustomEntryTypes(JabRefPreferences prefs) {\n \n     /**\n      * Get an array of the required fields in a form appropriate for the entry customization\n-     * dialog - that is, thie either-or fields together and separated by slashes.\n+     * dialog - that is, the either-or fields together and separated by slashes.\n      *\n      * @return Array of the required fields in a form appropriate for the entry customization dialog.\n      */, ", 1, 1, "\"modified, \"", 2], ["Joerg Lenhard", "Use correct package for LabelPatternUtilTest", "08/03/15, 10:08:40 AM", "Joerg Lenhard", "e8b8afb984cf53fb028c730e10d641833109999a", ["src/test/java/net/sf/jabref/logic/labelPattern/LabelPatternUtilTest.java"], "@@ -1,4 +1,4 @@\n-package net.sf.jabref.gui.labelPattern;\n+package net.sf.jabref.logic.labelPattern;\n \n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.BibtexEntry;, ", 1, 1, "\"modified, \"", 2], ["stefan-kolb", "Changelog item for authors script", "08/07/15, 08:19:10 AM", "stefan-kolb", "2b71976aea44a9226fbbd7453986da19b880073a", ["CHANGELOG"], "@@ -1,4 +1,5 @@\n [master]\n+    - List of authors is now auto generated `scripts/generate-authors.sh` and inserted into L10N About.html\n     - Remove Mr.DLib support as MR.DLib will be shut down in 2015\n     - Streamline logging API: Replace usages of java.util.logging with commons.logging\n     - BREAKING: Remove plugin functionality., ", 1, 0, "\"modified, \"", 1], ["Simon Harrer", "Removes splash screen\nRemoves CLI option --nosplash -s", "08/05/15, 12:15:37 PM", "Simon Harrer", "4641d33b3aa7eb47d724c1163856304adb3a4418", ["src/graphics/splash/README.md", "src/graphics/splash/splash-beta.svg", "src/graphics/splash/splash-beta2.svg", "src/graphics/splash/splash-beta3.svg", "src/graphics/splash/splash-dev.svg", "src/graphics/splash/splash-release.svg", "src/graphics/splash/splashBackground.png", "src/main/java/net/sf/jabref/JabRef.java", "src/main/java/net/sf/jabref/JabRefCLI.java", "src/main/java/net/sf/jabref/gui/splash/SplashScreen.java", "src/main/java/net/sf/jabref/gui/splash/SplashScreenLifecycle.java", "src/main/resources/images/splash.png"], "@@ -1,5 +0,0 @@\n-Release file: splash-release.svg, uses splashBackground.png\n-Beta files: *beta*, base: splash-release.svg\n-Dev file: splash-dev.svg, base:splash-release.svg\n-\n-The target is splash.png contained in /src/main/resources/images/, @@ -1,96 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n-<!-- Created with Inkscape (http://www.inkscape.org/) -->\n-\n-<svg\n-   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n-   xmlns:cc=\"http://creativecommons.org/ns#\"\n-   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n-   xmlns:svg=\"http://www.w3.org/2000/svg\"\n-   xmlns=\"http://www.w3.org/2000/svg\"\n-   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n-   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n-   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n-   inkscape:export-ydpi=\"90.000000\"\n-   inkscape:export-xdpi=\"90.000000\"\n-   inkscape:export-filename=\"splash.png\"\n-   sodipodi:docname=\"splash-beta.svg\"\n-   inkscape:version=\"0.91 r13725\"\n-   sodipodi:version=\"0.32\"\n-   id=\"svg2138\"\n-   height=\"432\"\n-   width=\"576\"\n-   inkscape:output_extension=\"org.inkscape.output.svg.inkscape\"\n-   version=\"1.1\">\n-  <sodipodi:namedview\n-     inkscape:window-y=\"0\"\n-     inkscape:window-x=\"0\"\n-     inkscape:window-height=\"1155\"\n-     inkscape:window-width=\"1920\"\n-     inkscape:current-layer=\"layer1\"\n-     inkscape:document-units=\"px\"\n-     inkscape:cy=\"225.8697\"\n-     inkscape:cx=\"105.10531\"\n-     inkscape:zoom=\"1\"\n-     inkscape:pageshadow=\"2\"\n-     inkscape:pageopacity=\"0.0\"\n-     borderopacity=\"1.0\"\n-     bordercolor=\"#666666\"\n-     pagecolor=\"#ffffff\"\n-     id=\"base\"\n-     showgrid=\"false\"\n-     inkscape:window-maximized=\"1\"\n-     fit-margin-top=\"0\"\n-     fit-margin-left=\"0\"\n-     fit-margin-right=\"0\"\n-     fit-margin-bottom=\"0\" />\n-  <defs\n-     id=\"defs2140\" />\n-  <metadata\n-     id=\"metadata2143\">\n-    <rdf:RDF>\n-      <cc:Work\n-         rdf:about=\"\">\n-        <dc:format>image/svg+xml</dc:format>\n-        <dc:type\n-           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n-        <dc:title />\n-      </cc:Work>\n-    </rdf:RDF>\n-  </metadata>\n-  <g\n-     inkscape:groupmode=\"layer\"\n-     id=\"layer2\"\n-     inkscape:label=\"release splash\"\n-     style=\"display:inline\">\n-    <image\n-       xlink:href=\"splash-release.svg\"\n-       width=\"576\"\n-       height=\"432\"\n-       id=\"image3653\"\n-       x=\"-0.89468384\"\n-       y=\"-0.86970043\"\n-       style=\"display:inline\" />\n-  </g>\n-  <g\n-     transform=\"translate(-77.5,-170.36218)\"\n-     inkscape:label=\"beta 2\"\n-     inkscape:groupmode=\"layer\"\n-     id=\"layer1\"\n-     style=\"display:inline\">\n-    <flowRoot\n-       inkscape:export-ydpi=\"75\"\n-       inkscape:export-xdpi=\"75\"\n-       inkscape:export-filename=\"splash.png\"\n-       transform=\"matrix(0.9688007,-0.2478411,0.2478411,0.9688007,-139.20276,134.59483)\"\n-       style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:56px;line-height:100%;font-family:'Bitstream Vera Sans';-inkscape-font-specification:'Bitstream Vera Sans Bold';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#f91616;fill-opacity:0.65789472;stroke:none\"\n-       id=\"flowRoot2745\"\n-       xml:space=\"preserve\"><flowRegion\n-         id=\"flowRegion2747\"><rect\n-           style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:56px;line-height:100%;font-family:'Bitstream Vera Sans';-inkscape-font-specification:'Bitstream Vera Sans Bold';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#f91616;fill-opacity:0.65789472\"\n-           y=\"470.36218\"\n-           x=\"482\"\n-           height=\"99.498024\"\n-           width=\"246.77605\"\n-           id=\"rect2749\" /></flowRegion><flowPara\n-         id=\"flowPara2751\">beta 2</flowPara></flowRoot>  </g>\n-</svg>, @@ -1,96 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n-<!-- Created with Inkscape (http://www.inkscape.org/) -->\n-\n-<svg\n-   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n-   xmlns:cc=\"http://creativecommons.org/ns#\"\n-   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n-   xmlns:svg=\"http://www.w3.org/2000/svg\"\n-   xmlns=\"http://www.w3.org/2000/svg\"\n-   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n-   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n-   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n-   inkscape:export-ydpi=\"90.000000\"\n-   inkscape:export-xdpi=\"90.000000\"\n-   inkscape:export-filename=\"splash.png\"\n-   sodipodi:docname=\"splash-beta.svg\"\n-   inkscape:version=\"0.91 r13725\"\n-   sodipodi:version=\"0.32\"\n-   id=\"svg2138\"\n-   height=\"432\"\n-   width=\"576\"\n-   inkscape:output_extension=\"org.inkscape.output.svg.inkscape\"\n-   version=\"1.1\">\n-  <sodipodi:namedview\n-     inkscape:window-y=\"0\"\n-     inkscape:window-x=\"0\"\n-     inkscape:window-height=\"1155\"\n-     inkscape:window-width=\"1920\"\n-     inkscape:current-layer=\"layer1\"\n-     inkscape:document-units=\"px\"\n-     inkscape:cy=\"225.8697\"\n-     inkscape:cx=\"105.10531\"\n-     inkscape:zoom=\"1\"\n-     inkscape:pageshadow=\"2\"\n-     inkscape:pageopacity=\"0.0\"\n-     borderopacity=\"1.0\"\n-     bordercolor=\"#666666\"\n-     pagecolor=\"#ffffff\"\n-     id=\"base\"\n-     showgrid=\"false\"\n-     inkscape:window-maximized=\"1\"\n-     fit-margin-top=\"0\"\n-     fit-margin-left=\"0\"\n-     fit-margin-right=\"0\"\n-     fit-margin-bottom=\"0\" />\n-  <defs\n-     id=\"defs2140\" />\n-  <metadata\n-     id=\"metadata2143\">\n-    <rdf:RDF>\n-      <cc:Work\n-         rdf:about=\"\">\n-        <dc:format>image/svg+xml</dc:format>\n-        <dc:type\n-           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n-        <dc:title />\n-      </cc:Work>\n-    </rdf:RDF>\n-  </metadata>\n-  <g\n-     inkscape:groupmode=\"layer\"\n-     id=\"layer2\"\n-     inkscape:label=\"release splash\"\n-     style=\"display:inline\">\n-    <image\n-       xlink:href=\"splash-release.svg\"\n-       width=\"576\"\n-       height=\"432\"\n-       id=\"image3653\"\n-       x=\"-0.89468384\"\n-       y=\"-0.86970043\"\n-       style=\"display:inline\" />\n-  </g>\n-  <g\n-     transform=\"translate(-77.5,-170.36218)\"\n-     inkscape:label=\"beta 2\"\n-     inkscape:groupmode=\"layer\"\n-     id=\"layer1\"\n-     style=\"display:inline\">\n-    <flowRoot\n-       inkscape:export-ydpi=\"75\"\n-       inkscape:export-xdpi=\"75\"\n-       inkscape:export-filename=\"splash.png\"\n-       transform=\"matrix(0.9688007,-0.2478411,0.2478411,0.9688007,-139.20276,134.59483)\"\n-       style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:56px;line-height:100%;font-family:'Bitstream Vera Sans';-inkscape-font-specification:'Bitstream Vera Sans Bold';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#f91616;fill-opacity:0.65789472;stroke:none\"\n-       id=\"flowRoot2745\"\n-       xml:space=\"preserve\"><flowRegion\n-         id=\"flowRegion2747\"><rect\n-           style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:56px;line-height:100%;font-family:'Bitstream Vera Sans';-inkscape-font-specification:'Bitstream Vera Sans Bold';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#f91616;fill-opacity:0.65789472\"\n-           y=\"470.36218\"\n-           x=\"482\"\n-           height=\"99.498024\"\n-           width=\"246.77605\"\n-           id=\"rect2749\" /></flowRegion><flowPara\n-         id=\"flowPara2751\">beta 2</flowPara></flowRoot>  </g>\n-</svg>, @@ -1,96 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n-<!-- Created with Inkscape (http://www.inkscape.org/) -->\n-\n-<svg\n-   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n-   xmlns:cc=\"http://creativecommons.org/ns#\"\n-   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n-   xmlns:svg=\"http://www.w3.org/2000/svg\"\n-   xmlns=\"http://www.w3.org/2000/svg\"\n-   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n-   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n-   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n-   inkscape:export-ydpi=\"90.000000\"\n-   inkscape:export-xdpi=\"90.000000\"\n-   inkscape:export-filename=\"splash.png\"\n-   sodipodi:docname=\"splash-beta.svg\"\n-   inkscape:version=\"0.91 r13725\"\n-   sodipodi:version=\"0.32\"\n-   id=\"svg2138\"\n-   height=\"432\"\n-   width=\"576\"\n-   inkscape:output_extension=\"org.inkscape.output.svg.inkscape\"\n-   version=\"1.1\">\n-  <sodipodi:namedview\n-     inkscape:window-y=\"0\"\n-     inkscape:window-x=\"0\"\n-     inkscape:window-height=\"1155\"\n-     inkscape:window-width=\"1920\"\n-     inkscape:current-layer=\"layer1\"\n-     inkscape:document-units=\"px\"\n-     inkscape:cy=\"225.8697\"\n-     inkscape:cx=\"105.10531\"\n-     inkscape:zoom=\"1\"\n-     inkscape:pageshadow=\"2\"\n-     inkscape:pageopacity=\"0.0\"\n-     borderopacity=\"1.0\"\n-     bordercolor=\"#666666\"\n-     pagecolor=\"#ffffff\"\n-     id=\"base\"\n-     showgrid=\"false\"\n-     inkscape:window-maximized=\"1\"\n-     fit-margin-top=\"0\"\n-     fit-margin-left=\"0\"\n-     fit-margin-right=\"0\"\n-     fit-margin-bottom=\"0\" />\n-  <defs\n-     id=\"defs2140\" />\n-  <metadata\n-     id=\"metadata2143\">\n-    <rdf:RDF>\n-      <cc:Work\n-         rdf:about=\"\">\n-        <dc:format>image/svg+xml</dc:format>\n-        <dc:type\n-           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n-        <dc:title />\n-      </cc:Work>\n-    </rdf:RDF>\n-  </metadata>\n-  <g\n-     inkscape:groupmode=\"layer\"\n-     id=\"layer2\"\n-     inkscape:label=\"release splash\"\n-     style=\"display:inline\">\n-    <image\n-       xlink:href=\"splash-release.svg\"\n-       width=\"576\"\n-       height=\"432\"\n-       id=\"image3653\"\n-       x=\"-0.89468384\"\n-       y=\"-0.86970043\"\n-       style=\"display:inline\" />\n-  </g>\n-  <g\n-     transform=\"translate(-77.5,-170.36218)\"\n-     inkscape:label=\"beta 3\"\n-     inkscape:groupmode=\"layer\"\n-     id=\"layer1\"\n-     style=\"display:inline\">\n-    <flowRoot\n-       inkscape:export-ydpi=\"75\"\n-       inkscape:export-xdpi=\"75\"\n-       inkscape:export-filename=\"splash.png\"\n-       transform=\"matrix(0.9688007,-0.2478411,0.2478411,0.9688007,-139.20276,134.59483)\"\n-       style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:56px;line-height:100%;font-family:'Bitstream Vera Sans';-inkscape-font-specification:'Bitstream Vera Sans Bold';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#f91616;fill-opacity:0.65789472;stroke:none\"\n-       id=\"flowRoot2745\"\n-       xml:space=\"preserve\"><flowRegion\n-         id=\"flowRegion2747\"><rect\n-           style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:56px;line-height:100%;font-family:'Bitstream Vera Sans';-inkscape-font-specification:'Bitstream Vera Sans Bold';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#f91616;fill-opacity:0.65789472\"\n-           y=\"470.36218\"\n-           x=\"482\"\n-           height=\"99.498024\"\n-           width=\"246.77605\"\n-           id=\"rect2749\" /></flowRegion><flowPara\n-         id=\"flowPara2751\">beta 3</flowPara></flowRoot>  </g>\n-</svg>, @@ -1,125 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n-<!-- Created with Inkscape (http://www.inkscape.org/) -->\n-\n-<svg\n-   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n-   xmlns:cc=\"http://creativecommons.org/ns#\"\n-   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n-   xmlns:svg=\"http://www.w3.org/2000/svg\"\n-   xmlns=\"http://www.w3.org/2000/svg\"\n-   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n-   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n-   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n-   inkscape:export-ydpi=\"90.000000\"\n-   inkscape:export-xdpi=\"90.000000\"\n-   inkscape:export-filename=\"splash.png\"\n-   sodipodi:docname=\"splash-dev.svg\"\n-   inkscape:version=\"0.91 r13725\"\n-   sodipodi:version=\"0.32\"\n-   id=\"svg2138\"\n-   height=\"432\"\n-   width=\"576\"\n-   inkscape:output_extension=\"org.inkscape.output.svg.inkscape\"\n-   version=\"1.1\">\n-  <defs\n-     id=\"defs2140\" />\n-  <sodipodi:namedview\n-     inkscape:window-y=\"27\"\n-     inkscape:window-x=\"35\"\n-     inkscape:window-height=\"873\"\n-     inkscape:window-width=\"1660\"\n-     inkscape:current-layer=\"layer1\"\n-     inkscape:document-units=\"px\"\n-     inkscape:cy=\"225.8697\"\n-     inkscape:cx=\"165.10531\"\n-     inkscape:zoom=\"1\"\n-     inkscape:pageshadow=\"2\"\n-     inkscape:pageopacity=\"0.0\"\n-     borderopacity=\"1.0\"\n-     bordercolor=\"#666666\"\n-     pagecolor=\"#ffffff\"\n-     id=\"base\"\n-     showgrid=\"false\"\n-     inkscape:window-maximized=\"0\"\n-     fit-margin-top=\"0\"\n-     fit-margin-left=\"0\"\n-     fit-margin-right=\"0\"\n-     fit-margin-bottom=\"0\" />\n-  <metadata\n-     id=\"metadata2143\">\n-    <rdf:RDF>\n-      <cc:Work\n-         rdf:about=\"\">\n-        <dc:format>image/svg+xml</dc:format>\n-        <dc:type\n-           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n-        <dc:title />\n-      </cc:Work>\n-    </rdf:RDF>\n-  </metadata>\n-  <g\n-     inkscape:groupmode=\"layer\"\n-     id=\"layer2\"\n-     inkscape:label=\"Release splash\">\n-    <image\n-       sodipodi:absref=\"/home/koppor/jabref/src/graphics/splash/splash-release.svg\"\n-       xlink:href=\"splash-release.svg\"\n-       width=\"576\"\n-       height=\"432\"\n-       id=\"image3381\"\n-       x=\"1\"\n-       y=\"0\" />\n-  </g>\n-  <g\n-     id=\"layer1\"\n-     inkscape:groupmode=\"layer\"\n-     inkscape:label=\"Dev text\"\n-     transform=\"translate(-77.5,-170.36218)\">\n-    <text\n-       xml:space=\"preserve\"\n-       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:41.23898697px;line-height:100%;font-family:'Nimbus Sans L';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#ff0000;fill-opacity:1;stroke:#ff6600;stroke-width:2.8878212;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n-       x=\"210.5853\"\n-       y=\"653.81372\"\n-       id=\"text2911-4\"\n-       sodipodi:linespacing=\"100%\"\n-       transform=\"matrix(0.80568825,-0.44174063,0.52619691,0.95267301,0,0)\"\n-       inkscape:export-filename=\"splash.png\"\n-       inkscape:export-xdpi=\"75\"\n-       inkscape:export-ydpi=\"75\"><tspan\n-         sodipodi:role=\"line\"\n-         id=\"tspan2913-0\"\n-         x=\"210.5853\"\n-         y=\"653.81372\"\n-         style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:85.91455841px;line-height:100%;font-family:'Bitstream Vera Sans';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#ff0000;fill-opacity:1;stroke:#ff6600;stroke-width:2.8878212;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\">dev</tspan></text>\n-    <text\n-       xml:space=\"preserve\"\n-       style=\"font-size:20.00000002px;font-style:normal;font-weight:bold;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans Bold;font-stretch:normal;font-variant:normal\"\n-       x=\"510.92224\"\n-       y=\"226.16539\"\n-       id=\"text3244\"\n-       sodipodi:linespacing=\"125%\"\n-       transform=\"scale(1.0223375,0.97815056)\"><tspan\n-         sodipodi:role=\"line\"\n-         x=\"510.92224\"\n-         y=\"226.16539\"\n-         id=\"tspan3252\"\n-         style=\"font-size:20.00000002px;text-align:center;text-anchor:middle;fill:#ff0000;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-weight:bold;font-style:normal;font-stretch:normal;font-variant:normal\">This is a</tspan><tspan\n-         sodipodi:role=\"line\"\n-         x=\"510.92224\"\n-         y=\"256.10031\"\n-         id=\"tspan3256\"\n-         style=\"font-size:20.00000002px;text-align:center;text-anchor:middle;fill:#ff0000;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-weight:bold;font-style:normal;font-stretch:normal;font-variant:normal\"><tspan\n-   style=\"font-weight:bold;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-style:normal;font-stretch:normal;font-variant:normal;font-size:20.00000002px\"\n-   id=\"tspan3266\">development version</tspan>.</tspan><tspan\n-         sodipodi:role=\"line\"\n-         x=\"510.92224\"\n-         y=\"286.03522\"\n-         id=\"tspan3258\"\n-         style=\"font-size:20.00000002px;text-align:center;text-anchor:middle;fill:#ff0000;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-weight:bold;font-style:normal;font-stretch:normal;font-variant:normal\">Features may</tspan><tspan\n-         sodipodi:role=\"line\"\n-         x=\"510.92224\"\n-         y=\"315.97015\"\n-         id=\"tspan3260\"\n-         style=\"font-size:20.00000002px;text-align:center;text-anchor:middle;fill:#ff0000;-inkscape-font-specification:Bitstream Vera Sans Bold;font-family:Bitstream Vera Sans;font-weight:bold;font-style:normal;font-stretch:normal;font-variant:normal\">not work as expected.</tspan></text>\n-  </g>\n-</svg>, None, None, @@ -47,7 +47,6 @@\n import net.sf.jabref.logic.remote.RemotePreferences;\n import net.sf.jabref.logic.remote.client.RemoteListenerClient;\n import net.sf.jabref.gui.remote.JabRefMessageHandler;\n-import net.sf.jabref.gui.splash.SplashScreenLifecycle;\n import net.sf.jabref.logic.util.FileBasedLock;\n import net.sf.jabref.logic.util.StringUtil;\n import net.sf.jabref.util.Util;\n@@ -71,9 +70,7 @@\n     \n     private static final Log LOGGER = LogFactory.getLog(JabRef.class);\n \n-    private boolean graphicFailure = false;\n     private JabRefCLI cli;\n-    private SplashScreenLifecycle splashScreen = new SplashScreenLifecycle();\n \n     public void start(String[] args) {\n         JabRefPreferences prefs = JabRefPreferences.getInstance();\n@@ -175,7 +172,7 @@ public void start(String[] args) {\n \n         Vector<ParserResult> loaded = processArguments(args, true);\n \n-        if (loaded == null || graphicFailure || cli.isDisableGui() || cli.isShowVersion()) {\n+        if (loaded == null || cli.isDisableGui() || cli.isShowVersion()) {\n             JabRefExecutorService.INSTANCE.shutdownEverything();\n             return;\n         }\n@@ -254,20 +251,6 @@ private static void setCurrentProcessExplicitAppUserModelID(final String appID)\n \n         boolean commandMode = cli.isDisableGui() || cli.isFetcherEngine();\n \n-        // First we quickly scan the command line parameters for any that signal\n-        // that the GUI\n-        // should not be opened. This is used to decide whether we should show the\n-        // splash screen or not.\n-        if (initialStartup && !commandMode && !cli.isDisableSplash()) {\n-            try {\n-                splashScreen.show();\n-            } catch (Throwable ex) {\n-                graphicFailure = true;\n-                System.err.println(Globals.lang(\"Unable to create graphical interface\")\n-                        + \".\");\n-            }\n-        }\n-\n         // Check if we should reset all preferences to default values:\n         if (cli.isPreferencesReset()) {\n             String value = cli.getPreferencesReset();\n@@ -797,8 +780,6 @@ else if (!pr.isPostponedAutosaveFound()) {\n                     JabRef.jrf, 0, \"\"));\n         }\n \n-        splashScreen.hide();\n-\n         /*JOptionPane.showMessageDialog(null, Globals.lang(\"Please note that this \"\n             +\"is an early beta version. Do not use it without backing up your files!\"),\n                 Globals.lang(\"Beta version\"), JOptionPane.WARNING_MESSAGE);*/, @@ -17,10 +17,6 @@ public boolean isShowVersion() {\n         return cl.hasOption(\"version\");\n     }\n \n-    public boolean isDisableSplash() {\n-        return cl.hasOption(\"nosplash\");\n-    }\n-\n     public boolean isBlank() {\n         return cl.hasOption(\"blank\");\n     }\n@@ -126,7 +122,6 @@ private Options getOptions() {\n         // boolean options\n         options.addOption(\"v\", \"version\", false, Globals.lang(\"Display version\"));\n         options.addOption(\"n\", \"nogui\", false, Globals.lang(\"No GUI. Only process command line options.\"));\n-        options.addOption(\"s\", \"nosplash\", false, Globals.lang(\"Do not show splash window at startup\"));\n         options.addOption(\"h\", \"help\", false, Globals.lang(\"Display help on command line options\"));\n         options.addOption(\"l\", \"loads\", false, Globals.lang(\"Load session\"));\n         options.addOption(\"b\", \"blank\", false, Globals.lang(\"Do not open any files at startup\"));, @@ -1,139 +0,0 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n-    This program is free software; you can redistribute it and/or modify\n-    it under the terms of the GNU General Public License as published by\n-    the Free Software Foundation; either version 2 of the License, or\n-    (at your option) any later version.\n-\n-    This program is distributed in the hope that it will be useful,\n-    but WITHOUT ANY WARRANTY; without even the implied warranty of\n-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-    GNU General Public License for more details.\n-\n-    You should have received a copy of the GNU General Public License along\n-    with this program; if not, write to the Free Software Foundation, Inc.,\n-    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n-*/\n-package net.sf.jabref.gui.splash;\n-\n-//import javax.swing.*;\n-import java.awt.EventQueue;\n-import java.awt.Frame;\n-import java.awt.Graphics;\n-import java.awt.Image;\n-import java.awt.MediaTracker;\n-import java.awt.Toolkit;\n-import java.awt.Window;\n-import java.net.URL;\n-\n-/**\n- * <p>Title: </p>\n- * <p>Description: </p>\n- * <p>Copyright: Copyright (c) 2003</p>\n- * <p>Company: </p>\n- * @author not attributable\n- * @version 1.0\n- */\n-\n-class SplashScreen extends Window {\n-\n-    private final Image splashImage;\n-    private boolean paintCalled = false;\n-\n-\n-    private SplashScreen(Frame owner) {\n-        super(owner);\n-        URL imageURL = SplashScreen.class.getResource(\"/images/splash.png\");\n-        splashImage = Toolkit.getDefaultToolkit().createImage(imageURL);\n-\n-        // Load the image\n-        MediaTracker mt = new MediaTracker(this);\n-        mt.addImage(splashImage, 0);\n-        try {\n-            mt.waitForID(0);\n-        } catch (InterruptedException ignored) {\n-        }\n-\n-        // Center the window on the screen.\n-        int imgWidth = splashImage.getWidth(this);\n-        int imgHeight = splashImage.getHeight(this);\n-\n-        setSize(imgWidth, imgHeight);\n-        setLocationRelativeTo(null);\n-\n-        /* Dimension screenDim = Toolkit.getDefaultToolkit().getScreenSize();\n-        setLocation(\n-            (screenDim.width - imgWidth) / 2,\n-            (screenDim.height - imgHeight) / 2\n-        );\n-        */\n-\n-    }\n-\n-    /**\n-     * Updates the display area of the window.\n-     */\n-    @Override\n-    public void update(Graphics g) {\n-        // Note: Since the paint method is going to draw an\n-        // image that covers the complete area of the component we\n-        // do not fill the component with its background color\n-        // here. This avoids flickering.\n-\n-        g.setColor(getForeground());\n-        paint(g);\n-    }\n-\n-    /**\n-     * Paints the image on the window.\n-     */\n-\n-    @Override\n-    public void paint(Graphics g) {\n-        g.drawImage(splashImage, 0, 0, this);\n-\n-        // Notify method splash that the window\n-        // has been painted.\n-        if (!paintCalled) {\n-            paintCalled = true;\n-            synchronized (this) {\n-                notifyAll();\n-            }\n-        }\n-    }\n-\n-    /**\n-     * Constructs and displays a SplashWindow.<p>\n-     * This method is useful for startup splashs.\n-     * Dispose the returned frame to get rid of the splash window.<p>\n-     *\n-     * @return Returns the frame that owns the SplashWindow.\n-     */\n-\n-    public static Frame splash() {\n-        Frame f = new Frame();\n-        SplashScreen w = new SplashScreen(f);\n-\n-        // Show the window.\n-        w.setVisible(true);\n-        w.toFront();\n-\n-        // Note: To make sure the user gets a chance to see the\n-        // splash window we wait until its paint method has been\n-        // called at least once by the AWT event dispatcher thread.\n-\n-        // sebwills adds: However, just in case the paint method never gets called\n-        // (e.g. if the splashscreen is completely obscured by an 'always on top'\n-        // window of some other application), we time-out after 5 seconds.\n-        if (!EventQueue.isDispatchThread()) {\n-            synchronized (w) {\n-                if (!w.paintCalled) {\n-                    try {\n-                        w.wait(5000);\n-                    } catch (InterruptedException ignored) {\n-                    }\n-                }\n-            }\n-        }\n-        return f;\n-    }\n-}, @@ -1,19 +0,0 @@\n-package net.sf.jabref.gui.splash;\n-\n-import java.awt.Frame;\n-\n-public class SplashScreenLifecycle {\n-\n-    private Frame splashScreen;\n-\n-    public void show() {\n-        splashScreen = SplashScreen.splash();\n-    }\n-\n-    public void hide() {\n-        if (splashScreen != null) {\n-            splashScreen.dispose();\n-            splashScreen = null;\n-        }\n-    }\n-}, None, ", 1, 844, "\"removed, removed, removed, removed, removed, removed, removed, modified, modified, removed, removed, removed, \"", 845], ["Francois Charette", "Move net.sf.jabref.TestUtils to package net.sf.jabref.testutils and rename to GuiTestUtils", "08/07/15, 09:02:39 AM", "Francois Charette", "afb4c712d556546785b6d2f3c460b0bc27577b30", ["src/test/java/net/sf/jabref/imports/GeneralFetcherTest.java", "src/test/java/net/sf/jabref/testutils/GuiTestUtils.java"], "@@ -4,7 +4,7 @@\n import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.JabRefMain;\n import net.sf.jabref.SidePaneManager;\n-import net.sf.jabref.TestUtils;\n+import net.sf.jabref.testutils.GuiTestUtils;\n \n import org.junit.After;\n import org.junit.Assert;\n@@ -38,12 +38,12 @@\n     @Test @Ignore\n     public void testResetButton() throws Exception {\n         String testString = \"test string\";\n-        JTextField tf = (JTextField) TestUtils.getChildNamed(GeneralFetcherTest.gf, \"tf\");\n+        JTextField tf = (JTextField) GuiTestUtils.getChildNamed(GeneralFetcherTest.gf, \"tf\");\n         Assert.assertNotNull(tf); // tf found?\n         tf.setText(testString);\n         tf.postActionEvent(); // send message\n         Assert.assertEquals(testString, tf.getText());\n-        JButton reset = (JButton) TestUtils.getChildNamed(GeneralFetcherTest.gf, \"reset\");\n+        JButton reset = (JButton) GuiTestUtils.getChildNamed(GeneralFetcherTest.gf, \"reset\");\n         Assert.assertNotNull(reset); // reset found?\n         reset.doClick(); // \"click\" reset\n         Assert.assertEquals(\"\", tf.getText());, @@ -1,14 +1,13 @@\n-package net.sf.jabref;\n+package net.sf.jabref.testutils;\n \n import java.awt.*;\n \n /**\n- * Provides helper methods for unit testing such as methods for making testing\n- * of GUIs easier.\n+ * Provides helper methods for making testing of GUIs easier.\n  *\n  * @author Dennis Hartrampf, Ines Moosdorf\n  */\n-public class TestUtils {\n+public class GuiTestUtils {\n \n     /**\n      * Get a Component by name.\n@@ -27,7 +26,7 @@ public static Component getChildNamed(Component parent, String name) {\n             Component[] children = ((Container) parent).getComponents();\n \n             for (Component aChildren : children) {\n-                Component child = TestUtils.getChildNamed(aChildren, name);\n+                Component child = GuiTestUtils.getChildNamed(aChildren, name);\n                 if (child != null) {\n                     return child;\n                 }, ", 7, 8, "\"modified, renamed, \"", 15], ["Joerg Lenhard", "Merge branch 'master' into logic-improvements", "08/11/15, 11:25:10 AM", "Joerg Lenhard", "2f6fbab4f280b187d99920fba1a62b0fc1f5f6ae", ["src/main/java/net/sf/jabref/gui/preftabs/AdvancedTab.java", "src/main/java/net/sf/jabref/logic/remote/RemoteUtil.java", "src/test/java/net/sf/jabref/Bug1283.java", "src/test/java/net/sf/jabref/logic/remote/RemoteUtilTest.java", "src/test/java/net/sf/jabref/logic/util/MonthUtilTest.java"], "@@ -296,7 +296,7 @@ public boolean validateSettings() {\n \n         try {\n             int portNumber = Integer.parseInt(remoteServerPort.getText());\n-            if (RemoteUtil.isValidPartNumber(portNumber)) {\n+            if (RemoteUtil.isUserPort(portNumber)) {\n                 return true; // Ok, the number was legal.\n             } else {\n                 throw new NumberFormatException();, @@ -1,7 +1,7 @@\n package net.sf.jabref.logic.remote;\n \n public class RemoteUtil {\n-    public static boolean isValidPartNumber(int portNumber) {\n-        return portNumber > 1024 && portNumber <= 65535;\n+    public static boolean isUserPort(int portNumber) {\n+        return portNumber >= 1024 && portNumber <= 65535;\n     }\n }, @@ -1,16 +0,0 @@\n-package net.sf.jabref;\n-\n-import net.sf.jabref.logic.util.MonthUtil;\n-import org.junit.Assert;\n-import org.junit.Test;\n-\n-import java.io.IOException;\n-\n-public class Bug1283 {\n-\n-    @Test\n-    public void testBug1283() throws IOException {\n-        Assert.assertFalse(MonthUtil.getMonth(\"8,\").isValid());\n-    }\n-\n-}, @@ -0,0 +1,30 @@\n+package net.sf.jabref.logic.remote;\n+\n+import junit.framework.Assert;\n+import org.junit.Test;\n+\n+public class RemoteUtilTest {\n+    @Test\n+    public void rejectPortNumberBelowZero() {\n+        Assert.assertFalse(\"Port number must be non negative.\", RemoteUtil.isUserPort(-55));\n+    }\n+\n+    @Test\n+    public void rejectReservedSystemPorts() {\n+        Assert.assertFalse(\"Port number must be outside reserved system range (0-1023).\", RemoteUtil.isUserPort(0));\n+        Assert.assertFalse(\"Port number must be outside reserved system range (0-1023).\", RemoteUtil.isUserPort(1023));\n+    }\n+\n+    @Test\n+    public void rejectPortsAbove16Bits() {\n+        // 2 ^ 16 - 1 => 65535\n+        Assert.assertFalse(\"Port number should be below 65535.\", RemoteUtil.isUserPort(65536));\n+    }\n+\n+    @Test\n+    public void acceptPortsAboveSystemPorts() {\n+        // ports 1024 -> 65535\n+        Assert.assertTrue(\"Port number in between 1024 and 65535 should be valid.\", RemoteUtil.isUserPort(1024));\n+        Assert.assertTrue(\"Port number in between 1024 and 65535 should be valid.\", RemoteUtil.isUserPort(65535));\n+    }\n+}, @@ -8,7 +8,6 @@\n \n     @Test\n     public void testToMonthNumber() {\n-\n         Assert.assertEquals(0, MonthUtil.getMonth(\"jan\").index);\n         Assert.assertEquals(1, MonthUtil.getMonth(\"feb\").index);\n         Assert.assertEquals(2, MonthUtil.getMonth(\"mar\").index);\n@@ -76,6 +75,6 @@ public void testToMonthNumber() {\n         Assert.assertEquals(-1, MonthUtil.getMonth(\"3.2\").index);\n         Assert.assertEquals(-1, MonthUtil.getMonth(\"#test#\").index);\n         Assert.assertEquals(-1, MonthUtil.getMonth(\"\").index);\n+        Assert.assertFalse(MonthUtil.getMonth(\"8,\").isValid());\n     }\n-\n }\n\\ No newline at end of file, ", 34, 21, "\"modified, modified, removed, added, modified, \"", 55], ["stefan-kolb", "Removes functionality for additional fields via XML file", "08/11/15, 01:08:19 PM", "stefan-kolb", "cc24baf554d89d25d17b5ca99c09a29cbfa9ff85", ["src/main/java/net/sf/jabref/BibtexFields.java"], "@@ -53,11 +53,6 @@\n     public static final String OWNER = \"owner\";\n     public static final String TIMESTAMP = \"timestamp\"; // it's also definied at the JabRefPreferences class\n     private static final String ENTRYTYPE = \"entrytype\";\n-    \n-    /*\n-     * some extra field definitions\n-     */\n-    private static final String ADDITIONAL_FIELDS = \"/resource/fields/fields.xml\";\n \n     public static final String// Using this when I have no database open or when I read\n             // non bibtex file formats (used by the ImportFormatReader.java)\n@@ -244,9 +239,6 @@ private BibtexFields()\n         dummy.setDisplayable(false);\n         add(dummy);\n \n-        // read external field definitions\n-        readXML(ADDITIONAL_FIELDS);\n-\n         // collect all public fields for the PUBLIC_FIELDS array\n         Vector<String> pFields = new Vector<String>(fieldSet.size());\n         for (BibtexSingleField sField : fieldSet.values()) {\n@@ -302,34 +294,6 @@ private void add(BibtexSingleField field)\n         fieldSet.put(key, field);\n     }\n \n-    /** read a xml definiton file and put only NEW fields into the field list */\n-    private void readXML(String resName)\n-    {\n-        TXMLReader reader = new TXMLReader(resName);\n-        if (reader.isReady())\n-        {\n-            // get a list of all fields\n-            NodeList fieldNodes = reader.getNodes(\"field\");\n-\n-            int tagsCount = fieldNodes.getLength();\n-            for (int t = 0; t < tagsCount; t++)\n-            {\n-                Element entry = (Element) fieldNodes.item(t);\n-                String fName = reader.readStringAttribute(entry, \"name\", null);\n-                if (fName != null) // something found ?\n-                {\n-                    fName = fName.toLowerCase();\n-                    BibtexSingleField dummy = fieldSet.get(fName);\n-                    if (dummy == null) // unknown field\n-                    {\n-                        dummy = new BibtexSingleField(reader, entry);\n-                        fieldSet.put(fName, dummy);\n-                    }\n-                }\n-            }\n-        }\n-    }\n-\n     // --------------------------------------------------------------------------\n     //  the \"static area\"\n     // --------------------------------------------------------------------------, ", 0, 36, "\"modified, \"", 36], ["stefan-kolb", "Retain old formatter protocol", "08/14/15, 09:15:15 AM", "stefan-kolb", "5f8321de146fe226b8de4724fa9568448d1a6d2e", ["src/main/java/net/sf/jabref/export/layout/format/DOICheck.java", "src/main/java/net/sf/jabref/export/layout/format/DOIStrip.java"], "@@ -26,6 +26,10 @@\n public class DOICheck implements LayoutFormatter {\n     @Override\n     public String format(String fieldText) {\n-        return DOI.build(fieldText).map(doi -> doi.getURL()).orElse(\"\");\n+        if (fieldText == null) {\n+            return null;\n+        }\n+\n+        return DOI.build(fieldText).map(doi -> doi.getURL()).orElse(fieldText);\n     }\n }, @@ -24,6 +24,10 @@\n public class DOIStrip implements LayoutFormatter {\n     @Override\n     public String format(String fieldText) {\n-        return DOI.build(fieldText).map(doi -> doi.getDOI()).orElse(\"\");\n+        if (fieldText == null) {\n+            return null;\n+        }\n+\n+        return DOI.build(fieldText).map(doi -> doi.getDOI()).orElse(fieldText);\n     }\n }, ", 10, 2, "\"modified, modified, \"", 12], ["Joerg Lenhard", "Refactor remaining classes in entryeditor", "08/14/15, 09:42:23 AM", "Joerg Lenhard", "b7a07a10aa5a94083357810f047e269c18cda2d7", ["src/main/java/net/sf/jabref/gui/entryeditor/EntryEditorTab.java", "src/main/java/net/sf/jabref/gui/entryeditor/EntryEditorTabFocusListener.java", "src/main/java/net/sf/jabref/gui/entryeditor/EntryEditorTabList.java", "src/main/java/net/sf/jabref/gui/entryeditor/SimpleUrlDragDrop.java"], "@@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2014 JabRef contributors.\n+/*  Copyright (C) 2003-2015 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -53,20 +53,23 @@\n \n     private final EntryEditor parent;\n \n-    private final HashMap<String, FieldEditor> editors = new HashMap<String, FieldEditor>();\n+    private final HashMap<String, FieldEditor> editors = new HashMap<>();\n \n     private FieldEditor activeField;\n \n     // UGLY HACK to have a pointer to the fileListEditor to call autoSetLinks()\n     public FileListEditor fileListEditor;\n \n+    private BibtexEntry entry;\n+\n+    private final FocusListener fieldListener = new EntryEditorTabFocusListener(this);\n \n     public EntryEditorTab(JabRefFrame frame, BasePanel panel, List<String> fields, EntryEditor parent,\n-            boolean addKeyField, boolean compressed, String name) {\n+                          boolean addKeyField, boolean compressed, String name) {\n         if (fields != null) {\n             this.fields = fields.toArray(new String[fields.size()]);\n         } else {\n-            this.fields = new String[] {};\n+            this.fields = new String[]{};\n         }\n \n         this.parent = parent;\n@@ -83,49 +86,49 @@ public EntryEditorTab(JabRefFrame frame, BasePanel panel, List<String> fields, E\n     private void setupPanel(JabRefFrame frame, BasePanel bPanel, boolean addKeyField,\n                             boolean compressed, String title) {\n \n-        InputMap im = panel.getInputMap(JComponent.WHEN_FOCUSED);\n-        ActionMap am = panel.getActionMap();\n-\n-        im.put(Globals.prefs.getKey(\"Entry editor, previous entry\"), \"prev\");\n-        am.put(\"prev\", parent.prevEntryAction);\n-        im.put(Globals.prefs.getKey(\"Entry editor, next entry\"), \"next\");\n-        am.put(\"next\", parent.nextEntryAction);\n-\n-        im.put(Globals.prefs.getKey(\"Entry editor, store field\"), \"store\");\n-        am.put(\"store\", parent.storeFieldAction);\n-        im.put(Globals.prefs.getKey(\"Entry editor, next panel\"), \"right\");\n-        im.put(Globals.prefs.getKey(\"Entry editor, next panel 2\"), \"right\");\n-        am.put(\"left\", parent.switchLeftAction);\n-        im.put(Globals.prefs.getKey(\"Entry editor, previous panel\"), \"left\");\n-        im.put(Globals.prefs.getKey(\"Entry editor, previous panel 2\"), \"left\");\n-        am.put(\"right\", parent.switchRightAction);\n-        im.put(Globals.prefs.getKey(\"Help\"), \"help\");\n-        am.put(\"help\", parent.helpAction);\n-        im.put(Globals.prefs.getKey(\"Save database\"), \"save\");\n-        am.put(\"save\", parent.saveDatabaseAction);\n-        im.put(Globals.prefs.getKey(\"Next tab\"), \"nexttab\");\n-        am.put(\"nexttab\", parent.frame.nextTab);\n-        im.put(Globals.prefs.getKey(\"Previous tab\"), \"prevtab\");\n-        am.put(\"prevtab\", parent.frame.prevTab);\n+        InputMap inputMap = panel.getInputMap(JComponent.WHEN_FOCUSED);\n+        ActionMap actionMap = panel.getActionMap();\n+\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, previous entry\"), \"prev\");\n+        actionMap.put(\"prev\", parent.prevEntryAction);\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, next entry\"), \"next\");\n+        actionMap.put(\"next\", parent.nextEntryAction);\n+\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, store field\"), \"store\");\n+        actionMap.put(\"store\", parent.storeFieldAction);\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, next panel\"), \"right\");\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, next panel 2\"), \"right\");\n+        actionMap.put(\"left\", parent.switchLeftAction);\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, previous panel\"), \"left\");\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, previous panel 2\"), \"left\");\n+        actionMap.put(\"right\", parent.switchRightAction);\n+        inputMap.put(Globals.prefs.getKey(\"Help\"), \"help\");\n+        actionMap.put(\"help\", parent.helpAction);\n+        inputMap.put(Globals.prefs.getKey(\"Save database\"), \"save\");\n+        actionMap.put(\"save\", parent.saveDatabaseAction);\n+        inputMap.put(Globals.prefs.getKey(\"Next tab\"), \"nexttab\");\n+        actionMap.put(\"nexttab\", parent.frame.nextTab);\n+        inputMap.put(Globals.prefs.getKey(\"Previous tab\"), \"prevtab\");\n+        actionMap.put(\"prevtab\", parent.frame.prevTab);\n \n         panel.setName(title);\n \n         int fieldsPerRow = compressed ? 2 : 1;\n-        //String rowSpec = \"left:pref, 4dlu, fill:pref:grow, 4dlu, fill:pref\";\n+\n         String colSpec = compressed ? \"fill:pref, 1dlu, fill:10dlu:grow, 1dlu, fill:pref, \"\n                 + \"8dlu, fill:pref, 1dlu, fill:10dlu:grow, 1dlu, fill:pref\"\n                 : \"fill:pref, 1dlu, fill:pref:grow, 1dlu, fill:pref\";\n-        StringBuilder sb = new StringBuilder();\n+        StringBuilder stringBuilder = new StringBuilder();\n         int rows = (int) Math.ceil((double) fields.length / fieldsPerRow);\n         for (int i = 0; i < rows; i++) {\n-            sb.append(\"fill:pref:grow, \");\n+            stringBuilder.append(\"fill:pref:grow, \");\n         }\n         if (addKeyField) {\n-            sb.append(\"4dlu, fill:pref\");\n-        } else if (sb.length() >= 2) {\n-            sb.delete(sb.length() - 2, sb.length());\n+            stringBuilder.append(\"4dlu, fill:pref\");\n+        } else if (stringBuilder.length() >= 2) {\n+            stringBuilder.delete(stringBuilder.length() - 2, stringBuilder.length());\n         }\n-        String rowSpec = sb.toString();\n+        String rowSpec = stringBuilder.toString();\n \n         DefaultFormBuilder builder = new DefaultFormBuilder\n                 (new FormLayout(colSpec, rowSpec), panel);\n@@ -134,49 +137,47 @@ private void setupPanel(JabRefFrame frame, BasePanel bPanel, boolean addKeyField\n             // Create the text area:\n             int editorType = BibtexFields.getEditorType(fields[i]);\n \n-            final FieldEditor ta;\n+            final FieldEditor fieldEditor;\n             int defaultHeight;\n             int wHeight = (int) (50.0 * BibtexFields.getFieldWeight(fields[i]));\n             if (editorType == GUIGlobals.FILE_LIST_EDITOR) {\n-                ta = new FileListEditor(frame, bPanel.metaData(), fields[i], null, parent);\n-                fileListEditor = (FileListEditor) ta;\n+                fieldEditor = new FileListEditor(frame, bPanel.metaData(), fields[i], null, parent);\n+                fileListEditor = (FileListEditor) fieldEditor;\n                 defaultHeight = 0;\n+            } else {\n+                fieldEditor = new FieldTextArea(fields[i], null);\n+                frame.getSearchManager().addSearchListener((FieldTextArea) fieldEditor);\n+                defaultHeight = fieldEditor.getPane().getPreferredSize().height;\n             }\n-            else {\n-                ta = new FieldTextArea(fields[i], null);\n-                frame.getSearchManager().addSearchListener((FieldTextArea) ta);\n-                defaultHeight = ta.getPane().getPreferredSize().height;\n-            }\n-            //ta.addUndoableEditListener(bPanel.undoListener);\n \n-            JComponent ex = parent.getExtra(fields[i], ta);\n+            JComponent extra = parent.getExtra(fields[i], fieldEditor);\n \n             // Add autocompleter listener, if required for this field:\n-            AutoCompleter autoComp = bPanel.getAutoCompleters().get(fields[i]);\n-            AutoCompleteListener acl = null;\n-            if (autoComp != null) {\n-                acl = new AutoCompleteListener(autoComp);\n+            AutoCompleter autoCompleter = bPanel.getAutoCompleters().get(fields[i]);\n+            AutoCompleteListener autoCompleteListener = null;\n+            if (autoCompleter != null) {\n+                autoCompleteListener = new AutoCompleteListener(autoCompleter);\n             }\n-            setupJTextComponent(ta.getTextComponent(), acl);\n-            ta.setAutoCompleteListener(acl);\n+            setupJTextComponent(fieldEditor.getTextComponent(), autoCompleteListener);\n+            fieldEditor.setAutoCompleteListener(autoCompleteListener);\n \n             // Store the editor for later reference:\n-            editors.put(fields[i], ta);\n+            editors.put(fields[i], fieldEditor);\n             if (i == 0) {\n-                activeField = ta;\n+                activeField = fieldEditor;\n             }\n-            //System.out.println(fields[i]+\": \"+BibtexFields.getFieldWeight(fields[i]));\n+\n             if (!compressed) {\n-                ta.getPane().setPreferredSize(new Dimension(100, Math.max(defaultHeight, wHeight)));\n+                fieldEditor.getPane().setPreferredSize(new Dimension(100, Math.max(defaultHeight, wHeight)));\n             }\n-            builder.append(ta.getLabel());\n-            if (ex == null) {\n-                builder.append(ta.getPane(), 3);\n+            builder.append(fieldEditor.getLabel());\n+            if (extra == null) {\n+                builder.append(fieldEditor.getPane(), 3);\n             } else {\n-                builder.append(ta.getPane());\n+                builder.append(fieldEditor.getPane());\n                 JPanel pan = new JPanel();\n                 pan.setLayout(new BorderLayout());\n-                pan.add(ex, BorderLayout.NORTH);\n+                pan.add(extra, BorderLayout.NORTH);\n                 builder.append(pan);\n             }\n             if ((i + 1) % fieldsPerRow == 0) {\n@@ -186,48 +187,44 @@ private void setupPanel(JabRefFrame frame, BasePanel bPanel, boolean addKeyField\n \n         // Add the edit field for Bibtex-key.\n         if (addKeyField) {\n-            final FieldTextField tf = new FieldTextField(BibtexFields.KEY_FIELD, parent\n+            final FieldTextField textField = new FieldTextField(BibtexFields.KEY_FIELD, parent\n                     .getEntry().getField(BibtexFields.KEY_FIELD), true);\n-            //tf.addUndoableEditListener(bPanel.undoListener);\n-            setupJTextComponent(tf, null);\n+            setupJTextComponent(textField, null);\n \n-            editors.put(\"bibtexkey\", tf);\n+            editors.put(\"bibtexkey\", textField);\n             /*\n              * If the key field is the only field, we should have only one\n              * editor, and this one should be set as active initially:\n              */\n             if (editors.size() == 1) {\n-                activeField = tf;\n+                activeField = textField;\n             }\n             builder.nextLine();\n-            builder.append(tf.getLabel());\n-            builder.append(tf, 3);\n+            builder.append(textField.getLabel());\n+            builder.append(textField, 3);\n         }\n     }\n \n \n-    private BibtexEntry entry;\n-\n-\n     private BibtexEntry getEntry() {\n         return entry;\n     }\n \n-    private boolean isFieldModified(FieldEditor f) {\n-        String text = f.getText().trim();\n+    private boolean isFieldModified(FieldEditor fieldEditor) {\n+        String text = fieldEditor.getText().trim();\n \n         if (text.isEmpty()) {\n-            return getEntry().getField(f.getFieldName()) != null;\n+            return getEntry().getField(fieldEditor.getFieldName()) != null;\n         } else {\n-            Object entryValue = getEntry().getField(f.getFieldName());\n+            Object entryValue = getEntry().getField(fieldEditor.getFieldName());\n             return entryValue == null || !entryValue.toString().equals(text);\n         }\n     }\n \n-    public void markIfModified(FieldEditor f) {\n+    public void markIfModified(FieldEditor fieldEditor) {\n         // Only mark as changed if not already is and the field was indeed\n         // modified\n-        if (!updating && !parent.panel.isBaseChanged() && isFieldModified(f)) {\n+        if (!updating && !parent.panel.isBaseChanged() && isFieldModified(fieldEditor)) {\n             markBaseChanged();\n         }\n     }\n@@ -238,13 +235,13 @@ private void markBaseChanged() {\n \n     /**\n      * Only sets the activeField variable but does not focus it.\n-     * \n+     * <p>\n      * Call activate afterwards.\n-     * \n-     * @param c\n+     *\n+     * @param fieldEditor\n      */\n-    public void setActive(FieldEditor c) {\n-        activeField = c;\n+    public void setActive(FieldEditor fieldEditor) {\n+        activeField = fieldEditor;\n     }\n \n     public FieldEditor getActive() {\n@@ -266,7 +263,6 @@ public void activate() {\n \n     /**\n      * Reset all fields from the data in the BibtexEntry.\n-     * \n      */\n     public void updateAll() {\n         setEntry(getEntry());\n@@ -296,8 +292,8 @@ public boolean updateField(String field, String content) {\n         if (!editors.containsKey(field)) {\n             return false;\n         }\n-        FieldEditor ed = editors.get(field);\n-        ed.setText(content);\n+        FieldEditor fieldEditor = editors.get(field);\n+        fieldEditor.setText(content);\n         return true;\n     }\n \n@@ -330,10 +326,10 @@ public EntryEditor getParent() {\n \n     /**\n      * Set up key bindings and focus listener for the FieldEditor.\n-     * \n+     *\n      * @param component\n      */\n-    private void setupJTextComponent(final JComponent component, final AutoCompleteListener acl) {\n+    private void setupJTextComponent(final JComponent component, final AutoCompleteListener autoCompleteListener) {\n \n         // Here we add focus listeners to the component. The funny code is because we need\n         // to guarantee that the AutoCompleteListener - if used - is called before fieldListener\n@@ -343,57 +339,51 @@ private void setupJTextComponent(final JComponent component, final AutoCompleteL\n         // listeners, so we handle this by only adding the AutoCompleteListener and telling\n         // it to call fieldListener afterwards. If no AutoCompleteListener is used, we\n         // add the fieldListener normally.\n-        if (acl != null) {\n-            component.addKeyListener(acl);\n-            component.addFocusListener(acl);\n-            acl.setNextFocusListener(fieldListener);\n+        if (autoCompleteListener != null) {\n+            component.addKeyListener(autoCompleteListener);\n+            component.addFocusListener(autoCompleteListener);\n+            autoCompleteListener.setNextFocusListener(fieldListener);\n         } else {\n             component.addFocusListener(fieldListener);\n         }\n \n-        InputMap im = component.getInputMap(JComponent.WHEN_FOCUSED);\n-        ActionMap am = component.getActionMap();\n-\n-        im.put(Globals.prefs.getKey(\"Entry editor, previous entry\"), \"prev\");\n-        am.put(\"prev\", parent.prevEntryAction);\n-        im.put(Globals.prefs.getKey(\"Entry editor, next entry\"), \"next\");\n-        am.put(\"next\", parent.nextEntryAction);\n-\n-        im.put(Globals.prefs.getKey(\"Entry editor, store field\"), \"store\");\n-        am.put(\"store\", parent.storeFieldAction);\n-        im.put(Globals.prefs.getKey(\"Entry editor, next panel\"), \"right\");\n-        im.put(Globals.prefs.getKey(\"Entry editor, next panel 2\"), \"right\");\n-        am.put(\"left\", parent.switchLeftAction);\n-        im.put(Globals.prefs.getKey(\"Entry editor, previous panel\"), \"left\");\n-        im.put(Globals.prefs.getKey(\"Entry editor, previous panel 2\"), \"left\");\n-        am.put(\"right\", parent.switchRightAction);\n-        im.put(Globals.prefs.getKey(\"Help\"), \"help\");\n-        am.put(\"help\", parent.helpAction);\n-        im.put(Globals.prefs.getKey(\"Save database\"), \"save\");\n-        am.put(\"save\", parent.saveDatabaseAction);\n-        im.put(Globals.prefs.getKey(\"Next tab\"), \"nexttab\");\n-        am.put(\"nexttab\", parent.frame.nextTab);\n-        im.put(Globals.prefs.getKey(\"Previous tab\"), \"prevtab\");\n-        am.put(\"prevtab\", parent.frame.prevTab);\n-\n-        try {\n-            HashSet<AWTKeyStroke> keys = new HashSet<AWTKeyStroke>(component\n-                    .getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS));\n-            keys.clear();\n-            keys.add(AWTKeyStroke.getAWTKeyStroke(\"pressed TAB\"));\n-            component.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, keys);\n-            keys = new HashSet<AWTKeyStroke>(component\n-                    .getFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS));\n-            keys.clear();\n-            keys.add(KeyStroke.getKeyStroke(\"shift pressed TAB\"));\n-            component.setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS, keys);\n-        } catch (Throwable t) {\n-            System.err.println(t);\n-        }\n+        InputMap inputMap = component.getInputMap(JComponent.WHEN_FOCUSED);\n+        ActionMap actionMap = component.getActionMap();\n+\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, previous entry\"), \"prev\");\n+        actionMap.put(\"prev\", parent.prevEntryAction);\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, next entry\"), \"next\");\n+        actionMap.put(\"next\", parent.nextEntryAction);\n+\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, store field\"), \"store\");\n+        actionMap.put(\"store\", parent.storeFieldAction);\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, next panel\"), \"right\");\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, next panel 2\"), \"right\");\n+        actionMap.put(\"left\", parent.switchLeftAction);\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, previous panel\"), \"left\");\n+        inputMap.put(Globals.prefs.getKey(\"Entry editor, previous panel 2\"), \"left\");\n+        actionMap.put(\"right\", parent.switchRightAction);\n+        inputMap.put(Globals.prefs.getKey(\"Help\"), \"help\");\n+        actionMap.put(\"help\", parent.helpAction);\n+        inputMap.put(Globals.prefs.getKey(\"Save database\"), \"save\");\n+        actionMap.put(\"save\", parent.saveDatabaseAction);\n+        inputMap.put(Globals.prefs.getKey(\"Next tab\"), \"nexttab\");\n+        actionMap.put(\"nexttab\", parent.frame.nextTab);\n+        inputMap.put(Globals.prefs.getKey(\"Previous tab\"), \"prevtab\");\n+        actionMap.put(\"prevtab\", parent.frame.prevTab);\n+\n+\n+        HashSet<AWTKeyStroke> keys = new HashSet<>(component\n+                .getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS));\n+        keys.clear();\n+        keys.add(AWTKeyStroke.getAWTKeyStroke(\"pressed TAB\"));\n+        component.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, keys);\n+        keys = new HashSet<>(component\n+                .getFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS));\n+        keys.clear();\n+        keys.add(KeyStroke.getKeyStroke(\"shift pressed TAB\"));\n+        component.setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS, keys);\n \n     }\n \n-\n-    private final FocusListener fieldListener = new EntryEditorTabFocusListener(this);\n-\n }, @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2014 JabRef contributors.\n+/*  Copyright (C) 2003-2015 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -31,9 +31,10 @@\n  */\n class EntryEditorTabFocusListener implements FocusListener {\n \n-    private JTextComponent c;\n+    private JTextComponent textComponent;\n+\n+    private DocumentListener documentListener;\n \n-    private DocumentListener d;\n     private final EntryEditorTab entryEditorTab;\n \n \n@@ -42,27 +43,27 @@ public EntryEditorTabFocusListener(final EntryEditorTab entryEditorTab) {\n     }\n \n     @Override\n-    public void focusGained(FocusEvent e) {\n+    public void focusGained(FocusEvent event) {\n \n         synchronized (this) {\n-            if (c != null) {\n-                c.getDocument().removeDocumentListener(d);\n-                c = null;\n-                d = null;\n+            if (textComponent != null) {\n+                textComponent.getDocument().removeDocumentListener(documentListener);\n+                textComponent = null;\n+                documentListener = null;\n             }\n \n-            if (e.getSource() instanceof JTextComponent) {\n+            if (event.getSource() instanceof JTextComponent) {\n \n-                c = (JTextComponent) e.getSource();\n+                textComponent = (JTextComponent) event.getSource();\n                 /**\n                  * [ 1553552 ] Not properly detecting changes to flag as\n                  * changed\n                  */\n-                d = new DocumentListener() {\n+                documentListener = new DocumentListener() {\n \n                     void fire() {\n-                        if (c.isFocusOwner()) {\n-                            entryEditorTab.markIfModified((FieldEditor) c);\n+                        if (textComponent.isFocusOwner()) {\n+                            entryEditorTab.markIfModified((FieldEditor) textComponent);\n                         }\n                     }\n \n@@ -81,14 +82,14 @@ public void removeUpdate(DocumentEvent e) {\n                         fire();\n                     }\n                 };\n-                c.getDocument().addDocumentListener(d);\n+                textComponent.getDocument().addDocumentListener(documentListener);\n \n                 /**\n                  * Makes the vertical scroll panel view follow the focus\n                  */\n-                Component cScrollPane = c.getParent().getParent();\n-                if (cScrollPane instanceof JScrollPane) {\n-                    JScrollPane componentPane = (JScrollPane) cScrollPane;\n+                Component scrollPane = textComponent.getParent().getParent();\n+                if (scrollPane instanceof JScrollPane) {\n+                    JScrollPane componentPane = (JScrollPane) scrollPane;\n                     Component cPane = componentPane.getParent();\n                     if (cPane instanceof JPanel) {\n                         JPanel panel = (JPanel) cPane;\n@@ -100,21 +101,21 @@ public void removeUpdate(DocumentEvent e) {\n             }\n         }\n \n-        entryEditorTab.setActive((FieldEditor) e.getSource());\n+        entryEditorTab.setActive((FieldEditor) event.getSource());\n \n     }\n \n     @Override\n-    public void focusLost(FocusEvent e) {\n+    public void focusLost(FocusEvent event) {\n         synchronized (this) {\n-            if (c != null) {\n-                c.getDocument().removeDocumentListener(d);\n-                c = null;\n-                d = null;\n+            if (textComponent != null) {\n+                textComponent.getDocument().removeDocumentListener(documentListener);\n+                textComponent = null;\n+                documentListener = null;\n             }\n         }\n-        if (!e.isTemporary()) {\n-            entryEditorTab.getParent().updateField(e.getSource());\n+        if (!event.isTemporary()) {\n+            entryEditorTab.getParent().updateField(event.getSource());\n         }\n     }\n }, @@ -1,4 +1,4 @@\n-/*  Copyright (C) 2003-2011 JabRef contributors.\n+/*  Copyright (C) 2003-2015 JabRef contributors.\n     This program is free software; you can redistribute it and/or modify\n     it under the terms of the GNU General Public License as published by\n     the Free Software Foundation; either version 2 of the License, or\n@@ -36,8 +36,8 @@ public EntryEditorTabList() {\n     }\n \n     private void init() {\n-        list = new ArrayList<List<String>>();\n-        names = new ArrayList<String>();\n+        list = new ArrayList<>();\n+        names = new ArrayList<>();\n         int i = 0;\n         String name;\n         String[] fields;, @@ -1,28 +1,17 @@\n-/*\n-Copyright (C) 2004 E. Putrycz\n-\n-All programs in this directory and\n-subdirectories are published under the GNU General Public License as\n-described below.\n-\n-This program is free software; you can redistribute it and/or modify\n-it under the terms of the GNU General Public License as published by\n-the Free Software Foundation; either version 2 of the License, or (at\n-your option) any later version.\n-\n-This program is distributed in the hope that it will be useful, but\n-WITHOUT ANY WARRANTY; without even the implied warranty of\n-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n-General Public License for more details.\n-\n-You should have received a copy of the GNU General Public License\n-along with this program; if not, write to the Free Software\n-Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307\n-USA\n-\n-Further information about the GNU GPL is available at:\n-http://www.gnu.org/copyleft/gpl.ja.html\n-\n+/*  Copyright (C) 2003-2015 JabRef contributors.\n+    This program is free software; you can redistribute it and/or modify\n+    it under the terms of the GNU General Public License as published by\n+    the Free Software Foundation; either version 2 of the License, or\n+    (at your option) any later version.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU General Public License for more details.\n+\n+    You should have received a copy of the GNU General Public License along\n+    with this program; if not, write to the Free Software Foundation, Inc.,\n+    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n package net.sf.jabref.gui.entryeditor;\n \n@@ -103,18 +92,18 @@ public void dragExit(DropTargetEvent dte) {\n      * @see java.awt.dnd.DropTargetListener#drop(java.awt.dnd.DropTargetDropEvent)\n      */\n     @Override\n-    public void drop(DropTargetDropEvent dtde) {\n-        Transferable tsf = dtde.getTransferable();\n-        dtde.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);\n+    public void drop(DropTargetDropEvent event) {\n+        Transferable tsf = event.getTransferable();\n+        event.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);\n         //try with an URL\n-        DataFlavor dtURL = null;\n+        DataFlavor dataFlavor = null;\n         try {\n-            dtURL = new DataFlavor(\"application/x-java-url; class=java.net.URL\");\n+            dataFlavor = new DataFlavor(\"application/x-java-url; class=java.net.URL\");\n         } catch (ClassNotFoundException e) {\n             LOGGER.warn(\"Could not find DropTargetDropEvent class\", e);\n         }\n         try {\n-            URL url = (URL) tsf.getTransferData(dtURL);\n+            URL url = (URL) tsf.getTransferData(dataFlavor);\n             //insert URL\n             editor.setText(url.toString());\n             storeFieldAction.actionPerformed(new ActionEvent(editor, 0, \"\"));, ", 171, 191, "\"modified, modified, modified, modified, \"", 362], ["Stefan Kolb", "Ignore unreliable ACSTest on CI server", "10/09/15, 01:28:47 PM", "Stefan Kolb", "5f1419a96ae202edac7d87ac5dba74c98ff9a481", ["src/main/java/net/sf/jabref/logic/fetcher/ACS.java", "src/test/java/net/sf/jabref/logic/fetcher/ACSTest.java"], "@@ -41,7 +41,7 @@\n         if(doi.isPresent()) {\n             String source = String.format(SOURCE, doi.get().getDOI());\n             // Retrieve PDF link\n-            Document html = Jsoup.connect(source).timeout(5000).ignoreHttpErrors(true).get();\n+            Document html = Jsoup.connect(source).ignoreHttpErrors(true).get();\n             Element link = html.select(\".pdf-high-res a\").first();\n \n             if(link != null) {, @@ -2,7 +2,9 @@\n \n import net.sf.jabref.model.entry.BibtexEntry;\n import net.sf.jabref.logic.fetcher.ACS;\n+import net.sf.jabref.support.DevEnvironment;\n import org.junit.Assert;\n+import org.junit.Assume;\n import org.junit.Before;\n import org.junit.Test;\n \n@@ -27,6 +29,9 @@ public void rejectNullParameter() throws IOException {\n \n     @Test\n     public void findByDOI() throws IOException {\n+        // CI server is unreliable\n+        Assume.assumeFalse(DevEnvironment.isCIServer());\n+\n         entry.setField(\"doi\", \"10.1021/bk-2006-STYG.ch014\");\n \n         Assert.assertEquals(\n@@ -37,6 +42,9 @@ public void findByDOI() throws IOException {\n \n     @Test\n     public void notFoundByDOI() throws IOException {\n+        // CI server is unreliable\n+        Assume.assumeFalse(DevEnvironment.isCIServer());\n+\n         entry.setField(\"doi\", \"10.1021/bk-2006-WWW.ch014\");\n \n         Assert.assertEquals(Optional.empty(), finder.findFullText(entry));, ", 9, 1, "\"modified, modified, \"", 10], ["Joerg Lenhard", "Move JabRefFrame and BasePanel to the gui package", "08/18/15, 10:14:47 AM", "Joerg Lenhard", "5801e56de801d1fb3a21d6dbb20ab4cd68c650f0", ["src/main/java/net/sf/jabref/DuplicateResolverDialog.java", "src/main/java/net/sf/jabref/FindUnlinkedFilesDialog.java", "src/main/java/net/sf/jabref/Globals.java", "src/main/java/net/sf/jabref/HandleDuplicateWarnings.java", "src/main/java/net/sf/jabref/JabRef.java", "src/main/java/net/sf/jabref/UrlDragDrop.java", "src/main/java/net/sf/jabref/collab/Change.java", "src/main/java/net/sf/jabref/collab/ChangeDisplayDialog.java", "src/main/java/net/sf/jabref/collab/ChangeScanner.java", "src/main/java/net/sf/jabref/collab/EntryAddChange.java", "src/main/java/net/sf/jabref/collab/EntryChange.java", "src/main/java/net/sf/jabref/collab/EntryDeleteChange.java", "src/main/java/net/sf/jabref/collab/FileUpdatePanel.java", "src/main/java/net/sf/jabref/collab/GroupChange.java", "src/main/java/net/sf/jabref/collab/MetaDataChange.java", "src/main/java/net/sf/jabref/collab/PreambleChange.java", "src/main/java/net/sf/jabref/collab/StringAddChange.java", "src/main/java/net/sf/jabref/collab/StringChange.java", "src/main/java/net/sf/jabref/collab/StringNameChange.java", "src/main/java/net/sf/jabref/collab/StringRemoveChange.java", "src/main/java/net/sf/jabref/export/AutoSaveManager.java", "src/main/java/net/sf/jabref/export/CustomExportDialog.java", "src/main/java/net/sf/jabref/export/ExpandEndnoteFilters.java", "src/main/java/net/sf/jabref/export/ExportCustomizationDialog.java", "src/main/java/net/sf/jabref/export/ExportFormats.java", "src/main/java/net/sf/jabref/export/ExportToClipboardAction.java", "src/main/java/net/sf/jabref/export/SaveAllAction.java", "src/main/java/net/sf/jabref/export/SaveDatabaseAction.java", "src/main/java/net/sf/jabref/external/AttachFileAction.java", "src/main/java/net/sf/jabref/external/AutoSetExternalFileForEntries.java", "src/main/java/net/sf/jabref/external/DownloadExternalFile.java", "src/main/java/net/sf/jabref/external/DroppedFileHandler.java", "src/main/java/net/sf/jabref/external/ExternalFileMenuItem.java", "src/main/java/net/sf/jabref/external/ExternalFilePanel.java", "src/main/java/net/sf/jabref/external/ExternalFileTypeEditor.java", "src/main/java/net/sf/jabref/external/FileLinksUpgradeWarning.java", "src/main/java/net/sf/jabref/external/FindFullTextAction.java", "src/main/java/net/sf/jabref/external/MoveFileAction.java", "src/main/java/net/sf/jabref/external/PushToApplication.java", "src/main/java/net/sf/jabref/external/PushToApplicationAction.java", "src/main/java/net/sf/jabref/external/PushToApplicationButton.java", "src/main/java/net/sf/jabref/external/PushToEmacs.java", "src/main/java/net/sf/jabref/external/PushToLatexEditor.java", "src/main/java/net/sf/jabref/external/PushToLyx.java", "src/main/java/net/sf/jabref/external/PushToTeXstudio.java", "src/main/java/net/sf/jabref/external/PushToVim.java", "src/main/java/net/sf/jabref/external/PushToWinEdt.java", "src/main/java/net/sf/jabref/external/TransferableFileLinkSelection.java", "src/main/java/net/sf/jabref/external/WriteXMPAction.java", "src/main/java/net/sf/jabref/external/WriteXMPEntryEditorAction.java", "src/main/java/net/sf/jabref/groups/AddToGroupAction.java", "src/main/java/net/sf/jabref/groups/AutoGroupDialog.java", "src/main/java/net/sf/jabref/groups/EntryTableTransferHandler.java", "src/main/java/net/sf/jabref/groups/GroupDialog.java", "src/main/java/net/sf/jabref/groups/GroupSelector.java", "src/main/java/net/sf/jabref/groups/RemoveFromGroupAction.java", "src/main/java/net/sf/jabref/gui/BasePanel.java", "src/main/java/net/sf/jabref/gui/BibtexKeyPatternDialog.java", "src/main/java/net/sf/jabref/gui/ContentSelectorDialog2.java", "src/main/java/net/sf/jabref/gui/DatabasePropertiesDialog.java", "src/main/java/net/sf/jabref/gui/DuplicateSearch.java", "src/main/java/net/sf/jabref/gui/EntryTypeDialog.java", "src/main/java/net/sf/jabref/gui/FieldContentSelector.java", "src/main/java/net/sf/jabref/gui/FieldWeightDialog.java", "src/main/java/net/sf/jabref/gui/FileHistory.java", "src/main/java/net/sf/jabref/gui/FileListEntryEditor.java", "src/main/java/net/sf/jabref/gui/GroupAddRemoveDialog.java", "src/main/java/net/sf/jabref/gui/ImportInspectionDialog.java", "src/main/java/net/sf/jabref/gui/IncrementalSearcher.java", "src/main/java/net/sf/jabref/gui/JabRefFrame.java", "src/main/java/net/sf/jabref/gui/KeyBindingsDialog.java", "src/main/java/net/sf/jabref/gui/MainTableFormat.java", "src/main/java/net/sf/jabref/gui/MergeDialog.java", "src/main/java/net/sf/jabref/gui/MergeEntriesDialog.java", "src/main/java/net/sf/jabref/gui/PdfPreviewPanel.java", "src/main/java/net/sf/jabref/gui/PreambleEditor.java", "src/main/java/net/sf/jabref/gui/PreviewPanel.java", "src/main/java/net/sf/jabref/gui/ReplaceStringDialog.java", "src/main/java/net/sf/jabref/gui/RightClickMenu.java", "src/main/java/net/sf/jabref/gui/SearchManager2.java", "src/main/java/net/sf/jabref/gui/SearchResultsDialog.java", "src/main/java/net/sf/jabref/gui/SidePane.java", "src/main/java/net/sf/jabref/gui/SidePaneComponent.java", "src/main/java/net/sf/jabref/gui/SidePaneManager.java", "src/main/java/net/sf/jabref/gui/SortTabsAction.java", "src/main/java/net/sf/jabref/gui/StringDialog.java", "src/main/java/net/sf/jabref/gui/SysTray.java", "src/main/java/net/sf/jabref/gui/WaitForSaveOperation.java", "src/main/java/net/sf/jabref/gui/entryeditor/EntryEditorTab.java", "src/main/java/net/sf/jabref/gui/fieldeditors/FileListEditorTransferHandler.java", "src/main/java/net/sf/jabref/gui/fieldeditors/PreviewPanelTransferHandler.java", "src/main/java/net/sf/jabref/gui/help/HelpDialog.java", "src/main/java/net/sf/jabref/gui/journals/AbbreviateAction.java", "src/main/java/net/sf/jabref/gui/journals/ManageJournalsAction.java", "src/main/java/net/sf/jabref/gui/journals/ManageJournalsPanel.java", "src/main/java/net/sf/jabref/gui/journals/UnabbreviateAction.java", "src/main/java/net/sf/jabref/gui/labelPattern/ResolveDuplicateLabelDialog.java", "src/main/java/net/sf/jabref/gui/labelPattern/SearchFixDuplicateLabels.java", "src/main/java/net/sf/jabref/gui/preftabs/EntryEditorPrefsTab.java", "src/main/java/net/sf/jabref/gui/preftabs/ExternalTab.java", "src/main/java/net/sf/jabref/gui/preftabs/FileTab.java", "src/main/java/net/sf/jabref/gui/preftabs/GeneralTab.java", "src/main/java/net/sf/jabref/gui/preftabs/PreferencesDialog.java", "src/main/java/net/sf/jabref/gui/preftabs/PreviewPrefsTab.java", "src/main/java/net/sf/jabref/gui/preftabs/TableColumnsTab.java", "src/main/java/net/sf/jabref/gui/undo/CountingUndoManager.java", "src/main/java/net/sf/jabref/gui/undo/UndoableInsertEntry.java", "src/main/java/net/sf/jabref/gui/undo/UndoableInsertString.java", "src/main/java/net/sf/jabref/gui/undo/UndoablePreambleChange.java", "src/main/java/net/sf/jabref/gui/undo/UndoableRemoveEntry.java", "src/main/java/net/sf/jabref/gui/undo/UndoableRemoveString.java", "src/main/java/net/sf/jabref/gui/undo/UndoableStringChange.java", "src/main/java/net/sf/jabref/gui/worker/MarkEntriesAction.java", "src/main/java/net/sf/jabref/gui/worker/SendAsEMailAction.java", "src/main/java/net/sf/jabref/imports/AppendDatabaseAction.java", "src/main/java/net/sf/jabref/imports/AutosaveStartupPrompter.java", "src/main/java/net/sf/jabref/imports/CheckForNewEntryTypesAction.java", "src/main/java/net/sf/jabref/imports/EntryFromFileCreatorManager.java", "src/main/java/net/sf/jabref/imports/GeneralFetcher.java", "src/main/java/net/sf/jabref/imports/ImportCustomizationDialog.java", "src/main/java/net/sf/jabref/imports/ImportFormats.java", "src/main/java/net/sf/jabref/imports/ImportMenuItem.java", "src/main/java/net/sf/jabref/imports/OpenDatabaseAction.java", "src/main/java/net/sf/jabref/imports/PostOpenAction.java", "src/main/java/net/sf/jabref/oo/AdvancedCiteDialog.java", "src/main/java/net/sf/jabref/oo/CitationManager.java", "src/main/java/net/sf/jabref/oo/OpenOfficePanel.java", "src/main/java/net/sf/jabref/oo/StyleSelectDialog.java", "src/main/java/net/sf/jabref/specialfields/SpecialFieldAction.java", "src/main/java/net/sf/jabref/specialfields/SpecialFieldDropDown.java", "src/main/java/net/sf/jabref/specialfields/SpecialFieldMenuAction.java", "src/main/java/net/sf/jabref/specialfields/SpecialFieldValue.java", "src/main/java/net/sf/jabref/sql/DBImportExportDialog.java", "src/main/java/net/sf/jabref/sql/DbConnectAction.java", "src/main/java/net/sf/jabref/sql/exporter/DBExporter.java", "src/main/java/net/sf/jabref/sql/importer/DbImportAction.java", "src/main/java/net/sf/jabref/util/JabRefDesktop.java", "src/main/java/net/sf/jabref/util/ManageKeywordsAction.java", "src/main/java/net/sf/jabref/util/MassSetFieldAction.java", "src/main/java/net/sf/jabref/wizard/auximport/gui/FromAuxDialog.java", "src/main/java/net/sf/jabref/wizard/integrity/gui/IntegrityMessagePanel.java", "src/main/java/net/sf/jabref/wizard/integrity/gui/IntegrityWizard.java", "src/main/java/net/sf/jabref/wizard/text/gui/TextInputDialog.java", "src/main/java/osx/macadapter/MacAdapter.java", "src/main/java/spl/PdfImporter.java", "src/main/java/spl/listener/SplDatabaseChangeListener.java", "src/test/java/net/sf/jabref/imports/GeneralFetcherTest.java"], "@@ -24,6 +24,8 @@\n import javax.swing.*;\n \n import net.sf.jabref.export.LatexFieldFormatter;\n+import net.sf.jabref.gui.JabRefFrame;\n+import net.sf.jabref.gui.PreviewPanel;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;\n , @@ -61,6 +61,8 @@\n import javax.swing.tree.TreeNode;\n import javax.swing.tree.TreePath;\n \n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.JabRefDesktop;\n import org.apache.commons.logging.Log;, @@ -17,6 +17,8 @@\n \n import net.sf.jabref.collab.FileUpdateMonitor;\n import net.sf.jabref.export.AutoSaveManager;\n+import net.sf.jabref.gui.JabRefFrame;\n+import net.sf.jabref.gui.SidePaneManager;\n import net.sf.jabref.gui.help.HelpDialog;\n import net.sf.jabref.imports.ImportFormatReader;\n import net.sf.jabref.logic.error.StreamEavesdropper;, @@ -15,6 +15,7 @@\n */\n package net.sf.jabref;\n \n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.imports.ParserResult;\n import net.sf.jabref.imports.PostOpenAction;\n import net.sf.jabref.logic.l10n.Localization;, @@ -33,7 +33,9 @@\n import javax.swing.*;\n import javax.swing.plaf.FontUIResource;\n \n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.logic.util.OS;\n import org.apache.commons.logging.Log;, @@ -41,6 +41,7 @@\n \n import javax.swing.JOptionPane;\n \n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.entryeditor.EntryEditor;\n import net.sf.jabref.gui.fieldeditors.FieldEditor;\n import net.sf.jabref.gui.net.MonitoredURLDownload;, @@ -15,7 +15,7 @@\n */\n package net.sf.jabref.collab;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n \n import javax.swing.tree.DefaultMutableTreeNode;, @@ -26,7 +26,7 @@\n import java.awt.event.ActionListener;\n import java.awt.event.ActionEvent;\n import java.util.Enumeration;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.logic.l10n.Localization;, @@ -31,6 +31,8 @@\n import net.sf.jabref.export.SaveException;\n import net.sf.jabref.export.SaveSession;\n import net.sf.jabref.groups.GroupTreeNode;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.imports.OpenDatabaseAction;\n import net.sf.jabref.imports.ParserResult;\n import net.sf.jabref.logic.l10n.Localization;, @@ -19,6 +19,8 @@\n import javax.swing.JScrollPane;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.PreviewPanel;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoableInsertEntry;\n , @@ -23,6 +23,7 @@\n import javax.swing.JScrollPane;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoableFieldChange;\n import net.sf.jabref.logic.l10n.Localization;, @@ -19,6 +19,8 @@\n import javax.swing.JScrollPane;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.PreviewPanel;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoableRemoveEntry;\n , @@ -22,8 +22,7 @@\n \n import javax.swing.*;\n \n-import net.sf.jabref.*;\n-import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.*;\n import net.sf.jabref.logic.l10n.Localization;\n \n public class FileUpdatePanel extends SidePaneComponent implements ActionListener,, @@ -18,7 +18,7 @@\n import javax.swing.JComponent;\n import javax.swing.JLabel;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.groups.structure.AllEntriesGroup;\n import net.sf.jabref.groups.GroupTreeNode;, @@ -15,7 +15,7 @@\n */\n package net.sf.jabref.collab;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.MetaData;\n import net.sf.jabref.gui.undo.NamedCompound;, @@ -18,7 +18,7 @@\n import javax.swing.JComponent;\n import javax.swing.JScrollPane;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoablePreambleChange;, @@ -18,6 +18,7 @@\n import javax.swing.JComponent;\n import javax.swing.JScrollPane;\n \n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.logic.l10n.Localization;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;, @@ -18,6 +18,7 @@\n import javax.swing.JComponent;\n import javax.swing.JScrollPane;\n \n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.logic.l10n.Localization;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;, @@ -18,6 +18,7 @@\n import javax.swing.JComponent;\n import javax.swing.JLabel;\n \n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.logic.l10n.Localization;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;, @@ -22,7 +22,7 @@\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexString;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.gui.undo.NamedCompound;, @@ -15,8 +15,8 @@\n */\n package net.sf.jabref.export;\n \n-import net.sf.jabref.JabRefFrame;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.Globals;\n import net.sf.jabref.JabRefPreferences;\n , @@ -26,7 +26,7 @@\n import javax.swing.*;\n \n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;, @@ -22,7 +22,7 @@\n import javax.swing.JFileChooser;\n import javax.swing.JOptionPane;\n \n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.MnemonicAwareAction;\n import net.sf.jabref.Worker;\n import net.sf.jabref.gui.FileDialogs;, @@ -26,6 +26,7 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.help.HelpAction;\n \n import com.jgoodies.forms.builder.ButtonBarBuilder;, @@ -26,6 +26,7 @@\n import javax.swing.filechooser.FileFilter;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.logic.l10n.Localization;, @@ -33,12 +33,12 @@\n import javax.swing.ListSelectionModel;\n \n import net.sf.jabref.gui.worker.AbstractWorker;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n /**, @@ -20,7 +20,9 @@\n import javax.swing.Action;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import spin.Spin;\n , @@ -18,6 +18,8 @@\n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.FormLayout;\n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.FileDialogs;\n import net.sf.jabref.collab.ChangeScanner;, @@ -1,10 +1,7 @@\n package net.sf.jabref.external;\n \n import net.sf.jabref.*;\n-import net.sf.jabref.gui.FileListEntry;\n-import net.sf.jabref.gui.FileListEntryEditor;\n-import net.sf.jabref.gui.FileListTableModel;\n-import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.*;\n import net.sf.jabref.gui.undo.UndoableFieldChange;\n \n /**, @@ -23,6 +23,7 @@\n \n import javax.swing.*;\n \n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.fieldeditors.FieldTextField;\n import net.sf.jabref.logic.l10n.Localization;, @@ -19,6 +19,7 @@\n import net.sf.jabref.gui.FileListEntry;\n import net.sf.jabref.gui.FileListEntryEditor;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.net.MonitoredURLDownload;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.logic.net.URLDownload;, @@ -25,10 +25,7 @@\n \n import com.jgoodies.forms.factories.Borders;\n import net.sf.jabref.*;\n-import net.sf.jabref.gui.GUIGlobals;\n-import net.sf.jabref.gui.MainTable;\n-import net.sf.jabref.gui.FileListTableModel;\n-import net.sf.jabref.gui.FileListEntry;\n+import net.sf.jabref.gui.*;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoableFieldChange;\n import net.sf.jabref.gui.undo.UndoableInsertEntry;, @@ -23,6 +23,7 @@\n import javax.swing.*;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.JabRefDesktop;\n , @@ -36,6 +36,7 @@\n import javax.swing.SwingUtilities;\n import javax.xml.transform.TransformerException;\n \n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.entryeditor.EntryEditor;\n import net.sf.jabref.gui.fieldeditors.FieldEditor;\n import net.sf.jabref.gui.net.MonitoredURLDownload;, @@ -30,7 +30,7 @@\n \n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.MnemonicAwareAction;\n \n import com.jgoodies.forms.builder.ButtonBarBuilder;, @@ -20,6 +20,7 @@\n import javax.swing.*;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.action.BrowseAction;\n import net.sf.jabref.gui.entryeditor.EntryEditorTabList;, @@ -16,6 +16,7 @@\n package net.sf.jabref.external;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.undo.UndoableFieldChange;, @@ -17,6 +17,7 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.entryeditor.EntryEditor;\n import net.sf.jabref.gui.fieldeditors.FileListEditor;\n import net.sf.jabref.gui.FileListEntry;, @@ -15,7 +15,7 @@\n */\n package net.sf.jabref.external;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.MetaData;, @@ -23,6 +23,8 @@\n import javax.swing.SwingUtilities;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n /**, @@ -19,7 +19,7 @@\n \n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.MnemonicAwareAction;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.oo.OpenOfficePanel;, @@ -24,6 +24,7 @@\n \n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.FormLayout;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.action.BrowseAction;\n import net.sf.jabref.logic.l10n.Localization;, @@ -22,6 +22,7 @@\n import net.sf.jabref.*;\n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.FormLayout;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.action.BrowseAction;\n import net.sf.jabref.logic.l10n.Localization;, @@ -23,6 +23,7 @@\n import javax.swing.*;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.logic.l10n.Localization;\n , @@ -8,6 +8,7 @@\n import net.sf.jabref.*;\n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.FormLayout;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.logic.util.OS;, @@ -18,6 +18,7 @@\n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.FormLayout;\n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.action.BrowseAction;\n import net.sf.jabref.logic.l10n.Localization;, @@ -22,6 +22,7 @@\n import net.sf.jabref.*;\n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.FormLayout;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.action.BrowseAction;\n import net.sf.jabref.logic.l10n.Localization;, @@ -18,7 +18,7 @@\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.util.FileUtil;\n import net.sf.jabref.gui.GUIGlobals;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.FileListTableModel;\n \n import java.awt.datatransfer.Transferable;, @@ -28,6 +28,7 @@\n import javax.swing.*;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.FileListTableModel;\n import net.sf.jabref.gui.FileListEntry;, @@ -16,6 +16,7 @@\n package net.sf.jabref.external;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.entryeditor.EntryEditor;, @@ -22,7 +22,7 @@\n import javax.swing.AbstractAction;\n import javax.swing.undo.AbstractUndoableEdit;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.groups.structure.AbstractGroup;\n import net.sf.jabref.logic.l10n.Localization;, @@ -28,8 +28,8 @@\n import javax.swing.event.CaretEvent;\n import javax.swing.event.CaretListener;\n \n-import net.sf.jabref.BasePanel;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.groups.structure.ExplicitGroup;\n import net.sf.jabref.groups.structure.GroupHierarchyType;\n import net.sf.jabref.groups.structure.KeywordGroup;, @@ -36,10 +36,10 @@\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.Globals;\n import net.sf.jabref.JabRefExecutorService;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.external.DroppedFileHandler;\n import net.sf.jabref.external.ExternalFileType;, @@ -21,6 +21,9 @@\n import com.jgoodies.forms.layout.FormLayout;\n import net.sf.jabref.*;\n import net.sf.jabref.groups.structure.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.FieldContentSelector;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.fieldeditors.FieldTextField;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.logic.search.SearchRules;, @@ -60,20 +60,20 @@\n import javax.swing.undo.CompoundEdit;\n \n import net.sf.jabref.gui.worker.AbstractWorker;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.MetaData;\n import net.sf.jabref.groups.structure.AbstractGroup;\n import net.sf.jabref.groups.structure.AllEntriesGroup;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.logic.search.rules.InvertSearchRule;\n import net.sf.jabref.logic.search.SearchRule;\n-import net.sf.jabref.SidePaneComponent;\n-import net.sf.jabref.SidePaneManager;\n+import net.sf.jabref.gui.SidePaneComponent;\n+import net.sf.jabref.gui.SidePaneManager;\n import net.sf.jabref.gui.help.HelpAction;\n import net.sf.jabref.logic.search.rules.sets.SearchRuleSets;\n import net.sf.jabref.logic.search.rules.sets.SearchRuleSet;, @@ -20,7 +20,7 @@\n import javax.swing.AbstractAction;\n import javax.swing.undo.AbstractUndoableEdit;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.groups.structure.AbstractGroup;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;, @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.BorderLayout;\n import java.awt.Component;\n@@ -56,8 +56,8 @@\n import javax.swing.undo.CannotRedoException;\n import javax.swing.undo.CannotUndoException;\n \n+import net.sf.jabref.*;\n import net.sf.jabref.DatabaseChangeEvent.ChangeType;\n-import net.sf.jabref.gui.*;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.worker.MarkEntriesAction;\n import net.sf.jabref.gui.worker.SendAsEMailAction;, @@ -29,8 +29,6 @@\n import javax.swing.JPanel;\n import javax.swing.WindowConstants;\n \n-import net.sf.jabref.BasePanel;\n-import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.MetaData;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;, @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.GridBagConstraints;\n import java.awt.GridBagLayout;\n@@ -43,7 +43,9 @@\n import javax.swing.event.ListSelectionEvent;\n import javax.swing.event.ListSelectionListener;\n \n-import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.FocusRequester;\n+import net.sf.jabref.Globals;\n+import net.sf.jabref.MetaData;\n import net.sf.jabref.logic.l10n.Localization;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;, @@ -39,7 +39,6 @@\n import javax.swing.JRadioButton;\n import javax.swing.JTextField;\n \n-import net.sf.jabref.BasePanel;\n import net.sf.jabref.BibtexFields;\n import net.sf.jabref.gui.action.BrowseAction;\n import net.sf.jabref.Globals;, @@ -19,13 +19,16 @@\n //            - new SearcherRunnable.setFinish() method\n //            - replace thread.sleep in run() by wait() and notify() mechanism\n \n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.util.ArrayList;\n import java.util.Vector;\n \n import javax.swing.SwingUtilities;\n \n+import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoableRemoveEntry;\n import net.sf.jabref.logic.l10n.Localization;, @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.BorderLayout;\n import java.awt.GridBagConstraints;\n@@ -27,6 +27,7 @@\n import javax.swing.*;\n \n import com.jgoodies.forms.builder.ButtonBarBuilder;\n+import net.sf.jabref.BibtexEntryType;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.logic.util.StringUtil;\n , @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.Dimension;\n import java.awt.GridBagConstraints;\n@@ -32,7 +32,8 @@\n \n import com.jgoodies.forms.layout.Sizes;\n import com.jgoodies.looks.Options;\n-import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.Globals;\n+import net.sf.jabref.MetaData;\n import net.sf.jabref.gui.fieldeditors.FieldEditor;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;, @@ -24,7 +24,6 @@\n import javax.swing.*;\n \n import net.sf.jabref.BibtexFields;\n-import net.sf.jabref.JabRefFrame;\n \n import com.jgoodies.forms.builder.ButtonBarBuilder;\n import com.jgoodies.forms.builder.DefaultFormBuilder;, @@ -13,8 +13,11 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n+import net.sf.jabref.JabRefExecutorService;\n+import net.sf.jabref.JabRefPreferences;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n import java.awt.event.ActionEvent;, @@ -33,7 +33,6 @@\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.FileUtil;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.MetaData;\n import net.sf.jabref.util.JabRefDesktop;, @@ -2,7 +2,6 @@\n \n import com.jgoodies.forms.builder.ButtonBarBuilder;\n import net.sf.jabref.BaseAction;\n-import net.sf.jabref.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.Globals;\n import net.sf.jabref.groups.*;, @@ -47,7 +47,6 @@\n import javax.swing.undo.AbstractUndoableEdit;\n \n import net.sf.jabref.logic.AuthorList;\n-import net.sf.jabref.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.BibtexFields;\n@@ -60,12 +59,10 @@\n import net.sf.jabref.Globals;\n import net.sf.jabref.IdGenerator;\n import net.sf.jabref.JabRefExecutorService;\n-import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.KeyCollisionException;\n import net.sf.jabref.MetaData;\n import net.sf.jabref.OutputPrinter;\n-import net.sf.jabref.PreviewPanel;\n import net.sf.jabref.external.DownloadExternalFile;\n import net.sf.jabref.external.ExternalFileMenuItem;\n import net.sf.jabref.groups.structure.AbstractGroup;, @@ -13,7 +13,10 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n+\n+import net.sf.jabref.BibtexEntry;\n+import net.sf.jabref.JabRefPreferences;\n \n import java.util.Set;\n , @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.Component;\n import java.awt.Cursor;\n@@ -75,7 +75,7 @@\n import javax.swing.event.ChangeEvent;\n import javax.swing.event.ChangeListener;\n \n-import net.sf.jabref.gui.*;\n+import net.sf.jabref.*;\n import net.sf.jabref.gui.action.AutoLinkFilesAction;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.worker.MarkEntriesAction;\n@@ -139,7 +139,7 @@\n     // The sidepane manager takes care of populating the sidepane. \n     public SidePaneManager sidePaneManager;\n \n-    JTabbedPane tabbedPane; // initialized at constructor\n+    public JTabbedPane tabbedPane; // initialized at constructor\n \n     private final Insets marg = new Insets(1, 0, 2, 0);\n     private final JabRef jabRef;\n@@ -285,7 +285,7 @@ void addAction(Action a) {\n             //    \t\t\t                                            Globals.lang(\"Set priority\")),\n             manageSelectors = new GeneralAction(\"manageSelectors\", \"Manage content selectors\");\n     private final AbstractAction saveSessionAction = new SaveSessionAction();\n-    final AbstractAction loadSessionAction = new LoadSessionAction();\n+    public final AbstractAction loadSessionAction = new LoadSessionAction();\n     private final AbstractAction incrementalSearch = new GeneralAction(\"incSearch\", \"Incremental search\",\n                     Localization.lang(\"Start incremental search\"),\n                     prefs.getKey(\"Incremental search\"));\n@@ -2458,7 +2458,7 @@ public void actionPerformed(ActionEvent e) {\n         }\n     }\n \n-    class LoadSessionAction extends MnemonicAwareAction {\n+    public class LoadSessionAction extends MnemonicAwareAction {\n \n         volatile boolean running;\n , @@ -13,9 +13,8 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n-import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;\n , @@ -19,7 +19,6 @@\n import java.util.Vector;\n \n import net.sf.jabref.logic.AuthorList;\n-import net.sf.jabref.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.BibtexFields;\n import net.sf.jabref.Globals;, @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import net.sf.jabref.logic.l10n.Localization;\n , @@ -28,14 +28,11 @@\n import javax.swing.event.ChangeListener;\n \n import net.sf.jabref.export.LatexFieldFormatter;\n-import net.sf.jabref.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.BibtexEntryType;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.MetaData;\n-import net.sf.jabref.PreviewPanel;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;\n import net.sf.jabref.logic.util.StringUtil;, @@ -13,7 +13,7 @@\n     You should have received a copy of the GNU General Public License\n     along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.Graphics2D;\n import java.awt.image.BufferedImage;\n@@ -28,6 +28,8 @@\n import javax.swing.JLabel;\n import javax.swing.JPanel;\n \n+import net.sf.jabref.BibtexEntry;\n+import net.sf.jabref.MetaData;\n import net.sf.jabref.gui.FileListEntry;\n import net.sf.jabref.gui.FileListTableModel;\n , @@ -13,14 +13,15 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.event.*;\n import java.awt.*;\n \n import javax.swing.*;\n \n-import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.BibtexDatabase;\n+import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.gui.fieldeditors.FieldEditor;\n import net.sf.jabref.gui.fieldeditors.FieldTextArea;\n import net.sf.jabref.gui.undo.UndoablePreambleChange;, @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.*;\n import java.awt.event.ActionEvent;\n@@ -32,10 +32,10 @@\n import javax.swing.event.HyperlinkEvent;\n import javax.swing.event.HyperlinkListener;\n \n+import net.sf.jabref.*;\n import net.sf.jabref.export.layout.Layout;\n import net.sf.jabref.export.layout.LayoutHelper;\n import net.sf.jabref.export.ExportFormats;\n-import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.fieldeditors.PreviewPanelTransferHandler;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.JabRefDesktop;, @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.BorderLayout;\n import java.awt.GridBagConstraints;\n@@ -24,6 +24,8 @@\n \n import javax.swing.*;\n \n+import net.sf.jabref.BibtexEntry;\n+import net.sf.jabref.BibtexFields;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoableFieldChange;\n import net.sf.jabref.logic.l10n.Localization;, @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.Font;\n import java.awt.event.ActionEvent;\n@@ -23,10 +23,10 @@\n import javax.swing.event.PopupMenuEvent;\n import javax.swing.event.PopupMenuListener;\n \n+import net.sf.jabref.*;\n import net.sf.jabref.groups.*;\n import net.sf.jabref.groups.structure.AbstractGroup;\n import net.sf.jabref.groups.structure.AllEntriesGroup;\n-import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.worker.MarkEntriesAction;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.specialfields.Printed;, @@ -13,12 +13,13 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n+import net.sf.jabref.BibtexEntry;\n+import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefPreferences;\n+import net.sf.jabref.SearchTextListener;\n import net.sf.jabref.gui.worker.AbstractWorker;\n-import net.sf.jabref.gui.AutoCompleteListener;\n-import net.sf.jabref.gui.GUIGlobals;\n-import net.sf.jabref.gui.SearchResultsDialog;\n import net.sf.jabref.gui.help.HelpAction;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.logic.search.SearchRule;, @@ -42,17 +42,14 @@\n import javax.swing.SwingUtilities;\n import javax.swing.table.TableColumnModel;\n \n-import net.sf.jabref.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.BibtexFields;\n import net.sf.jabref.EntryComparator;\n import net.sf.jabref.FieldComparator;\n import net.sf.jabref.GeneralRenderer;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.MetaData;\n-import net.sf.jabref.PreviewPanel;\n import net.sf.jabref.TransferableBibtexEntry;\n import net.sf.jabref.external.ExternalFileMenuItem;\n import net.sf.jabref.logic.l10n.Localization;, @@ -13,9 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n-\n-import net.sf.jabref.gui.GUIGlobals;\n+package net.sf.jabref.gui;\n \n import java.awt.*;\n import java.util.Collection;, @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.Dimension;\n import java.awt.Insets;\n@@ -27,7 +27,6 @@\n import javax.swing.JLabel;\n import javax.swing.JToolBar;\n \n-import net.sf.jabref.gui.GUIGlobals;\n import org.jdesktop.swingx.JXTitledPanel;\n \n public abstract class SidePaneComponent extends JXTitledPanel {, @@ -13,7 +13,10 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n+\n+import net.sf.jabref.Globals;\n+import net.sf.jabref.JabRefPreferences;\n \n import java.util.*;\n , @@ -22,8 +22,6 @@\n import javax.swing.Action;\n import javax.swing.JTabbedPane;\n \n-import net.sf.jabref.BasePanel;\n-import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.MnemonicAwareAction;\n import net.sf.jabref.logic.l10n.Localization;\n , @@ -13,7 +13,7 @@\n     with this program; if not, write to the Free Software Foundation, Inc.,\n     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n-package net.sf.jabref;\n+package net.sf.jabref.gui;\n \n import java.awt.BorderLayout;\n import java.awt.Component;\n@@ -46,8 +46,8 @@\n import javax.swing.table.TableColumnModel;\n import javax.swing.undo.CompoundEdit;\n \n+import net.sf.jabref.*;\n import net.sf.jabref.export.LatexFieldFormatter;\n-import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.help.HelpAction;\n import net.sf.jabref.gui.undo.UndoableInsertString;\n import net.sf.jabref.gui.undo.UndoableRemoveString;, @@ -15,7 +15,6 @@\n */\n package net.sf.jabref.gui;\n \n-import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n import javax.swing.*;, @@ -16,7 +16,6 @@\n package net.sf.jabref.gui;\n \n import com.jgoodies.forms.builder.ButtonBarBuilder;\n-import net.sf.jabref.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n import javax.swing.*;, @@ -29,7 +29,9 @@\n import javax.swing.*;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.fieldeditors.FieldEditor;\n import net.sf.jabref.gui.fieldeditors.FieldTextArea;\n import net.sf.jabref.gui.fieldeditors.FieldTextField;, @@ -35,7 +35,7 @@\n \n import net.sf.jabref.EntryContainer;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.external.DroppedFileHandler;\n import net.sf.jabref.external.ExternalFileType;\n import net.sf.jabref.groups.EntryTableTransferHandler;, @@ -28,7 +28,7 @@\n import javax.swing.text.BadLocationException;\n \n import net.sf.jabref.EntryContainer;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;, @@ -24,7 +24,7 @@\n \n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.JabRef;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;\n , @@ -17,7 +17,7 @@\n \n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.logic.l10n.Localization;, @@ -15,7 +15,7 @@\n */\n package net.sf.jabref.gui.journals;\n \n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.MnemonicAwareAction;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;, @@ -30,7 +30,7 @@\n \n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.gui.FileDialogs;\n import net.sf.jabref.gui.help.HelpAction;, @@ -16,7 +16,7 @@\n package net.sf.jabref.gui.journals;\n \n import net.sf.jabref.gui.worker.AbstractWorker;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.Globals;\n import net.sf.jabref.gui.undo.NamedCompound;, @@ -19,6 +19,8 @@\n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.FormLayout;\n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.PreviewPanel;\n import net.sf.jabref.logic.l10n.Localization;\n \n import javax.swing.*;, @@ -16,6 +16,7 @@\n package net.sf.jabref.gui.labelPattern;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoableKeyChange;, @@ -22,8 +22,8 @@\n import javax.swing.event.ChangeEvent;\n import javax.swing.event.ChangeListener;\n \n-import net.sf.jabref.BasePanel;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.logic.autocompleter.AutoCompleterFactory;\n import net.sf.jabref.logic.l10n.Localization;, @@ -28,6 +28,7 @@\n import net.sf.jabref.*;\n import net.sf.jabref.external.*;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.action.BrowseAction;\n import net.sf.jabref.gui.help.HelpAction;\n import net.sf.jabref.gui.help.HelpDialog;, @@ -37,7 +37,7 @@\n \n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.gui.help.HelpAction;\n , @@ -33,7 +33,7 @@\n \n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.gui.help.HelpAction;\n , @@ -39,6 +39,7 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.export.ExportFormats;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.FileDialogs;\n import net.sf.jabref.gui.GUIGlobals;, @@ -27,6 +27,7 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.PreviewPanel;\n import net.sf.jabref.gui.help.HelpAction;\n import net.sf.jabref.logic.l10n.Localization;\n , @@ -33,7 +33,9 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.external.ExternalFileType;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.help.HelpAction;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.specialfields.SpecialFieldsUtils;, @@ -19,7 +19,7 @@\n import javax.swing.undo.UndoManager;\n import javax.swing.undo.UndoableEdit;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n \n public class CountingUndoManager extends UndoManager {\n , @@ -18,6 +18,7 @@\n import javax.swing.undo.AbstractUndoableEdit;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n \n /**\n  * This class represents the removal of an entry. The constructor needs, @@ -18,6 +18,7 @@\n import javax.swing.undo.AbstractUndoableEdit;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.logic.l10n.Localization;\n \n public class UndoableInsertString extends AbstractUndoableEdit {, @@ -17,7 +17,7 @@\n \n import javax.swing.undo.AbstractUndoableEdit;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.logic.l10n.Localization;\n , @@ -18,6 +18,7 @@\n import javax.swing.undo.AbstractUndoableEdit;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n \n /**\n  * This class represents the removal of an entry. The constructor needs, @@ -18,6 +18,7 @@\n import javax.swing.undo.AbstractUndoableEdit;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.logic.l10n.Localization;\n \n public class UndoableRemoveString extends AbstractUndoableEdit {, @@ -17,7 +17,7 @@\n \n import javax.swing.undo.AbstractUndoableEdit;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexString;\n import net.sf.jabref.logic.l10n.Localization;\n , @@ -16,6 +16,8 @@\n package net.sf.jabref.gui.worker;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.logic.l10n.Localization;\n , @@ -26,7 +26,9 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.export.LatexFieldFormatter;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.JabRefDesktop;\n import net.sf.jabref.util.Util;, @@ -24,10 +24,13 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.groups.structure.GroupHierarchyType;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.FileDialogs;\n import net.sf.jabref.groups.structure.AllEntriesGroup;\n import net.sf.jabref.groups.structure.ExplicitGroup;\n import net.sf.jabref.groups.GroupTreeNode;\n+import net.sf.jabref.gui.JabRefFrame;\n+import net.sf.jabref.gui.MergeDialog;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.gui.undo.UndoableInsertEntry;\n import net.sf.jabref.gui.undo.UndoableInsertString;, @@ -23,10 +23,10 @@\n \n import javax.swing.JOptionPane;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.Globals;\n import net.sf.jabref.JabRef;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.export.AutoSaveManager;\n import net.sf.jabref.logic.l10n.Localization;, @@ -20,7 +20,7 @@\n \n import javax.swing.JOptionPane;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexEntryType;\n import net.sf.jabref.CustomEntryType;\n import net.sf.jabref.logic.l10n.Localization;, @@ -12,6 +12,7 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.external.ExternalFileType;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.undo.UndoableInsertEntry;\n \n /**, @@ -37,9 +37,7 @@\n import javax.swing.SwingUtilities;\n \n import net.sf.jabref.*;\n-import net.sf.jabref.gui.FetcherPreviewDialog;\n-import net.sf.jabref.gui.GUIGlobals;\n-import net.sf.jabref.gui.ImportInspectionDialog;\n+import net.sf.jabref.gui.*;\n import net.sf.jabref.gui.help.HelpAction;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;, @@ -40,6 +40,7 @@\n import javax.swing.table.TableColumnModel;\n \n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;, @@ -27,7 +27,7 @@\n import javax.swing.filechooser.FileFilter;\n \n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.MnemonicAwareAction;\n import net.sf.jabref.logic.l10n.Localization;, @@ -28,6 +28,8 @@\n import javax.swing.JOptionPane;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.worker.AbstractWorker;\n import net.sf.jabref.gui.ImportInspectionDialog;\n import net.sf.jabref.gui.FileDialogs;, @@ -31,10 +31,12 @@\n import net.sf.jabref.*;\n import net.sf.jabref.export.AutoSaveManager;\n import net.sf.jabref.export.SaveSession;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.FileDialogs;\n import net.sf.jabref.external.FileLinksUpgradeWarning;\n import net.sf.jabref.HandleDuplicateWarnings;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.specialfields.SpecialFieldsUtils;\n import net.sf.jabref.logic.util.FileBasedLock;, @@ -15,7 +15,7 @@\n */\n package net.sf.jabref.imports;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n \n /**\n  * This interface defines potential actions that may need to be taken after, @@ -19,7 +19,7 @@\n import com.jgoodies.forms.builder.DefaultFormBuilder;\n import com.jgoodies.forms.layout.FormLayout;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n import javax.swing.*;, @@ -24,7 +24,7 @@\n import com.jgoodies.forms.layout.FormLayout;\n import com.sun.star.container.XNameAccess;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n import javax.swing.*;, @@ -22,8 +22,8 @@\n import net.sf.jabref.export.layout.Layout;\n import net.sf.jabref.export.layout.LayoutHelper;\n import net.sf.jabref.external.PushToApplication;\n+import net.sf.jabref.gui.*;\n import net.sf.jabref.gui.worker.AbstractWorker;\n-import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.gui.action.BrowseAction;\n import net.sf.jabref.gui.help.HelpAction;\n import net.sf.jabref.logic.l10n.Localization;, @@ -61,9 +61,9 @@\n import net.sf.jabref.Globals;\n import net.sf.jabref.IdGenerator;\n import net.sf.jabref.JabRef;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.MetaData;\n-import net.sf.jabref.PreviewPanel;\n+import net.sf.jabref.gui.PreviewPanel;\n import net.sf.jabref.external.ExternalFileType;\n import net.sf.jabref.external.UnknownExternalFileType;\n import net.sf.jabref.logic.l10n.Localization;, @@ -17,7 +17,7 @@\n \n import net.sf.jabref.BaseAction;\n import net.sf.jabref.BibtexEntry;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.undo.NamedCompound;\n import net.sf.jabref.logic.l10n.Localization;\n , @@ -27,8 +27,8 @@\n import com.jgoodies.looks.HeaderStyle;\n import com.jgoodies.looks.Options;\n \n-import net.sf.jabref.BasePanel;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.util.OS;\n \n public class SpecialFieldDropDown {, @@ -19,7 +19,7 @@\n \n import javax.swing.AbstractAction;\n \n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n \n public class SpecialFieldMenuAction extends AbstractAction {\n , @@ -18,7 +18,7 @@\n import javax.swing.ImageIcon;\n import javax.swing.JLabel;\n \n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n \n public class SpecialFieldValue {\n , @@ -17,7 +17,7 @@\n  */\n \n import com.jgoodies.forms.builder.ButtonBarBuilder;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n import javax.swing.AbstractAction;, @@ -16,7 +16,7 @@\n package net.sf.jabref.sql;\n \n import net.sf.jabref.BaseAction;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;\n import net.sf.jabref.sql.exporter.DBExporter;, @@ -36,7 +36,7 @@\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.BibtexEntryType;\n import net.sf.jabref.BibtexString;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.MetaData;\n import net.sf.jabref.groups.structure.*;\n import net.sf.jabref.logic.l10n.Localization;, @@ -26,11 +26,11 @@\n import javax.swing.JOptionPane;\n \n import net.sf.jabref.gui.worker.AbstractWorker;\n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefPreferences;\n import net.sf.jabref.MetaData;\n import net.sf.jabref.MnemonicAwareAction;, @@ -4,10 +4,7 @@\n import net.sf.jabref.external.ExternalFileType;\n import net.sf.jabref.external.ExternalFileTypeEntryEditor;\n import net.sf.jabref.external.UnknownExternalFileType;\n-import net.sf.jabref.gui.FileListEntry;\n-import net.sf.jabref.gui.FileListEntryEditor;\n-import net.sf.jabref.gui.FileListTableModel;\n-import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.*;\n import net.sf.jabref.gui.undo.UndoableFieldChange;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.logic.net.URLDownload;, @@ -40,11 +40,11 @@\n import javax.swing.JScrollPane;\n import javax.swing.JTextField;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.Globals;\n import net.sf.jabref.JabRef;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.MnemonicAwareAction;\n import net.sf.jabref.logic.autocompleter.AutoCompleter;\n import net.sf.jabref.gui.AutoCompleteListener;, @@ -26,6 +26,8 @@\n import javax.swing.event.ChangeListener;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.undo.NamedCompound;\n \n import com.jgoodies.forms.builder.ButtonBarBuilder;, @@ -56,11 +56,11 @@\n import javax.swing.JTextArea;\n import javax.swing.JTextField;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.JabRef;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.FileDialogs;\n import net.sf.jabref.gui.MainTable;\n import net.sf.jabref.logic.l10n.Localization;, @@ -54,7 +54,7 @@\n import javax.swing.event.ListSelectionEvent;\n import javax.swing.event.ListSelectionListener;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexDatabase;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.gui.GUIGlobals;, @@ -44,7 +44,9 @@\n import javax.swing.border.EtchedBorder;\n \n import net.sf.jabref.*;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.gui.GUIGlobals;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n \n public class IntegrityWizard extends JDialog implements ActionListener {, @@ -110,14 +110,14 @@\n import javax.swing.text.StyleContext;\n import javax.swing.text.StyledDocument;\n \n-import net.sf.jabref.BasePanel;\n+import net.sf.jabref.gui.BasePanel;\n import net.sf.jabref.BibtexEntry;\n import net.sf.jabref.BibtexFields;\n import net.sf.jabref.ClipBoardManager;\n import net.sf.jabref.gui.GUIGlobals;\n import net.sf.jabref.Globals;\n import net.sf.jabref.JabRef;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.logic.l10n.Localization;\n import net.sf.jabref.util.Util;\n import net.sf.jabref.gui.FileDialogs;, @@ -19,7 +19,7 @@\n import com.apple.eawt.AppEvent.OpenFilesEvent;\n import com.apple.eawt.AppEvent.PreferencesEvent;\n import com.apple.eawt.AppEvent.QuitEvent;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n \n import java.io.File;\n import java.util.List;, @@ -10,10 +10,7 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.external.DroppedFileHandler;\n-import net.sf.jabref.gui.FileListEntry;\n-import net.sf.jabref.gui.FileListTableModel;\n-import net.sf.jabref.gui.GUIGlobals;\n-import net.sf.jabref.gui.MainTable;\n+import net.sf.jabref.gui.*;\n import net.sf.jabref.gui.entryeditor.EntryEditor;\n import net.sf.jabref.gui.preftabs.ImportSettingsTab;\n import net.sf.jabref.imports.PdfContentImporter;, @@ -2,6 +2,8 @@\n \n import net.sf.jabref.*;\n import net.sf.jabref.external.DroppedFileHandler;\n+import net.sf.jabref.gui.BasePanel;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.gui.MainTable;\n \n /**, @@ -1,9 +1,9 @@\n package net.sf.jabref.imports;\n \n import net.sf.jabref.JabRef;\n-import net.sf.jabref.JabRefFrame;\n+import net.sf.jabref.gui.JabRefFrame;\n import net.sf.jabref.JabRefMain;\n-import net.sf.jabref.SidePaneManager;\n+import net.sf.jabref.gui.SidePaneManager;\n import net.sf.jabref.testutils.GuiTestUtils;\n \n import org.junit.After;, ", 211, 149, "\"modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, renamed, modified, renamed, modified, renamed, renamed, renamed, modified, renamed, modified, modified, modified, renamed, renamed, renamed, modified, renamed, modified, renamed, renamed, renamed, renamed, renamed, renamed, modified, renamed, renamed, renamed, modified, renamed, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, modified, \"", 360], ["Joerg Lenhard", "Refactor BibtexString", "08/18/15, 01:10:24 PM", "Joerg Lenhard", "ba02d2ba4285e6847b60e801146d549ebb7a8453", ["src/main/java/net/sf/jabref/model/BibtexString.java"], "@@ -22,17 +22,17 @@\n \n     /**\n      * Type of a \\@String.\n-     *\n+     * <p>\n      * Differentiate a \\@String based on its usage:\n-     *\n+     * <p>\n      * - {@link #AUTHOR}: prefix \"a\", for author and editor fields.\n      * - {@link #INSTITUTION}: prefix \"i\", for institution and organization\n-     *                         field\n+     * field\n      * - {@link #PUBLISHER}: prefix \"p\", for publisher fields\n      * - {@link #OTHER}: no prefix, for any field\n-     *\n+     * <p>\n      * Examples:\n-     *\n+     * <p>\n      * \\@String { aKahle    = \"Kahle, Brewster \" } -> author\n      * \\@String { aStallman = \"Stallman, Richard\" } -> author\n      * \\@String { iMIT      = \"{Massachusetts Institute of Technology ({MIT})}\" } -> institution\n@@ -41,15 +41,15 @@\n      * \\@String { eg        = \"for example\" } -> other\n      * \\@String { et        = \" and \" } -> other\n      * \\@String { lBigMac   = \"Big Mac\" } -> other\n-     *\n+     * <p>\n      * Usage:\n-     *\n+     * <p>\n      * \\@Misc {\n-     *   title       = \"The GNU Project\"\n-     *   author      = aStallman # et # aKahle\n-     *   institution = iMIT\n-     *   publisher   = pMIT\n-     *   note        = \"Just \" # eg\n+     * title       = \"The GNU Project\"\n+     * author      = aStallman # et # aKahle\n+     * institution = iMIT\n+     * publisher   = pMIT\n+     * note        = \"Just \" # eg\n      * }\n      *\n      * @author Jan Kubovy <jan@kubovy.eu>\n@@ -85,57 +85,57 @@ public static Type get(String name) {\n     }\n \n \n-    private String _name;\n-    private String _content;\n-    private String _id;\n-    private Type _type;\n+    private String name;\n+    private String content;\n+    private String id;\n+    private Type type;\n \n \n     public BibtexString(String id, String name, String content) {\n-        _id = id;\n-        _name = name;\n-        _content = content;\n-        _type = Type.get(name);\n+        this.id = id;\n+        this.name = name;\n+        this.content = content;\n+        type = Type.get(name);\n     }\n \n     public BibtexString(String id, String name, String content, Type type) {\n-        _id = id;\n-        _name = name;\n-        _content = content;\n-        _type = type;\n+        this.id = id;\n+        this.name = name;\n+        this.content = content;\n+        this.type = type;\n     }\n \n     public String getId() {\n-        return _id;\n+        return id;\n     }\n \n     public void setId(String id) {\n-        _id = id;\n+        this.id = id;\n     }\n \n     public String getName() {\n-        return _name;\n+        return name;\n     }\n \n     public void setName(String name) {\n-        _name = name;\n-        _type = Type.get(name);\n+        this.name = name;\n+        type = Type.get(name);\n     }\n \n     public String getContent() {\n-        return _content == null ? \"\" : _content;\n+        return content == null ? \"\" : content;\n     }\n \n     public void setContent(String content) {\n-        _content = content;\n+        this.content = content;\n     }\n \n     @Override\n     public Object clone() {\n-        return new BibtexString(_id, _name, _content);\n+        return new BibtexString(id, name, content);\n     }\n \n     public Type getType() {\n-        return _type;\n+        return type;\n     }\n }, ", 33, 33, "\"modified, \"", 66], ["MLEP", "Add of Persian localization (by Behrouz Javanmardi)", "08/25/15, 08:03:37 PM", "MLEP", "41f526e880a8bf31215a2e56cdc5794f4de685ed", ["src/main/resources/help/About.html"], "@@ -73,6 +73,7 @@ <h2>Contributions from:</h2>\n         Yara Grassi Gouffon,\n         Leonardo Haddad Carlos\n         Sascha Hunold,\n+        Behrouz Javanmardi,\n         Philip Johnson,\n         Bernd Kalbfuss,\n         Martin K&auml;hmer,, ", 1, 0, "\"modified, \"", 1], ["matthiasgeiger", "add test google.co.uk, move file to test folder", "08/27/15, 08:55:08 AM", "matthiasgeiger", "86caeba3440addfce26ee222bcd06effead129ed", ["src/test/java/net/sf/jabref/logic/util/io/URLUtilTest.java"], "@@ -49,6 +49,11 @@ public void cleanGoogleSearchURL() throws Exception {\n                 \"https://moz.com/ugc/the-ultimate-guide-to-the-google-search-parameters\",\n                 URLUtil.cleanGoogleSearchURL(\"https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CCEQFjAAahUKEwjJurHd2sfHAhWBsxQKHSrEAaM&url=https%3A%2F%2Fmoz.com%2Fugc%2Fthe-ultimate-guide-to-the-google-search-parameters&ei=0THeVYmOJIHnUqqIh5gK&usg=AFQjCNHnid_r_d2LP8_MqvI7lQnTC3lB_g&sig2=ICzxDroG2ENTJSUGmdhI2w\")\n         );\n+        // foreign domain co.uk\n+        Assert.assertEquals(\n+                \"https://moz.com/ugc/the-ultimate-guide-to-the-google-search-parameters\",\n+                URLUtil.cleanGoogleSearchURL(\"https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CCEQFjAAahUKEwjJurHd2sfHAhWBsxQKHSrEAaM&url=https%3A%2F%2Fmoz.com%2Fugc%2Fthe-ultimate-guide-to-the-google-search-parameters&ei=0THeVYmOJIHnUqqIh5gK&usg=AFQjCNHnid_r_d2LP8_MqvI7lQnTC3lB_g&sig2=ICzxDroG2ENTJSUGmdhI2w\")\n+        );\n         // accept ftp results\n         Assert.assertEquals(\n                 \"ftp://moz.com/ugc/the-ultimate-guide-to-the-google-search-parameters\",, ", 5, 0, "\"renamed, \"", 5], ["matthiasgeiger", "Simplify paste method\nintended behavior is already implemented in replaceSelection() (see API)", "08/27/15, 12:34:26 PM", "matthiasgeiger", "1675737899a29991cc94e51332e3074bde5946e3", ["src/main/java/net/sf/jabref/gui/fieldeditors/TextArea.java", "src/main/java/net/sf/jabref/gui/fieldeditors/TextField.java"], "@@ -129,13 +129,7 @@ public void updateFont() {\n \n     @Override\n     public void paste(String textToInsert) {\n-        int sel = getSelectionEnd() - getSelectionStart();\n-        if (sel > 0) {\n-            replaceSelection(textToInsert);\n-        } else {\n-            int cPos = this.getCaretPosition();\n-            this.insert(textToInsert, cPos);\n-        }\n+        replaceSelection(textToInsert); \n     }\n \n     @Override, @@ -138,11 +138,6 @@ public void updateFont() {\n     @Override\n     // Only replaces selected text if found\n     public void paste(String textToInsert) {\n-        int sel = getSelectionEnd() - getSelectionStart();\n-        if (sel < 1) {\n-            int cPos = getCaretPosition();\n-            select(cPos, cPos);\n-        }\n         replaceSelection(textToInsert);\n     }\n , ", 1, 12, "\"modified, modified, \"", 13]]